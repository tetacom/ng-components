"use strict";(self.webpackChunkteta_components=self.webpackChunkteta_components||[]).push([[6861],{"./projects/components/src/directive/only-number/OnlyNumber.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__,onlyNumber:()=>onlyNumber});var _storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@storybook/addon-knobs/dist/index.js"),_only_number_module__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./projects/components/src/directive/only-number/only-number.module.ts"),_angular_forms__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/@storybook/addon-actions/dist/index.mjs");const __WEBPACK_DEFAULT_EXPORT__={title:"Directive/OnlyNumber",decorators:[_storybook_addon_knobs__WEBPACK_IMPORTED_MODULE_0__.withKnobs]},onlyNumber=()=>({moduleMetadata:{imports:[_only_number_module__WEBPACK_IMPORTED_MODULE_1__.a,_angular_forms__WEBPACK_IMPORTED_MODULE_3__.u5]},props:{data:123,log:(name,value)=>{(0,_storybook_addon_actions__WEBPACK_IMPORTED_MODULE_2__.aD)(name)(value),console.log(name,value)}},template:'<div class="bg-panel-50 padding-10 margin-10">\n                On blur\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"\n                        [ngModelOptions]="{updateOn: \'blur\'}"/>\n                <div>{{data}}</div>\n              </div>\n              <div class="bg-panel-50 padding-10 margin-10">\n                Standart\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"/>\n                <div>{{data}}</div>\n              </div>\n              <input class="input"/>'})},"./projects/components/src/directive/only-number/only-number.module.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{a:()=>OnlyNumberModule});var _class,tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");let OnlyNumberDirective=((_class=class OnlyNumberDirective{constructor(_elementRef,_control){this._elementRef=_elementRef,this._control=_control,this.tetaOnlyNumber=!0,this.allowDecimals=!0,this.allowSign=!0,this.decimalSeparator=".",this.commaSeparator=",",this._previousValue="",this._integerUnsigned="^[0-9]*$",this._integerSigned="^-?[0-9]+$",this._decimalUnsigned="^[0-9]+(.[0-9]+)?$",this._decimalSigned="^-?[0-9]+(.[0-9]+)?$",this._minusSign="-"}onChange(e){!1!==this.tetaOnlyNumber&&this.validateValue(this._elementRef.nativeElement.value)}dblclick(e){!1!==this.tetaOnlyNumber&&this._elementRef.nativeElement.select()}onPaste(e){!1!==this.tetaOnlyNumber&&(this.validateValue(e.clipboardData.getData("text/plain")),e.preventDefault())}onKeyDown(e){if(!1===this.tetaOnlyNumber)return;const cursorPosition=e.target.selectionStart??0,originalValue=e.target.value,controlOrCommand=!0===e.ctrlKey||!0===e.metaKey,signExists=originalValue.includes("-"),separatorExists=originalValue.includes(this.decimalSeparator)||originalValue.includes(this.commaSeparator),allowedKeys=["Backspace","ArrowLeft","ArrowRight","Delete","Escape","Tab","Home","End"],separatorIsCloseToSign=signExists&&cursorPosition<=1;!this.allowDecimals||separatorIsCloseToSign||separatorExists||allowedKeys.push(".");const firstCharacterIsSeparator=originalValue.charAt(0)!==this.decimalSeparator;if(this.allowSign&&!signExists&&firstCharacterIsSeparator&&0===cursorPosition&&allowedKeys.push("-"),-1!==allowedKeys.indexOf(e.key)||"KeyA"===e.code&&controlOrCommand||"KeyC"===e.code&&controlOrCommand||"KeyV"===e.code&&controlOrCommand||"KeyZ"===e.code&&controlOrCommand||"KeyX"===e.code&&controlOrCommand)return;this._previousValue=originalValue;new RegExp(this._integerUnsigned).test(e.key)||(","===e.key&&originalValue.indexOf(".")<0&&(this._control.control.patchValue(`${originalValue.slice(0,cursorPosition)}.${originalValue.slice(cursorPosition)}`),this._elementRef.nativeElement.setSelectionRange&&this._elementRef.nativeElement.setSelectionRange(cursorPosition+1,cursorPosition+1)),e.preventDefault())}validateValue(value){if(!1===this.tetaOnlyNumber)return;value=value.replace(",",".").trim();let regex=this._integerUnsigned;this.allowDecimals||this.allowSign||(regex=this._integerUnsigned),!this.allowDecimals&&this.allowSign&&(regex=this._integerSigned),this.allowDecimals&&!this.allowSign&&(regex=this._decimalUnsigned),this.allowDecimals&&this.allowSign&&(regex=this._decimalSigned);let firstCharacter=value.charAt(0);firstCharacter===this.decimalSeparator&&(value=0+value);value.charAt(value.length-1)===this.decimalSeparator&&(value+=0);let signedValue=!1;firstCharacter===this._minusSign&&(signedValue=!0,firstCharacter=(value=value.substring(1)).charAt(0));let secondChar=value.charAt(1);for(;"0"===firstCharacter&&""!==secondChar&&secondChar!==this.decimalSeparator;)firstCharacter=(value=value.substring(1)).charAt(0),secondChar=value.charAt(1);!0===signedValue&&(value=this._minusSign+value);const valueParts=value.split(this.decimalSeparator),naturalPart=valueParts?.[0];let decimalPart=valueParts?.[1];if(null!=decimalPart&&/^0+$/.test(decimalPart)&&(decimalPart="0",value=naturalPart+"."+decimalPart),"-0"===value&&(value="0"),"-0.0"===value&&(value="0.0"),null==value||""===value)return;new RegExp(regex).test(value.toString())&&this._control.control.patchValue(parseFloat(value))}}).ctorParameters=()=>[{type:core.ElementRef},{type:fesm2022_forms.a5}],_class.propDecorators={tetaOnlyNumber:[{type:core.Input}],allowDecimals:[{type:core.Input}],allowSign:[{type:core.Input}],decimalSeparator:[{type:core.Input}],commaSeparator:[{type:core.Input}],onChange:[{type:core.HostListener,args:["change",["$event"]]}],dblclick:[{type:core.HostListener,args:["dblclick",["$event"]]}],onPaste:[{type:core.HostListener,args:["paste",["$event"]]}],onKeyDown:[{type:core.HostListener,args:["keydown",["$event"]]}]},_class);OnlyNumberDirective=(0,tslib_es6.gn)([(0,core.Directive)({selector:"[tetaOnlyNumber]"})],OnlyNumberDirective);let OnlyNumberModule=class OnlyNumberModule{};OnlyNumberModule=(0,tslib_es6.gn)([(0,core.NgModule)({declarations:[OnlyNumberDirective],exports:[OnlyNumberDirective],imports:[common.CommonModule]})],OnlyNumberModule)},"./node_modules/@storybook/addon-actions/dist/index.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{aD:()=>chunk_OPEUWD42.aD});var chunk_OPEUWD42=__webpack_require__("./node_modules/@storybook/addon-actions/dist/chunk-OPEUWD42.mjs")}}]);