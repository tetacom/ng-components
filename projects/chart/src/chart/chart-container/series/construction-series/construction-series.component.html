<ng-container *ngIf="{
  x: x | async,
  y: y | async
} as scales">

  <!-- Забой -->
  <ng-container *ngIf="bottom.length > 0">
    <ng-container *ngFor="let b of bottom">
      <svg:rect
        [attr.x]="scales.x(0)"
        [attr.y]="scales.y(b.y)"
        [attr.width]="scales.x(casing[0]?.x) - scales.x(0)"
        fill="var(--color-text-10)"
        [attr.height]="scales.y(b.y1) - scales.y(b.y)">
      </svg:rect>
      <svg:rect
        [attr.x]="scales.x(-casing[0]?.x)"
        [attr.y]="scales.y(b.y)"
        [attr.width]="scales.x(casing[0]?.x) - scales.x(0)"
        fill="var(--color-text-10)"
        [attr.height]="scales.y(b.y1) - scales.y(b.y)">
      </svg:rect>
      <svg:line
        [attr.x1]="scales.x(casing[0]?.x)"
        [attr.y1]="scales.y(b.y)"
        [attr.x2]="scales.x(-casing[0]?.x)"
        [attr.y2]="scales.y(b.y1)"
        stroke="var(--color-text-90)"
        stroke-width="1"
      >
      </svg:line>
      <svg:line
        [attr.x1]="scales.x(-casing[0]?.x)"
        [attr.y1]="scales.y(b.y)"
        [attr.x2]="scales.x(casing[0]?.x)"
        [attr.y2]="scales.y(b.y1)"
        stroke="var(--color-text-90)"
        stroke-width="1"
      >
      </svg:line>
    </ng-container>
  </ng-container>

  <!-- Обсадные колонны -->
  <ng-container *ngIf="casing.length > 0">
    <ng-container *ngFor="let c of casing; let i = index">
      <svg:rect
        [attr.x]="(scales.x(casing[0]?.x) + (i) * 12)"
        [attr.y]="scales.y(0)"
        [attr.width]="12"
        fill="var(--color-text-50)"
        [attr.height]="scales.y(c.y1) - scales.y(c.y)">
      </svg:rect>

      <svg:line
        stroke-width="2"
        stroke="var(--color-text-90)"
        [attr.x2]="(scales.x(casing[0]?.x) + (i) * 12)"
        [attr.x1]="(scales.x(casing[0]?.x) + (i) * 12)"
        [attr.y1]="scales.y(0)"
        [attr.y2]="scales.y(c.y1)">
      </svg:line>
      <svg [attr.y]="scales.y(c.y1) - 12" [attr.x]="(scales.x(casing[0]?.x) + (i) * 12)">
        <svg:g>
          <svg:polygon points="0, 12 0,0 12, 12" fill="var(--color-text-90)"></svg:polygon>
        </svg:g>
      </svg>
      <svg:rect
        [attr.x]="(scales.x(-casing[0]?.x) - (i+1) * 12)"
        [attr.y]="scales.y(0)"
        [attr.width]="12"
        fill="var(--color-text-50)"
        [attr.height]="scales.y(c.y1) - scales.y(c.y)">
      </svg:rect>
      <svg:line
        stroke-width="2"
        stroke="var(--color-text-90)"
        [attr.x2]="(scales.x(-casing[0]?.x) - (i) * 12)"
        [attr.x1]="(scales.x(-casing[0]?.x) - (i) * 12)"
        [attr.y1]="scales.y(0)"
        [attr.y2]="scales.y(c.y1)">
      </svg:line>

      <svg [attr.y]="scales.y(c.y1) - 12" [attr.x]="(scales.x(-casing[0]?.x) - (i) * 12) - 12">
        <svg:g>
          <svg:polygon points="12,0 12,12 0,12" fill="var(--color-text-90)"></svg:polygon>
        </svg:g>
      </svg>
    </ng-container>
  </ng-container>

  <!-- Центральная ось -->
  <svg:line
    stroke-width="1"
    stroke-dasharray="4, 4"
    stroke="var(--color-text-90)"
    [attr.x2]="scales.x(0)"
    [attr.x1]="scales.x(0)"
    [attr.y1]="0"
    [attr.y2]="size.height">
  </svg:line>

  <!-- Перфорация -->
  <ng-container *ngIf="perforation.length > 0">
    <ng-container *ngFor="let p of perforation">
      <svg:rect
        [attr.x]="scales.x(casing[0]?.x)"
        [attr.y]="scales.y(p.y)"
        [attr.width]="12"
        fill="#E55759"
        [attr.height]="scales.y(p.y1) - scales.y(p.y)">
      </svg:rect>
      <svg:rect
        [attr.x]="scales.x(-casing[0]?.x) - 12"
        [attr.y]="scales.y(p.y)"
        [attr.width]="12"
        fill="#E55759"
        [attr.height]="scales.y(p.y1) - scales.y(p.y)">
      </svg:rect>
    </ng-container>
  </ng-container>


  <!-- НКТ -->
  <ng-container *ngIf="nkt.length > 0">
    <ng-container *ngFor="let n of nkt">
      <svg:rect
        [attr.x]="scales.x(0) - 6"
        [attr.y]="scales.y(n.y)"
        [attr.width]="12"
        stroke="var(--color-text-90)"
        fill="none"
        stroke-width="2"
        [attr.height]="scales.y(n.y1) - scales.y(n.y)">
      </svg:rect>
    </ng-container>
  </ng-container>

  <!-- Пакеры -->
  <ng-container *ngIf="packers.length > 0">
    <ng-container *ngFor="let p of packers">
      <svg:rect
        [attr.x]="scales.x(0) + 6"
        [attr.y]="scales.y(p.y)"
        [attr.width]="(scales.x(casing[0]?.x) - scales.x(0)) - 6"
        stroke="var(--color-text-80)"
        fill="var(--color-text-10)"
        stroke-width="1"
        [attr.height]="scales.y(p.y1) - scales.y(p.y)">
      </svg:rect>
      <svg:rect
        [attr.x]="scales.x(-casing[0]?.x)"
        [attr.y]="scales.y(p.y)"
        [attr.width]="(scales.x(casing[0]?.x) - scales.x(0)) - 6"
        stroke="var(--color-text-80)"
        fill="var(--color-text-10)"
        stroke-width="1"
        [attr.height]="scales.y(p.y1) - scales.y(p.y)">
      </svg:rect>
    </ng-container>
  </ng-container>
</ng-container>
