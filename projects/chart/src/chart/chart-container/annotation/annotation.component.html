<ng-container *ngIf="{
      x: x | async,
      y: y | async
    } as scales">

  <svg:circle
    [attr.r]="annotation.style?.radius ?? 5"
    [attr.cx]="scales.x(annotation.point.x)"
    [attr.fill]="annotation?.style.fill ?? 'black'"
    [attr.cy]="scales.y(annotation.point.y)">
  </svg:circle>

  <svg:line
    [attr.x1]="scales.x(annotation.point.x)"
    [attr.y1]="scales.y(annotation.point.y)"
    [attr.x2]="scales.x(annotation.point.x) + (annotation.dx)"
    [attr.y2]="scales.y(annotation.point.y) + (annotation.dy)"
    [attr.stroke]="annotation.style?.stroke ?? 'red'"
    [attr.stroke-width]="annotation.style?.strokeWidth ?? 1"
    [attr.stroke-dasharray]="annotation.style?.strokeDasharray ?? null"
  >
  </svg:line>

  <svg:foreignObject
    class="position-absolute"
    [attr.width]="bBox?.width + 10 ?? 0"
    [attr.height]="bBox?.height + 10 ?? 0"
    [attr.x]="scales.x(annotation.point.x) + (annotation.dx) - 10"
    [attr.y]="scales.y(annotation.point.y) + (annotation.dy) - 10">
    <div
      class="padding-h-1"
      #annotationNode
      [style.background-color]="annotation.style?.fill ?? 'black'"
      [style.cursor]="annotation?.draggable ? 'move' : 'default'"
      style="border-radius: 2px; display: inline-block;">
      {{ annotation.note?.label}}
    </div>
  </svg:foreignObject>

</ng-container>
