import { Meta } from '@storybook/blocks';
import TableStories from '../src/component/table/Table.stories';

<Meta of={TableStories} />

# Таблица

Table (таблица) — компонент, который отображает данные. Создает на основе двух элементов: Table Header (шапка
таблицы) и Cell (ячейка).

### Правила применения

Основные правила применения элементов таблицы:

- в ячейке могут быть иконки, текстовые составляющие, выпадающие таблицы, тоглы, чекбоксы и др.;
- Table Header используется только в шапке таблице.

Для упрощения дизайн-процесса лучше всего создать строку из необходимого количества Table Header и объединить в
компонент. Затем то же самое повторить со строками с Cell и из полученных строк создать компонент таблицы.

### Как использовать

Для начала нужно создать `<teta-table>`.

Для создания таблицы в компонент необходимо передать свойства:

- `data` - данные для формирования таблицы.
- `columns` - каркас данных для таблицы.

`columns` принимает в себя массив объектов типа `TableColumn`. Он состоит из:

- `width` - ширина поля
- `flex` - коэффициент растяжения ячейки
- `headCellClass` - применяет указанный класс к шапке столбца
- `cellClass` - применяет указанный класс к каждой ячейке столбца
- `filterType` - тип поля в ячейке (select,datepicker,string и т.д.)
- `locked` - закрепляет столбец
- `parentName` - название столбца родителя
- `unit` - единицы измерения
- `unitMeasureParameterId` - id измеряемого параметра
- `unitId` - id единицы измерения
- `data` - дополнительные данные, свободное описание, доступны внутри компонета ячейки, можно прокинуть callback
  например
- `editable` - флаг включения/отключения редактирования ячейки
- `headCellComponent` - компонент кастомной ячейки шапки стобца
- `headDropdownConfig` - кастомный дропдаун заголовка для столбца
- `cellComponent` - компонент кастомной ячейки
- `aggregate` - аггрегирует данные по указанному методу и выводит в последней строчке таблицы.
- `defaultValue` - данные которые будут выводится при отсутствии данных в ячейке
- `maxValue` - максимальное значение в ячейке
- `minValue` - минимальное значение в ячейке
- `required` - флаг обязательности ввода данных в ячейки
- `columns` - дочерние колонки
- `validators` - валидаторы для ячеек таблицы
- `sortOrder` - порядковый номер
- `name` - название столбца в строке результатов
- `caption` - название столбца для заголовка таблицы
- `hint` - указанный текст появляется при наведении на ячейку.
- `sortable` - возможность сортировать поле
- `sortField` - поле для сортировки
- `filterable` - возможность фильтровать поле
- `filterField` - поле для фильтрации
- `stringFilterType` - тип сравнения строкового фильтра
- `listFilterType` - тип сравнения строкового фильтра
- `strict` - строгое сравнение
- `filterComponent` - компонент для рендера фильтра

При выборе листа в качестве типа ячейки, то необходимо добавить свойство `dict`, которое отвечает за
отображаемые элементы списка.

### Свойства

<table>
  <thead>
    <tr>
      <th>Свойство</th>
      <th>Tип</th>
      <th>Описание</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td class="text-align-center">
        <p>data</p>
      </td>
      <td class="text-align-center">
        <code>any[]</code>
      </td>
      <td class="text-align-center">
        <p>Данные для формирования таблицы</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>cookieName</p>
      </td>
      <td class="text-align-center">
        <code>string</code>
      </td>
      <td class="text-align-center">
        <p>Будут формироваться куки данных таблицы с указанным именем</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>columns</p>
      </td>
      <td class="text-align-center">
        <code>TableColumns[]</code>
      </td>
      <td class="text-align-center">
        <p>Шаблон столбцов таблицы</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>virtual</p>
      </td>
      <td class="text-align-center">
        <code>boolean</code>
      </td>
      <td class="text-align-center">
        <p>Флаг для добавления виртульного скролла</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>dict</p>
      </td>
      <td class="text-align-center">
        <code>any[]</code>
      </td>
      <td class="text-align-center">
        <p>
          Массив выбираемых элементов. Каждое свойство имеет название, которое должно совпадать с соответствующим
          свойством в <code>data</code>. В качестве значения принимает массив объектов id,name.Требуется если вы
          добавляете ячейку типа лист.
        </p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>contextMenu</p>
      </td>
      <td class="text-align-center">
        <code>template</code>
      </td>
      <td class="text-align-center">
        <p>Шаблон контекстного меню </p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>filterOptions</p>
      </td>
      <td class="text-align-center">
        <code>IDictionary&lt;IIdName&lt;any&gt;[]&gt;</code>
      </td>
      <td class="text-align-center">
        <p>Список опций для фильтрации, если не задано - берет Dict</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>editType</p>
      </td>
      <td class="text-align-center">
        <code>EditType</code>
      </td>
      <td class="text-align-center">
        <p>
          Тип редактирования - построчно или по ячейкам. При построчном - активируется вся строка для редактирования,
          иначе - по одной ячейке
        </p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>editEvent</p>
      </td>
      <td class="text-align-center">
        <code>EditEvent</code>
      </td>
      <td class="text-align-center">
        <p>Выбор события при котором начинается редактирование ячейки таблицы</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>selectType</p>
      </td>
      <td class="text-align-center">
        <code>SelectType</code>
      </td>
      <td class="text-align-center">
        <p>Тип выбора строк. Никак, чекбоксами (появляется доп столбец с чеком), или просто мышью.</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>selectedRows</p>
      </td>
      <td class="text-align-center">
        <code>any[]</code>
      </td>
      <td class="text-align-center">
        <p>Свойство отвечающее за выбранные ячейки</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>tableService</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Срабатывает при создании сервиса и отдает его.</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>cellEditEnd</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Указанная функция применяется при окончании редактирования ячейки </p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>cellEditStart</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Указанная функция применяется при начале редактирования ячейки </p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>rowEditEnd</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Указанная функция применяется при окончании редактирования строчки.</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>rowEditStart</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Указанная функция применяется при начале редактирования строчки.</p>
      </td>
    </tr>
    <tr>
      <td class="text-align-center">
        <p>activeRowChange</p>
      </td>
      <td class="text-align-center">
        <code>function</code>
      </td>
      <td class="text-align-center">
        <p>Указанная функция применяется при изменении выбранной строчки.</p>
      </td>
    </tr>
  </tbody>
</table>
