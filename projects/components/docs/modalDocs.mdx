import { Meta } from '@storybook/blocks';
import ModalStories from '../src/component/modal/Modal.stories';

<Meta of={ModalStories} />

# Модальное окно

Modal Window или Pop Up (модальное окно) — это эмуляция диалогового окна браузера, появляющегося поверх страницы
в ответ на действия пользователя и блокирующего доступ к основному содержимому страницы.

### Функции

Используйте модальное окно для второстепенного содержимого страниц, которое требуется только в некоторых случаях,
или для того, чтобы сосредоточить внимание пользователя на совершаемом действии. Как правило, это настройки,
создание новых документов, заполнение небольших форм.

Не используйте модальное окно для больших форм. Большие формы — это формы которые не помещаются в два экрана монитора.

### Как использовать

Для того чтобы воспользоваться данным компонентом, нужно внедрить в компонент сервис `modalService` и использовать
метод `create`, передав компонент, который будет помещен в модалку и необходимые свойсва.

Этот метод вернет объект со свойствами: `close` - функция, которая принимает причину закрытия модалки и закрывает ее,
`onClose` - поток, который срабатывает при закрытии модалки и отдает объект с причиной закрытия модалки и данными,
которые мы вернули из модалки

Внутри компонента модалки мы привязываем события для закрытия модалки (допустим при нажатии на кнопку). Для этого
нужно внедрить сервис `CurrentModal` и вызвать метод `close` и передать в него объект со свойствами:

- `reason` - принимает номер причины закрытия модалки (ModalCloseReason)
- `data` - данные, которые нужно вывести из модалки

Также есть возможность скрыть все открытые модалки медотом `closeAll` из `modalService`

### Пример кода

#### Создание модалки

```
createModal(name:string,description:string){
  const modal=this.modalService.create(Component,{name,description})
  modal.onClose.pipe(
   takeWhile(()=>this.alive),
   filter((data)=>data.reason===ModalCloseReason.resolve),
   tap((data)=>{console.log(data.data.description)})
  ).subscribe()
}
```

#### Закрытие модалки

```

closeModal(description:string){
  this.currentModal.close(
   {
    reason:ModalCloseReason.resolve,
    data:{description},
   }
  )
}
```
