(self.webpackChunk_ng_components_source=self.webpackChunk_ng_components_source||[]).push([[3186],{"./projects/components/src/component/date-picker/base-calendar.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>BaseCalendar});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min),ReplaySubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js");class DayModel{constructor(options){options&&(this.disabled=options.disabled,this.isCurrentMonth=options.isCurrentMonth,this.today=options.today,this.selected=options.selected,this.date=options.date,this.weekend=options.weekend)}}let BaseCalendar=class BaseCalendar{constructor(_cdr){this._cdr=_cdr,this.currentMonth=new ReplaySubject.m(1),this.minMax=new ReplaySubject.m(1),this.currentYear=new ReplaySubject.m(1),this.selectedPicker=new BehaviorSubject.t("day"),this.alive=!0,this.scrollMonth=(e,month,year)=>{const delta=e?.deltaY??e;e instanceof WheelEvent&&e.preventDefault(),delta>0?this.changeMonth(month-1,year):this.changeMonth(month+1,year)}}generateCalendar(selectedDate,year,month,minMax){const calendarStartDay=selectedDate.set("year",year).set("month",month).set("date",1).startOf("week");return new Array(42).fill(1).map(((v,i)=>calendarStartDay.add(i,"day"))).map((d=>new DayModel({date:new Date(d.toDate()),isCurrentMonth:month===d.month(),disabled:!this.isSuitableMinDate(d.toDate(),minMax.min)||!this.isSuitableMaxDate(d.toDate(),minMax.max),selected:this.isSelected(d.toDate(),selectedDate.toDate())})))}isSuitableMinDate(d,minDate){return dayjs_min_default()(new Date(minDate)).startOf("date").toDate()<=new Date(d)||!minDate}isSuitableMaxDate(d,maxDate){return new Date(d)<dayjs_min_default()(new Date(maxDate)).endOf("date").toDate()||!maxDate}isSelected(date,selectedDate){const isSelectedDate=date.getDate()===selectedDate?.getDate(),isSelectedYear=date.getFullYear()===selectedDate?.getFullYear(),isSelectedMonth=date.getMonth()===selectedDate?.getMonth();return isSelectedDate&&isSelectedMonth&&isSelectedYear&&!this.isDateNull}ngOnDestroy(){this.alive=!1}selectPicker(entity){this.selectedPicker.next(entity)}selectMonth(month){this.currentMonth.next(month),this.selectPicker("day")}selectYear(year){this.setYear(year),this.selectPicker("day")}ngOnChanges(changes){this.changeCalendarData(this.selectedDate),changes.open&&this.selectedPicker.next("day")}changeCalendarData(selectedDate){let date;date=this.isSuitableMinDate(new Date(selectedDate),this.min)?this.isSuitableMaxDate(new Date(selectedDate),this.max)?selectedDate||(this.min?this.min:this.max?this.max:new Date):this.max:this.min,this.currentMonth.next(new Date(date).getMonth()),this.currentYear.next(new Date(date).getFullYear()),this.minMax.next({min:this.min,max:this.max})}setYear(year){this.currentYear.next(year)}changeMonth(month,year){const{availableYear,availableMonth}=this.getAvailableMonthYear(month,year);this.currentMonth.next(availableMonth),this.currentYear.next(availableYear)}getAvailableMonthYear(month,year){return month>11?{availableMonth:month-12,availableYear:year+1}:month<0?{availableMonth:12+month,availableYear:year-1}:{availableMonth:month,availableYear:year}}getMothName(month){return this.locale.months[month]}selectDate(date){this.setDate.emit(date)}static{this.ctorParameters=()=>[{type:core.ChangeDetectorRef}]}};BaseCalendar=(0,tslib_es6.Cg)([(0,core.Component)({template:"",changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!1}),(0,tslib_es6.Sn)("design:paramtypes",[core.ChangeDetectorRef])],BaseCalendar)},"./projects/components/src/component/date-picker/base-picker.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{i:()=>BasePicker});var dayjs__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(dayjs__WEBPACK_IMPORTED_MODULE_0__);class BasePicker{constructor(_elementRef,_cdr,datePipe){this._elementRef=_elementRef,this._cdr=_cdr,this.datePipe=datePipe,this.open=!1,this.placeholder="",this.openPicker=show=>{this.disabled||(this.open=show,this._cdr.markForCheck())},this.inputText=this.checkNull()}changeInput(v){this.changePlaceholder(v)}changePlaceholder(value){const val=this.mask.split("");for(let i=0;value.length>i;i++)val.splice(i,1,value[i]);this.placeholder=val.join("")}openChange(e){e||this.onBlur(),this.open=e}checkNull(){return!this.date&&this.allowNull?null:this.datePipe.transform(new Date,"dd.MM.yyyy, HH:mm")}changeSelectedDate(date,selectedDate){this.setDate(date),this.emitValue(date),this.open=!1}emitValue(value){this.isValueChange(value)&&(this.date=value,this.selectDate.emit(value),this.onChange(value))}isValueChange(value){return new Date(value).getTime()!==new Date(this.date).getTime()}checkEnter(e){"Enter"===e.key&&(this.inputText=e.target.value,this.onBlur()),"-"===e.key&&e.preventDefault(),this.open=!0}isAvailableLength(val,length){return!!val?.length&&val.length===length}getDateFromStr(str,separator="."){const date=str?.split(separator);return{day:this.isAvailableLength(date?.[0],2)?Number(date[0]):null,month:this.isAvailableLength(date?.[1],2)?Number(date[1]):null,year:this.isAvailableLength(date?.[2],4)?Number(date[2]):null}}getTimeFromStr(str,separator=":"){const time=str?.trim().split(separator);return{hours:this.isAvailableLength(time?.[0],2)?Number(time[0]):null,mins:this.isAvailableLength(time?.[1],2)?Number(time[1]):null}}focus(){this._elementRef.nativeElement.focus()}getLocaleString(date){return new Date(date).toLocaleString(["ru"],{year:"numeric",month:"2-digit",day:"2-digit",hour12:!1,hour:this.showTime?"2-digit":void 0,minute:this.showTime?"2-digit":void 0})}getAvailableDate(min,max,date){const minDate=this.showTime?new Date(min):dayjs__WEBPACK_IMPORTED_MODULE_0___default()(new Date(min)).startOf("day").toDate(),maxDate=this.showTime?new Date(max):dayjs__WEBPACK_IMPORTED_MODULE_0___default()(new Date(max)).endOf("day").toDate();return min&&minDate.getTime()>=new Date(date).getTime()?minDate||new Date:max&&maxDate.getTime()<=new Date(date).getTime()?maxDate:new Date(date)}}},"./projects/components/src/component/date-picker/day-picker/day-item/day-item.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/components/src/component/date-picker/day-picker/day-picker.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/components/src/component/date-picker/day-picker/day-picker.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Y:()=>DayPickerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var day_picker_componentngResource=__webpack_require__("./projects/components/src/component/date-picker/day-picker/day-picker.component.scss?ngResource"),day_picker_componentngResource_default=__webpack_require__.n(day_picker_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min);var day_item_componentngResource=__webpack_require__("./projects/components/src/component/date-picker/day-picker/day-item/day-item.component.scss?ngResource"),day_item_componentngResource_default=__webpack_require__.n(day_item_componentngResource);let DayItemComponent=class DayItemComponent{ngOnInit(){}static{this.propDecorators={day:[{type:core.Input}]}}};DayItemComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"teta-day-item",template:"<p>{{ day.date.getDate() }}</p>\n",changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!0,styles:[day_item_componentngResource_default()]})],DayItemComponent);var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let DayPickerComponent=class DayPickerComponent{constructor(){this.date=new Date,this.hoveredDateChange=new core.EventEmitter,this.selectDate=new core.EventEmitter}isInRange(day,from,to){const matchesMinDate=dayjs_min_default()(new Date(from)).startOf("date").toDate()<=day.date,matchesMaxDate=day.date<dayjs_min_default()(new Date(to)).endOf("date").toDate();return matchesMinDate&&matchesMaxDate}isHoveredRange(day){return!(this.range?.to||!this.range?.from)&&(this.isInRange(day,this.range.from,this.hoveredDate)||this.isInRange(day,this.hoveredDate,this.range.from))}isActiveRange(day){return!(!this.range?.from||!this.range?.to)&&this.isInRange(day,this.range.from,this.range.to)}pickDate(day){day.disabled||this.selectDate.emit(day.date)}getRangeActiveClass(d){return this.range&&new Date(this.range?.from).getTime()!==new Date(this.range?.to).getTime()?this.range.to?this.getClassStaticItem(d):this.hoveredDate.getTime()===d.date.getTime()?this.getClassHoveredItem():this.getClassSelectedItem(d):""}hover(date){date?.getTime()!==this.hoveredDate?.getTime()&&(this.hoveredDate=date,this.hoveredDateChange.emit(date))}getClassStaticItem(d){const from=dayjs_min_default()(new Date(this.range.from)).startOf("day").toDate(),to=dayjs_min_default()(new Date(this.range.to)).startOf("day").toDate(),itemDate=dayjs_min_default()(new Date(d.date)).startOf("day").toDate();return from.getTime()===itemDate.getTime()?"datepicker-date_active-first":to.getTime()===itemDate.getTime()?"datepicker-date_active-second":""}getClassHoveredItem(){return new Date(this.range.from)>this.hoveredDate?"datepicker-date_active-first":new Date(this.range.from)<this.hoveredDate?"datepicker-date_active-second":""}getClassSelectedItem(d){return d.selected&&d.date<this.hoveredDate?"datepicker-date_active-first":d.selected&&d.date>this.hoveredDate?"datepicker-date_active-second":""}ngOnChanges(changes){const arr=[...this.locale.daysShort];arr.push(arr.shift()),this.dayOrder=arr}static{this.ctorParameters=()=>[]}static{this.propDecorators={date:[{type:core.Input}],calendar:[{type:core.Input}],viewType:[{type:core.Input}],range:[{type:core.Input}],min:[{type:core.Input}],max:[{type:core.Input}],locale:[{type:core.Input}],hoveredDate:[{type:core.Input}],hoveredDateChange:[{type:core.Output}],selectDate:[{type:core.Output}]}}};DayPickerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"teta-day-picker",template:'<div class="datepicker-week font-caption">\n  @for (day of dayOrder; track day) {\n    <p class="datepicker-day">\n      {{ day }}\n    </p>\n  }\n</div>\n<div class="datepicker-picker color-text-90 font-body-3">\n  @for (day of calendar; track day.date.getTime()) {\n    <div\n      [class]="getRangeActiveClass(day) + \' datepicker-date font-body-3 datepicker_\' + viewType"\n      (mouseenter)="hover(day.date)"\n      (click)="pickDate(day)"\n      [ngClass]="{\n        \'datepicker-date_active\': day.selected || (day.date === hoveredDate && range && !range.to),\n        \'datepicker-date-range_hover\': range && isHoveredRange(day),\n        \'datepicker-date_disabled\': day.disabled,\n        \'color-text-30\': day.disabled || (!range && !day.isCurrentMonth),\n        \'datepicker-date-range_disabled\': !day.isCurrentMonth && range,\n        \'datepicker-date-range_active\': isActiveRange(day),\n      }"\n    >\n      <teta-day-item [day]="day"></teta-day-item>\n    </div>\n  }\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common.NgClass,DayItemComponent],styles:[day_picker_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],DayPickerComponent)},"./projects/components/src/component/date-picker/month-picker/month-picker.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/components/src/component/date-picker/month-picker/month-picker.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>MonthPickerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var month_picker_componentngResource=__webpack_require__("./projects/components/src/component/date-picker/month-picker/month-picker.component.scss?ngResource"),month_picker_componentngResource_default=__webpack_require__.n(month_picker_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),icon_component=__webpack_require__("./projects/components/src/component/icon/icon/icon.component.ts"),button_component=__webpack_require__("./projects/components/src/component/button/button/button.component.ts");let MonthPickerComponent=class MonthPickerComponent{constructor(){this.selectedMonth=1,this.selectMonth=new core.EventEmitter,this.changeYear=new core.EventEmitter,this.months=[]}pickMonth(monthId){this.selectMonth.emit(monthId)}pickYear(year){this.changeYear.emit(year)}ngOnInit(){this.months=this.localeMoths.map(((m,i)=>({id:i,name:m,isSelected:this.selectedMonth===i})))}static{this.ctorParameters=()=>[]}static{this.propDecorators={selectedMonth:[{type:core.Input}],viewType:[{type:core.Input}],currentYear:[{type:core.Input}],localeMoths:[{type:core.Input}],selectMonth:[{type:core.Output}],changeYear:[{type:core.Output}]}}};MonthPickerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"teta-month-picker",template:'<div class="padding-h-3 padding-v-2 gap-8 column datepicker-month-wrapper">\n  <div class="row align-center justify-content-between font-button-2">\n    <teta-button\n      [class]="\'change-month-button datepicker_\' + viewType"\n      [square]="true"\n      (click)="pickYear(currentYear - 1)"\n      palette="text"\n      view="ghost"\n    >\n      <teta-icon name="arrowLeftKey" [palette]="\'text\'"></teta-icon>\n    </teta-button>\n    <p>{{ currentYear }}</p>\n    <teta-button\n      [square]="true"\n      [class]="\'change-month-button datepicker_\' + viewType"\n      (click)="pickYear(currentYear + 1)"\n      palette="text"\n      view="ghost"\n    >\n      <teta-icon name="arrowRightKey" [palette]="\'text\'"></teta-icon>\n    </teta-button>\n  </div>\n  <div class="datepicker-month font-body-3 color-text-90" style="width: 100%">\n    @for (month of months; track month) {\n      <div (click)="pickMonth(month.id)">\n        <div\n          [ngClass]="{ \'datepicker-month_item_active\': month[\'isSelected\'] }"\n          [class]="\'datepicker-month_item column align-center justify-content-center datepicker_\' + viewType"\n        >\n          <p>\n            {{ month.name }}\n          </p>\n        </div>\n      </div>\n    }\n  </div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[button_component.Q,icon_component.R,common.NgClass],styles:[month_picker_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],MonthPickerComponent)},"./projects/components/src/component/date-picker/year-picker/year-picker.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,"",""]),module.exports=___CSS_LOADER_EXPORT___.toString()},"./projects/components/src/component/date-picker/year-picker/year-picker.component.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{N:()=>YearPickerComponent});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var year_picker_componentngResource=__webpack_require__("./projects/components/src/component/date-picker/year-picker/year-picker.component.scss?ngResource"),year_picker_componentngResource_default=__webpack_require__.n(year_picker_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min);let ScrollToSelectedYearDirective=class ScrollToSelectedYearDirective{constructor(el){this.el=el,this.alive=!0}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){this.el.nativeElement.scrollIntoView({inline:"center",block:"center"})}static{this.ctorParameters=()=>[{type:core.ElementRef,decorators:[{type:core.Inject,args:[core.ElementRef]}]}]}};ScrollToSelectedYearDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[tetaScrollToSelectedYear]",standalone:!0}),(0,tslib_es6.Sn)("design:paramtypes",[core.ElementRef])],ScrollToSelectedYearDirective);var common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let YearPickerComponent=class YearPickerComponent{constructor(){this.selectYear=new core.EventEmitter}pickYear(year,disabled){disabled||this.selectYear.emit(year)}ngOnInit(){this.years=new Array(100).fill(1).map(((v,i)=>{const year=(new Date).getFullYear()+(i-50);return{id:year,isSelected:year===this.selectedYear,disabled:this.isDisabled(year)}}))}isDisabled(year){if(this.minMax){const isSuitableMax=dayjs_min_default()((new Date).setFullYear(year)).startOf("year").isAfter(new Date(this.minMax.max))&&null!==this.minMax.max,isSuitableMin=dayjs_min_default()((new Date).setFullYear(year)).endOf("year").isBefore(new Date(this.minMax.min))&&null!==this.minMax.min;return isSuitableMax||isSuitableMin}return!1}static{this.ctorParameters=()=>[]}static{this.propDecorators={selectedYear:[{type:core.Input}],viewType:[{type:core.Input}],minMax:[{type:core.Input}],locale:[{type:core.Input}],selectYear:[{type:core.Output}]}}};YearPickerComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"teta-year-picker",template:'<div class="column">\n  <div class="font-title-3 padding-v-4 padding-h-3">\n    <p>{{ locale.selectYear }}</p>\n  </div>\n  <div class="datepicker-year overflow-y-auto">\n    @for (y of years; track y) {\n      <div class="font-button-2" (click)="pickYear(y.id, y.disabled)">\n        <div\n          [ngClass]="{ \'datepicker-year_item_active\': y.isSelected, \'datepicker-year_item_disabled\': y.disabled }"\n          [class]="\'datepicker-year_item column align-center justify-content-center datepicker_\' + viewType"\n        >\n          @if (y.isSelected === true) {\n            <div tetaScrollToSelectedYear>\n              <span>{{ y.id }}</span>\n            </div>\n          }\n          @if (!y.isSelected) {\n            <div>\n              <span>{{ y.id }} </span>\n            </div>\n          }\n        </div>\n      </div>\n    }\n  </div>\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common.NgClass,ScrollToSelectedYearDirective],styles:[year_picker_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],YearPickerComponent)}}]);