"use strict";(self.webpackChunk_ng_components_source=self.webpackChunk_ng_components_source||[]).push([[9368],{"./projects/components/src/directive/only-number/only-number.directive.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>OnlyNumberDirective});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_angular_core__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),_angular_forms__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs");let OnlyNumberDirective=class OnlyNumberDirective{constructor(_elementRef,_control){this._elementRef=_elementRef,this._control=_control,this.tetaOnlyNumber=!0,this.allowDecimals=!0,this.allowSign=!0,this.decimalSeparator=".",this.commaSeparator=",",this.onlyPositive=!1,this._previousValue="",this._integerUnsigned="^[0-9]*$",this._integerSigned="^-?[0-9]+$",this._decimalUnsigned="^[0-9]+(.[0-9]+)?$",this._decimalSigned="^-?[0-9]+(.[0-9]+)?$",this._minusSign="-"}onChange(e){!1!==this.tetaOnlyNumber&&this.validateValue(this._elementRef.nativeElement.value)}dblclick(e){!1!==this.tetaOnlyNumber&&this._elementRef.nativeElement.select()}onPaste(e){!1!==this.tetaOnlyNumber&&(this.validateValue(e.clipboardData.getData("text/plain")),e.preventDefault())}onKeyDown(e){if(!1===this.tetaOnlyNumber)return;const cursorPosition=e.target.selectionStart??0,originalValue=e.target.value,controlOrCommand=!0===e.ctrlKey||!0===e.metaKey,signExists=originalValue.includes("-"),separatorExists=originalValue.includes(this.decimalSeparator)||originalValue.includes(this.commaSeparator),allowedKeys=["Backspace","ArrowLeft","ArrowRight","Delete","Escape","Tab","Home","End"],separatorIsCloseToSign=signExists&&cursorPosition<=1;!this.allowDecimals||separatorIsCloseToSign||separatorExists||allowedKeys.push(".");const firstCharacterIsSeparator=originalValue.charAt(0)!==this.decimalSeparator;if(this.allowSign&&!signExists&&firstCharacterIsSeparator&&0===cursorPosition&&!this.onlyPositive&&allowedKeys.push("-"),-1!==allowedKeys.indexOf(e.key)||"KeyA"===e.code&&controlOrCommand||"KeyC"===e.code&&controlOrCommand||"KeyV"===e.code&&controlOrCommand||"KeyZ"===e.code&&controlOrCommand||"KeyX"===e.code&&controlOrCommand)return;this._previousValue=originalValue;new RegExp(this._integerUnsigned).test(e.key)||(","===e.key&&originalValue.indexOf(".")<0&&(this._control.control.patchValue(`${originalValue.slice(0,cursorPosition)}.${originalValue.slice(cursorPosition)}`),this._elementRef.nativeElement.setSelectionRange&&this._elementRef.nativeElement.setSelectionRange(cursorPosition+1,cursorPosition+1)),e.preventDefault())}validateValue(value){if(!1===this.tetaOnlyNumber)return;value=value.replace(",",".").trim();let regex=this._integerUnsigned;this.allowDecimals||this.allowSign||(regex=this._integerUnsigned),!this.allowDecimals&&this.allowSign&&(regex=this._integerSigned),this.allowDecimals&&!this.allowSign&&(regex=this._decimalUnsigned),this.allowDecimals&&this.allowSign&&(regex=this._decimalSigned);let firstCharacter=value.charAt(0);firstCharacter===this.decimalSeparator&&(value=0+value);value.charAt(value.length-1)===this.decimalSeparator&&(value+=0);let signedValue=!1;firstCharacter===this._minusSign&&(signedValue=!0,firstCharacter=(value=value.substring(1)).charAt(0));let secondChar=value.charAt(1);for(;"0"===firstCharacter&&""!==secondChar&&secondChar!==this.decimalSeparator;)firstCharacter=(value=value.substring(1)).charAt(0),secondChar=value.charAt(1);!0===signedValue&&(value=this._minusSign+value);const valueParts=value.split(this.decimalSeparator),naturalPart=valueParts?.[0];let decimalPart=valueParts?.[1];if(null!=decimalPart&&/^0+$/.test(decimalPart)&&(decimalPart="0",value=naturalPart+"."+decimalPart),"-0"===value&&(value="0"),"-0.0"===value&&(value="0.0"),null==value||""===value)return;new RegExp(regex).test(value.toString())&&this._control.control.patchValue(parseFloat(value))}static#_=this.ctorParameters=()=>[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef},{type:_angular_forms__WEBPACK_IMPORTED_MODULE_1__.vO}];static#_2=this.propDecorators={tetaOnlyNumber:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],allowDecimals:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],allowSign:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],decimalSeparator:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],commaSeparator:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],onlyPositive:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.Input}],onChange:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["change",["$event"]]}],dblclick:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["dblclick",["$event"]]}],onPaste:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["paste",["$event"]]}],onKeyDown:[{type:_angular_core__WEBPACK_IMPORTED_MODULE_0__.HostListener,args:["keydown",["$event"]]}]}};OnlyNumberDirective=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Cg)([(0,_angular_core__WEBPACK_IMPORTED_MODULE_0__.Directive)({selector:"[tetaOnlyNumber]",standalone:!0}),(0,tslib__WEBPACK_IMPORTED_MODULE_2__.Sn)("design:paramtypes",[_angular_core__WEBPACK_IMPORTED_MODULE_0__.ElementRef,_angular_forms__WEBPACK_IMPORTED_MODULE_1__.vO])],OnlyNumberDirective)},"./projects/components/src/directive/only-number/OnlyNumber.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>OnlyNumber_stories,onlyNumber:()=>onlyNumber});var fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),v4=__webpack_require__("./node_modules/uuid/dist/esm-browser/v4.js"),external_STORYBOOK_MODULE_PREVIEW_API_=__webpack_require__("@storybook/preview-api"),external_STORYBOOK_MODULE_GLOBAL_=__webpack_require__("@storybook/global"),preview_errors=__webpack_require__("./node_modules/@storybook/core-events/dist/errors/preview-errors.mjs"),ADDON_ID="storybook/actions",EVENT_ID=`${ADDON_ID}/action-event`,config={depth:10,clearOnStoryChange:!0,limit:50},findProto=(obj,callback)=>{let proto=Object.getPrototypeOf(obj);return!proto||callback(proto)?proto:findProto(proto,callback)},serializeArg=a=>{if("object"==typeof(e=a)&&e&&findProto(e,(proto=>/^Synthetic(?:Base)?Event$/.test(proto.constructor.name)))&&"function"==typeof e.persist){let e=Object.create(a.constructor.prototype,Object.getOwnPropertyDescriptors(a));e.persist();let viewDescriptor=Object.getOwnPropertyDescriptor(e,"view"),view=viewDescriptor?.value;return"object"==typeof view&&"Window"===view?.constructor.name&&Object.defineProperty(e,"view",{...viewDescriptor,value:Object.create(view.constructor.prototype)}),e}var e;return a};function action(name,options={}){let actionOptions={...config,...options},handler=function(...args){if(options.implicit){let storyRenderer=("__STORYBOOK_PREVIEW__"in external_STORYBOOK_MODULE_GLOBAL_.global?external_STORYBOOK_MODULE_GLOBAL_.global.__STORYBOOK_PREVIEW__:void 0)?.storyRenders.find((render=>"playing"===render.phase||"rendering"===render.phase));if(storyRenderer){let deprecated=!window?.FEATURES?.disallowImplicitActionsInRenderV8,error=new preview_errors._U({phase:storyRenderer.phase,name,deprecated});if(!deprecated)throw error;console.warn(error)}}let channel=external_STORYBOOK_MODULE_PREVIEW_API_.addons.getChannel(),id="object"==typeof crypto&&"function"==typeof crypto.getRandomValues?(0,v4.A)():Date.now().toString(36)+Math.random().toString(36).substring(2),serializedArgs=args.map(serializeArg),normalizedArgs=args.length>1?serializedArgs:serializedArgs[0],actionDisplayToEmit={id,count:0,data:{name,args:normalizedArgs},options:{...actionOptions,maxDepth:5+(actionOptions.depth||3),allowFunction:actionOptions.allowFunction||!1}};channel.emit(EVENT_ID,actionDisplayToEmit)};return handler.isAction=!0,handler}var only_number_directive=__webpack_require__("./projects/components/src/directive/only-number/only-number.directive.ts");const OnlyNumber_stories={title:"Directive/OnlyNumber"},onlyNumber=()=>({moduleMetadata:{imports:[fesm2022_forms.YN,only_number_directive.n]},props:{data:123,log:(name,value)=>{action(name)(value),console.log(name,value)}},template:'<div class="bg-panel-50 padding-10 margin-10">\n                On blur\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"\n                        [ngModelOptions]="{updateOn: \'blur\'}"/>\n                <div>{{data}}</div>\n              </div>\n              <div class="bg-panel-50 padding-10 margin-10">\n                Standart\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"/>\n                <div>{{data}}</div>\n              </div>\n              <input class="input"/>'});onlyNumber.parameters={...onlyNumber.parameters,docs:{...onlyNumber.parameters?.docs,source:{originalSource:'() => ({\n  moduleMetadata: {\n    imports: [FormsModule, OnlyNumberDirective]\n  },\n  props: {\n    data: 123,\n    log: (name, value) => {\n      action(name)(value);\n      console.log(name, value);\n    }\n  },\n  template: `<div class="bg-panel-50 padding-10 margin-10">\n                On blur\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"\n                        [ngModelOptions]="{updateOn: \'blur\'}"/>\n                <div>{{data}}</div>\n              </div>\n              <div class="bg-panel-50 padding-10 margin-10">\n                Standart\n                <input tetaOnlyNumber\n                        class="input"\n                        [ngModel]="data"\n                        (ngModelChange)="data=$event;log(\'tetaOnlyNumber\', $event)"/>\n                <div>{{data}}</div>\n              </div>\n              <input class="input"/>`\n})',...onlyNumber.parameters?.docs?.source}}};const __namedExportsOrder=["onlyNumber"]}}]);