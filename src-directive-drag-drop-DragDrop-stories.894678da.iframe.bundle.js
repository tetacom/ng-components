(self.webpackChunk_ng_components_source=self.webpackChunk_ng_components_source||[]).push([[8276],{"./projects/components/src/common/util/array-util.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{_:()=>ArrayUtil});class ArrayUtil{static asArray(value){return null==value?[]:value instanceof Array?value:[value]}static flatten(data,children,onlyLeafs){const result=[];return data.forEach((child=>{let childItems=[];children?("string"==typeof children&&(childItems=child[children]),"function"==typeof children&&(childItems=children(child))):childItems=child.children,null!=childItems&&childItems.length>0?(onlyLeafs||result.push(child),result.push(...ArrayUtil.flatten(childItems,children,onlyLeafs))):result.push(child)})),result}static findRecursive(tree,comparer,children="children"){const found=tree.find((x=>comparer(x)));if(null!=found)return found;for(let i=0,l=tree.length;i<l;i++){const item=tree[i];if(item[children]&&item[children].length){const res=ArrayUtil.findRecursive(item[children],comparer);if(null!=res)return res}}return null}static filterRecursive(array,filter,children="children",keepChildren=!0,fullscanChildren=!1){const result=[];if(array&&array.length)for(const item of array){const resultItem=Object.assign({},item);if(filter(resultItem)){if(result.push(resultItem),!keepChildren){if(resultItem[children]=[],fullscanChildren)continue;break}}else if(item[children]&&item[children].length>0){resultItem[children]=[];const found=ArrayUtil.filterRecursive(item[children],filter,children,keepChildren,fullscanChildren);found?.length>0&&(resultItem[children]=found,result.push(resultItem))}}return result}static distinct(array,comparator){const result=[];if(array&&array.length)for(const item of array){result.find((_=>comparator(_)===comparator(item)))||result.push(item)}return result}static findParents(tree,item){if(tree?.indexOf(item)>=0)return tree;if(Array.isArray(tree))for(const treeNode of tree){const childResult=this.findParents(treeNode.children,item);if(Array.isArray(childResult))return[treeNode].concat(childResult)}return null}static moveItem(list,sourceIndex,targetIndex){const res=[...list],item=list[sourceIndex];return targetIndex>sourceIndex?(res.splice(targetIndex,0,item),res.splice(sourceIndex,1)):(res.splice(sourceIndex,1),res.splice(targetIndex,0,item)),res}}},"./node_modules/css-loader/dist/runtime/api.js":module=>{"use strict";module.exports=function(cssWithMappingToString){var list=[];return list.toString=function toString(){return this.map((function(item){var content="",needLayer=void 0!==item[5];return item[4]&&(content+="@supports (".concat(item[4],") {")),item[2]&&(content+="@media ".concat(item[2]," {")),needLayer&&(content+="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {")),content+=cssWithMappingToString(item),needLayer&&(content+="}"),item[2]&&(content+="}"),item[4]&&(content+="}"),content})).join("")},list.i=function i(modules,media,dedupe,supports,layer){"string"==typeof modules&&(modules=[[null,modules,void 0]]);var alreadyImportedModules={};if(dedupe)for(var k=0;k<this.length;k++){var id=this[k][0];null!=id&&(alreadyImportedModules[id]=!0)}for(var _k=0;_k<modules.length;_k++){var item=[].concat(modules[_k]);dedupe&&alreadyImportedModules[item[0]]||(void 0!==layer&&(void 0===item[5]||(item[1]="@layer".concat(item[5].length>0?" ".concat(item[5]):""," {").concat(item[1],"}")),item[5]=layer),media&&(item[2]?(item[1]="@media ".concat(item[2]," {").concat(item[1],"}"),item[2]=media):item[2]=media),supports&&(item[4]?(item[1]="@supports (".concat(item[4],") {").concat(item[1],"}"),item[4]=supports):item[4]="".concat(supports)),list.push(item))}},list}},"./node_modules/css-loader/dist/runtime/noSourceMaps.js":module=>{"use strict";module.exports=function(i){return i[1]}},"./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{R:()=>fromEvent});var tslib__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_Observable__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),_operators_mergeMap__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),_util_isArrayLike__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isArrayLike.js"),_util_isFunction__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/isFunction.js"),_util_mapOneOrManyArgs__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js"),nodeEventEmitterMethods=["addListener","removeListener"],eventTargetMethods=["addEventListener","removeEventListener"],jqueryMethods=["on","off"];function fromEvent(target,eventName,options,resultSelector){if((0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(options)&&(resultSelector=options,options=void 0),resultSelector)return fromEvent(target,eventName,options).pipe((0,_util_mapOneOrManyArgs__WEBPACK_IMPORTED_MODULE_1__.I)(resultSelector));var _a=(0,tslib__WEBPACK_IMPORTED_MODULE_2__.zs)(function isEventTarget(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.addEventListener)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.removeEventListener)}(target)?eventTargetMethods.map((function(methodName){return function(handler){return target[methodName](eventName,handler,options)}})):function isNodeStyleEventEmitter(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.addListener)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.removeListener)}(target)?nodeEventEmitterMethods.map(toCommonHandlerRegistry(target,eventName)):function isJQueryStyleEventEmitter(target){return(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.on)&&(0,_util_isFunction__WEBPACK_IMPORTED_MODULE_0__.T)(target.off)}(target)?jqueryMethods.map(toCommonHandlerRegistry(target,eventName)):[],2),add=_a[0],remove=_a[1];if(!add&&(0,_util_isArrayLike__WEBPACK_IMPORTED_MODULE_3__.X)(target))return(0,_operators_mergeMap__WEBPACK_IMPORTED_MODULE_4__.Z)((function(subTarget){return fromEvent(subTarget,eventName,options)}))((0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_5__.Tg)(target));if(!add)throw new TypeError("Invalid event target");return new _Observable__WEBPACK_IMPORTED_MODULE_6__.c((function(subscriber){var handler=function(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];return subscriber.next(1<args.length?args:args[0])};return add(handler),function(){return remove(handler)}}))}function toCommonHandlerRegistry(target,eventName){return function(methodName){return function(handler){return target[methodName](eventName,handler)}}}},"./node_modules/rxjs/dist/esm5/internal/observable/merge.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{h:()=>merge});var _operators_mergeAll__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js"),_innerFrom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_empty__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/empty.js"),_util_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/args.js"),_from__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/from.js");function merge(){for(var args=[],_i=0;_i<arguments.length;_i++)args[_i]=arguments[_i];var scheduler=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.lI)(args),concurrent=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.R0)(args,1/0),sources=args;return sources.length?1===sources.length?(0,_innerFrom__WEBPACK_IMPORTED_MODULE_2__.Tg)(sources[0]):(0,_operators_mergeAll__WEBPACK_IMPORTED_MODULE_3__.U)(concurrent)((0,_from__WEBPACK_IMPORTED_MODULE_4__.H)(sources,scheduler)):_empty__WEBPACK_IMPORTED_MODULE_1__.w}},"./node_modules/rxjs/dist/esm5/internal/operators/mergeAll.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{U:()=>mergeAll});var _mergeMap__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/mergeMap.js"),_util_identity__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/identity.js");function mergeAll(concurrent){return void 0===concurrent&&(concurrent=1/0),(0,_mergeMap__WEBPACK_IMPORTED_MODULE_0__.Z)(_util_identity__WEBPACK_IMPORTED_MODULE_1__.D,concurrent)}},"./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{v:()=>takeWhile});var _util_lift__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js");function takeWhile(predicate,inclusive){return void 0===inclusive&&(inclusive=!1),(0,_util_lift__WEBPACK_IMPORTED_MODULE_0__.N)((function(source,subscriber){var index=0;source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_1__._)(subscriber,(function(value){var result=predicate(value,index++);(result||inclusive)&&subscriber.next(value),!result&&subscriber.complete()})))}))}},"./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{E:()=>withLatestFrom});var tslib__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_util_lift__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/lift.js"),_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/OperatorSubscriber.js"),_observable_innerFrom__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/innerFrom.js"),_util_identity__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/identity.js"),_util_noop__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/noop.js"),_util_args__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/util/args.js");function withLatestFrom(){for(var inputs=[],_i=0;_i<arguments.length;_i++)inputs[_i]=arguments[_i];var project=(0,_util_args__WEBPACK_IMPORTED_MODULE_0__.ms)(inputs);return(0,_util_lift__WEBPACK_IMPORTED_MODULE_1__.N)((function(source,subscriber){for(var len=inputs.length,otherValues=new Array(len),hasValue=inputs.map((function(){return!1})),ready=!1,_loop_1=function(i){(0,_observable_innerFrom__WEBPACK_IMPORTED_MODULE_2__.Tg)(inputs[i]).subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_3__._)(subscriber,(function(value){otherValues[i]=value,ready||hasValue[i]||(hasValue[i]=!0,(ready=hasValue.every(_util_identity__WEBPACK_IMPORTED_MODULE_4__.D))&&(hasValue=null))}),_util_noop__WEBPACK_IMPORTED_MODULE_5__.l))},i=0;i<len;i++)_loop_1(i);source.subscribe((0,_OperatorSubscriber__WEBPACK_IMPORTED_MODULE_3__._)(subscriber,(function(value){if(ready){var values=(0,tslib__WEBPACK_IMPORTED_MODULE_6__.fX)([value],(0,tslib__WEBPACK_IMPORTED_MODULE_6__.zs)(otherValues));subscriber.next(project?project.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_6__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_6__.zs)(values))):values)}})))}))}},"./node_modules/rxjs/dist/esm5/internal/util/mapOneOrManyArgs.js":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{I:()=>mapOneOrManyArgs});var tslib__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/tslib/tslib.es6.mjs"),_operators_map__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),isArray=Array.isArray;function mapOneOrManyArgs(fn){return(0,_operators_map__WEBPACK_IMPORTED_MODULE_1__.T)((function(args){return function callOrApply(fn,args){return isArray(args)?fn.apply(void 0,(0,tslib__WEBPACK_IMPORTED_MODULE_0__.fX)([],(0,tslib__WEBPACK_IMPORTED_MODULE_0__.zs)(args))):fn(args)}(fn,args)}))}},"./projects/components/src/directive/drag-drop/DragDrop.stories.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{__namedExportsOrder:()=>__namedExportsOrder,default:()=>DragDrop_stories,dragDrop:()=>dragDrop});var tslib_es6=__webpack_require__("./node_modules/tslib/tslib.es6.mjs");var drag_drop_demo_componentngResource=__webpack_require__("./projects/components/src/directive/drag-drop/drag-drop-demo/drag-drop-demo/drag-drop-demo.component.scss?ngResource"),drag_drop_demo_componentngResource_default=__webpack_require__.n(drag_drop_demo_componentngResource),core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),array_util=__webpack_require__("./projects/components/src/common/util/array-util.ts"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs");let DragPreviewDirective=class DragPreviewDirective{constructor(templateRef){this.templateRef=templateRef}static#_=this.ctorParameters=()=>[{type:core.TemplateRef}]};DragPreviewDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[tetaDragPreview]",standalone:!0}),(0,tslib_es6.Sn)("design:paramtypes",[core.TemplateRef])],DragPreviewDirective);var takeWhile=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js");class DragContainerInstance{constructor(options){this.data=options.data,this.previewTemplate=options.previewTemplate,this.viewContainer=options.viewContainer}}var BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),merge=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),withLatestFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js");let DragDropService=class DragDropService{constructor(_document,_rendererFactory){this._document=_document,this._rendererFactory=_rendererFactory,this.dropTarget$=new BehaviorSubject.t(null),this._delta=10,this.dropped$=new Subject.B,this._renderer=this._rendererFactory.createRenderer(null,null),this.dropTarget=this.dropTarget$.asObservable(),this.dropped=this.dropped$.asObservable(),(0,merge.h)((0,fromEvent.R)(this._document,"mousemove"),(0,fromEvent.R)(this._document,"touchmove")).pipe((0,filter.p)((()=>null!=this.startPosition))).subscribe((event=>{!this.dragProcess&&this.getDelta(event)>this._delta&&this.startProcess(),this.dragProcess&&this._preview&&this.movePreview(event)})),(0,merge.h)((0,fromEvent.R)(this._document,"mouseup"),(0,fromEvent.R)(this._document,"touchend")).pipe((0,withLatestFrom.E)(this.dropTarget)).subscribe((data=>{const[event,target]=data;target&&(this.dropped$.next({target,container:this.dragProcess.selection.container,data:[...this.dragProcess.selection.items]}),this.cancelDrag()),this.stopProcess()})),(0,merge.h)((0,fromEvent.R)(this._document,"visibilitychange"),(0,fromEvent.R)(window,"blur")).subscribe((()=>{this.cancelDrag()}))}setDropTarget(target){this.dragProcess&&this.dropTarget$.next(target)}setStartPosition(point){this.startPosition=point}setSelection(instance,container){this.selection?.container===container&&this.selection?.items?.indexOf(instance)>=0||(this.selection={container,items:[instance]})}addSelection(instance,container){if(!this.selection)return void this.setSelection(instance,container);if(this.selection&&this.selection.container!==container)return;const index=this.selection.items.indexOf(instance);index<0?this.selection.items.push(instance):this.selection.items.splice(index,1)}clearSelection(){this.selection=null}cancelDrag(){this.setDropTarget(null),this.clearSelection(),this.stopProcess()}startProcess(){this.dragProcess={selection:this.selection},this._document.body.style.cursor="copy",this._preview=this.createPreview()}stopProcess(){this.destroyPreview(),this._document.body.style.cursor="default",this.dragProcess=null,this.startPosition=null}getDelta(event){return Math.max(Math.abs(this.startPosition.x-event.x),Math.abs(this.startPosition.y-event.y))}createPreview(){if(this.dragProcess.selection.container.previewTemplate){this._previewRef=this.dragProcess.selection.container.viewContainer.createEmbeddedView(this.dragProcess.selection.container.previewTemplate,{$implicit:this.dragProcess.selection.items,data:this.dragProcess.selection.items});const preview=this._renderer.createElement("div");return this._renderer.setStyle(preview,"position","fixed"),this._renderer.setStyle(preview,"pointer-events","none"),this._renderer.setStyle(preview,"top","0"),this._renderer.setStyle(preview,"left","0"),this._renderer.appendChild(preview,this._previewRef.rootNodes[0]),this._renderer.appendChild(document.body,preview),preview}return null}movePreview(event){this._preview&&this._renderer.setStyle(this._preview,"transform",`translate(${event.x}px, ${event.y}px)`)}destroyPreview(){this._preview&&(this.dragProcess?.selection?.container?.viewContainer?.clear(),this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null)}static#_=this.ctorParameters=()=>[{type:Document,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.RendererFactory2}]};DragDropService=(0,tslib_es6.Cg)([(0,core.Injectable)({providedIn:"root"}),(0,tslib_es6.Sn)("design:paramtypes",[Document,core.RendererFactory2])],DragDropService);let DragContainerDirective=class DragContainerDirective{get isDropTarget(){return this.dropTarget===this.instance}mouseleave(event){this._dragService.setDropTarget(null)}mouseover(event){this.allowDrop&&this._dragService.setDropTarget(this.instance)}escape(event){this._dragService.cancelDrag()}constructor(_dragService,_elementRef,_viewContainerRef,_zone,_cdr){this._dragService=_dragService,this._elementRef=_elementRef,this._viewContainerRef=_viewContainerRef,this._zone=_zone,this._cdr=_cdr,this.multiple=!1,this.allowDrop=!0,this.tetaDrop=new core.EventEmitter,this.tetaDragEnter=new core.EventEmitter,this._alive=!0}ngOnInit(){this.instance=new DragContainerInstance({data:this.data,previewTemplate:this._previewTemplate?.templateRef,viewContainer:this._viewContainerRef}),this._dragService.dropTarget.pipe((0,takeWhile.v)((()=>this._alive))).subscribe((target=>{this.dropTarget=target,this._cdr.detectChanges()})),this._dragService.dropped.pipe((0,takeWhile.v)((()=>this._alive))).subscribe((event=>{this.tetaDrop.emit(event)}))}ngOnDestroy(){this._alive=!1}static#_=this.ctorParameters=()=>[{type:DragDropService},{type:core.ElementRef},{type:core.ViewContainerRef},{type:core.NgZone},{type:core.ChangeDetectorRef}];static#_2=this.propDecorators={data:[{type:core.Input,args:["tetaDragContainer"]}],multiple:[{type:core.Input}],allowDrop:[{type:core.Input}],tetaDrop:[{type:core.Output}],tetaDragEnter:[{type:core.Output}],_previewTemplate:[{type:core.ContentChild,args:[DragPreviewDirective,{static:!0}]}],mouseleave:[{type:core.HostListener,args:["mouseleave",["$event"]]}],mouseover:[{type:core.HostListener,args:["mouseover",["$event"]]}],escape:[{type:core.HostListener,args:["window:keydown.escape",["$event"]]}]}};DragContainerDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[tetaDragContainer]",exportAs:"dragContainer",host:{"[class.teta-drag-container]":'"true"',"[class.teta-drop-target]":"isDropTarget"},standalone:!0}),(0,tslib_es6.Sn)("design:paramtypes",[DragDropService,core.ElementRef,core.ViewContainerRef,core.NgZone,core.ChangeDetectorRef])],DragContainerDirective);class DragInstance{constructor(options){this.container=options.container,this.data=options.data}}let DragDirective=class DragDirective{get selection(){return this._dragService?.selection?.items?.indexOf(this.instance)>=0}get isDropTarget(){return this.dropTarget===this.instance&&this.allowDrop}mousedown(event){this.allowDrag&&(event.ctrlKey&&this._container?.multiple?this._dragService.addSelection(this.instance,this._container?.instance):this._dragService.setSelection(this.instance,this._container?.instance),this._dragService.setStartPosition({x:event.x,y:event.y}))}mouseenter(event){this.allowDrop&&(event.stopPropagation(),(void 0===this.allowDropPredicate||this.allowDropPredicate(this._dragService.selection,this.data))&&this._dragService.setDropTarget(this.instance))}mouseleave(event){this._dragService.setDropTarget(null)}constructor(_container,_dragService,_zone,_cdr){this._container=_container,this._dragService=_dragService,this._zone=_zone,this._cdr=_cdr,this.allowDrag=!0,this.allowDrop=!0,this.tetaDragEnter=new core.EventEmitter,this.tetaDrop=new core.EventEmitter,this._alive=!0}ngOnInit(){this.instance=new DragInstance({container:this._container?.instance,data:this.data}),this._dragService.dropTarget.pipe((0,takeWhile.v)((()=>this._alive))).subscribe((target=>{this.dropTarget=target,target===this.instance&&this.tetaDragEnter.emit(this.instance),this._cdr.detectChanges(),this._cdr.markForCheck()})),this._dragService.dropped.pipe((0,takeWhile.v)((()=>this._alive))).pipe((0,filter.p)((event=>event.target===this.instance))).subscribe((event=>{this.tetaDrop.emit(event)}))}ngOnDestroy(){this._alive=!1}static#_=this.ctorParameters=()=>[{type:DragContainerDirective,decorators:[{type:core.Inject,args:[DragContainerDirective]},{type:core.Optional},{type:core.SkipSelf}]},{type:DragDropService},{type:core.NgZone},{type:core.ChangeDetectorRef}];static#_2=this.propDecorators={data:[{type:core.Input,args:["tetaDrag"]}],allowDrag:[{type:core.HostBinding,args:["class.teta_draggable_item"]},{type:core.Input}],allowDrop:[{type:core.HostBinding,args:["class.teta_droppable_item"]},{type:core.Input}],allowDropPredicate:[{type:core.Input}],tetaDragEnter:[{type:core.Output}],tetaDrop:[{type:core.Output}],selection:[{type:core.HostBinding,args:["class.teta-drag-selection"]}],isDropTarget:[{type:core.HostBinding,args:["class.teta-drop-target"]}],mousedown:[{type:core.HostListener,args:["mousedown",["$event"]]},{type:core.HostListener,args:["touchstart",["$event"]]}],mouseenter:[{type:core.HostListener,args:["mouseenter",["$event"]]}],mouseleave:[{type:core.HostListener,args:["mouseleave",["$event"]]}]}};DragDirective=(0,tslib_es6.Cg)([(0,core.Directive)({selector:"[tetaDrag]",exportAs:"drag",host:{"[style.userSelect]":'"none"',"[class.teta-drag-item]":'"true"'},standalone:!0}),(0,tslib_es6.Sn)("design:paramtypes",[DragContainerDirective,DragDropService,core.NgZone,core.ChangeDetectorRef])],DragDirective);let DragDropDemoComponent=class DragDropDemoComponent{constructor(){this.items=[{id:0,name:0},{id:1,name:1},{id:2,name:2},{id:3,name:3}],this.items2=[{id:10,name:10},{id:11,name:11},{id:12,name:12},{id:13,name:13}]}ngOnInit(){}start(){return!0}update(event,list){return array_util._.moveItem(list,event.previousIndex,event.newIndex)}log(data){console.log(data)}allowDropPredicate(selection,data){return console.log(selection,data),data.id%2==0}static#_=this.ctorParameters=()=>[]};DragDropDemoComponent=(0,tslib_es6.Cg)([(0,core.Component)({selector:"teta-drag-drop-demo",template:'<div\n  [tetaDragContainer]="items"\n  (tetaDrop)="log($event)"\n  [multiple]="true"\n  class="padding-10 margin-10 row row_auto border border-text-5 row gap-20"\n>\n  @for (item of items; track item) {\n  <div [tetaDrag]="item" (tetaDrop)="log($event)" class="padding-4 border border-text-10">\n    {{ item?.name }}\n  </div>\n  }\n  <div *tetaDragPreview="let test; let data = data" style="padding: 10px; background: blueviolet">\n    @for (item of data; track item) {\n    <div>\n      {{ item.data | json }}\n    </div>\n    }\n  </div>\n</div>\n<div\n  [tetaDragContainer]="items2"\n  (tetaDrop)="log($event)"\n  class="padding-10 margin-10 row row_auto border border-text-5 row gap-20"\n>\n  @for (item of items2; track item) {\n  <div\n    [tetaDrag]="item"\n    (tetaDrop)="log($event)"\n    [allowDropPredicate]="allowDropPredicate"\n    class="padding-4 border border-text-10"\n  >\n    {{ item?.name }}\n  </div>\n  }\n</div>\n',changeDetection:core.ChangeDetectionStrategy.OnPush,standalone:!0,imports:[DragContainerDirective,DragDirective,DragPreviewDirective,common.JsonPipe],styles:[drag_drop_demo_componentngResource_default()]}),(0,tslib_es6.Sn)("design:paramtypes",[])],DragDropDemoComponent);const DragDrop_stories={title:"Directive/DragDrop"},dragDrop=()=>({moduleMetadata:{imports:[DragDropDemoComponent]},props:{},template:"<teta-drag-drop-demo></teta-drag-drop-demo>"}),__namedExportsOrder=["dragDrop"];dragDrop.parameters={...dragDrop.parameters,docs:{...dragDrop.parameters?.docs,source:{originalSource:"() => ({\n  moduleMetadata: {\n    imports: [DragDropDemoComponent]\n  },\n  props: {},\n  template: `<teta-drag-drop-demo></teta-drag-drop-demo>`\n})",...dragDrop.parameters?.docs?.source}}}},"./projects/components/src/directive/drag-drop/drag-drop-demo/drag-drop-demo/drag-drop-demo.component.scss?ngResource":(module,__unused_webpack_exports,__webpack_require__)=>{var ___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/noSourceMaps.js"),___CSS_LOADER_EXPORT___=__webpack_require__("./node_modules/css-loader/dist/runtime/api.js")(___CSS_LOADER_API_NO_SOURCEMAP_IMPORT___);___CSS_LOADER_EXPORT___.push([module.id,".teta-drag-selection {\n  background: green;\n}\n\n.teta-drag-item,\n.teta-drag-container {\n  transition: background 0.3s, transform 0.3s, outline 0.3s;\n}\n\n.teta-drop-target.teta-drag-item {\n  transform: scale(1.2);\n  background: grey;\n}\n\n.teta-drop-target.teta-drag-container {\n  outline: dashed 2px red;\n  background: grey;\n}",""]),module.exports=___CSS_LOADER_EXPORT___.toString()}}]);