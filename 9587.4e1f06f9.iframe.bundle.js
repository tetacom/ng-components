"use strict";(self.webpackChunkteta_components=self.webpackChunkteta_components||[]).push([[9587],{"./node_modules/@tetacom/ng-components/fesm2022/tetacom-ng-components.mjs":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{xMy:()=>Align,QX1:()=>IconModule,_NX:()=>LetModule,TUH:()=>PositionUtil,g$I:()=>VerticalAlign,luZ:()=>tetaZoneFull});var asyncToGenerator=__webpack_require__("./node_modules/@angular-devkit/build-angular/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}function defineProperty_defineProperty(obj,key,value){return(key=_toPropertyKey(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var core=__webpack_require__("./node_modules/@angular/core/fesm2022/core.mjs"),common=__webpack_require__("./node_modules/@angular/common/fesm2022/common.mjs"),fesm2022_http=__webpack_require__("./node_modules/@angular/common/fesm2022/http.mjs"),map=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/map.js"),takeWhile=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/takeWhile.js"),throttleTime=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/throttleTime.js"),filter=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/filter.js"),tap=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/tap.js"),withLatestFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/withLatestFrom.js"),fesm2022_forms=__webpack_require__("./node_modules/@angular/forms/fesm2022/forms.mjs"),maskito_angular=__webpack_require__("./node_modules/@maskito/angular/fesm2015/maskito-angular.js"),coercion=__webpack_require__("./node_modules/@angular/cdk/fesm2022/coercion.mjs"),animations=__webpack_require__("./node_modules/@angular/animations/fesm2022/animations.mjs"),dayjs_min=__webpack_require__("./node_modules/dayjs/dayjs.min.js"),dayjs_min_default=__webpack_require__.n(dayjs_min),ReplaySubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/ReplaySubject.js"),BehaviorSubject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/BehaviorSubject.js"),combineLatest=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/combineLatest.js"),lastValueFrom=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/lastValueFrom.js"),take=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/take.js"),shareReplay=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/shareReplay.js"),fromEvent=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/fromEvent.js"),Subject=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Subject.js"),merge=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/observable/merge.js"),internal_Observable=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/Observable.js"),share=__webpack_require__("./node_modules/rxjs/dist/esm5/internal/operators/share.js"),index_esm=__webpack_require__("./node_modules/@maskito/kit/index.esm.js"),ngneat_transloco=__webpack_require__("./node_modules/@ngneat/transloco/fesm2015/ngneat-transloco.js"),scrolling=__webpack_require__("./node_modules/@angular/cdk/fesm2022/scrolling.mjs"),object_hash=__webpack_require__("./node_modules/object-hash/dist/object_hash.js"),object_hash_default=__webpack_require__.n(object_hash),src=__webpack_require__("./node_modules/d3/src/index.js"),angular_three=__webpack_require__("./node_modules/angular-three/fesm2022/angular-three.mjs"),three_module=__webpack_require__("./node_modules/three/build/three.module.js"),angular_three_soba_abstractions=__webpack_require__("./node_modules/angular-three-soba/fesm2022/angular-three-soba-abstractions.mjs"),angular_three_soba_controls=__webpack_require__("./node_modules/angular-three-soba/fesm2022/angular-three-soba-controls.mjs");const _changeEvent={type:"change"},_startEvent={type:"start"},_endEvent={type:"end"};class OrbitControls extends three_module.EventDispatcher{constructor(object,domElement){super(),this.object=object,this.domElement=domElement,this.domElement.style.touchAction="none",this.enabled=!0,this.target=new three_module.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.keys={LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"},this.mouseButtons={LEFT:three_module.MOUSE.ROTATE,MIDDLE:three_module.MOUSE.DOLLY,RIGHT:three_module.MOUSE.PAN},this.touches={ONE:three_module.TOUCH.ROTATE,TWO:three_module.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this._domElementKeyEvents=null,this.getPolarAngle=function(){return spherical.phi},this.getAzimuthalAngle=function(){return spherical.theta},this.getDistance=function(){return this.object.position.distanceTo(this.target)},this.listenToKeyEvents=function(domElement){domElement.addEventListener("keydown",onKeyDown),this._domElementKeyEvents=domElement},this.stopListenToKeyEvents=function(){this._domElementKeyEvents.removeEventListener("keydown",onKeyDown),this._domElementKeyEvents=null},this.saveState=function(){scope.target0.copy(scope.target),scope.position0.copy(scope.object.position),scope.zoom0=scope.object.zoom},this.reset=function(){scope.target.copy(scope.target0),scope.object.position.copy(scope.position0),scope.object.zoom=scope.zoom0,scope.object.updateProjectionMatrix(),scope.dispatchEvent(_changeEvent),scope.update(),state=STATE.NONE},this.update=function(){const offset=new three_module.Vector3,quat=(new three_module.Quaternion).setFromUnitVectors(object.up,new three_module.Vector3(0,1,0)),quatInverse=quat.clone().invert(),lastPosition=new three_module.Vector3,lastQuaternion=new three_module.Quaternion,lastTargetPosition=new three_module.Vector3,twoPI=2*Math.PI;return function update(){const position=scope.object.position;offset.copy(position).sub(scope.target),offset.applyQuaternion(quat),spherical.setFromVector3(offset),scope.autoRotate&&state===STATE.NONE&&rotateLeft(function getAutoRotationAngle(){return 2*Math.PI/60/60*scope.autoRotateSpeed}()),scope.enableDamping?(spherical.theta+=sphericalDelta.theta*scope.dampingFactor,spherical.phi+=sphericalDelta.phi*scope.dampingFactor):(spherical.theta+=sphericalDelta.theta,spherical.phi+=sphericalDelta.phi);let min=scope.minAzimuthAngle,max=scope.maxAzimuthAngle;return isFinite(min)&&isFinite(max)&&(min<-Math.PI?min+=twoPI:min>Math.PI&&(min-=twoPI),max<-Math.PI?max+=twoPI:max>Math.PI&&(max-=twoPI),spherical.theta=min<=max?Math.max(min,Math.min(max,spherical.theta)):spherical.theta>(min+max)/2?Math.max(min,spherical.theta):Math.min(max,spherical.theta)),spherical.phi=Math.max(scope.minPolarAngle,Math.min(scope.maxPolarAngle,spherical.phi)),spherical.makeSafe(),spherical.radius*=scale,spherical.radius=Math.max(scope.minDistance,Math.min(scope.maxDistance,spherical.radius)),!0===scope.enableDamping?scope.target.addScaledVector(panOffset,scope.dampingFactor):scope.target.add(panOffset),offset.setFromSpherical(spherical),offset.applyQuaternion(quatInverse),position.copy(scope.target).add(offset),scope.object.lookAt(scope.target),!0===scope.enableDamping?(sphericalDelta.theta*=1-scope.dampingFactor,sphericalDelta.phi*=1-scope.dampingFactor,panOffset.multiplyScalar(1-scope.dampingFactor)):(sphericalDelta.set(0,0,0),panOffset.set(0,0,0)),scale=1,!!(zoomChanged||lastPosition.distanceToSquared(scope.object.position)>EPS||8*(1-lastQuaternion.dot(scope.object.quaternion))>EPS||lastTargetPosition.distanceToSquared(scope.target)>0)&&(scope.dispatchEvent(_changeEvent),lastPosition.copy(scope.object.position),lastQuaternion.copy(scope.object.quaternion),lastTargetPosition.copy(scope.target),zoomChanged=!1,!0)}}(),this.dispose=function(){scope.domElement.removeEventListener("contextmenu",onContextMenu),scope.domElement.removeEventListener("pointerdown",onPointerDown),scope.domElement.removeEventListener("pointercancel",onPointerUp),scope.domElement.removeEventListener("wheel",onMouseWheel),scope.domElement.removeEventListener("pointermove",onPointerMove),scope.domElement.removeEventListener("pointerup",onPointerUp),null!==scope._domElementKeyEvents&&(scope._domElementKeyEvents.removeEventListener("keydown",onKeyDown),scope._domElementKeyEvents=null)};const scope=this,STATE={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let state=STATE.NONE;const EPS=1e-6,spherical=new three_module.Spherical,sphericalDelta=new three_module.Spherical;let scale=1;const panOffset=new three_module.Vector3;let zoomChanged=!1;const rotateStart=new three_module.Vector2,rotateEnd=new three_module.Vector2,rotateDelta=new three_module.Vector2,panStart=new three_module.Vector2,panEnd=new three_module.Vector2,panDelta=new three_module.Vector2,dollyStart=new three_module.Vector2,dollyEnd=new three_module.Vector2,dollyDelta=new three_module.Vector2,pointers=[],pointerPositions={};function getZoomScale(){return Math.pow(.95,scope.zoomSpeed)}function rotateLeft(angle){sphericalDelta.theta-=angle}function rotateUp(angle){sphericalDelta.phi-=angle}const panLeft=function(){const v=new three_module.Vector3;return function panLeft(distance,objectMatrix){v.setFromMatrixColumn(objectMatrix,0),v.multiplyScalar(-distance),panOffset.add(v)}}(),panUp=function(){const v=new three_module.Vector3;return function panUp(distance,objectMatrix){!0===scope.screenSpacePanning?v.setFromMatrixColumn(objectMatrix,1):(v.setFromMatrixColumn(objectMatrix,0),v.crossVectors(scope.object.up,v)),v.multiplyScalar(distance),panOffset.add(v)}}(),pan=function(){const offset=new three_module.Vector3;return function pan(deltaX,deltaY){const element=scope.domElement;if(scope.object.isPerspectiveCamera){const position=scope.object.position;offset.copy(position).sub(scope.target);let targetDistance=offset.length();targetDistance*=Math.tan(scope.object.fov/2*Math.PI/180),panLeft(2*deltaX*targetDistance/element.clientHeight,scope.object.matrix),panUp(2*deltaY*targetDistance/element.clientHeight,scope.object.matrix)}else scope.object.isOrthographicCamera?(panLeft(deltaX*(scope.object.right-scope.object.left)/scope.object.zoom/element.clientWidth,scope.object.matrix),panUp(deltaY*(scope.object.top-scope.object.bottom)/scope.object.zoom/element.clientHeight,scope.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),scope.enablePan=!1)}}();function dollyOut(dollyScale){scope.object.isPerspectiveCamera?scale/=dollyScale:scope.object.isOrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom*dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),scope.enableZoom=!1)}function dollyIn(dollyScale){scope.object.isPerspectiveCamera?scale*=dollyScale:scope.object.isOrthographicCamera?(scope.object.zoom=Math.max(scope.minZoom,Math.min(scope.maxZoom,scope.object.zoom/dollyScale)),scope.object.updateProjectionMatrix(),zoomChanged=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),scope.enableZoom=!1)}function handleMouseDownRotate(event){rotateStart.set(event.clientX,event.clientY)}function handleMouseDownPan(event){panStart.set(event.clientX,event.clientY)}function handleTouchStartRotate(){if(1===pointers.length)rotateStart.set(pointers[0].pageX,pointers[0].pageY);else{const x=.5*(pointers[0].pageX+pointers[1].pageX),y=.5*(pointers[0].pageY+pointers[1].pageY);rotateStart.set(x,y)}}function handleTouchStartPan(){if(1===pointers.length)panStart.set(pointers[0].pageX,pointers[0].pageY);else{const x=.5*(pointers[0].pageX+pointers[1].pageX),y=.5*(pointers[0].pageY+pointers[1].pageY);panStart.set(x,y)}}function handleTouchStartDolly(){const dx=pointers[0].pageX-pointers[1].pageX,dy=pointers[0].pageY-pointers[1].pageY,distance=Math.sqrt(dx*dx+dy*dy);dollyStart.set(0,distance)}function handleTouchMoveRotate(event){if(1==pointers.length)rotateEnd.set(event.pageX,event.pageY);else{const position=getSecondPointerPosition(event),x=.5*(event.pageX+position.x),y=.5*(event.pageY+position.y);rotateEnd.set(x,y)}rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);const element=scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight),rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight),rotateStart.copy(rotateEnd)}function handleTouchMovePan(event){if(1===pointers.length)panEnd.set(event.pageX,event.pageY);else{const position=getSecondPointerPosition(event),x=.5*(event.pageX+position.x),y=.5*(event.pageY+position.y);panEnd.set(x,y)}panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed),pan(panDelta.x,panDelta.y),panStart.copy(panEnd)}function handleTouchMoveDolly(event){const position=getSecondPointerPosition(event),dx=event.pageX-position.x,dy=event.pageY-position.y,distance=Math.sqrt(dx*dx+dy*dy);dollyEnd.set(0,distance),dollyDelta.set(0,Math.pow(dollyEnd.y/dollyStart.y,scope.zoomSpeed)),dollyOut(dollyDelta.y),dollyStart.copy(dollyEnd)}function onPointerDown(event){!1!==scope.enabled&&(0===pointers.length&&(scope.domElement.setPointerCapture(event.pointerId),scope.domElement.addEventListener("pointermove",onPointerMove),scope.domElement.addEventListener("pointerup",onPointerUp)),function addPointer(event){pointers.push(event)}(event),"touch"===event.pointerType?function onTouchStart(event){switch(trackPointer(event),pointers.length){case 1:switch(scope.touches.ONE){case three_module.TOUCH.ROTATE:if(!1===scope.enableRotate)return;handleTouchStartRotate(),state=STATE.TOUCH_ROTATE;break;case three_module.TOUCH.PAN:if(!1===scope.enablePan)return;handleTouchStartPan(),state=STATE.TOUCH_PAN;break;default:state=STATE.NONE}break;case 2:switch(scope.touches.TWO){case three_module.TOUCH.DOLLY_PAN:if(!1===scope.enableZoom&&!1===scope.enablePan)return;!function handleTouchStartDollyPan(){scope.enableZoom&&handleTouchStartDolly(),scope.enablePan&&handleTouchStartPan()}(),state=STATE.TOUCH_DOLLY_PAN;break;case three_module.TOUCH.DOLLY_ROTATE:if(!1===scope.enableZoom&&!1===scope.enableRotate)return;!function handleTouchStartDollyRotate(){scope.enableZoom&&handleTouchStartDolly(),scope.enableRotate&&handleTouchStartRotate()}(),state=STATE.TOUCH_DOLLY_ROTATE;break;default:state=STATE.NONE}break;default:state=STATE.NONE}state!==STATE.NONE&&scope.dispatchEvent(_startEvent)}(event):function onMouseDown(event){let mouseAction;switch(event.button){case 0:mouseAction=scope.mouseButtons.LEFT;break;case 1:mouseAction=scope.mouseButtons.MIDDLE;break;case 2:mouseAction=scope.mouseButtons.RIGHT;break;default:mouseAction=-1}switch(mouseAction){case three_module.MOUSE.DOLLY:if(!1===scope.enableZoom)return;!function handleMouseDownDolly(event){dollyStart.set(event.clientX,event.clientY)}(event),state=STATE.DOLLY;break;case three_module.MOUSE.ROTATE:if(event.ctrlKey||event.metaKey||event.shiftKey){if(!1===scope.enablePan)return;handleMouseDownPan(event),state=STATE.PAN}else{if(!1===scope.enableRotate)return;handleMouseDownRotate(event),state=STATE.ROTATE}break;case three_module.MOUSE.PAN:if(event.ctrlKey||event.metaKey||event.shiftKey){if(!1===scope.enableRotate)return;handleMouseDownRotate(event),state=STATE.ROTATE}else{if(!1===scope.enablePan)return;handleMouseDownPan(event),state=STATE.PAN}break;default:state=STATE.NONE}state!==STATE.NONE&&scope.dispatchEvent(_startEvent)}(event))}function onPointerMove(event){!1!==scope.enabled&&("touch"===event.pointerType?function onTouchMove(event){switch(trackPointer(event),state){case STATE.TOUCH_ROTATE:if(!1===scope.enableRotate)return;handleTouchMoveRotate(event),scope.update();break;case STATE.TOUCH_PAN:if(!1===scope.enablePan)return;handleTouchMovePan(event),scope.update();break;case STATE.TOUCH_DOLLY_PAN:if(!1===scope.enableZoom&&!1===scope.enablePan)return;!function handleTouchMoveDollyPan(event){scope.enableZoom&&handleTouchMoveDolly(event),scope.enablePan&&handleTouchMovePan(event)}(event),scope.update();break;case STATE.TOUCH_DOLLY_ROTATE:if(!1===scope.enableZoom&&!1===scope.enableRotate)return;!function handleTouchMoveDollyRotate(event){scope.enableZoom&&handleTouchMoveDolly(event),scope.enableRotate&&handleTouchMoveRotate(event)}(event),scope.update();break;default:state=STATE.NONE}}(event):function onMouseMove(event){switch(state){case STATE.ROTATE:if(!1===scope.enableRotate)return;!function handleMouseMoveRotate(event){rotateEnd.set(event.clientX,event.clientY),rotateDelta.subVectors(rotateEnd,rotateStart).multiplyScalar(scope.rotateSpeed);const element=scope.domElement;rotateLeft(2*Math.PI*rotateDelta.x/element.clientHeight),rotateUp(2*Math.PI*rotateDelta.y/element.clientHeight),rotateStart.copy(rotateEnd),scope.update()}(event);break;case STATE.DOLLY:if(!1===scope.enableZoom)return;!function handleMouseMoveDolly(event){dollyEnd.set(event.clientX,event.clientY),dollyDelta.subVectors(dollyEnd,dollyStart),dollyDelta.y>0?dollyOut(getZoomScale()):dollyDelta.y<0&&dollyIn(getZoomScale()),dollyStart.copy(dollyEnd),scope.update()}(event);break;case STATE.PAN:if(!1===scope.enablePan)return;!function handleMouseMovePan(event){panEnd.set(event.clientX,event.clientY),panDelta.subVectors(panEnd,panStart).multiplyScalar(scope.panSpeed),pan(panDelta.x,panDelta.y),panStart.copy(panEnd),scope.update()}(event)}}(event))}function onPointerUp(event){!function removePointer(event){delete pointerPositions[event.pointerId];for(let i=0;i<pointers.length;i++)if(pointers[i].pointerId==event.pointerId)return void pointers.splice(i,1)}(event),0===pointers.length&&(scope.domElement.releasePointerCapture(event.pointerId),scope.domElement.removeEventListener("pointermove",onPointerMove),scope.domElement.removeEventListener("pointerup",onPointerUp)),scope.dispatchEvent(_endEvent),state=STATE.NONE}function onMouseWheel(event){!1!==scope.enabled&&!1!==scope.enableZoom&&state===STATE.NONE&&(event.preventDefault(),scope.dispatchEvent(_startEvent),function handleMouseWheel(event){event.deltaY<0?dollyIn(getZoomScale()):event.deltaY>0&&dollyOut(getZoomScale()),scope.update()}(event),scope.dispatchEvent(_endEvent))}function onKeyDown(event){!1!==scope.enabled&&!1!==scope.enablePan&&function handleKeyDown(event){let needsUpdate=!1;switch(event.code){case scope.keys.UP:event.ctrlKey||event.metaKey||event.shiftKey?rotateUp(2*Math.PI*scope.rotateSpeed/scope.domElement.clientHeight):pan(0,scope.keyPanSpeed),needsUpdate=!0;break;case scope.keys.BOTTOM:event.ctrlKey||event.metaKey||event.shiftKey?rotateUp(-2*Math.PI*scope.rotateSpeed/scope.domElement.clientHeight):pan(0,-scope.keyPanSpeed),needsUpdate=!0;break;case scope.keys.LEFT:event.ctrlKey||event.metaKey||event.shiftKey?rotateLeft(2*Math.PI*scope.rotateSpeed/scope.domElement.clientHeight):pan(scope.keyPanSpeed,0),needsUpdate=!0;break;case scope.keys.RIGHT:event.ctrlKey||event.metaKey||event.shiftKey?rotateLeft(-2*Math.PI*scope.rotateSpeed/scope.domElement.clientHeight):pan(-scope.keyPanSpeed,0),needsUpdate=!0}needsUpdate&&(event.preventDefault(),scope.update())}(event)}function onContextMenu(event){!1!==scope.enabled&&event.preventDefault()}function trackPointer(event){let position=pointerPositions[event.pointerId];void 0===position&&(position=new three_module.Vector2,pointerPositions[event.pointerId]=position),position.set(event.pageX,event.pageY)}function getSecondPointerPosition(event){const pointer=event.pointerId===pointers[0].pointerId?pointers[1]:pointers[0];return pointerPositions[pointer.pointerId]}scope.domElement.addEventListener("contextmenu",onContextMenu),scope.domElement.addEventListener("pointerdown",onPointerDown),scope.domElement.addEventListener("pointercancel",onPointerUp),scope.domElement.addEventListener("wheel",onMouseWheel,{passive:!1}),this.update()}}var fesm2022_animations=__webpack_require__("./node_modules/@angular/platform-browser/fesm2022/animations.mjs");class LuxonError extends Error{}class InvalidDateTimeError extends LuxonError{constructor(reason){super(`Invalid DateTime: ${reason.toMessage()}`)}}class InvalidIntervalError extends LuxonError{constructor(reason){super(`Invalid Interval: ${reason.toMessage()}`)}}class InvalidDurationError extends LuxonError{constructor(reason){super(`Invalid Duration: ${reason.toMessage()}`)}}class ConflictingSpecificationError extends LuxonError{}class InvalidUnitError extends LuxonError{constructor(unit){super(`Invalid unit ${unit}`)}}class InvalidArgumentError extends LuxonError{}class ZoneIsAbstractError extends LuxonError{constructor(){super("Zone is an abstract class")}}const n="numeric",s="short",l="long",DATE_SHORT={year:n,month:n,day:n},DATE_MED={year:n,month:s,day:n},DATE_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s},DATE_FULL={year:n,month:l,day:n},DATE_HUGE={year:n,month:l,day:n,weekday:l},TIME_SIMPLE={hour:n,minute:n},TIME_WITH_SECONDS={hour:n,minute:n,second:n},TIME_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,timeZoneName:s},TIME_WITH_LONG_OFFSET={hour:n,minute:n,second:n,timeZoneName:l},TIME_24_SIMPLE={hour:n,minute:n,hourCycle:"h23"},TIME_24_WITH_SECONDS={hour:n,minute:n,second:n,hourCycle:"h23"},TIME_24_WITH_SHORT_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:s},TIME_24_WITH_LONG_OFFSET={hour:n,minute:n,second:n,hourCycle:"h23",timeZoneName:l},DATETIME_SHORT={year:n,month:n,day:n,hour:n,minute:n},DATETIME_SHORT_WITH_SECONDS={year:n,month:n,day:n,hour:n,minute:n,second:n},DATETIME_MED={year:n,month:s,day:n,hour:n,minute:n},DATETIME_MED_WITH_SECONDS={year:n,month:s,day:n,hour:n,minute:n,second:n},DATETIME_MED_WITH_WEEKDAY={year:n,month:s,day:n,weekday:s,hour:n,minute:n},DATETIME_FULL={year:n,month:l,day:n,hour:n,minute:n,timeZoneName:s},DATETIME_FULL_WITH_SECONDS={year:n,month:l,day:n,hour:n,minute:n,second:n,timeZoneName:s},DATETIME_HUGE={year:n,month:l,day:n,weekday:l,hour:n,minute:n,timeZoneName:l},DATETIME_HUGE_WITH_SECONDS={year:n,month:l,day:n,weekday:l,hour:n,minute:n,second:n,timeZoneName:l};class Zone{get type(){throw new ZoneIsAbstractError}get name(){throw new ZoneIsAbstractError}get ianaName(){return this.name}get isUniversal(){throw new ZoneIsAbstractError}offsetName(ts,opts){throw new ZoneIsAbstractError}formatOffset(ts,format){throw new ZoneIsAbstractError}offset(ts){throw new ZoneIsAbstractError}equals(otherZone){throw new ZoneIsAbstractError}get isValid(){throw new ZoneIsAbstractError}}let singleton=null;class SystemZone extends Zone{static get instance(){return null===singleton&&(singleton=new SystemZone),singleton}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(ts,{format,locale}){return parseZoneInfo(ts,format,locale)}formatOffset(ts,format){return formatOffset(this.offset(ts),format)}offset(ts){return-new Date(ts).getTimezoneOffset()}equals(otherZone){return"system"===otherZone.type}get isValid(){return!0}}let dtfCache={};const typeToPos={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};let ianaZoneCache={};class IANAZone extends Zone{static create(name){return ianaZoneCache[name]||(ianaZoneCache[name]=new IANAZone(name)),ianaZoneCache[name]}static resetCache(){ianaZoneCache={},dtfCache={}}static isValidSpecifier(s){return this.isValidZone(s)}static isValidZone(zone){if(!zone)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:zone}).format(),!0}catch(e){return!1}}constructor(name){super(),this.zoneName=name,this.valid=IANAZone.isValidZone(name)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(ts,{format,locale}){return parseZoneInfo(ts,format,locale,this.name)}formatOffset(ts,format){return formatOffset(this.offset(ts),format)}offset(ts){const date=new Date(ts);if(isNaN(date))return NaN;const dtf=function makeDTF(zone){return dtfCache[zone]||(dtfCache[zone]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:zone,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),dtfCache[zone]}(this.name);let[year,month,day,adOrBc,hour,minute,second]=dtf.formatToParts?function partsOffset(dtf,date){const formatted=dtf.formatToParts(date),filled=[];for(let i=0;i<formatted.length;i++){const{type,value}=formatted[i],pos=typeToPos[type];"era"===type?filled[pos]=value:isUndefined(pos)||(filled[pos]=parseInt(value,10))}return filled}(dtf,date):function hackyOffset(dtf,date){const formatted=dtf.format(date).replace(/\u200E/g,""),parsed=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(formatted),[,fMonth,fDay,fYear,fadOrBc,fHour,fMinute,fSecond]=parsed;return[fYear,fMonth,fDay,fadOrBc,fHour,fMinute,fSecond]}(dtf,date);"BC"===adOrBc&&(year=1-Math.abs(year));let asTS=+date;const over=asTS%1e3;return asTS-=over>=0?over:1e3+over,(objToLocalTS({year,month,day,hour:24===hour?0:hour,minute,second,millisecond:0})-asTS)/6e4}equals(otherZone){return"iana"===otherZone.type&&otherZone.name===this.name}get isValid(){return this.valid}}let intlLFCache={};let intlDTCache={};function getCachedDTF(locString,opts={}){const key=JSON.stringify([locString,opts]);let dtf=intlDTCache[key];return dtf||(dtf=new Intl.DateTimeFormat(locString,opts),intlDTCache[key]=dtf),dtf}let intlNumCache={};let intlRelCache={};let sysLocaleCache=null;function listStuff(loc,length,englishFn,intlFn){const mode=loc.listingMode();return"error"===mode?null:"en"===mode?englishFn(length):intlFn(length)}class PolyNumberFormatter{constructor(intl,forceSimple,opts){this.padTo=opts.padTo||0,this.floor=opts.floor||!1;const{padTo,floor,...otherOpts}=opts;if(!forceSimple||Object.keys(otherOpts).length>0){const intlOpts={useGrouping:!1,...opts};opts.padTo>0&&(intlOpts.minimumIntegerDigits=opts.padTo),this.inf=function getCachedINF(locString,opts={}){const key=JSON.stringify([locString,opts]);let inf=intlNumCache[key];return inf||(inf=new Intl.NumberFormat(locString,opts),intlNumCache[key]=inf),inf}(intl,intlOpts)}}format(i){if(this.inf){const fixed=this.floor?Math.floor(i):i;return this.inf.format(fixed)}return padStart(this.floor?Math.floor(i):roundTo(i,3),this.padTo)}}class PolyDateFormatter{constructor(dt,intl,opts){let z;if(this.opts=opts,this.originalZone=void 0,this.opts.timeZone)this.dt=dt;else if("fixed"===dt.zone.type){const gmtOffset=dt.offset/60*-1,offsetZ=gmtOffset>=0?`Etc/GMT+${gmtOffset}`:`Etc/GMT${gmtOffset}`;0!==dt.offset&&IANAZone.create(offsetZ).valid?(z=offsetZ,this.dt=dt):(z="UTC",this.dt=0===dt.offset?dt:dt.setZone("UTC").plus({minutes:dt.offset}),this.originalZone=dt.zone)}else"system"===dt.zone.type?this.dt=dt:"iana"===dt.zone.type?(this.dt=dt,z=dt.zone.name):(z="UTC",this.dt=dt.setZone("UTC").plus({minutes:dt.offset}),this.originalZone=dt.zone);const intlOpts={...this.opts};intlOpts.timeZone=intlOpts.timeZone||z,this.dtf=getCachedDTF(intl,intlOpts)}format(){return this.originalZone?this.formatToParts().map((({value})=>value)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const parts=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?parts.map((part=>{if("timeZoneName"===part.type){const offsetName=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...part,value:offsetName}}return part})):parts}resolvedOptions(){return this.dtf.resolvedOptions()}}class PolyRelFormatter{constructor(intl,isEnglish,opts){this.opts={style:"long",...opts},!isEnglish&&hasRelative()&&(this.rtf=function getCachedRTF(locString,opts={}){const{base,...cacheKeyOpts}=opts,key=JSON.stringify([locString,cacheKeyOpts]);let inf=intlRelCache[key];return inf||(inf=new Intl.RelativeTimeFormat(locString,opts),intlRelCache[key]=inf),inf}(intl,opts))}format(count,unit){return this.rtf?this.rtf.format(count,unit):function formatRelativeTime(unit,count,numeric="always",narrow=!1){const units={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},lastable=-1===["hours","minutes","seconds"].indexOf(unit);if("auto"===numeric&&lastable){const isDay="days"===unit;switch(count){case 1:return isDay?"tomorrow":`next ${units[unit][0]}`;case-1:return isDay?"yesterday":`last ${units[unit][0]}`;case 0:return isDay?"today":`this ${units[unit][0]}`}}const isInPast=Object.is(count,-0)||count<0,fmtValue=Math.abs(count),singular=1===fmtValue,lilUnits=units[unit],fmtUnit=narrow?singular?lilUnits[1]:lilUnits[2]||lilUnits[1]:singular?units[unit][0]:unit;return isInPast?`${fmtValue} ${fmtUnit} ago`:`in ${fmtValue} ${fmtUnit}`}(unit,count,this.opts.numeric,"long"!==this.opts.style)}formatToParts(count,unit){return this.rtf?this.rtf.formatToParts(count,unit):[]}}class Locale{static fromOpts(opts){return Locale.create(opts.locale,opts.numberingSystem,opts.outputCalendar,opts.defaultToEN)}static create(locale,numberingSystem,outputCalendar,defaultToEN=!1){const specifiedLocale=locale||Settings.defaultLocale,localeR=specifiedLocale||(defaultToEN?"en-US":function systemLocale(){return sysLocaleCache||(sysLocaleCache=(new Intl.DateTimeFormat).resolvedOptions().locale,sysLocaleCache)}()),numberingSystemR=numberingSystem||Settings.defaultNumberingSystem,outputCalendarR=outputCalendar||Settings.defaultOutputCalendar;return new Locale(localeR,numberingSystemR,outputCalendarR,specifiedLocale)}static resetCache(){sysLocaleCache=null,intlDTCache={},intlNumCache={},intlRelCache={}}static fromObject({locale,numberingSystem,outputCalendar}={}){return Locale.create(locale,numberingSystem,outputCalendar)}constructor(locale,numbering,outputCalendar,specifiedLocale){const[parsedLocale,parsedNumberingSystem,parsedOutputCalendar]=function parseLocaleString(localeStr){const xIndex=localeStr.indexOf("-x-");-1!==xIndex&&(localeStr=localeStr.substring(0,xIndex));const uIndex=localeStr.indexOf("-u-");if(-1===uIndex)return[localeStr];{let options,selectedStr;try{options=getCachedDTF(localeStr).resolvedOptions(),selectedStr=localeStr}catch(e){const smaller=localeStr.substring(0,uIndex);options=getCachedDTF(smaller).resolvedOptions(),selectedStr=smaller}const{numberingSystem,calendar}=options;return[selectedStr,numberingSystem,calendar]}}(locale);this.locale=parsedLocale,this.numberingSystem=numbering||parsedNumberingSystem||null,this.outputCalendar=outputCalendar||parsedOutputCalendar||null,this.intl=function intlConfigString(localeStr,numberingSystem,outputCalendar){return outputCalendar||numberingSystem?(localeStr.includes("-u-")||(localeStr+="-u"),outputCalendar&&(localeStr+=`-ca-${outputCalendar}`),numberingSystem&&(localeStr+=`-nu-${numberingSystem}`),localeStr):localeStr}(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=specifiedLocale,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=function supportsFastNumbers(loc){return(!loc.numberingSystem||"latn"===loc.numberingSystem)&&("latn"===loc.numberingSystem||!loc.locale||loc.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(loc.intl).resolvedOptions().numberingSystem)}(this)),this.fastNumbersCached}listingMode(){const isActuallyEn=this.isEnglish(),hasNoWeirdness=!(null!==this.numberingSystem&&"latn"!==this.numberingSystem||null!==this.outputCalendar&&"gregory"!==this.outputCalendar);return isActuallyEn&&hasNoWeirdness?"en":"intl"}clone(alts){return alts&&0!==Object.getOwnPropertyNames(alts).length?Locale.create(alts.locale||this.specifiedLocale,alts.numberingSystem||this.numberingSystem,alts.outputCalendar||this.outputCalendar,alts.defaultToEN||!1):this}redefaultToEN(alts={}){return this.clone({...alts,defaultToEN:!0})}redefaultToSystem(alts={}){return this.clone({...alts,defaultToEN:!1})}months(length,format=!1){return listStuff(this,length,months,(()=>{const intl=format?{month:length,day:"numeric"}:{month:length},formatStr=format?"format":"standalone";return this.monthsCache[formatStr][length]||(this.monthsCache[formatStr][length]=function mapMonths(f){const ms=[];for(let i=1;i<=12;i++){const dt=DateTime.utc(2009,i,1);ms.push(f(dt))}return ms}((dt=>this.extract(dt,intl,"month")))),this.monthsCache[formatStr][length]}))}weekdays(length,format=!1){return listStuff(this,length,weekdays,(()=>{const intl=format?{weekday:length,year:"numeric",month:"long",day:"numeric"}:{weekday:length},formatStr=format?"format":"standalone";return this.weekdaysCache[formatStr][length]||(this.weekdaysCache[formatStr][length]=function mapWeekdays(f){const ms=[];for(let i=1;i<=7;i++){const dt=DateTime.utc(2016,11,13+i);ms.push(f(dt))}return ms}((dt=>this.extract(dt,intl,"weekday")))),this.weekdaysCache[formatStr][length]}))}meridiems(){return listStuff(this,void 0,(()=>meridiems),(()=>{if(!this.meridiemCache){const intl={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[DateTime.utc(2016,11,13,9),DateTime.utc(2016,11,13,19)].map((dt=>this.extract(dt,intl,"dayperiod")))}return this.meridiemCache}))}eras(length){return listStuff(this,length,eras,(()=>{const intl={era:length};return this.eraCache[length]||(this.eraCache[length]=[DateTime.utc(-40,1,1),DateTime.utc(2017,1,1)].map((dt=>this.extract(dt,intl,"era")))),this.eraCache[length]}))}extract(dt,intlOpts,field){const matching=this.dtFormatter(dt,intlOpts).formatToParts().find((m=>m.type.toLowerCase()===field));return matching?matching.value:null}numberFormatter(opts={}){return new PolyNumberFormatter(this.intl,opts.forceSimple||this.fastNumbers,opts)}dtFormatter(dt,intlOpts={}){return new PolyDateFormatter(dt,this.intl,intlOpts)}relFormatter(opts={}){return new PolyRelFormatter(this.intl,this.isEnglish(),opts)}listFormatter(opts={}){return function getCachedLF(locString,opts={}){const key=JSON.stringify([locString,opts]);let dtf=intlLFCache[key];return dtf||(dtf=new Intl.ListFormat(locString,opts),intlLFCache[key]=dtf),dtf}(this.intl,opts)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}equals(other){return this.locale===other.locale&&this.numberingSystem===other.numberingSystem&&this.outputCalendar===other.outputCalendar}}let fixedOffsetZone_singleton=null;class FixedOffsetZone extends Zone{static get utcInstance(){return null===fixedOffsetZone_singleton&&(fixedOffsetZone_singleton=new FixedOffsetZone(0)),fixedOffsetZone_singleton}static instance(offset){return 0===offset?FixedOffsetZone.utcInstance:new FixedOffsetZone(offset)}static parseSpecifier(s){if(s){const r=s.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(r)return new FixedOffsetZone(signedOffset(r[1],r[2]))}return null}constructor(offset){super(),this.fixed=offset}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${formatOffset(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${formatOffset(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(ts,format){return formatOffset(this.fixed,format)}get isUniversal(){return!0}offset(){return this.fixed}equals(otherZone){return"fixed"===otherZone.type&&otherZone.fixed===this.fixed}get isValid(){return!0}}class InvalidZone extends Zone{constructor(zoneName){super(),this.zoneName=zoneName}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function normalizeZone(input,defaultZone){if(isUndefined(input)||null===input)return defaultZone;if(input instanceof Zone)return input;if(function isString(o){return"string"==typeof o}(input)){const lowered=input.toLowerCase();return"default"===lowered?defaultZone:"local"===lowered||"system"===lowered?SystemZone.instance:"utc"===lowered||"gmt"===lowered?FixedOffsetZone.utcInstance:FixedOffsetZone.parseSpecifier(lowered)||IANAZone.create(input)}return isNumber(input)?FixedOffsetZone.instance(input):"object"==typeof input&&"offset"in input&&"function"==typeof input.offset?input:new InvalidZone(input)}let throwOnInvalid,now=()=>Date.now(),defaultZone="system",defaultLocale=null,defaultNumberingSystem=null,defaultOutputCalendar=null,twoDigitCutoffYear=60;class Settings{static get now(){return now}static set now(n){now=n}static set defaultZone(zone){defaultZone=zone}static get defaultZone(){return normalizeZone(defaultZone,SystemZone.instance)}static get defaultLocale(){return defaultLocale}static set defaultLocale(locale){defaultLocale=locale}static get defaultNumberingSystem(){return defaultNumberingSystem}static set defaultNumberingSystem(numberingSystem){defaultNumberingSystem=numberingSystem}static get defaultOutputCalendar(){return defaultOutputCalendar}static set defaultOutputCalendar(outputCalendar){defaultOutputCalendar=outputCalendar}static get twoDigitCutoffYear(){return twoDigitCutoffYear}static set twoDigitCutoffYear(cutoffYear){twoDigitCutoffYear=cutoffYear%100}static get throwOnInvalid(){return throwOnInvalid}static set throwOnInvalid(t){throwOnInvalid=t}static resetCaches(){Locale.resetCache(),IANAZone.resetCache()}}function isUndefined(o){return void 0===o}function isNumber(o){return"number"==typeof o}function isInteger(o){return"number"==typeof o&&o%1==0}function hasRelative(){try{return"undefined"!=typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function bestBy(arr,by,compare){if(0!==arr.length)return arr.reduce(((best,next)=>{const pair=[by(next),next];return best&&compare(best[0],pair[0])===best[0]?best:pair}),null)[1]}function util_hasOwnProperty(obj,prop){return Object.prototype.hasOwnProperty.call(obj,prop)}function integerBetween(thing,bottom,top){return isInteger(thing)&&thing>=bottom&&thing<=top}function padStart(input,n=2){let padded;return padded=input<0?"-"+(""+-input).padStart(n,"0"):(""+input).padStart(n,"0"),padded}function parseInteger(string){return isUndefined(string)||null===string||""===string?void 0:parseInt(string,10)}function parseFloating(string){return isUndefined(string)||null===string||""===string?void 0:parseFloat(string)}function parseMillis(fraction){if(!isUndefined(fraction)&&null!==fraction&&""!==fraction){const f=1e3*parseFloat("0."+fraction);return Math.floor(f)}}function roundTo(number,digits,towardZero=!1){const factor=10**digits;return(towardZero?Math.trunc:Math.round)(number*factor)/factor}function isLeapYear(year){return year%4==0&&(year%100!=0||year%400==0)}function daysInYear(year){return isLeapYear(year)?366:365}function daysInMonth(year,month){const modMonth=function floorMod(x,n){return x-n*Math.floor(x/n)}(month-1,12)+1;return 2===modMonth?isLeapYear(year+(month-modMonth)/12)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][modMonth-1]}function objToLocalTS(obj){let d=Date.UTC(obj.year,obj.month-1,obj.day,obj.hour,obj.minute,obj.second,obj.millisecond);return obj.year<100&&obj.year>=0&&(d=new Date(d),d.setUTCFullYear(obj.year,obj.month-1,obj.day)),+d}function weeksInWeekYear(weekYear){const p1=(weekYear+Math.floor(weekYear/4)-Math.floor(weekYear/100)+Math.floor(weekYear/400))%7,last=weekYear-1,p2=(last+Math.floor(last/4)-Math.floor(last/100)+Math.floor(last/400))%7;return 4===p1||3===p2?53:52}function untruncateYear(year){return year>99?year:year>Settings.twoDigitCutoffYear?1900+year:2e3+year}function parseZoneInfo(ts,offsetFormat,locale,timeZone=null){const date=new Date(ts),intlOpts={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};timeZone&&(intlOpts.timeZone=timeZone);const modified={timeZoneName:offsetFormat,...intlOpts},parsed=new Intl.DateTimeFormat(locale,modified).formatToParts(date).find((m=>"timezonename"===m.type.toLowerCase()));return parsed?parsed.value:null}function signedOffset(offHourStr,offMinuteStr){let offHour=parseInt(offHourStr,10);Number.isNaN(offHour)&&(offHour=0);const offMin=parseInt(offMinuteStr,10)||0;return 60*offHour+(offHour<0||Object.is(offHour,-0)?-offMin:offMin)}function asNumber(value){const numericValue=Number(value);if("boolean"==typeof value||""===value||Number.isNaN(numericValue))throw new InvalidArgumentError(`Invalid unit value ${value}`);return numericValue}function normalizeObject(obj,normalizer){const normalized={};for(const u in obj)if(util_hasOwnProperty(obj,u)){const v=obj[u];if(null==v)continue;normalized[normalizer(u)]=asNumber(v)}return normalized}function formatOffset(offset,format){const hours=Math.trunc(Math.abs(offset/60)),minutes=Math.trunc(Math.abs(offset%60)),sign=offset>=0?"+":"-";switch(format){case"short":return`${sign}${padStart(hours,2)}:${padStart(minutes,2)}`;case"narrow":return`${sign}${hours}${minutes>0?`:${minutes}`:""}`;case"techie":return`${sign}${padStart(hours,2)}${padStart(minutes,2)}`;default:throw new RangeError(`Value format ${format} is out of range for property format`)}}function timeObject(obj){return function util_pick(obj,keys){return keys.reduce(((a,k)=>(a[k]=obj[k],a)),{})}(obj,["hour","minute","second","millisecond"])}const monthsLong=["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],monthsNarrow=["J","F","M","A","M","J","J","A","S","O","N","D"];function months(length){switch(length){case"narrow":return[...monthsNarrow];case"short":return[...monthsShort];case"long":return[...monthsLong];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const weekdaysLong=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],weekdaysShort=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],weekdaysNarrow=["M","T","W","T","F","S","S"];function weekdays(length){switch(length){case"narrow":return[...weekdaysNarrow];case"short":return[...weekdaysShort];case"long":return[...weekdaysLong];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const meridiems=["AM","PM"],erasLong=["Before Christ","Anno Domini"],erasShort=["BC","AD"],erasNarrow=["B","A"];function eras(length){switch(length){case"narrow":return[...erasNarrow];case"short":return[...erasShort];case"long":return[...erasLong];default:return null}}function stringifyTokens(splits,tokenToString){let s="";for(const token of splits)token.literal?s+=token.val:s+=tokenToString(token.val);return s}const macroTokenToFormatOpts={D:DATE_SHORT,DD:DATE_MED,DDD:DATE_FULL,DDDD:DATE_HUGE,t:TIME_SIMPLE,tt:TIME_WITH_SECONDS,ttt:TIME_WITH_SHORT_OFFSET,tttt:TIME_WITH_LONG_OFFSET,T:TIME_24_SIMPLE,TT:TIME_24_WITH_SECONDS,TTT:TIME_24_WITH_SHORT_OFFSET,TTTT:TIME_24_WITH_LONG_OFFSET,f:DATETIME_SHORT,ff:DATETIME_MED,fff:DATETIME_FULL,ffff:DATETIME_HUGE,F:DATETIME_SHORT_WITH_SECONDS,FF:DATETIME_MED_WITH_SECONDS,FFF:DATETIME_FULL_WITH_SECONDS,FFFF:DATETIME_HUGE_WITH_SECONDS};class Formatter{static create(locale,opts={}){return new Formatter(locale,opts)}static parseFormat(fmt){let current=null,currentFull="",bracketed=!1;const splits=[];for(let i=0;i<fmt.length;i++){const c=fmt.charAt(i);"'"===c?(currentFull.length>0&&splits.push({literal:bracketed||/^\s+$/.test(currentFull),val:currentFull}),current=null,currentFull="",bracketed=!bracketed):bracketed||c===current?currentFull+=c:(currentFull.length>0&&splits.push({literal:/^\s+$/.test(currentFull),val:currentFull}),currentFull=c,current=c)}return currentFull.length>0&&splits.push({literal:bracketed||/^\s+$/.test(currentFull),val:currentFull}),splits}static macroTokenToFormatOpts(token){return macroTokenToFormatOpts[token]}constructor(locale,formatOpts){this.opts=formatOpts,this.loc=locale,this.systemLoc=null}formatWithSystemDefault(dt,opts){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());return this.systemLoc.dtFormatter(dt,{...this.opts,...opts}).format()}dtFormatter(dt,opts={}){return this.loc.dtFormatter(dt,{...this.opts,...opts})}formatDateTime(dt,opts){return this.dtFormatter(dt,opts).format()}formatDateTimeParts(dt,opts){return this.dtFormatter(dt,opts).formatToParts()}formatInterval(interval,opts){return this.dtFormatter(interval.start,opts).dtf.formatRange(interval.start.toJSDate(),interval.end.toJSDate())}resolvedOptions(dt,opts){return this.dtFormatter(dt,opts).resolvedOptions()}num(n,p=0){if(this.opts.forceSimple)return padStart(n,p);const opts={...this.opts};return p>0&&(opts.padTo=p),this.loc.numberFormatter(opts).format(n)}formatDateTimeFromString(dt,fmt){const knownEnglish="en"===this.loc.listingMode(),useDateTimeFormatter=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,string=(opts,extract)=>this.loc.extract(dt,opts,extract),formatOffset=opts=>dt.isOffsetFixed&&0===dt.offset&&opts.allowZ?"Z":dt.isValid?dt.zone.formatOffset(dt.ts,opts.format):"",meridiem=()=>knownEnglish?function meridiemForDateTime(dt){return meridiems[dt.hour<12?0:1]}(dt):string({hour:"numeric",hourCycle:"h12"},"dayperiod"),month=(length,standalone)=>knownEnglish?function monthForDateTime(dt,length){return months(length)[dt.month-1]}(dt,length):string(standalone?{month:length}:{month:length,day:"numeric"},"month"),weekday=(length,standalone)=>knownEnglish?function weekdayForDateTime(dt,length){return weekdays(length)[dt.weekday-1]}(dt,length):string(standalone?{weekday:length}:{weekday:length,month:"long",day:"numeric"},"weekday"),maybeMacro=token=>{const formatOpts=Formatter.macroTokenToFormatOpts(token);return formatOpts?this.formatWithSystemDefault(dt,formatOpts):token},era=length=>knownEnglish?function eraForDateTime(dt,length){return eras(length)[dt.year<0?0:1]}(dt,length):string({era:length},"era");return stringifyTokens(Formatter.parseFormat(fmt),(token=>{switch(token){case"S":return this.num(dt.millisecond);case"u":case"SSS":return this.num(dt.millisecond,3);case"s":return this.num(dt.second);case"ss":return this.num(dt.second,2);case"uu":return this.num(Math.floor(dt.millisecond/10),2);case"uuu":return this.num(Math.floor(dt.millisecond/100));case"m":return this.num(dt.minute);case"mm":return this.num(dt.minute,2);case"h":return this.num(dt.hour%12==0?12:dt.hour%12);case"hh":return this.num(dt.hour%12==0?12:dt.hour%12,2);case"H":return this.num(dt.hour);case"HH":return this.num(dt.hour,2);case"Z":return formatOffset({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return formatOffset({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return formatOffset({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return dt.zone.offsetName(dt.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return dt.zone.offsetName(dt.ts,{format:"long",locale:this.loc.locale});case"z":return dt.zoneName;case"a":return meridiem();case"d":return useDateTimeFormatter?string({day:"numeric"},"day"):this.num(dt.day);case"dd":return useDateTimeFormatter?string({day:"2-digit"},"day"):this.num(dt.day,2);case"c":case"E":return this.num(dt.weekday);case"ccc":return weekday("short",!0);case"cccc":return weekday("long",!0);case"ccccc":return weekday("narrow",!0);case"EEE":return weekday("short",!1);case"EEEE":return weekday("long",!1);case"EEEEE":return weekday("narrow",!1);case"L":return useDateTimeFormatter?string({month:"numeric",day:"numeric"},"month"):this.num(dt.month);case"LL":return useDateTimeFormatter?string({month:"2-digit",day:"numeric"},"month"):this.num(dt.month,2);case"LLL":return month("short",!0);case"LLLL":return month("long",!0);case"LLLLL":return month("narrow",!0);case"M":return useDateTimeFormatter?string({month:"numeric"},"month"):this.num(dt.month);case"MM":return useDateTimeFormatter?string({month:"2-digit"},"month"):this.num(dt.month,2);case"MMM":return month("short",!1);case"MMMM":return month("long",!1);case"MMMMM":return month("narrow",!1);case"y":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year);case"yy":return useDateTimeFormatter?string({year:"2-digit"},"year"):this.num(dt.year.toString().slice(-2),2);case"yyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year,4);case"yyyyyy":return useDateTimeFormatter?string({year:"numeric"},"year"):this.num(dt.year,6);case"G":return era("short");case"GG":return era("long");case"GGGGG":return era("narrow");case"kk":return this.num(dt.weekYear.toString().slice(-2),2);case"kkkk":return this.num(dt.weekYear,4);case"W":return this.num(dt.weekNumber);case"WW":return this.num(dt.weekNumber,2);case"o":return this.num(dt.ordinal);case"ooo":return this.num(dt.ordinal,3);case"q":return this.num(dt.quarter);case"qq":return this.num(dt.quarter,2);case"X":return this.num(Math.floor(dt.ts/1e3));case"x":return this.num(dt.ts);default:return maybeMacro(token)}}))}formatDurationFromString(dur,fmt){const tokenToField=token=>{switch(token[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},tokens=Formatter.parseFormat(fmt),realTokens=tokens.reduce(((found,{literal,val})=>literal?found:found.concat(val)),[]);return stringifyTokens(tokens,(lildur=>token=>{const mapped=tokenToField(token);return mapped?this.num(lildur.get(mapped),token.length):token})(dur.shiftTo(...realTokens.map(tokenToField).filter((t=>t)))))}}class Invalid{constructor(reason,explanation){this.reason=reason,this.explanation=explanation}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const ianaRegex=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function combineRegexes(...regexes){const full=regexes.reduce(((f,r)=>f+r.source),"");return RegExp(`^${full}$`)}function combineExtractors(...extractors){return m=>extractors.reduce((([mergedVals,mergedZone,cursor],ex)=>{const[val,zone,next]=ex(m,cursor);return[{...mergedVals,...val},zone||mergedZone,next]}),[{},null,1]).slice(0,2)}function parse(s,...patterns){if(null==s)return[null,null];for(const[regex,extractor]of patterns){const m=regex.exec(s);if(m)return extractor(m)}return[null,null]}function simpleParse(...keys){return(match,cursor)=>{const ret={};let i;for(i=0;i<keys.length;i++)ret[keys[i]]=parseInteger(match[cursor+i]);return[ret,null,cursor+i]}}const offsetRegex=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,isoTimeBaseRegex=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,isoTimeRegex=RegExp(`${isoTimeBaseRegex.source}${`(?:${offsetRegex.source}?(?:\\[(${ianaRegex.source})\\])?)?`}`),isoTimeExtensionRegex=RegExp(`(?:T${isoTimeRegex.source})?`),extractISOWeekData=simpleParse("weekYear","weekNumber","weekDay"),extractISOOrdinalData=simpleParse("year","ordinal"),sqlTimeRegex=RegExp(`${isoTimeBaseRegex.source} ?(?:${offsetRegex.source}|(${ianaRegex.source}))?`),sqlTimeExtensionRegex=RegExp(`(?: ${sqlTimeRegex.source})?`);function regexParser_int(match,pos,fallback){const m=match[pos];return isUndefined(m)?fallback:parseInteger(m)}function extractISOTime(match,cursor){return[{hours:regexParser_int(match,cursor,0),minutes:regexParser_int(match,cursor+1,0),seconds:regexParser_int(match,cursor+2,0),milliseconds:parseMillis(match[cursor+3])},null,cursor+4]}function extractISOOffset(match,cursor){const local=!match[cursor]&&!match[cursor+1],fullOffset=signedOffset(match[cursor+1],match[cursor+2]);return[{},local?null:FixedOffsetZone.instance(fullOffset),cursor+3]}function extractIANAZone(match,cursor){return[{},match[cursor]?IANAZone.create(match[cursor]):null,cursor+1]}const isoTimeOnly=RegExp(`^T?${isoTimeBaseRegex.source}$`),isoDuration=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function extractISODuration(match){const[s,yearStr,monthStr,weekStr,dayStr,hourStr,minuteStr,secondStr,millisecondsStr]=match,hasNegativePrefix="-"===s[0],negativeSeconds=secondStr&&"-"===secondStr[0],maybeNegate=(num,force=!1)=>void 0!==num&&(force||num&&hasNegativePrefix)?-num:num;return[{years:maybeNegate(parseFloating(yearStr)),months:maybeNegate(parseFloating(monthStr)),weeks:maybeNegate(parseFloating(weekStr)),days:maybeNegate(parseFloating(dayStr)),hours:maybeNegate(parseFloating(hourStr)),minutes:maybeNegate(parseFloating(minuteStr)),seconds:maybeNegate(parseFloating(secondStr),"-0"===secondStr),milliseconds:maybeNegate(parseMillis(millisecondsStr),negativeSeconds)}]}const obsOffsets={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr){const result={year:2===yearStr.length?untruncateYear(parseInteger(yearStr)):parseInteger(yearStr),month:monthsShort.indexOf(monthStr)+1,day:parseInteger(dayStr),hour:parseInteger(hourStr),minute:parseInteger(minuteStr)};return secondStr&&(result.second=parseInteger(secondStr)),weekdayStr&&(result.weekday=weekdayStr.length>3?weekdaysLong.indexOf(weekdayStr)+1:weekdaysShort.indexOf(weekdayStr)+1),result}const rfc2822=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function extractRFC2822(match){const[,weekdayStr,dayStr,monthStr,yearStr,hourStr,minuteStr,secondStr,obsOffset,milOffset,offHourStr,offMinuteStr]=match,result=fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr);let offset;return offset=obsOffset?obsOffsets[obsOffset]:milOffset?0:signedOffset(offHourStr,offMinuteStr),[result,new FixedOffsetZone(offset)]}const rfc1123=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,rfc850=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,ascii=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function extractRFC1123Or850(match){const[,weekdayStr,dayStr,monthStr,yearStr,hourStr,minuteStr,secondStr]=match;return[fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr),FixedOffsetZone.utcInstance]}function extractASCII(match){const[,weekdayStr,monthStr,dayStr,hourStr,minuteStr,secondStr,yearStr]=match;return[fromStrings(weekdayStr,yearStr,monthStr,dayStr,hourStr,minuteStr,secondStr),FixedOffsetZone.utcInstance]}const isoYmdWithTimeExtensionRegex=combineRegexes(/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,isoTimeExtensionRegex),isoWeekWithTimeExtensionRegex=combineRegexes(/(\d{4})-?W(\d\d)(?:-?(\d))?/,isoTimeExtensionRegex),isoOrdinalWithTimeExtensionRegex=combineRegexes(/(\d{4})-?(\d{3})/,isoTimeExtensionRegex),isoTimeCombinedRegex=combineRegexes(isoTimeRegex),extractISOYmdTimeAndOffset=combineExtractors((function extractISOYmd(match,cursor){return[{year:regexParser_int(match,cursor),month:regexParser_int(match,cursor+1,1),day:regexParser_int(match,cursor+2,1)},null,cursor+3]}),extractISOTime,extractISOOffset,extractIANAZone),extractISOWeekTimeAndOffset=combineExtractors(extractISOWeekData,extractISOTime,extractISOOffset,extractIANAZone),extractISOOrdinalDateAndTime=combineExtractors(extractISOOrdinalData,extractISOTime,extractISOOffset,extractIANAZone),extractISOTimeAndOffset=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);const extractISOTimeOnly=combineExtractors(extractISOTime);const sqlYmdWithTimeExtensionRegex=combineRegexes(/(\d{4})-(\d\d)-(\d\d)/,sqlTimeExtensionRegex),sqlTimeCombinedRegex=combineRegexes(sqlTimeRegex),extractISOTimeOffsetAndIANAZone=combineExtractors(extractISOTime,extractISOOffset,extractIANAZone);const lowOrderMatrix={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},casualMatrix={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...lowOrderMatrix},accurateMatrix={years:{quarters:4,months:12,weeks:52.1775,days:365.2425,hours:8765.82,minutes:525949.2,seconds:525949.2*60,milliseconds:525949.2*60*1e3},quarters:{months:3,weeks:13.044375,days:91.310625,hours:2191.455,minutes:131487.3,seconds:525949.2*60/4,milliseconds:7889237999.999999},months:{weeks:30.436875/7,days:30.436875,hours:730.485,minutes:43829.1,seconds:2629746,milliseconds:2629746e3},...lowOrderMatrix},orderedUnits=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],reverseUnits=orderedUnits.slice(0).reverse();function clone(dur,alts,clear=!1){const conf={values:clear?alts.values:{...dur.values,...alts.values||{}},loc:dur.loc.clone(alts.loc),conversionAccuracy:alts.conversionAccuracy||dur.conversionAccuracy,matrix:alts.matrix||dur.matrix};return new Duration(conf)}function removePrecisionIssue(a){return Math.trunc(1e3*a)/1e3}function convert(matrix,fromMap,fromUnit,toMap,toUnit){const conv=matrix[toUnit][fromUnit],raw=fromMap[fromUnit]/conv,added=Math.floor(raw);toMap[toUnit]=removePrecisionIssue(toMap[toUnit]+added),fromMap[fromUnit]=removePrecisionIssue(fromMap[fromUnit]-added*conv)}class Duration{constructor(config){const accurate="longterm"===config.conversionAccuracy||!1;let matrix=accurate?accurateMatrix:casualMatrix;config.matrix&&(matrix=config.matrix),this.values=config.values,this.loc=config.loc||Locale.create(),this.conversionAccuracy=accurate?"longterm":"casual",this.invalid=config.invalid||null,this.matrix=matrix,this.isLuxonDuration=!0}static fromMillis(count,opts){return Duration.fromObject({milliseconds:count},opts)}static fromObject(obj,opts={}){if(null==obj||"object"!=typeof obj)throw new InvalidArgumentError("Duration.fromObject: argument expected to be an object, got "+(null===obj?"null":typeof obj));return new Duration({values:normalizeObject(obj,Duration.normalizeUnit),loc:Locale.fromObject(opts),conversionAccuracy:opts.conversionAccuracy,matrix:opts.matrix})}static fromDurationLike(durationLike){if(isNumber(durationLike))return Duration.fromMillis(durationLike);if(Duration.isDuration(durationLike))return durationLike;if("object"==typeof durationLike)return Duration.fromObject(durationLike);throw new InvalidArgumentError(`Unknown duration argument ${durationLike} of type ${typeof durationLike}`)}static fromISO(text,opts){const[parsed]=function parseISODuration(s){return parse(s,[isoDuration,extractISODuration])}(text);return parsed?Duration.fromObject(parsed,opts):Duration.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}static fromISOTime(text,opts){const[parsed]=function parseISOTimeOnly(s){return parse(s,[isoTimeOnly,extractISOTimeOnly])}(text);return parsed?Duration.fromObject(parsed,opts):Duration.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}static invalid(reason,explanation=null){if(!reason)throw new InvalidArgumentError("need to specify a reason the Duration is invalid");const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidDurationError(invalid);return new Duration({invalid})}static normalizeUnit(unit){const normalized={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[unit?unit.toLowerCase():unit];if(!normalized)throw new InvalidUnitError(unit);return normalized}static isDuration(o){return o&&o.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(fmt,opts={}){const fmtOpts={...opts,floor:!1!==opts.round&&!1!==opts.floor};return this.isValid?Formatter.create(this.loc,fmtOpts).formatDurationFromString(this,fmt):"Invalid Duration"}toHuman(opts={}){const l=orderedUnits.map((unit=>{const val=this.values[unit];return isUndefined(val)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...opts,unit:unit.slice(0,-1)}).format(val)})).filter((n=>n));return this.loc.listFormatter({type:"conjunction",style:opts.listStyle||"narrow",...opts}).format(l)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let s="P";return 0!==this.years&&(s+=this.years+"Y"),0===this.months&&0===this.quarters||(s+=this.months+3*this.quarters+"M"),0!==this.weeks&&(s+=this.weeks+"W"),0!==this.days&&(s+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(s+="T"),0!==this.hours&&(s+=this.hours+"H"),0!==this.minutes&&(s+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(s+=roundTo(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===s&&(s+="T0S"),s}toISOTime(opts={}){if(!this.isValid)return null;const millis=this.toMillis();if(millis<0||millis>=864e5)return null;opts={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...opts,includeOffset:!1};return DateTime.fromMillis(millis,{zone:"UTC"}).toISOTime(opts)}toJSON(){return this.toISO()}toString(){return this.toISO()}toMillis(){let sum=this.values.milliseconds??0;for(let unit of reverseUnits.slice(1))this.values?.[unit]&&(sum+=this.values[unit]*this.matrix[unit].milliseconds);return sum}valueOf(){return this.toMillis()}plus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration),result={};for(const k of orderedUnits)(util_hasOwnProperty(dur.values,k)||util_hasOwnProperty(this.values,k))&&(result[k]=dur.get(k)+this.get(k));return clone(this,{values:result},!0)}minus(duration){if(!this.isValid)return this;const dur=Duration.fromDurationLike(duration);return this.plus(dur.negate())}mapUnits(fn){if(!this.isValid)return this;const result={};for(const k of Object.keys(this.values))result[k]=asNumber(fn(this.values[k],k));return clone(this,{values:result},!0)}get(unit){return this[Duration.normalizeUnit(unit)]}set(values){if(!this.isValid)return this;return clone(this,{values:{...this.values,...normalizeObject(values,Duration.normalizeUnit)}})}reconfigure({locale,numberingSystem,conversionAccuracy,matrix}={}){return clone(this,{loc:this.loc.clone({locale,numberingSystem}),matrix,conversionAccuracy})}as(unit){return this.isValid?this.shiftTo(unit).get(unit):NaN}normalize(){if(!this.isValid)return this;const vals=this.toObject();return this.valueOf()>=0?(function normalizeValues(matrix,vals){reverseUnits.reduce(((previous,current)=>isUndefined(vals[current])?previous:(previous&&convert(matrix,vals,previous,vals,current),current)),null)}(this.matrix,vals),clone(this,{values:vals},!0)):this.negate().normalize().negate()}rescale(){if(!this.isValid)return this;return clone(this,{values:function removeZeroes(vals){const newVals={};for(const[key,value]of Object.entries(vals))0!==value&&(newVals[key]=value);return newVals}(this.normalize().shiftToAll().toObject())},!0)}shiftTo(...units){if(!this.isValid)return this;if(0===units.length)return this;units=units.map((u=>Duration.normalizeUnit(u)));const built={},accumulated={},vals=this.toObject();let lastUnit;for(const k of orderedUnits)if(units.indexOf(k)>=0){lastUnit=k;let own=0;for(const ak in accumulated)own+=this.matrix[ak][k]*accumulated[ak],accumulated[ak]=0;isNumber(vals[k])&&(own+=vals[k]);const i=Math.trunc(own);built[k]=i,accumulated[k]=(1e3*own-1e3*i)/1e3;for(const down in vals)orderedUnits.indexOf(down)>orderedUnits.indexOf(k)&&convert(this.matrix,vals,down,built,k)}else isNumber(vals[k])&&(accumulated[k]=vals[k]);for(const key in accumulated)0!==accumulated[key]&&(built[lastUnit]+=key===lastUnit?accumulated[key]:accumulated[key]/this.matrix[lastUnit][key]);return clone(this,{values:built},!0).normalize()}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const negated={};for(const k of Object.keys(this.values))negated[k]=0===this.values[k]?0:-this.values[k];return clone(this,{values:negated},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(other){if(!this.isValid||!other.isValid)return!1;if(!this.loc.equals(other.loc))return!1;for(const u of orderedUnits)if(v1=this.values[u],v2=other.values[u],!(void 0===v1||0===v1?void 0===v2||0===v2:v1===v2))return!1;var v1,v2;return!0}}class Interval{constructor(config){this.s=config.start,this.e=config.end,this.invalid=config.invalid||null,this.isLuxonInterval=!0}static invalid(reason,explanation=null){if(!reason)throw new InvalidArgumentError("need to specify a reason the Interval is invalid");const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidIntervalError(invalid);return new Interval({invalid})}static fromDateTimes(start,end){const builtStart=friendlyDateTime(start),builtEnd=friendlyDateTime(end),validateError=function validateStartEnd(start,end){return start&&start.isValid?end&&end.isValid?end<start?Interval.invalid("end before start",`The end of an interval must be after its start, but you had start=${start.toISO()} and end=${end.toISO()}`):null:Interval.invalid("missing or invalid end"):Interval.invalid("missing or invalid start")}(builtStart,builtEnd);return null==validateError?new Interval({start:builtStart,end:builtEnd}):validateError}static after(start,duration){const dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(start);return Interval.fromDateTimes(dt,dt.plus(dur))}static before(end,duration){const dur=Duration.fromDurationLike(duration),dt=friendlyDateTime(end);return Interval.fromDateTimes(dt.minus(dur),dt)}static fromISO(text,opts){const[s,e]=(text||"").split("/",2);if(s&&e){let start,startIsValid,end,endIsValid;try{start=DateTime.fromISO(s,opts),startIsValid=start.isValid}catch(e){startIsValid=!1}try{end=DateTime.fromISO(e,opts),endIsValid=end.isValid}catch(e){endIsValid=!1}if(startIsValid&&endIsValid)return Interval.fromDateTimes(start,end);if(startIsValid){const dur=Duration.fromISO(e,opts);if(dur.isValid)return Interval.after(start,dur)}else if(endIsValid){const dur=Duration.fromISO(s,opts);if(dur.isValid)return Interval.before(end,dur)}}return Interval.invalid("unparsable",`the input "${text}" can't be parsed as ISO 8601`)}static isInterval(o){return o&&o.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(unit="milliseconds"){return this.isValid?this.toDuration(unit).get(unit):NaN}count(unit="milliseconds"){if(!this.isValid)return NaN;const start=this.start.startOf(unit),end=this.end.startOf(unit);return Math.floor(end.diff(start,unit).get(unit))+(end.valueOf()!==this.end.valueOf())}hasSame(unit){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,unit))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(dateTime){return!!this.isValid&&this.s>dateTime}isBefore(dateTime){return!!this.isValid&&this.e<=dateTime}contains(dateTime){return!!this.isValid&&(this.s<=dateTime&&this.e>dateTime)}set({start,end}={}){return this.isValid?Interval.fromDateTimes(start||this.s,end||this.e):this}splitAt(...dateTimes){if(!this.isValid)return[];const sorted=dateTimes.map(friendlyDateTime).filter((d=>this.contains(d))).sort(),results=[];let{s}=this,i=0;for(;s<this.e;){const added=sorted[i]||this.e,next=+added>+this.e?this.e:added;results.push(Interval.fromDateTimes(s,next)),s=next,i+=1}return results}splitBy(duration){const dur=Duration.fromDurationLike(duration);if(!this.isValid||!dur.isValid||0===dur.as("milliseconds"))return[];let next,{s}=this,idx=1;const results=[];for(;s<this.e;){const added=this.start.plus(dur.mapUnits((x=>x*idx)));next=+added>+this.e?this.e:added,results.push(Interval.fromDateTimes(s,next)),s=next,idx+=1}return results}divideEqually(numberOfParts){return this.isValid?this.splitBy(this.length()/numberOfParts).slice(0,numberOfParts):[]}overlaps(other){return this.e>other.s&&this.s<other.e}abutsStart(other){return!!this.isValid&&+this.e==+other.s}abutsEnd(other){return!!this.isValid&&+other.e==+this.s}engulfs(other){return!!this.isValid&&(this.s<=other.s&&this.e>=other.e)}equals(other){return!(!this.isValid||!other.isValid)&&(this.s.equals(other.s)&&this.e.equals(other.e))}intersection(other){if(!this.isValid)return this;const s=this.s>other.s?this.s:other.s,e=this.e<other.e?this.e:other.e;return s>=e?null:Interval.fromDateTimes(s,e)}union(other){if(!this.isValid)return this;const s=this.s<other.s?this.s:other.s,e=this.e>other.e?this.e:other.e;return Interval.fromDateTimes(s,e)}static merge(intervals){const[found,final]=intervals.sort(((a,b)=>a.s-b.s)).reduce((([sofar,current],item)=>current?current.overlaps(item)||current.abutsStart(item)?[sofar,current.union(item)]:[sofar.concat([current]),item]:[sofar,item]),[[],null]);return final&&found.push(final),found}static xor(intervals){let start=null,currentCount=0;const results=[],ends=intervals.map((i=>[{time:i.s,type:"s"},{time:i.e,type:"e"}])),arr=Array.prototype.concat(...ends).sort(((a,b)=>a.time-b.time));for(const i of arr)currentCount+="s"===i.type?1:-1,1===currentCount?start=i.time:(start&&+start!=+i.time&&results.push(Interval.fromDateTimes(start,i.time)),start=null);return Interval.merge(results)}difference(...intervals){return Interval.xor([this].concat(intervals)).map((i=>this.intersection(i))).filter((i=>i&&!i.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()}  ${this.e.toISO()})`:"Invalid Interval"}toLocaleString(formatOpts=DATE_SHORT,opts={}){return this.isValid?Formatter.create(this.s.loc.clone(opts),formatOpts).formatInterval(this):"Invalid Interval"}toISO(opts){return this.isValid?`${this.s.toISO(opts)}/${this.e.toISO(opts)}`:"Invalid Interval"}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:"Invalid Interval"}toISOTime(opts){return this.isValid?`${this.s.toISOTime(opts)}/${this.e.toISOTime(opts)}`:"Invalid Interval"}toFormat(dateFormat,{separator="  "}={}){return this.isValid?`${this.s.toFormat(dateFormat)}${separator}${this.e.toFormat(dateFormat)}`:"Invalid Interval"}toDuration(unit,opts){return this.isValid?this.e.diff(this.s,unit,opts):Duration.invalid(this.invalidReason)}mapEndpoints(mapFn){return Interval.fromDateTimes(mapFn(this.s),mapFn(this.e))}}class Info{static hasDST(zone=Settings.defaultZone){const proto=DateTime.now().setZone(zone).set({month:12});return!zone.isUniversal&&proto.offset!==proto.set({month:6}).offset}static isValidIANAZone(zone){return IANAZone.isValidZone(zone)}static normalizeZone(input){return normalizeZone(input,Settings.defaultZone)}static months(length="long",{locale=null,numberingSystem=null,locObj=null,outputCalendar="gregory"}={}){return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length)}static monthsFormat(length="long",{locale=null,numberingSystem=null,locObj=null,outputCalendar="gregory"}={}){return(locObj||Locale.create(locale,numberingSystem,outputCalendar)).months(length,!0)}static weekdays(length="long",{locale=null,numberingSystem=null,locObj=null}={}){return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length)}static weekdaysFormat(length="long",{locale=null,numberingSystem=null,locObj=null}={}){return(locObj||Locale.create(locale,numberingSystem,null)).weekdays(length,!0)}static meridiems({locale=null}={}){return Locale.create(locale).meridiems()}static eras(length="short",{locale=null}={}){return Locale.create(locale,null,"gregory").eras(length)}static features(){return{relative:hasRelative()}}}function dayDiff(earlier,later){const utcDayStart=dt=>dt.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),ms=utcDayStart(later)-utcDayStart(earlier);return Math.floor(Duration.fromMillis(ms).as("days"))}function diff(earlier,later,units,opts){let[cursor,results,highWater,lowestOrder]=function highOrderDiffs(cursor,later,units){const differs=[["years",(a,b)=>b.year-a.year],["quarters",(a,b)=>b.quarter-a.quarter+4*(b.year-a.year)],["months",(a,b)=>b.month-a.month+12*(b.year-a.year)],["weeks",(a,b)=>{const days=dayDiff(a,b);return(days-days%7)/7}],["days",dayDiff]],results={},earlier=cursor;let lowestOrder,highWater;for(const[unit,differ]of differs)units.indexOf(unit)>=0&&(lowestOrder=unit,results[unit]=differ(cursor,later),highWater=earlier.plus(results),highWater>later?(results[unit]--,(cursor=earlier.plus(results))>later&&(highWater=cursor,results[unit]--,cursor=earlier.plus(results))):cursor=highWater);return[cursor,results,highWater,lowestOrder]}(earlier,later,units);const remainingMillis=later-cursor,lowerOrderUnits=units.filter((u=>["hours","minutes","seconds","milliseconds"].indexOf(u)>=0));0===lowerOrderUnits.length&&(highWater<later&&(highWater=cursor.plus({[lowestOrder]:1})),highWater!==cursor&&(results[lowestOrder]=(results[lowestOrder]||0)+remainingMillis/(highWater-cursor)));const duration=Duration.fromObject(results,opts);return lowerOrderUnits.length>0?Duration.fromMillis(remainingMillis,opts).shiftTo(...lowerOrderUnits).plus(duration):duration}const numberingSystems={arab:"[-]",arabext:"[-]",bali:"[-]",beng:"[-]",deva:"[-]",fullwide:"[-]",gujr:"[-]",hanidec:"[|||||||||]",khmr:"[-]",knda:"[-]",laoo:"[-]",limb:"[-]",mlym:"[-]",mong:"[-]",mymr:"[-]",orya:"[-]",tamldec:"[-]",telu:"[-]",thai:"[-]",tibt:"[-]",latn:"\\d"},numberingSystemsUTF16={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},hanidecChars=numberingSystems.hanidec.replace(/[\[|\]]/g,"").split("");function digitRegex({numberingSystem},append=""){return new RegExp(`${numberingSystems[numberingSystem||"latn"]}${append}`)}const MISSING_FTP="missing Intl.DateTimeFormat.formatToParts support";function intUnit(regex,post=(i=>i)){return{regex,deser:([s])=>post(function parseDigits(str){let value=parseInt(str,10);if(isNaN(value)){value="";for(let i=0;i<str.length;i++){const code=str.charCodeAt(i);if(-1!==str[i].search(numberingSystems.hanidec))value+=hanidecChars.indexOf(str[i]);else for(const key in numberingSystemsUTF16){const[min,max]=numberingSystemsUTF16[key];code>=min&&code<=max&&(value+=code-min)}}return parseInt(value,10)}return value}(s))}}const spaceOrNBSP=`[ ${String.fromCharCode(160)}]`,spaceOrNBSPRegExp=new RegExp(spaceOrNBSP,"g");function fixListRegex(s){return s.replace(/\./g,"\\.?").replace(spaceOrNBSPRegExp,spaceOrNBSP)}function stripInsensitivities(s){return s.replace(/\./g,"").replace(spaceOrNBSPRegExp," ").toLowerCase()}function oneOf(strings,startIndex){return null===strings?null:{regex:RegExp(strings.map(fixListRegex).join("|")),deser:([s])=>strings.findIndex((i=>stripInsensitivities(s)===stripInsensitivities(i)))+startIndex}}function offset(regex,groups){return{regex,deser:([,h,m])=>signedOffset(h,m),groups}}function simple(regex){return{regex,deser:([s])=>s}}const partTypeStyleToTokenVal={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};let dummyDateTimeCache=null;function expandMacroTokens(tokens,locale){return Array.prototype.concat(...tokens.map((t=>function maybeExpandMacroToken(token,locale){if(token.literal)return token;const tokens=formatOptsToTokens(Formatter.macroTokenToFormatOpts(token.val),locale);return null==tokens||tokens.includes(void 0)?token:tokens}(t,locale))))}function explainFromTokens(locale,input,format){const tokens=expandMacroTokens(Formatter.parseFormat(format),locale),units=tokens.map((t=>function unitForToken(token,loc){const one=digitRegex(loc),two=digitRegex(loc,"{2}"),three=digitRegex(loc,"{3}"),four=digitRegex(loc,"{4}"),six=digitRegex(loc,"{6}"),oneOrTwo=digitRegex(loc,"{1,2}"),oneToThree=digitRegex(loc,"{1,3}"),oneToSix=digitRegex(loc,"{1,6}"),oneToNine=digitRegex(loc,"{1,9}"),twoToFour=digitRegex(loc,"{2,4}"),fourToSix=digitRegex(loc,"{4,6}"),literal=t=>{return{regex:RegExp((value=t.val,value.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&"))),deser:([s])=>s,literal:!0};var value},unit=(t=>{if(token.literal)return literal(t);switch(t.val){case"G":return oneOf(loc.eras("short"),0);case"GG":return oneOf(loc.eras("long"),0);case"y":return intUnit(oneToSix);case"yy":case"kk":return intUnit(twoToFour,untruncateYear);case"yyyy":case"kkkk":return intUnit(four);case"yyyyy":return intUnit(fourToSix);case"yyyyyy":return intUnit(six);case"M":case"L":case"d":case"H":case"h":case"m":case"q":case"s":case"W":return intUnit(oneOrTwo);case"MM":case"LL":case"dd":case"HH":case"hh":case"mm":case"qq":case"ss":case"WW":return intUnit(two);case"MMM":return oneOf(loc.months("short",!0),1);case"MMMM":return oneOf(loc.months("long",!0),1);case"LLL":return oneOf(loc.months("short",!1),1);case"LLLL":return oneOf(loc.months("long",!1),1);case"o":case"S":return intUnit(oneToThree);case"ooo":case"SSS":return intUnit(three);case"u":return simple(oneToNine);case"uu":return simple(oneOrTwo);case"uuu":case"E":case"c":return intUnit(one);case"a":return oneOf(loc.meridiems(),0);case"EEE":return oneOf(loc.weekdays("short",!1),1);case"EEEE":return oneOf(loc.weekdays("long",!1),1);case"ccc":return oneOf(loc.weekdays("short",!0),1);case"cccc":return oneOf(loc.weekdays("long",!0),1);case"Z":case"ZZ":return offset(new RegExp(`([+-]${oneOrTwo.source})(?::(${two.source}))?`),2);case"ZZZ":return offset(new RegExp(`([+-]${oneOrTwo.source})(${two.source})?`),2);case"z":return simple(/[a-z_+-/]{1,256}?/i);case" ":return simple(/[^\S\n\r]/);default:return literal(t)}})(token)||{invalidReason:MISSING_FTP};return unit.token=token,unit}(t,locale))),disqualifyingUnit=units.find((t=>t.invalidReason));if(disqualifyingUnit)return{input,tokens,invalidReason:disqualifyingUnit.invalidReason};{const[regexString,handlers]=function buildRegex(units){return[`^${units.map((u=>u.regex)).reduce(((f,r)=>`${f}(${r.source})`),"")}$`,units]}(units),regex=RegExp(regexString,"i"),[rawMatches,matches]=function match(input,regex,handlers){const matches=input.match(regex);if(matches){const all={};let matchIndex=1;for(const i in handlers)if(util_hasOwnProperty(handlers,i)){const h=handlers[i],groups=h.groups?h.groups+1:1;!h.literal&&h.token&&(all[h.token.val[0]]=h.deser(matches.slice(matchIndex,matchIndex+groups))),matchIndex+=groups}return[matches,all]}return[matches,{}]}(input,regex,handlers),[result,zone,specificOffset]=matches?function dateTimeFromMatches(matches){let specificOffset,zone=null;return isUndefined(matches.z)||(zone=IANAZone.create(matches.z)),isUndefined(matches.Z)||(zone||(zone=new FixedOffsetZone(matches.Z)),specificOffset=matches.Z),isUndefined(matches.q)||(matches.M=3*(matches.q-1)+1),isUndefined(matches.h)||(matches.h<12&&1===matches.a?matches.h+=12:12===matches.h&&0===matches.a&&(matches.h=0)),0===matches.G&&matches.y&&(matches.y=-matches.y),isUndefined(matches.u)||(matches.S=parseMillis(matches.u)),[Object.keys(matches).reduce(((r,k)=>{const f=(token=>{switch(token){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}})(k);return f&&(r[f]=matches[k]),r}),{}),zone,specificOffset]}(matches):[null,null,void 0];if(util_hasOwnProperty(matches,"a")&&util_hasOwnProperty(matches,"H"))throw new ConflictingSpecificationError("Can't include meridiem when specifying 24-hour format");return{input,tokens,regex,rawMatches,matches,result,zone,specificOffset}}}function formatOptsToTokens(formatOpts,locale){if(!formatOpts)return null;const df=Formatter.create(locale,formatOpts).dtFormatter(function getDummyDateTime(){return dummyDateTimeCache||(dummyDateTimeCache=DateTime.fromMillis(1555555555555)),dummyDateTimeCache}()),parts=df.formatToParts(),resolvedOpts=df.resolvedOptions();return parts.map((p=>function tokenForPart(part,formatOpts,resolvedOpts){const{type,value}=part;if("literal"===type){const isSpace=/^\s+$/.test(value);return{literal:!isSpace,val:isSpace?" ":value}}const style=formatOpts[type];let actualType=type;"hour"===type&&(actualType=null!=formatOpts.hour12?formatOpts.hour12?"hour12":"hour24":null!=formatOpts.hourCycle?"h11"===formatOpts.hourCycle||"h12"===formatOpts.hourCycle?"hour12":"hour24":resolvedOpts.hour12?"hour12":"hour24");let val=partTypeStyleToTokenVal[actualType];if("object"==typeof val&&(val=val[style]),val)return{literal:!1,val}}(p,formatOpts,resolvedOpts)))}const nonLeapLadder=[0,31,59,90,120,151,181,212,243,273,304,334],leapLadder=[0,31,60,91,121,152,182,213,244,274,305,335];function unitOutOfRange(unit,value){return new Invalid("unit out of range",`you specified ${value} (of type ${typeof value}) as a ${unit}, which is invalid`)}function dayOfWeek(year,month,day){const d=new Date(Date.UTC(year,month-1,day));year<100&&year>=0&&d.setUTCFullYear(d.getUTCFullYear()-1900);const js=d.getUTCDay();return 0===js?7:js}function computeOrdinal(year,month,day){return day+(isLeapYear(year)?leapLadder:nonLeapLadder)[month-1]}function uncomputeOrdinal(year,ordinal){const table=isLeapYear(year)?leapLadder:nonLeapLadder,month0=table.findIndex((i=>i<ordinal));return{month:month0+1,day:ordinal-table[month0]}}function gregorianToWeek(gregObj){const{year,month,day}=gregObj,ordinal=computeOrdinal(year,month,day),weekday=dayOfWeek(year,month,day);let weekYear,weekNumber=Math.floor((ordinal-weekday+10)/7);return weekNumber<1?(weekYear=year-1,weekNumber=weeksInWeekYear(weekYear)):weekNumber>weeksInWeekYear(year)?(weekYear=year+1,weekNumber=1):weekYear=year,{weekYear,weekNumber,weekday,...timeObject(gregObj)}}function weekToGregorian(weekData){const{weekYear,weekNumber,weekday}=weekData,weekdayOfJan4=dayOfWeek(weekYear,1,4),yearInDays=daysInYear(weekYear);let year,ordinal=7*weekNumber+weekday-weekdayOfJan4-3;ordinal<1?(year=weekYear-1,ordinal+=daysInYear(year)):ordinal>yearInDays?(year=weekYear+1,ordinal-=daysInYear(weekYear)):year=weekYear;const{month,day}=uncomputeOrdinal(year,ordinal);return{year,month,day,...timeObject(weekData)}}function gregorianToOrdinal(gregData){const{year,month,day}=gregData;return{year,ordinal:computeOrdinal(year,month,day),...timeObject(gregData)}}function ordinalToGregorian(ordinalData){const{year,ordinal}=ordinalData,{month,day}=uncomputeOrdinal(year,ordinal);return{year,month,day,...timeObject(ordinalData)}}function hasInvalidGregorianData(obj){const validYear=isInteger(obj.year),validMonth=integerBetween(obj.month,1,12),validDay=integerBetween(obj.day,1,daysInMonth(obj.year,obj.month));return validYear?validMonth?!validDay&&unitOutOfRange("day",obj.day):unitOutOfRange("month",obj.month):unitOutOfRange("year",obj.year)}function hasInvalidTimeData(obj){const{hour,minute,second,millisecond}=obj,validHour=integerBetween(hour,0,23)||24===hour&&0===minute&&0===second&&0===millisecond,validMinute=integerBetween(minute,0,59),validSecond=integerBetween(second,0,59),validMillisecond=integerBetween(millisecond,0,999);return validHour?validMinute?validSecond?!validMillisecond&&unitOutOfRange("millisecond",millisecond):unitOutOfRange("second",second):unitOutOfRange("minute",minute):unitOutOfRange("hour",hour)}function unsupportedZone(zone){return new Invalid("unsupported zone",`the zone "${zone.name}" is not supported`)}function possiblyCachedWeekData(dt){return null===dt.weekData&&(dt.weekData=gregorianToWeek(dt.c)),dt.weekData}function datetime_clone(inst,alts){const current={ts:inst.ts,zone:inst.zone,c:inst.c,o:inst.o,loc:inst.loc,invalid:inst.invalid};return new DateTime({...current,...alts,old:current})}function fixOffset(localTS,o,tz){let utcGuess=localTS-60*o*1e3;const o2=tz.offset(utcGuess);if(o===o2)return[utcGuess,o];utcGuess-=60*(o2-o)*1e3;const o3=tz.offset(utcGuess);return o2===o3?[utcGuess,o2]:[localTS-60*Math.min(o2,o3)*1e3,Math.max(o2,o3)]}function tsToObj(ts,offset){const d=new Date(ts+=60*offset*1e3);return{year:d.getUTCFullYear(),month:d.getUTCMonth()+1,day:d.getUTCDate(),hour:d.getUTCHours(),minute:d.getUTCMinutes(),second:d.getUTCSeconds(),millisecond:d.getUTCMilliseconds()}}function objToTS(obj,offset,zone){return fixOffset(objToLocalTS(obj),offset,zone)}function adjustTime(inst,dur){const oPre=inst.o,year=inst.c.year+Math.trunc(dur.years),month=inst.c.month+Math.trunc(dur.months)+3*Math.trunc(dur.quarters),c={...inst.c,year,month,day:Math.min(inst.c.day,daysInMonth(year,month))+Math.trunc(dur.days)+7*Math.trunc(dur.weeks)},millisToAdd=Duration.fromObject({years:dur.years-Math.trunc(dur.years),quarters:dur.quarters-Math.trunc(dur.quarters),months:dur.months-Math.trunc(dur.months),weeks:dur.weeks-Math.trunc(dur.weeks),days:dur.days-Math.trunc(dur.days),hours:dur.hours,minutes:dur.minutes,seconds:dur.seconds,milliseconds:dur.milliseconds}).as("milliseconds"),localTS=objToLocalTS(c);let[ts,o]=fixOffset(localTS,oPre,inst.zone);return 0!==millisToAdd&&(ts+=millisToAdd,o=inst.zone.offset(ts)),{ts,o}}function parseDataToDateTime(parsed,parsedZone,opts,format,text,specificOffset){const{setZone,zone}=opts;if(parsed&&0!==Object.keys(parsed).length||parsedZone){const interpretationZone=parsedZone||zone,inst=DateTime.fromObject(parsed,{...opts,zone:interpretationZone,specificOffset});return setZone?inst:inst.setZone(zone)}return DateTime.invalid(new Invalid("unparsable",`the input "${text}" can't be parsed as ${format}`))}function toTechFormat(dt,format,allowZ=!0){return dt.isValid?Formatter.create(Locale.create("en-US"),{allowZ,forceSimple:!0}).formatDateTimeFromString(dt,format):null}function toISODate(o,extended){const longFormat=o.c.year>9999||o.c.year<0;let c="";return longFormat&&o.c.year>=0&&(c+="+"),c+=padStart(o.c.year,longFormat?6:4),extended?(c+="-",c+=padStart(o.c.month),c+="-",c+=padStart(o.c.day)):(c+=padStart(o.c.month),c+=padStart(o.c.day)),c}function toISOTime(o,extended,suppressSeconds,suppressMilliseconds,includeOffset,extendedZone){let c=padStart(o.c.hour);return extended?(c+=":",c+=padStart(o.c.minute),0===o.c.millisecond&&0===o.c.second&&suppressSeconds||(c+=":")):c+=padStart(o.c.minute),0===o.c.millisecond&&0===o.c.second&&suppressSeconds||(c+=padStart(o.c.second),0===o.c.millisecond&&suppressMilliseconds||(c+=".",c+=padStart(o.c.millisecond,3))),includeOffset&&(o.isOffsetFixed&&0===o.offset&&!extendedZone?c+="Z":o.o<0?(c+="-",c+=padStart(Math.trunc(-o.o/60)),c+=":",c+=padStart(Math.trunc(-o.o%60))):(c+="+",c+=padStart(Math.trunc(o.o/60)),c+=":",c+=padStart(Math.trunc(o.o%60)))),extendedZone&&(c+="["+o.zone.ianaName+"]"),c}const defaultUnitValues={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},defaultWeekUnitValues={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},defaultOrdinalUnitValues={ordinal:1,hour:0,minute:0,second:0,millisecond:0},datetime_orderedUnits=["year","month","day","hour","minute","second","millisecond"],orderedWeekUnits=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],orderedOrdinalUnits=["year","ordinal","hour","minute","second","millisecond"];function normalizeUnit(unit){const normalized={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[unit.toLowerCase()];if(!normalized)throw new InvalidUnitError(unit);return normalized}function quickDT(obj,opts){const zone=normalizeZone(opts.zone,Settings.defaultZone),loc=Locale.fromObject(opts),tsNow=Settings.now();let ts,o;if(isUndefined(obj.year))ts=tsNow;else{for(const u of datetime_orderedUnits)isUndefined(obj[u])&&(obj[u]=defaultUnitValues[u]);const invalid=hasInvalidGregorianData(obj)||hasInvalidTimeData(obj);if(invalid)return DateTime.invalid(invalid);const offsetProvis=zone.offset(tsNow);[ts,o]=objToTS(obj,offsetProvis,zone)}return new DateTime({ts,zone,loc,o})}function diffRelative(start,end,opts){const round=!!isUndefined(opts.round)||opts.round,format=(c,unit)=>{c=roundTo(c,round||opts.calendary?0:2,!0);return end.loc.clone(opts).relFormatter(opts).format(c,unit)},differ=unit=>opts.calendary?end.hasSame(start,unit)?0:end.startOf(unit).diff(start.startOf(unit),unit).get(unit):end.diff(start,unit).get(unit);if(opts.unit)return format(differ(opts.unit),opts.unit);for(const unit of opts.units){const count=differ(unit);if(Math.abs(count)>=1)return format(count,unit)}return format(start>end?-0:0,opts.units[opts.units.length-1])}function lastOpts(argList){let args,opts={};return argList.length>0&&"object"==typeof argList[argList.length-1]?(opts=argList[argList.length-1],args=Array.from(argList).slice(0,argList.length-1)):args=Array.from(argList),[opts,args]}class DateTime{constructor(config){const zone=config.zone||Settings.defaultZone;let invalid=config.invalid||(Number.isNaN(config.ts)?new Invalid("invalid input"):null)||(zone.isValid?null:unsupportedZone(zone));this.ts=isUndefined(config.ts)?Settings.now():config.ts;let c=null,o=null;if(!invalid){if(config.old&&config.old.ts===this.ts&&config.old.zone.equals(zone))[c,o]=[config.old.c,config.old.o];else{const ot=zone.offset(this.ts);c=tsToObj(this.ts,ot),invalid=Number.isNaN(c.year)?new Invalid("invalid input"):null,c=invalid?null:c,o=invalid?null:ot}}this._zone=zone,this.loc=config.loc||Locale.create(),this.invalid=invalid,this.weekData=null,this.c=c,this.o=o,this.isLuxonDateTime=!0}static now(){return new DateTime({})}static local(){const[opts,args]=lastOpts(arguments),[year,month,day,hour,minute,second,millisecond]=args;return quickDT({year,month,day,hour,minute,second,millisecond},opts)}static utc(){const[opts,args]=lastOpts(arguments),[year,month,day,hour,minute,second,millisecond]=args;return opts.zone=FixedOffsetZone.utcInstance,quickDT({year,month,day,hour,minute,second,millisecond},opts)}static fromJSDate(date,options={}){const ts=function isDate(o){return"[object Date]"===Object.prototype.toString.call(o)}(date)?date.valueOf():NaN;if(Number.isNaN(ts))return DateTime.invalid("invalid input");const zoneToUse=normalizeZone(options.zone,Settings.defaultZone);return zoneToUse.isValid?new DateTime({ts,zone:zoneToUse,loc:Locale.fromObject(options)}):DateTime.invalid(unsupportedZone(zoneToUse))}static fromMillis(milliseconds,options={}){if(isNumber(milliseconds))return milliseconds<-864e13||milliseconds>864e13?DateTime.invalid("Timestamp out of range"):new DateTime({ts:milliseconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)});throw new InvalidArgumentError(`fromMillis requires a numerical input, but received a ${typeof milliseconds} with value ${milliseconds}`)}static fromSeconds(seconds,options={}){if(isNumber(seconds))return new DateTime({ts:1e3*seconds,zone:normalizeZone(options.zone,Settings.defaultZone),loc:Locale.fromObject(options)});throw new InvalidArgumentError("fromSeconds requires a numerical input")}static fromObject(obj,opts={}){obj=obj||{};const zoneToUse=normalizeZone(opts.zone,Settings.defaultZone);if(!zoneToUse.isValid)return DateTime.invalid(unsupportedZone(zoneToUse));const tsNow=Settings.now(),offsetProvis=isUndefined(opts.specificOffset)?zoneToUse.offset(tsNow):opts.specificOffset,normalized=normalizeObject(obj,normalizeUnit),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber,loc=Locale.fromObject(opts);if((containsGregor||containsOrdinal)&&definiteWeekDef)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(containsGregorMD&&containsOrdinal)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");const useWeekData=definiteWeekDef||normalized.weekday&&!containsGregor;let units,defaultValues,objNow=tsToObj(tsNow,offsetProvis);useWeekData?(units=orderedWeekUnits,defaultValues=defaultWeekUnitValues,objNow=gregorianToWeek(objNow)):containsOrdinal?(units=orderedOrdinalUnits,defaultValues=defaultOrdinalUnitValues,objNow=gregorianToOrdinal(objNow)):(units=datetime_orderedUnits,defaultValues=defaultUnitValues);let foundFirst=!1;for(const u of units){isUndefined(normalized[u])?normalized[u]=foundFirst?defaultValues[u]:objNow[u]:foundFirst=!0}const higherOrderInvalid=useWeekData?function hasInvalidWeekData(obj){const validYear=isInteger(obj.weekYear),validWeek=integerBetween(obj.weekNumber,1,weeksInWeekYear(obj.weekYear)),validWeekday=integerBetween(obj.weekday,1,7);return validYear?validWeek?!validWeekday&&unitOutOfRange("weekday",obj.weekday):unitOutOfRange("week",obj.week):unitOutOfRange("weekYear",obj.weekYear)}(normalized):containsOrdinal?function hasInvalidOrdinalData(obj){const validYear=isInteger(obj.year),validOrdinal=integerBetween(obj.ordinal,1,daysInYear(obj.year));return validYear?!validOrdinal&&unitOutOfRange("ordinal",obj.ordinal):unitOutOfRange("year",obj.year)}(normalized):hasInvalidGregorianData(normalized),invalid=higherOrderInvalid||hasInvalidTimeData(normalized);if(invalid)return DateTime.invalid(invalid);const gregorian=useWeekData?weekToGregorian(normalized):containsOrdinal?ordinalToGregorian(normalized):normalized,[tsFinal,offsetFinal]=objToTS(gregorian,offsetProvis,zoneToUse),inst=new DateTime({ts:tsFinal,zone:zoneToUse,o:offsetFinal,loc});return normalized.weekday&&containsGregor&&obj.weekday!==inst.weekday?DateTime.invalid("mismatched weekday",`you can't specify both a weekday of ${normalized.weekday} and a date of ${inst.toISO()}`):inst}static fromISO(text,opts={}){const[vals,parsedZone]=function parseISODate(s){return parse(s,[isoYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[isoWeekWithTimeExtensionRegex,extractISOWeekTimeAndOffset],[isoOrdinalWithTimeExtensionRegex,extractISOOrdinalDateAndTime],[isoTimeCombinedRegex,extractISOTimeAndOffset])}(text);return parseDataToDateTime(vals,parsedZone,opts,"ISO 8601",text)}static fromRFC2822(text,opts={}){const[vals,parsedZone]=function parseRFC2822Date(s){return parse(function preprocessRFC2822(s){return s.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}(s),[rfc2822,extractRFC2822])}(text);return parseDataToDateTime(vals,parsedZone,opts,"RFC 2822",text)}static fromHTTP(text,opts={}){const[vals,parsedZone]=function parseHTTPDate(s){return parse(s,[rfc1123,extractRFC1123Or850],[rfc850,extractRFC1123Or850],[ascii,extractASCII])}(text);return parseDataToDateTime(vals,parsedZone,opts,"HTTP",opts)}static fromFormat(text,fmt,opts={}){if(isUndefined(text)||isUndefined(fmt))throw new InvalidArgumentError("fromFormat requires an input string and a format");const{locale=null,numberingSystem=null}=opts,localeToUse=Locale.fromOpts({locale,numberingSystem,defaultToEN:!0}),[vals,parsedZone,specificOffset,invalid]=function parseFromTokens(locale,input,format){const{result,zone,specificOffset,invalidReason}=explainFromTokens(locale,input,format);return[result,zone,specificOffset,invalidReason]}(localeToUse,text,fmt);return invalid?DateTime.invalid(invalid):parseDataToDateTime(vals,parsedZone,opts,`format ${fmt}`,text,specificOffset)}static fromString(text,fmt,opts={}){return DateTime.fromFormat(text,fmt,opts)}static fromSQL(text,opts={}){const[vals,parsedZone]=function parseSQL(s){return parse(s,[sqlYmdWithTimeExtensionRegex,extractISOYmdTimeAndOffset],[sqlTimeCombinedRegex,extractISOTimeOffsetAndIANAZone])}(text);return parseDataToDateTime(vals,parsedZone,opts,"SQL",text)}static invalid(reason,explanation=null){if(!reason)throw new InvalidArgumentError("need to specify a reason the DateTime is invalid");const invalid=reason instanceof Invalid?reason:new Invalid(reason,explanation);if(Settings.throwOnInvalid)throw new InvalidDateTimeError(invalid);return new DateTime({invalid})}static isDateTime(o){return o&&o.isLuxonDateTime||!1}static parseFormatForOpts(formatOpts,localeOpts={}){const tokenList=formatOptsToTokens(formatOpts,Locale.fromObject(localeOpts));return tokenList?tokenList.map((t=>t?t.val:null)).join(""):null}static expandFormat(fmt,localeOpts={}){return expandMacroTokens(Formatter.parseFormat(fmt),Locale.fromObject(localeOpts)).map((t=>t.val)).join("")}get(unit){return this[unit]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?possiblyCachedWeekData(this).weekYear:NaN}get weekNumber(){return this.isValid?possiblyCachedWeekData(this).weekNumber:NaN}get weekday(){return this.isValid?possiblyCachedWeekData(this).weekday:NaN}get ordinal(){return this.isValid?gregorianToOrdinal(this.c).ordinal:NaN}get monthShort(){return this.isValid?Info.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Info.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Info.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Info.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const localTS=objToLocalTS(this.c),oEarlier=this.zone.offset(localTS-864e5),oLater=this.zone.offset(localTS+864e5),o1=this.zone.offset(localTS-6e4*oEarlier),o2=this.zone.offset(localTS-6e4*oLater);if(o1===o2)return[this];const ts1=localTS-6e4*o1,ts2=localTS-6e4*o2,c1=tsToObj(ts1,o1),c2=tsToObj(ts2,o2);return c1.hour===c2.hour&&c1.minute===c2.minute&&c1.second===c2.second&&c1.millisecond===c2.millisecond?[datetime_clone(this,{ts:ts1}),datetime_clone(this,{ts:ts2})]:[this]}get isInLeapYear(){return isLeapYear(this.year)}get daysInMonth(){return daysInMonth(this.year,this.month)}get daysInYear(){return this.isValid?daysInYear(this.year):NaN}get weeksInWeekYear(){return this.isValid?weeksInWeekYear(this.weekYear):NaN}resolvedLocaleOptions(opts={}){const{locale,numberingSystem,calendar}=Formatter.create(this.loc.clone(opts),opts).resolvedOptions(this);return{locale,numberingSystem,outputCalendar:calendar}}toUTC(offset=0,opts={}){return this.setZone(FixedOffsetZone.instance(offset),opts)}toLocal(){return this.setZone(Settings.defaultZone)}setZone(zone,{keepLocalTime=!1,keepCalendarTime=!1}={}){if((zone=normalizeZone(zone,Settings.defaultZone)).equals(this.zone))return this;if(zone.isValid){let newTS=this.ts;if(keepLocalTime||keepCalendarTime){const offsetGuess=zone.offset(this.ts),asObj=this.toObject();[newTS]=objToTS(asObj,offsetGuess,zone)}return datetime_clone(this,{ts:newTS,zone})}return DateTime.invalid(unsupportedZone(zone))}reconfigure({locale,numberingSystem,outputCalendar}={}){return datetime_clone(this,{loc:this.loc.clone({locale,numberingSystem,outputCalendar})})}setLocale(locale){return this.reconfigure({locale})}set(values){if(!this.isValid)return this;const normalized=normalizeObject(values,normalizeUnit),settingWeekStuff=!isUndefined(normalized.weekYear)||!isUndefined(normalized.weekNumber)||!isUndefined(normalized.weekday),containsOrdinal=!isUndefined(normalized.ordinal),containsGregorYear=!isUndefined(normalized.year),containsGregorMD=!isUndefined(normalized.month)||!isUndefined(normalized.day),containsGregor=containsGregorYear||containsGregorMD,definiteWeekDef=normalized.weekYear||normalized.weekNumber;if((containsGregor||containsOrdinal)&&definiteWeekDef)throw new ConflictingSpecificationError("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(containsGregorMD&&containsOrdinal)throw new ConflictingSpecificationError("Can't mix ordinal dates with month/day");let mixed;settingWeekStuff?mixed=weekToGregorian({...gregorianToWeek(this.c),...normalized}):isUndefined(normalized.ordinal)?(mixed={...this.toObject(),...normalized},isUndefined(normalized.day)&&(mixed.day=Math.min(daysInMonth(mixed.year,mixed.month),mixed.day))):mixed=ordinalToGregorian({...gregorianToOrdinal(this.c),...normalized});const[ts,o]=objToTS(mixed,this.o,this.zone);return datetime_clone(this,{ts,o})}plus(duration){if(!this.isValid)return this;return datetime_clone(this,adjustTime(this,Duration.fromDurationLike(duration)))}minus(duration){if(!this.isValid)return this;return datetime_clone(this,adjustTime(this,Duration.fromDurationLike(duration).negate()))}startOf(unit){if(!this.isValid)return this;const o={},normalizedUnit=Duration.normalizeUnit(unit);switch(normalizedUnit){case"years":o.month=1;case"quarters":case"months":o.day=1;case"weeks":case"days":o.hour=0;case"hours":o.minute=0;case"minutes":o.second=0;case"seconds":o.millisecond=0}if("weeks"===normalizedUnit&&(o.weekday=1),"quarters"===normalizedUnit){const q=Math.ceil(this.month/3);o.month=3*(q-1)+1}return this.set(o)}endOf(unit){return this.isValid?this.plus({[unit]:1}).startOf(unit).minus(1):this}toFormat(fmt,opts={}){return this.isValid?Formatter.create(this.loc.redefaultToEN(opts)).formatDateTimeFromString(this,fmt):"Invalid DateTime"}toLocaleString(formatOpts=DATE_SHORT,opts={}){return this.isValid?Formatter.create(this.loc.clone(opts),formatOpts).formatDateTime(this):"Invalid DateTime"}toLocaleParts(opts={}){return this.isValid?Formatter.create(this.loc.clone(opts),opts).formatDateTimeParts(this):[]}toISO({format="extended",suppressSeconds=!1,suppressMilliseconds=!1,includeOffset=!0,extendedZone=!1}={}){if(!this.isValid)return null;const ext="extended"===format;let c=toISODate(this,ext);return c+="T",c+=toISOTime(this,ext,suppressSeconds,suppressMilliseconds,includeOffset,extendedZone),c}toISODate({format="extended"}={}){return this.isValid?toISODate(this,"extended"===format):null}toISOWeekDate(){return toTechFormat(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds=!1,suppressSeconds=!1,includeOffset=!0,includePrefix=!1,extendedZone=!1,format="extended"}={}){if(!this.isValid)return null;return(includePrefix?"T":"")+toISOTime(this,"extended"===format,suppressSeconds,suppressMilliseconds,includeOffset,extendedZone)}toRFC2822(){return toTechFormat(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return toTechFormat(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?toISODate(this,!0):null}toSQLTime({includeOffset=!0,includeZone=!1,includeOffsetSpace=!0}={}){let fmt="HH:mm:ss.SSS";return(includeZone||includeOffset)&&(includeOffsetSpace&&(fmt+=" "),includeZone?fmt+="z":includeOffset&&(fmt+="ZZ")),toTechFormat(this,fmt,!0)}toSQL(opts={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(opts)}`:null}toString(){return this.isValid?this.toISO():"Invalid DateTime"}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(opts={}){if(!this.isValid)return{};const base={...this.c};return opts.includeConfig&&(base.outputCalendar=this.outputCalendar,base.numberingSystem=this.loc.numberingSystem,base.locale=this.loc.locale),base}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(otherDateTime,unit="milliseconds",opts={}){if(!this.isValid||!otherDateTime.isValid)return Duration.invalid("created by diffing an invalid DateTime");const durOpts={locale:this.locale,numberingSystem:this.numberingSystem,...opts},units=function maybeArray(thing){return Array.isArray(thing)?thing:[thing]}(unit).map(Duration.normalizeUnit),otherIsLater=otherDateTime.valueOf()>this.valueOf(),diffed=diff(otherIsLater?this:otherDateTime,otherIsLater?otherDateTime:this,units,durOpts);return otherIsLater?diffed.negate():diffed}diffNow(unit="milliseconds",opts={}){return this.diff(DateTime.now(),unit,opts)}until(otherDateTime){return this.isValid?Interval.fromDateTimes(this,otherDateTime):this}hasSame(otherDateTime,unit){if(!this.isValid)return!1;const inputMs=otherDateTime.valueOf(),adjustedToZone=this.setZone(otherDateTime.zone,{keepLocalTime:!0});return adjustedToZone.startOf(unit)<=inputMs&&inputMs<=adjustedToZone.endOf(unit)}equals(other){return this.isValid&&other.isValid&&this.valueOf()===other.valueOf()&&this.zone.equals(other.zone)&&this.loc.equals(other.loc)}toRelative(options={}){if(!this.isValid)return null;const base=options.base||DateTime.fromObject({},{zone:this.zone}),padding=options.padding?this<base?-options.padding:options.padding:0;let units=["years","months","days","hours","minutes","seconds"],unit=options.unit;return Array.isArray(options.unit)&&(units=options.unit,unit=void 0),diffRelative(base,this.plus(padding),{...options,numeric:"always",units,unit})}toRelativeCalendar(options={}){return this.isValid?diffRelative(options.base||DateTime.fromObject({},{zone:this.zone}),this,{...options,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...dateTimes){if(!dateTimes.every(DateTime.isDateTime))throw new InvalidArgumentError("min requires all arguments be DateTimes");return bestBy(dateTimes,(i=>i.valueOf()),Math.min)}static max(...dateTimes){if(!dateTimes.every(DateTime.isDateTime))throw new InvalidArgumentError("max requires all arguments be DateTimes");return bestBy(dateTimes,(i=>i.valueOf()),Math.max)}static fromFormatExplain(text,fmt,options={}){const{locale=null,numberingSystem=null}=options;return explainFromTokens(Locale.fromOpts({locale,numberingSystem,defaultToEN:!0}),text,fmt)}static fromStringExplain(text,fmt,options={}){return DateTime.fromFormatExplain(text,fmt,options)}static get DATE_SHORT(){return DATE_SHORT}static get DATE_MED(){return DATE_MED}static get DATE_MED_WITH_WEEKDAY(){return DATE_MED_WITH_WEEKDAY}static get DATE_FULL(){return DATE_FULL}static get DATE_HUGE(){return DATE_HUGE}static get TIME_SIMPLE(){return TIME_SIMPLE}static get TIME_WITH_SECONDS(){return TIME_WITH_SECONDS}static get TIME_WITH_SHORT_OFFSET(){return TIME_WITH_SHORT_OFFSET}static get TIME_WITH_LONG_OFFSET(){return TIME_WITH_LONG_OFFSET}static get TIME_24_SIMPLE(){return TIME_24_SIMPLE}static get TIME_24_WITH_SECONDS(){return TIME_24_WITH_SECONDS}static get TIME_24_WITH_SHORT_OFFSET(){return TIME_24_WITH_SHORT_OFFSET}static get TIME_24_WITH_LONG_OFFSET(){return TIME_24_WITH_LONG_OFFSET}static get DATETIME_SHORT(){return DATETIME_SHORT}static get DATETIME_SHORT_WITH_SECONDS(){return DATETIME_SHORT_WITH_SECONDS}static get DATETIME_MED(){return DATETIME_MED}static get DATETIME_MED_WITH_SECONDS(){return DATETIME_MED_WITH_SECONDS}static get DATETIME_MED_WITH_WEEKDAY(){return DATETIME_MED_WITH_WEEKDAY}static get DATETIME_FULL(){return DATETIME_FULL}static get DATETIME_FULL_WITH_SECONDS(){return DATETIME_FULL_WITH_SECONDS}static get DATETIME_HUGE(){return DATETIME_HUGE}static get DATETIME_HUGE_WITH_SECONDS(){return DATETIME_HUGE_WITH_SECONDS}}function friendlyDateTime(dateTimeish){if(DateTime.isDateTime(dateTimeish))return dateTimeish;if(dateTimeish&&dateTimeish.valueOf&&isNumber(dateTimeish.valueOf()))return DateTime.fromJSDate(dateTimeish);if(dateTimeish&&"object"==typeof dateTimeish)return DateTime.fromObject(dateTimeish);throw new InvalidArgumentError(`Unknown datetime argument: ${dateTimeish}, of type ${typeof dateTimeish}`)}const uuid=(()=>{let counter=0;return()=>(counter+=1,`u${`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4)}${counter}`)})();function toArray(arrayLike){const arr=[];for(let i=0,l=arrayLike.length;i<l;i++)arr.push(arrayLike[i]);return arr}function px(node,styleProperty){const val=(node.ownerDocument.defaultView||window).getComputedStyle(node).getPropertyValue(styleProperty);return val?parseFloat(val.replace("px","")):0}function getImageSize(targetNode,options={}){return{width:options.width||function getNodeWidth(node){const leftBorder=px(node,"border-left-width"),rightBorder=px(node,"border-right-width");return node.clientWidth+leftBorder+rightBorder}(targetNode),height:options.height||function getNodeHeight(node){const topBorder=px(node,"border-top-width"),bottomBorder=px(node,"border-bottom-width");return node.clientHeight+topBorder+bottomBorder}(targetNode)}}const canvasDimensionLimit=16384;function createImage(url){return new Promise(((resolve,reject)=>{const img=new Image;img.decode=()=>resolve(img),img.onload=()=>resolve(img),img.onerror=reject,img.crossOrigin="anonymous",img.decoding="async",img.src=url}))}function _svgToDataURL(){return(_svgToDataURL=(0,asyncToGenerator.Z)((function*(svg){return Promise.resolve().then((()=>(new XMLSerializer).serializeToString(svg))).then(encodeURIComponent).then((html=>`data:image/svg+xml;charset=utf-8,${html}`))}))).apply(this,arguments)}function _nodeToDataURL(){return _nodeToDataURL=(0,asyncToGenerator.Z)((function*(node,width,height){const xmlns="http://www.w3.org/2000/svg",svg=document.createElementNS(xmlns,"svg"),foreignObject=document.createElementNS(xmlns,"foreignObject");return svg.setAttribute("width",`${width}`),svg.setAttribute("height",`${height}`),svg.setAttribute("viewBox",`0 0 ${width} ${height}`),foreignObject.setAttribute("width","100%"),foreignObject.setAttribute("height","100%"),foreignObject.setAttribute("x","0"),foreignObject.setAttribute("y","0"),foreignObject.setAttribute("externalResourcesRequired","true"),svg.appendChild(foreignObject),foreignObject.appendChild(node),function svgToDataURL(_x){return _svgToDataURL.apply(this,arguments)}(svg)})),_nodeToDataURL.apply(this,arguments)}const isInstanceOfElement=(node,instance)=>{if(node instanceof instance)return!0;const nodePrototype=Object.getPrototypeOf(node);return null!==nodePrototype&&(nodePrototype.constructor.name===instance.name||isInstanceOfElement(nodePrototype,instance))};function getPseudoElementStyle(className,pseudo,style){const selector=`.${className}:${pseudo}`,cssText=style.cssText?function formatCSSText(style){const content=style.getPropertyValue("content");return`${style.cssText} content: '${content.replace(/'|"/g,"")}';`}(style):function formatCSSProperties(style){return toArray(style).map((name=>`${name}: ${style.getPropertyValue(name)}${style.getPropertyPriority(name)?" !important":""};`)).join(" ")}(style);return document.createTextNode(`${selector}{${cssText}}`)}function clonePseudoElement(nativeNode,clonedNode,pseudo){const style=window.getComputedStyle(nativeNode,pseudo),content=style.getPropertyValue("content");if(""===content||"none"===content)return;const className=uuid();try{clonedNode.className=`${clonedNode.className} ${className}`}catch(err){return}const styleElement=document.createElement("style");styleElement.appendChild(getPseudoElementStyle(className,pseudo,style)),clonedNode.appendChild(styleElement)}const WOFF="application/font-woff",mimes={woff:WOFF,woff2:WOFF,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function getMimeType(url){const extension=function getExtension(url){const match=/\.([^./]*?)$/g.exec(url);return match?match[1]:""}(url).toLowerCase();return mimes[extension]||""}function isDataUrl(url){return-1!==url.search(/^(data:)/)}function makeDataUrl(content,mimeType){return`data:${mimeType};base64,${content}`}function fetchAsDataURL(_x,_x2,_x3){return _fetchAsDataURL.apply(this,arguments)}function _fetchAsDataURL(){return(_fetchAsDataURL=(0,asyncToGenerator.Z)((function*(url,init,process){const res=yield fetch(url,init);if(404===res.status)throw new Error(`Resource "${res.url}" not found`);const blob=yield res.blob();return new Promise(((resolve,reject)=>{const reader=new FileReader;reader.onerror=reject,reader.onloadend=()=>{try{resolve(process({res,result:reader.result}))}catch(error){reject(error)}},reader.readAsDataURL(blob)}))}))).apply(this,arguments)}const cache={};function resourceToDataURL(_x4,_x5,_x6){return _resourceToDataURL.apply(this,arguments)}function _resourceToDataURL(){return(_resourceToDataURL=(0,asyncToGenerator.Z)((function*(resourceUrl,contentType,options){const cacheKey=function getCacheKey(url,contentType,includeQueryParams){let key=url.replace(/\?.*/,"");return includeQueryParams&&(key=url),/ttf|otf|eot|woff2?/i.test(key)&&(key=key.replace(/.*\//,"")),contentType?`[${contentType}]${key}`:key}(resourceUrl,contentType,options.includeQueryParams);if(null!=cache[cacheKey])return cache[cacheKey];let dataURL;options.cacheBust&&(resourceUrl+=(/\?/.test(resourceUrl)?"&":"?")+(new Date).getTime());try{const content=yield fetchAsDataURL(resourceUrl,options.fetchRequestInit,(({res,result})=>(contentType||(contentType=res.headers.get("Content-Type")||""),function getContentFromDataUrl(dataURL){return dataURL.split(/,/)[1]}(result))));dataURL=makeDataUrl(content,contentType)}catch(error){dataURL=options.imagePlaceholder||"";let msg=`Failed to fetch resource: ${resourceUrl}`;error&&(msg="string"==typeof error?error:error.message),msg&&console.warn(msg)}return cache[cacheKey]=dataURL,dataURL}))).apply(this,arguments)}function _cloneCanvasElement(){return(_cloneCanvasElement=(0,asyncToGenerator.Z)((function*(canvas){const dataURL=canvas.toDataURL();return"data:,"===dataURL?canvas.cloneNode(!1):createImage(dataURL)}))).apply(this,arguments)}function _cloneVideoElement(){return(_cloneVideoElement=(0,asyncToGenerator.Z)((function*(video,options){if(video.currentSrc){const canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");canvas.width=video.clientWidth,canvas.height=video.clientHeight,null==ctx||ctx.drawImage(video,0,0,canvas.width,canvas.height);return createImage(canvas.toDataURL())}const poster=video.poster,contentType=getMimeType(poster);return createImage(yield resourceToDataURL(poster,contentType,options))}))).apply(this,arguments)}function _cloneIFrameElement(){return(_cloneIFrameElement=(0,asyncToGenerator.Z)((function*(iframe){var _a;try{if(null===(_a=null==iframe?void 0:iframe.contentDocument)||void 0===_a?void 0:_a.body)return yield cloneNode(iframe.contentDocument.body,{},!0)}catch(_b){}return iframe.cloneNode(!1)}))).apply(this,arguments)}function _cloneSingleNode(){return _cloneSingleNode=(0,asyncToGenerator.Z)((function*(node,options){return isInstanceOfElement(node,HTMLCanvasElement)?function cloneCanvasElement(_x){return _cloneCanvasElement.apply(this,arguments)}(node):isInstanceOfElement(node,HTMLVideoElement)?function cloneVideoElement(_x2,_x3){return _cloneVideoElement.apply(this,arguments)}(node,options):isInstanceOfElement(node,HTMLIFrameElement)?function cloneIFrameElement(_x4){return _cloneIFrameElement.apply(this,arguments)}(node):node.cloneNode(!1)})),_cloneSingleNode.apply(this,arguments)}const isSlotElement=node=>null!=node.tagName&&"SLOT"===node.tagName.toUpperCase();function _cloneChildren(){return(_cloneChildren=(0,asyncToGenerator.Z)((function*(nativeNode,clonedNode,options){var _a,_b;let children=[];return children=isSlotElement(nativeNode)&&nativeNode.assignedNodes?toArray(nativeNode.assignedNodes()):isInstanceOfElement(nativeNode,HTMLIFrameElement)&&(null===(_a=nativeNode.contentDocument)||void 0===_a?void 0:_a.body)?toArray(nativeNode.contentDocument.body.childNodes):toArray((null!==(_b=nativeNode.shadowRoot)&&void 0!==_b?_b:nativeNode).childNodes),0===children.length||isInstanceOfElement(nativeNode,HTMLVideoElement)||(yield children.reduce(((deferred,child)=>deferred.then((()=>cloneNode(child,options))).then((clonedChild=>{clonedChild&&clonedNode.appendChild(clonedChild)}))),Promise.resolve())),clonedNode}))).apply(this,arguments)}function decorate(nativeNode,clonedNode){return isInstanceOfElement(clonedNode,Element)&&(!function cloneCSSStyle(nativeNode,clonedNode){const targetStyle=clonedNode.style;if(!targetStyle)return;const sourceStyle=window.getComputedStyle(nativeNode);sourceStyle.cssText?(targetStyle.cssText=sourceStyle.cssText,targetStyle.transformOrigin=sourceStyle.transformOrigin):toArray(sourceStyle).forEach((name=>{let value=sourceStyle.getPropertyValue(name);if("font-size"===name&&value.endsWith("px")){const reducedFont=Math.floor(parseFloat(value.substring(0,value.length-2)))-.1;value=`${reducedFont}px`}isInstanceOfElement(nativeNode,HTMLIFrameElement)&&"display"===name&&"inline"===value&&(value="block"),"d"===name&&clonedNode.getAttribute("d")&&(value=`path(${clonedNode.getAttribute("d")})`),targetStyle.setProperty(name,value,sourceStyle.getPropertyPriority(name))}))}(nativeNode,clonedNode),function clonePseudoElements(nativeNode,clonedNode){clonePseudoElement(nativeNode,clonedNode,":before"),clonePseudoElement(nativeNode,clonedNode,":after")}(nativeNode,clonedNode),function cloneInputValue(nativeNode,clonedNode){isInstanceOfElement(nativeNode,HTMLTextAreaElement)&&(clonedNode.innerHTML=nativeNode.value),isInstanceOfElement(nativeNode,HTMLInputElement)&&clonedNode.setAttribute("value",nativeNode.value)}(nativeNode,clonedNode),function cloneSelectValue(nativeNode,clonedNode){if(isInstanceOfElement(nativeNode,HTMLSelectElement)){const clonedSelect=clonedNode,selectedOption=Array.from(clonedSelect.children).find((child=>nativeNode.value===child.getAttribute("value")));selectedOption&&selectedOption.setAttribute("selected","")}}(nativeNode,clonedNode)),clonedNode}function _ensureSVGSymbols(){return _ensureSVGSymbols=(0,asyncToGenerator.Z)((function*(clone,options){const uses=clone.querySelectorAll?clone.querySelectorAll("use"):[];if(0===uses.length)return clone;const processedDefs={};for(let i=0;i<uses.length;i++){const id=uses[i].getAttribute("xlink:href");if(id){const exist=clone.querySelector(id),definition=document.querySelector(id);exist||!definition||processedDefs[id]||(processedDefs[id]=yield cloneNode(definition,options,!0))}}const nodes=Object.values(processedDefs);if(nodes.length){const ns="http://www.w3.org/1999/xhtml",svg=document.createElementNS(ns,"svg");svg.setAttribute("xmlns",ns),svg.style.position="absolute",svg.style.width="0",svg.style.height="0",svg.style.overflow="hidden",svg.style.display="none";const defs=document.createElementNS(ns,"defs");svg.appendChild(defs);for(let i=0;i<nodes.length;i++)defs.appendChild(nodes[i]);clone.appendChild(svg)}return clone})),_ensureSVGSymbols.apply(this,arguments)}function cloneNode(_x12,_x13,_x14){return _cloneNode.apply(this,arguments)}function _cloneNode(){return _cloneNode=(0,asyncToGenerator.Z)((function*(node,options,isRoot){return isRoot||!options.filter||options.filter(node)?Promise.resolve(node).then((clonedNode=>function cloneSingleNode(_x5,_x6){return _cloneSingleNode.apply(this,arguments)}(clonedNode,options))).then((clonedNode=>function cloneChildren(_x7,_x8,_x9){return _cloneChildren.apply(this,arguments)}(node,clonedNode,options))).then((clonedNode=>decorate(node,clonedNode))).then((clonedNode=>function ensureSVGSymbols(_x10,_x11){return _ensureSVGSymbols.apply(this,arguments)}(clonedNode,options))):null})),_cloneNode.apply(this,arguments)}const URL_REGEX=/url\((['"]?)([^'"]+?)\1\)/g,URL_WITH_FORMAT_REGEX=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,FONT_SRC_REGEX=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function _embed(){return(_embed=(0,asyncToGenerator.Z)((function*(cssText,resourceURL,baseURL,options,getContentFromUrl){try{const resolvedURL=baseURL?function resolveUrl(url,baseUrl){if(url.match(/^[a-z]+:\/\//i))return url;if(url.match(/^\/\//))return window.location.protocol+url;if(url.match(/^[a-z]+:/i))return url;const doc=document.implementation.createHTMLDocument(),base=doc.createElement("base"),a=doc.createElement("a");return doc.head.appendChild(base),doc.body.appendChild(a),baseUrl&&(base.href=baseUrl),a.href=url,a.href}(resourceURL,baseURL):resourceURL,contentType=getMimeType(resourceURL);let dataURL;if(getContentFromUrl){dataURL=makeDataUrl(yield getContentFromUrl(resolvedURL),contentType)}else dataURL=yield resourceToDataURL(resolvedURL,contentType,options);return cssText.replace(function toRegex(url){const escaped=url.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${escaped})(['"]?\\))`,"g")}(resourceURL),`$1${dataURL}$3`)}catch(error){}return cssText}))).apply(this,arguments)}function shouldEmbed(url){return-1!==url.search(URL_REGEX)}function embedResources(_x6,_x7,_x8){return _embedResources.apply(this,arguments)}function _embedResources(){return _embedResources=(0,asyncToGenerator.Z)((function*(cssText,baseUrl,options){if(!shouldEmbed(cssText))return cssText;const filteredCSSText=function filterPreferredFontFormat(str,{preferredFontFormat}){return preferredFontFormat?str.replace(FONT_SRC_REGEX,(match=>{for(;;){const[src,,format]=URL_WITH_FORMAT_REGEX.exec(match)||[];if(!format)return"";if(format===preferredFontFormat)return`src: ${src};`}})):str}(cssText,options),urls=function parseURLs(cssText){const urls=[];return cssText.replace(URL_REGEX,((raw,quotation,url)=>(urls.push(url),raw))),urls.filter((url=>!isDataUrl(url)))}(filteredCSSText);return urls.reduce(((deferred,url)=>deferred.then((css=>function embed_resources_embed(_x,_x2,_x3,_x4,_x5){return _embed.apply(this,arguments)}(css,url,baseUrl,options)))),Promise.resolve(filteredCSSText))})),_embedResources.apply(this,arguments)}function embedProp(_x,_x2,_x3){return _embedProp.apply(this,arguments)}function _embedProp(){return(_embedProp=(0,asyncToGenerator.Z)((function*(propName,node,options){var _a;const propValue=null===(_a=node.style)||void 0===_a?void 0:_a.getPropertyValue(propName);if(propValue){const cssString=yield embedResources(propValue,null,options);return node.style.setProperty(propName,cssString,node.style.getPropertyPriority(propName)),!0}return!1}))).apply(this,arguments)}function _embedBackground(){return(_embedBackground=(0,asyncToGenerator.Z)((function*(clonedNode,options){(yield embedProp("background",clonedNode,options))||(yield embedProp("background-image",clonedNode,options)),(yield embedProp("mask",clonedNode,options))||(yield embedProp("mask-image",clonedNode,options))}))).apply(this,arguments)}function _embedImageNode(){return(_embedImageNode=(0,asyncToGenerator.Z)((function*(clonedNode,options){const isImageElement=isInstanceOfElement(clonedNode,HTMLImageElement);if((!isImageElement||isDataUrl(clonedNode.src))&&(!isInstanceOfElement(clonedNode,SVGImageElement)||isDataUrl(clonedNode.href.baseVal)))return;const url=isImageElement?clonedNode.src:clonedNode.href.baseVal,dataURL=yield resourceToDataURL(url,getMimeType(url),options);yield new Promise(((resolve,reject)=>{clonedNode.onload=resolve,clonedNode.onerror=reject;const image=clonedNode;image.decode&&(image.decode=resolve),"lazy"===image.loading&&(image.loading="eager"),isImageElement?(clonedNode.srcset="",clonedNode.src=dataURL):clonedNode.href.baseVal=dataURL}))}))).apply(this,arguments)}function _embedChildren(){return(_embedChildren=(0,asyncToGenerator.Z)((function*(clonedNode,options){const deferreds=toArray(clonedNode.childNodes).map((child=>embedImages(child,options)));yield Promise.all(deferreds).then((()=>clonedNode))}))).apply(this,arguments)}function embedImages(_x10,_x11){return _embedImages.apply(this,arguments)}function _embedImages(){return _embedImages=(0,asyncToGenerator.Z)((function*(clonedNode,options){isInstanceOfElement(clonedNode,Element)&&(yield function embedBackground(_x4,_x5){return _embedBackground.apply(this,arguments)}(clonedNode,options),yield function embedImageNode(_x6,_x7){return _embedImageNode.apply(this,arguments)}(clonedNode,options),yield function embedChildren(_x8,_x9){return _embedChildren.apply(this,arguments)}(clonedNode,options))})),_embedImages.apply(this,arguments)}const cssFetchCache={};function fetchCSS(_x){return _fetchCSS.apply(this,arguments)}function _fetchCSS(){return _fetchCSS=(0,asyncToGenerator.Z)((function*(url){let cache=cssFetchCache[url];if(null!=cache)return cache;const res=yield fetch(url);return cache={url,cssText:yield res.text()},cssFetchCache[url]=cache,cache})),_fetchCSS.apply(this,arguments)}function embedFonts(_x2,_x3){return _embedFonts.apply(this,arguments)}function _embedFonts(){return _embedFonts=(0,asyncToGenerator.Z)((function*(data,options){let cssText=data.cssText;const regexUrl=/url\(["']?([^"')]+)["']?\)/g,loadFonts=(cssText.match(/url\([^)]+\)/g)||[]).map(function(){var _ref=(0,asyncToGenerator.Z)((function*(loc){let url=loc.replace(regexUrl,"$1");return url.startsWith("https://")||(url=new URL(url,data.url).href),fetchAsDataURL(url,options.fetchRequestInit,(({result})=>(cssText=cssText.replace(loc,`url(${result})`),[loc,result])))}));return function(_x12){return _ref.apply(this,arguments)}}());return Promise.all(loadFonts).then((()=>cssText))})),_embedFonts.apply(this,arguments)}function parseCSS(source){if(null==source)return[];const result=[];let cssText=source.replace(/(\/\*[\s\S]*?\*\/)/gi,"");const keyframesRegex=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const matches=keyframesRegex.exec(cssText);if(null===matches)break;result.push(matches[0])}cssText=cssText.replace(keyframesRegex,"");const importRegex=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,unifiedRegex=new RegExp("((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})","gi");for(;;){let matches=importRegex.exec(cssText);if(null===matches){if(matches=unifiedRegex.exec(cssText),null===matches)break;importRegex.lastIndex=unifiedRegex.lastIndex}else unifiedRegex.lastIndex=importRegex.lastIndex;result.push(matches[0])}return result}function _getCSSRules(){return(_getCSSRules=(0,asyncToGenerator.Z)((function*(styleSheets,options){const ret=[],deferreds=[];return styleSheets.forEach((sheet=>{if("cssRules"in sheet)try{toArray(sheet.cssRules||[]).forEach(((item,index)=>{if(item.type===CSSRule.IMPORT_RULE){let importIndex=index+1;const deferred=fetchCSS(item.href).then((metadata=>embedFonts(metadata,options))).then((cssText=>parseCSS(cssText).forEach((rule=>{try{sheet.insertRule(rule,rule.startsWith("@import")?importIndex+=1:sheet.cssRules.length)}catch(error){console.error("Error inserting rule from remote css",{rule,error})}})))).catch((e=>{console.error("Error loading remote css",e.toString())}));deferreds.push(deferred)}}))}catch(e){const inline=styleSheets.find((a=>null==a.href))||document.styleSheets[0];null!=sheet.href&&deferreds.push(fetchCSS(sheet.href).then((metadata=>embedFonts(metadata,options))).then((cssText=>parseCSS(cssText).forEach((rule=>{inline.insertRule(rule,sheet.cssRules.length)})))).catch((err=>{console.error("Error loading remote stylesheet",err)}))),console.error("Error inlining remote css file",e)}})),Promise.all(deferreds).then((()=>(styleSheets.forEach((sheet=>{if("cssRules"in sheet)try{toArray(sheet.cssRules||[]).forEach((item=>{ret.push(item)}))}catch(e){console.error(`Error while reading CSS rules from ${sheet.href}`,e)}})),ret)))}))).apply(this,arguments)}function _parseWebFontRules(){return _parseWebFontRules=(0,asyncToGenerator.Z)((function*(node,options){if(null==node.ownerDocument)throw new Error("Provided element is not within a Document");const styleSheets=toArray(node.ownerDocument.styleSheets),cssRules=yield function getCSSRules(_x4,_x5){return _getCSSRules.apply(this,arguments)}(styleSheets,options);return function getWebFontRules(cssRules){return cssRules.filter((rule=>rule.type===CSSRule.FONT_FACE_RULE)).filter((rule=>shouldEmbed(rule.style.getPropertyValue("src"))))}(cssRules)})),_parseWebFontRules.apply(this,arguments)}function _getWebFontCSS(){return _getWebFontCSS=(0,asyncToGenerator.Z)((function*(node,options){const rules=yield function parseWebFontRules(_x6,_x7){return _parseWebFontRules.apply(this,arguments)}(node,options);return(yield Promise.all(rules.map((rule=>{const baseUrl=rule.parentStyleSheet?rule.parentStyleSheet.href:null;return embedResources(rule.cssText,baseUrl,options)})))).join("\n")})),_getWebFontCSS.apply(this,arguments)}function _embedWebFonts(){return _embedWebFonts=(0,asyncToGenerator.Z)((function*(clonedNode,options){const cssText=null!=options.fontEmbedCSS?options.fontEmbedCSS:options.skipFonts?null:yield function embed_webfonts_getWebFontCSS(_x8,_x9){return _getWebFontCSS.apply(this,arguments)}(clonedNode,options);if(cssText){const styleNode=document.createElement("style"),sytleContent=document.createTextNode(cssText);styleNode.appendChild(sytleContent),clonedNode.firstChild?clonedNode.insertBefore(styleNode,clonedNode.firstChild):clonedNode.appendChild(styleNode)}})),_embedWebFonts.apply(this,arguments)}function toSvg(_x){return _toSvg.apply(this,arguments)}function _toSvg(){return _toSvg=(0,asyncToGenerator.Z)((function*(node,options={}){const{width,height}=getImageSize(node,options),clonedNode=yield cloneNode(node,options,!0);yield function embedWebFonts(_x10,_x11){return _embedWebFonts.apply(this,arguments)}(clonedNode,options),yield embedImages(clonedNode,options),function applyStyle(node,options){const{style}=node;options.backgroundColor&&(style.backgroundColor=options.backgroundColor),options.width&&(style.width=`${options.width}px`),options.height&&(style.height=`${options.height}px`);const manual=options.style;return null!=manual&&Object.keys(manual).forEach((key=>{style[key]=manual[key]})),node}(clonedNode,options);const datauri=yield function nodeToDataURL(_x2,_x3,_x4){return _nodeToDataURL.apply(this,arguments)}(clonedNode,width,height);return datauri})),_toSvg.apply(this,arguments)}function toCanvas(_x2){return _toCanvas.apply(this,arguments)}function _toCanvas(){return(_toCanvas=(0,asyncToGenerator.Z)((function*(node,options={}){const{width,height}=getImageSize(node,options),svg=yield toSvg(node,options),img=yield createImage(svg),canvas=document.createElement("canvas"),context=canvas.getContext("2d"),ratio=options.pixelRatio||function getPixelRatio(){let ratio,FINAL_PROCESS;try{FINAL_PROCESS=process}catch(e){}const val=FINAL_PROCESS&&FINAL_PROCESS.env?FINAL_PROCESS.env.devicePixelRatio:null;return val&&(ratio=parseInt(val,10),Number.isNaN(ratio)&&(ratio=1)),ratio||window.devicePixelRatio||1}(),canvasWidth=options.canvasWidth||width,canvasHeight=options.canvasHeight||height;return canvas.width=canvasWidth*ratio,canvas.height=canvasHeight*ratio,options.skipAutoScale||function checkCanvasDimensions(canvas){(canvas.width>canvasDimensionLimit||canvas.height>canvasDimensionLimit)&&(canvas.width>canvasDimensionLimit&&canvas.height>canvasDimensionLimit?canvas.width>canvas.height?(canvas.height*=canvasDimensionLimit/canvas.width,canvas.width=canvasDimensionLimit):(canvas.width*=canvasDimensionLimit/canvas.height,canvas.height=canvasDimensionLimit):canvas.width>canvasDimensionLimit?(canvas.height*=canvasDimensionLimit/canvas.width,canvas.width=canvasDimensionLimit):(canvas.width*=canvasDimensionLimit/canvas.height,canvas.height=canvasDimensionLimit))}(canvas),canvas.style.width=`${canvasWidth}`,canvas.style.height=`${canvasHeight}`,options.backgroundColor&&(context.fillStyle=options.backgroundColor,context.fillRect(0,0,canvas.width,canvas.height)),context.drawImage(img,0,0,canvas.width,canvas.height),canvas}))).apply(this,arguments)}function _toPixelData(){return(_toPixelData=(0,asyncToGenerator.Z)((function*(node,options={}){const{width,height}=getImageSize(node,options);return(yield toCanvas(node,options)).getContext("2d").getImageData(0,0,width,height).data}))).apply(this,arguments)}function _toPng(){return(_toPng=(0,asyncToGenerator.Z)((function*(node,options={}){return(yield toCanvas(node,options)).toDataURL()}))).apply(this,arguments)}function _toJpeg(){return(_toJpeg=(0,asyncToGenerator.Z)((function*(node,options={}){return(yield toCanvas(node,options)).toDataURL("image/jpeg",options.quality||1)}))).apply(this,arguments)}function _toBlob(){return(_toBlob=(0,asyncToGenerator.Z)((function*(node,options={}){const canvas=yield toCanvas(node,options),blob=yield function canvasToBlob(canvas,options={}){return canvas.toBlob?new Promise((resolve=>{canvas.toBlob(resolve,options.type?options.type:"image/png",options.quality?options.quality:1)})):new Promise((resolve=>{const binaryString=window.atob(canvas.toDataURL(options.type?options.type:void 0,options.quality?options.quality:void 0).split(",")[1]),len=binaryString.length,binaryArray=new Uint8Array(len);for(let i=0;i<len;i+=1)binaryArray[i]=binaryString.charCodeAt(i);resolve(new Blob([binaryArray],{type:options.type?options.type:"image/png"}))}))}(canvas);return blob}))).apply(this,arguments)}var _class,_class2,_class3,_class4,_class5,_class6,_class7,_class8,_class9,_class10,_class11,_class12,_class13,_class14,_class15,_class16,_class17,_class18,_class19,_class20,_class21,_class22,_class23,_class24,_class25,_class26,_class27,_class28,_class30,_class31,_class32,_class33,_class34,_class35,_class36,_class37,_class38,_class39,_class40,_class41,_class42,_class43,_class45,_class46,_class47,_class48,_class49,_class50,_class51,_class53,_class54,_class55,_class56,_class57,_class59,_class60,_class61,_class62,_class63,_class64,_class65,_class66,_class67,_class68,_class69,_class70,_class71,_class72,_class76,_class78,_class80,_class81,_class82,_class84,_class85,_class86,_class87,_class88,_class89,_class90,_class91,_class92,_class94,_class95,_class96,_class97,_class98,_class99,_class100,_class104,_class105,_class106,_class107,_class108,_class109,_class111,_class113,_class114,_class116,_class117,_class118,_class119,_class121,_class122,_class123,_class124,_class125,_class126,_class127,_class128,_class129,_class130,_class131,_class132,_class133,_class134,_class135,_class136,_class137,_class138,_class143,_class144,_class145,_class147,_class148,_class149,_class150,_class151,_class152,_class153,_class154,_class155,_class157,_class158,_class159,_class160,_class161,_class162,_class163,_class164,_class165,_class166,_class167,_class168,_class169,_class170,_class171,_class172,_class173,_class174,_class175,_class176,_class177,_class178,_class179,_class180,_class181,_class182,_class183,_class184,_class185,_class186,_class187,_class188,_class189,_class190,_class191,_class192,_class193,_class194,_class195,_class196,_class197,_class198,_class199,_class200,_class201,_class202,_class203,_class205,_class206,_class207,_class208,_class209,_class210,_class211,_class212,_class213,_class215,_class216,_class218,_class219,_class220,_class221,_class222,_class223,_class224,_class225,_class226,_class227,_class228,_class229,_class230,_class231,_class232;const _c0=["*"];function _class3_div_1_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class3_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",1),core["template"](1,_class3_div_1_ng_container_1_Template,1,0,"ng-container",2),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r0.content.template)}}const _c1=[[["teta-accordion-head"]]];function _class5_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",1),core["element"](1,"teta-icon",2),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("name",ctx_r0.open?"arrowUpKey":"arrowDownKey")("palette","text")}}function _class10_img_1_Template(rf,ctx){if(1&rf&&core["element"](0,"img",2),2&rf){const ctx_r0=core["nextContext"]();core["classMap"]("avatar_"+ctx_r0.viewType),core["property"]("src",ctx_r0.photo,core["sanitizeUrl"])}}function _class10_ng_template_2_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["elementStart"](1,"p"),core["text"](2),core["elementEnd"](),core["elementContainerEnd"]()),2&rf){const ctx_r3=core["nextContext"](2);core["advance"](2),core["textInterpolate"](ctx_r3.name)}}function _class10_ng_template_2_ng_template_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-icon",7),2&rf){const ctx_r5=core["nextContext"](2);core["styleMapInterpolate2"]("fill: white;width:",ctx_r5.size,"px; height:",ctx_r5.size,"px")}}function _class10_ng_template_2_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",3),core["template"](1,_class10_ng_template_2_ng_container_1_Template,3,1,"ng-container",4),core["template"](2,_class10_ng_template_2_ng_template_2_Template,1,4,"ng-template",null,5,core["templateRefExtractor"]),core["element"](4,"div",6),core["elementEnd"]()),2&rf){const _r4=core["reference"](3),ctx_r2=core["nextContext"]();core["classMap"]("avatar_"+ctx_r2.viewType),core["styleProp"]("background-color",ctx_r2.colorMap.get(ctx_r2.id%17)||ctx_r2.colorMap.get(0)),core["advance"](1),core["property"]("ngIf",ctx_r2.name)("ngIfElse",_r4),core["advance"](3),core["classMap"]("avatar_"+ctx_r2.viewType)}}function _class16_ng_container_0_span_3_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class16_ng_container_0_span_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"span",5),core["template"](1,_class16_ng_container_0_span_3_ng_container_1_Template,1,0,"ng-container",6),core["elementEnd"]()),2&rf){core["nextContext"](2);const _r2=core["reference"](3);core["advance"](1),core["property"]("ngTemplateOutlet",_r2)}}function _class16_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["elementStart"](1,"div",2),core["element"](2,"teta-icon",3),core["elementEnd"](),core["template"](3,_class16_ng_container_0_span_3_Template,2,1,"span",4),core["elementContainerEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["classProp"]("checkbox__tick_active",0!=ctx_r0.checked),core["advance"](1),core["property"]("name",ctx_r0.checked?"tick":!1===ctx_r0.checked?"":"dash"),core["advance"](1),core["property"]("ngIf",!ctx_r0.noLabel)}}function _class16_ng_container_1_span_1_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class16_ng_container_1_span_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"span",5),core["template"](1,_class16_ng_container_1_span_1_ng_container_1_Template,1,0,"ng-container",6),core["elementEnd"]()),2&rf){core["nextContext"](2);const _r2=core["reference"](3);core["advance"](1),core["property"]("ngTemplateOutlet",_r2)}}function _class16_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class16_ng_container_1_span_1_Template,2,1,"span",4),core["elementStart"](2,"div",2),core["element"](3,"teta-icon",3),core["elementEnd"](),core["elementContainerEnd"]()),2&rf){const ctx_r1=core["nextContext"]();core["advance"](1),core["property"]("ngIf",!ctx_r1.noLabel),core["advance"](1),core["classProp"]("checkbox__tick_active",0!=ctx_r1.checked),core["advance"](1),core["property"]("name",ctx_r1.checked?"tick":!1===ctx_r1.checked?"":"dash")}}function _class16_ng_template_2_Template(rf,ctx){1&rf&&core["projection"](0)}const _c4=[[["","tetaDropdownHead",""]]];function _class33_div_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",2)(1,"span",3),core["text"](2),core["elementEnd"]()()),2&rf){const ctx_r0=core["nextContext"]();let tmp_2_0;core["classProp"]("row_6",ctx_r0.horizontal)("text-field_required",ctx_r0.required),core["advance"](1),core["property"]("tetaHint",null!==(tmp_2_0=ctx_r0.hint)&&void 0!==tmp_2_0?tmp_2_0:ctx_r0.label)("align",ctx_r0.align.left)("overflownOnly",!ctx_r0.hint||ctx_r0.hint===ctx_r0.label),core["advance"](1),core["textInterpolate1"](" ",ctx_r0.label," ")}}const _c6=["*",[["message"]]],_c8=["input"];function _class36_teta_icon_0_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-icon",4),2&rf){const ctx_r0=core["nextContext"]();core["property"]("name",ctx_r0.leftIconName)("palette","text")}}function _class36_teta_icon_4_Template(rf,ctx){if(1&rf){const _r4=core["getCurrentView"]();core["elementStart"](0,"teta-icon",5),core["listener"]("click",(function _class36_teta_icon_4_Template_teta_icon_click_0_listener(){core["restoreView"](_r4);const ctx_r3=core["nextContext"]();return ctx_r3.value="",core["resetView"](ctx_r3.onChange(""))})),core["elementEnd"]()}2&rf&&core["property"]("name","closeCircle")("palette","text")}const _c9=function(a0){return{"color-text-40":a0}},_c10=function(){return{updateOn:"blur"}};function _class47_p_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"p",4),core["text"](1),core["elementEnd"]()),2&rf){const day_r2=ctx.$implicit;core["advance"](1),core["textInterpolate1"](" ",day_r2," ")}}const _c11=function(a0,a1,a2,a3,a4,a5){return{"datepicker-date_active":a0,"datepicker-date-range_hover":a1,"datepicker-date_disabled":a2,"color-text-30":a3,"datepicker-date-range_disabled":a4,"datepicker-date-range_active":a5}};function _class47_ng_container_3_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",5),core["listener"]("mouseenter",(function _class47_ng_container_3_Template_div_mouseenter_1_listener(){const day_r3=core["restoreView"](_r5).$implicit,ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.hover(day_r3.date))}))("click",(function _class47_ng_container_3_Template_div_click_1_listener(){const day_r3=core["restoreView"](_r5).$implicit,ctx_r6=core["nextContext"]();return core["resetView"](ctx_r6.pickDate(day_r3))})),core["element"](2,"teta-day-item",6),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const day_r3=ctx.$implicit,ctx_r1=core["nextContext"]();core["advance"](1),core["classMap"](ctx_r1.getRangeActiveClass(day_r3)+" datepicker-date font-body-3 datepicker_"+ctx_r1.viewType),core["property"]("ngClass",core["pureFunction6"](4,_c11,day_r3.selected||day_r3.date===ctx_r1.hoveredDate&&ctx_r1.range&&!ctx_r1.range.to,ctx_r1.range&&ctx_r1.isHoveredRange(day_r3),day_r3.disabled,day_r3.disabled||!ctx_r1.range&&!day_r3.isCurrentMonth,!day_r3.isCurrentMonth&&ctx_r1.range,ctx_r1.isActiveRange(day_r3))),core["advance"](1),core["property"]("day",day_r3)}}const _c12=function(a0){return{"datepicker-month_item_active":a0}};function _class48_div_9_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",7),core["listener"]("click",(function _class48_div_9_Template_div_click_0_listener(){const month_r1=core["restoreView"](_r3).$implicit,ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.pickMonth(month_r1.id))})),core["elementStart"](1,"div",8)(2,"p"),core["text"](3),core["elementEnd"]()()()}if(2&rf){const month_r1=ctx.$implicit,ctx_r0=core["nextContext"]();core["advance"](1),core["classMap"]("datepicker-month_item column align-center justify-content-center datepicker_"+ctx_r0.viewType),core["property"]("ngClass",core["pureFunction1"](4,_c12,month_r1.isSelected)),core["advance"](2),core["textInterpolate1"](" ",month_r1.name," ")}}function _class50_div_5_div_2_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",8)(1,"span"),core["text"](2),core["elementEnd"]()()),2&rf){const y_r1=core["nextContext"]().$implicit;core["advance"](2),core["textInterpolate"](y_r1.id)}}function _class50_div_5_div_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div")(1,"span"),core["text"](2),core["elementEnd"]()()),2&rf){const y_r1=core["nextContext"]().$implicit;core["advance"](2),core["textInterpolate1"]("",y_r1.id," ")}}const _c13=function(a0,a1){return{"datepicker-year_item_active":a0,"datepicker-year_item_disabled":a1}};function _class50_div_5_Template(rf,ctx){if(1&rf){const _r7=core["getCurrentView"]();core["elementStart"](0,"div",4),core["listener"]("click",(function _class50_div_5_Template_div_click_0_listener(){const y_r1=core["restoreView"](_r7).$implicit,ctx_r6=core["nextContext"]();return core["resetView"](ctx_r6.pickYear(y_r1.id,y_r1.disabled))})),core["elementStart"](1,"div",5),core["template"](2,_class50_div_5_div_2_Template,3,1,"div",6),core["template"](3,_class50_div_5_div_3_Template,3,1,"div",7),core["elementEnd"]()()}if(2&rf){const y_r1=ctx.$implicit,ctx_r0=core["nextContext"]();core["advance"](1),core["classMap"]("datepicker-year_item column align-center justify-content-center datepicker_"+ctx_r0.viewType),core["property"]("ngClass",core["pureFunction2"](5,_c13,y_r1.isSelected,y_r1.disabled)),core["advance"](1),core["property"]("ngIf",!0===y_r1.isSelected),core["advance"](1),core["property"]("ngIf",!y_r1.isSelected)}}function _class51_div_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r7=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",3),core["listener"]("wheel",(function _class51_div_0_ng_container_1_Template_div_wheel_1_listener($event){core["restoreView"](_r7);const data_r1=core["nextContext"]().ngIf,ctx_r5=core["nextContext"]();return core["resetView"](ctx_r5.scrollMonth($event,data_r1.currentMonth,data_r1.currentYear))})),core["elementStart"](2,"div",4)(3,"teta-button",5),core["listener"]("click",(function _class51_div_0_ng_container_1_Template_teta_button_click_3_listener(){core["restoreView"](_r7);const data_r1=core["nextContext"]().ngIf,ctx_r8=core["nextContext"]();return core["resetView"](ctx_r8.changeMonth(data_r1.currentMonth-1,data_r1.currentYear))})),core["element"](4,"teta-icon",6),core["elementEnd"](),core["elementStart"](5,"div",7)(6,"button",8),core["listener"]("click",(function _class51_div_0_ng_container_1_Template_button_click_6_listener(){core["restoreView"](_r7);const ctx_r10=core["nextContext"](2);return core["resetView"](ctx_r10.selectPicker("month"))})),core["text"](7),core["elementEnd"](),core["elementStart"](8,"button",8),core["listener"]("click",(function _class51_div_0_ng_container_1_Template_button_click_8_listener(){core["restoreView"](_r7);const ctx_r11=core["nextContext"](2);return core["resetView"](ctx_r11.selectPicker("year"))})),core["text"](9),core["elementEnd"]()(),core["elementStart"](10,"teta-button",5),core["listener"]("click",(function _class51_div_0_ng_container_1_Template_teta_button_click_10_listener(){core["restoreView"](_r7);const data_r1=core["nextContext"]().ngIf,ctx_r12=core["nextContext"]();return core["resetView"](ctx_r12.changeMonth(data_r1.currentMonth+1,data_r1.currentYear))})),core["element"](11,"teta-icon",9),core["elementEnd"]()(),core["elementStart"](12,"div")(13,"teta-day-picker",10),core["listener"]("selectDate",(function _class51_div_0_ng_container_1_Template_teta_day_picker_selectDate_13_listener($event){core["restoreView"](_r7);const ctx_r14=core["nextContext"](2);return core["resetView"](ctx_r14.selectDate($event))})),core["elementEnd"]()()(),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r2=core["nextContext"]();core["advance"](3),core["classMap"]("change-month-button datepicker_"+ctx_r2.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["classMap"]("datepicker_"+ctx_r2.viewType),core["advance"](1),core["textInterpolate1"](" ",ctx_r2.getMothName(data_r1.currentMonth),""),core["advance"](1),core["classMap"]("datepicker_"+ctx_r2.viewType),core["advance"](1),core["textInterpolate"](data_r1.currentYear),core["advance"](1),core["classMap"]("change-month-button datepicker_"+ctx_r2.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["property"]("viewType",ctx_r2.viewType)("locale",ctx_r2.locale)("calendar",ctx_r2.calendar)}}function _class51_div_0_ng_container_2_Template(rf,ctx){if(1&rf){const _r17=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-month-picker",11),core["listener"]("changeYear",(function _class51_div_0_ng_container_2_Template_teta_month_picker_changeYear_1_listener($event){core["restoreView"](_r17);const ctx_r16=core["nextContext"](2);return core["resetView"](ctx_r16.setYear($event))}))("selectMonth",(function _class51_div_0_ng_container_2_Template_teta_month_picker_selectMonth_1_listener($event){core["restoreView"](_r17);const ctx_r18=core["nextContext"](2);return core["resetView"](ctx_r18.selectMonth($event))})),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r3=core["nextContext"]();core["advance"](1),core["property"]("localeMoths",ctx_r3.localeMonths)("currentYear",data_r1.currentYear)("selectedMonth",data_r1.currentMonth)("viewType",ctx_r3.viewType)("locale",ctx_r3.locale)}}function _class51_div_0_ng_container_3_Template(rf,ctx){if(1&rf){const _r21=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-year-picker",12),core["listener"]("selectYear",(function _class51_div_0_ng_container_3_Template_teta_year_picker_selectYear_1_listener($event){core["restoreView"](_r21);const ctx_r20=core["nextContext"](2);return core["resetView"](ctx_r20.selectYear($event))})),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r4=core["nextContext"]();core["advance"](1),core["property"]("locale",ctx_r4.locale)("viewType",ctx_r4.viewType)("selectedYear",data_r1.currentYear)}}function _class51_div_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",1),core["template"](1,_class51_div_0_ng_container_1_Template,14,17,"ng-container",2),core["template"](2,_class51_div_0_ng_container_2_Template,2,5,"ng-container",2),core["template"](3,_class51_div_0_ng_container_3_Template,2,3,"ng-container",2),core["elementEnd"]()),2&rf){const data_r1=ctx.ngIf;core["advance"](1),core["property"]("ngIf","day"===data_r1.selectedPicker),core["advance"](1),core["property"]("ngIf","month"===data_r1.selectedPicker),core["advance"](1),core["property"]("ngIf","year"===data_r1.selectedPicker)}}const _c14=function(a0,a1,a2){return{currentMonth:a0,currentYear:a1,selectedPicker:a2}};function _class54_teta_dropdown_0_div_7_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementStart"](0,"div",11),core["listener"]("click",(function _class54_teta_dropdown_0_div_7_Template_div_click_0_listener(){core["restoreView"](_r5),core["nextContext"]();const _r2=core["reference"](6);return core["resetView"](_r2.focus())})),core["text"](1),core["elementEnd"]()}if(2&rf){const ctx_r3=core["nextContext"](2);core["advance"](1),core["textInterpolate"](ctx_r3.placeholder)}}const _c15=function(){return["esc","inside","enter"]},_c16=function(a0,a1){return{"datepicker-head_invalid":a0,"datepicker-head_disabled":a1}},_c17=function(a0){return{"color-text-90":a0}};function _class54_teta_dropdown_0_Template(rf,ctx){if(1&rf){const _r7=core["getCurrentView"]();core["elementStart"](0,"teta-dropdown",1),core["listener"]("openChange",(function _class54_teta_dropdown_0_Template_teta_dropdown_openChange_0_listener($event){core["restoreView"](_r7);const ctx_r6=core["nextContext"]();return core["resetView"](ctx_r6.openChange($event))})),core["elementStart"](1,"div",2)(2,"teta-input",3)(3,"div")(4,"div",4)(5,"input",5,6),core["listener"]("keydown",(function _class54_teta_dropdown_0_Template_input_keydown_5_listener($event){core["restoreView"](_r7);const ctx_r8=core["nextContext"]();return core["resetView"](ctx_r8.checkEnter($event))}))("ngModelChange",(function _class54_teta_dropdown_0_Template_input_ngModelChange_5_listener($event){core["restoreView"](_r7);const ctx_r9=core["nextContext"]();return core["resetView"](ctx_r9.inputText=$event)}))("ngModelChange",(function _class54_teta_dropdown_0_Template_input_ngModelChange_5_listener($event){core["restoreView"](_r7);const ctx_r10=core["nextContext"]();return core["resetView"](ctx_r10.changeInput($event))})),core["elementEnd"](),core["template"](7,_class54_teta_dropdown_0_div_7_Template,2,1,"div",7),core["elementEnd"](),core["element"](8,"teta-icon",8),core["elementEnd"]()()(),core["elementStart"](9,"div",9),core["listener"]("click",(function _class54_teta_dropdown_0_Template_div_click_9_listener($event){return $event.preventDefault()})),core["elementStart"](10,"teta-date-calendar",10),core["listener"]("setDate",(function _class54_teta_dropdown_0_Template_teta_date_calendar_setDate_10_listener($event){core["restoreView"](_r7);const ctx_r12=core["nextContext"]();return core["resetView"](ctx_r12.changeSelectedDate($event))})),core["elementEnd"]()()()}if(2&rf){const data_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["property"]("appendToBody",ctx_r0.appendToBody)("backdrop",ctx_r0.backdrop)("open",ctx_r0.open)("viewType",ctx_r0.viewType)("disabled",ctx_r0.disabled)("verticalAlign",ctx_r0.verticalAlign)("align",ctx_r0.align)("autoCloseIgnore",core["pureFunction0"](27,_c15)),core["advance"](1),core["classMap"]("datepicker-head font-body-3 gap-8  datepicker_"+ctx_r0.viewType),core["property"]("ngClass",core["pureFunction2"](28,_c16,ctx_r0.invalid,ctx_r0.disabled)),core["advance"](2),core["classMap"]("row_auto row datepicker_"+ctx_r0.viewType),core["advance"](2),core["property"]("ngClass",core["pureFunction1"](31,_c17,!ctx_r0.disabled))("disabled",ctx_r0.disabled)("ngModel",ctx_r0.inputText)("maskito",ctx_r0.maskitoOptions),core["advance"](2),core["property"]("ngIf",data_r1.selectedDate||ctx_r0.allowNull),core["advance"](1),core["property"]("name","calendar")("palette","text"),core["advance"](2),core["property"]("isDateNull",null===ctx_r0.date)("open",ctx_r0.open)("max",ctx_r0.maxDate)("min",ctx_r0.minDate)("selectedDate",data_r1.selectedDate)("viewType",ctx_r0.viewType)("locale",ctx_r0.locale)}}const _c18=function(a0){return{selectedDate:a0}},_c19=function(a0){return{"datepicker-arrow_hidden":a0}};function _class55_div_0_ng_container_1_div_15_Template(rf,ctx){if(1&rf){const _r8=core["getCurrentView"]();core["elementStart"](0,"div",4)(1,"div",5)(2,"teta-button",10),core["element"](3,"teta-icon",7),core["elementEnd"](),core["elementStart"](4,"div",8)(5,"p"),core["text"](6),core["elementEnd"](),core["elementStart"](7,"button",9),core["listener"]("click",(function _class55_div_0_ng_container_1_div_15_Template_button_click_7_listener(){core["restoreView"](_r8);const ctx_r7=core["nextContext"](3);return core["resetView"](ctx_r7.selectPicker("year"))})),core["text"](8),core["elementEnd"]()(),core["elementStart"](9,"teta-button",14),core["listener"]("click",(function _class55_div_0_ng_container_1_div_15_Template_teta_button_click_9_listener(){core["restoreView"](_r8);const data_r1=core["nextContext"](2).ngIf,ctx_r9=core["nextContext"]();return core["resetView"](ctx_r9.changeMonth(data_r1.currentMonth+1,data_r1.currentYear))})),core["element"](10,"teta-icon",11),core["elementEnd"]()(),core["elementStart"](11,"div")(12,"teta-day-picker",12),core["listener"]("hoveredDateChange",(function _class55_div_0_ng_container_1_div_15_Template_teta_day_picker_hoveredDateChange_12_listener($event){core["restoreView"](_r8);const ctx_r11=core["nextContext"](3);return core["resetView"](ctx_r11.hoveredDate=$event)}))("selectDate",(function _class55_div_0_ng_container_1_div_15_Template_teta_day_picker_selectDate_12_listener($event){core["restoreView"](_r8);const ctx_r12=core["nextContext"](3);return core["resetView"](ctx_r12.selectDate($event))})),core["elementEnd"]()()()}if(2&rf){const availableMonthYear_r6=ctx.ngIf,data_r1=core["nextContext"](2).ngIf,ctx_r5=core["nextContext"]();core["advance"](2),core["classMap"]("change-month-button datepicker-arrow_hidden datepicker_"+ctx_r5.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](3),core["textInterpolate"](ctx_r5.getMothName(availableMonthYear_r6.availableMonth)),core["advance"](1),core["classMap"]("datepicker_"+ctx_r5.viewType),core["advance"](1),core["textInterpolate"](availableMonthYear_r6.availableYear),core["advance"](1),core["classMap"]("change-month-button datepicker_"+ctx_r5.viewType),core["property"]("square",!0)("ngClass",core["pureFunction1"](18,_c19,!ctx_r5.isFirstDaySuitable(data_r1.currentMonth+2,data_r1.currentYear,ctx_r5.max))),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["property"]("hoveredDate",ctx_r5.hoveredDate)("range",ctx_r5.getFromTo())("viewType",ctx_r5.viewType)("locale",ctx_r5.locale)("calendar",ctx_r5.calendar.nextMonth)}}function _class55_div_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r16=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",3),core["listener"]("wheel",(function _class55_div_0_ng_container_1_Template_div_wheel_1_listener($event){core["restoreView"](_r16);const data_r1=core["nextContext"]().ngIf,ctx_r14=core["nextContext"]();return core["resetView"](ctx_r14.scrollMonth($event,data_r1.currentMonth,data_r1.currentYear))})),core["elementStart"](2,"div",4)(3,"div",5)(4,"teta-button",6),core["listener"]("click",(function _class55_div_0_ng_container_1_Template_teta_button_click_4_listener(){core["restoreView"](_r16);const data_r1=core["nextContext"]().ngIf,ctx_r17=core["nextContext"]();return core["resetView"](ctx_r17.changeMonth(data_r1.currentMonth-1,data_r1.currentYear))})),core["element"](5,"teta-icon",7),core["elementEnd"](),core["elementStart"](6,"div",8)(7,"p"),core["text"](8),core["elementEnd"](),core["elementStart"](9,"button",9),core["listener"]("click",(function _class55_div_0_ng_container_1_Template_button_click_9_listener(){core["restoreView"](_r16);const ctx_r19=core["nextContext"](2);return core["resetView"](ctx_r19.selectPicker("year"))})),core["text"](10),core["elementEnd"]()(),core["elementStart"](11,"teta-button",10),core["element"](12,"teta-icon",11),core["elementEnd"]()(),core["elementStart"](13,"div")(14,"teta-day-picker",12),core["listener"]("hoveredDateChange",(function _class55_div_0_ng_container_1_Template_teta_day_picker_hoveredDateChange_14_listener($event){core["restoreView"](_r16);const ctx_r20=core["nextContext"](2);return core["resetView"](ctx_r20.hoveredDate=$event)}))("selectDate",(function _class55_div_0_ng_container_1_Template_teta_day_picker_selectDate_14_listener($event){core["restoreView"](_r16);const ctx_r21=core["nextContext"](2);return core["resetView"](ctx_r21.selectDate($event))})),core["elementEnd"]()()(),core["template"](15,_class55_div_0_ng_container_1_div_15_Template,13,20,"div",13),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r2=core["nextContext"]();core["advance"](4),core["classMap"]("change-month-button datepicker_"+ctx_r2.viewType),core["property"]("ngClass",core["pureFunction1"](19,_c19,!ctx_r2.isLastDaySuitable(data_r1.currentMonth-1,data_r1.currentYear,ctx_r2.min)))("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](3),core["textInterpolate1"](" ",ctx_r2.getMothName(data_r1.currentMonth),""),core["advance"](1),core["classMap"]("datepicker_"+ctx_r2.viewType),core["advance"](1),core["textInterpolate"](data_r1.currentYear),core["advance"](1),core["classMap"]("change-month-button datepicker-arrow_hidden datepicker_"+ctx_r2.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["property"]("hoveredDate",ctx_r2.hoveredDate)("range",ctx_r2.getFromTo())("viewType",ctx_r2.viewType)("locale",ctx_r2.locale)("calendar",ctx_r2.calendar.currentMonth),core["advance"](1),core["property"]("ngIf",ctx_r2.getAvailableMonthYear(data_r1.currentMonth+1,data_r1.currentYear))}}function _class55_div_0_ng_container_2_Template(rf,ctx){if(1&rf){const _r24=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-month-picker",15),core["listener"]("changeYear",(function _class55_div_0_ng_container_2_Template_teta_month_picker_changeYear_1_listener($event){core["restoreView"](_r24);const ctx_r23=core["nextContext"](2);return core["resetView"](ctx_r23.setYear($event))}))("selectMonth",(function _class55_div_0_ng_container_2_Template_teta_month_picker_selectMonth_1_listener($event){core["restoreView"](_r24);const ctx_r25=core["nextContext"](2);return core["resetView"](ctx_r25.selectMonth($event))})),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r3=core["nextContext"]();core["advance"](1),core["property"]("localeMoths",ctx_r3.localeMonths)("currentYear",data_r1.currentYear)("selectedMonth",data_r1.currentMonth)("viewType",ctx_r3.viewType)("locale",ctx_r3.locale)}}function _class55_div_0_ng_container_3_Template(rf,ctx){if(1&rf){const _r28=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-year-picker",16),core["listener"]("selectYear",(function _class55_div_0_ng_container_3_Template_teta_year_picker_selectYear_1_listener($event){core["restoreView"](_r28);const ctx_r27=core["nextContext"](2);return core["resetView"](ctx_r27.selectYear($event))})),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r4=core["nextContext"]();core["advance"](1),core["property"]("minMax",data_r1.minMax)("locale",ctx_r4.locale)("viewType",ctx_r4.viewType)("selectedYear",data_r1.currentYear)}}function _class55_div_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",1),core["template"](1,_class55_div_0_ng_container_1_Template,16,21,"ng-container",2),core["template"](2,_class55_div_0_ng_container_2_Template,2,5,"ng-container",2),core["template"](3,_class55_div_0_ng_container_3_Template,2,4,"ng-container",2),core["elementEnd"]()),2&rf){const data_r1=ctx.ngIf;core["advance"](1),core["property"]("ngIf","day"===data_r1.selectedPicker),core["advance"](1),core["property"]("ngIf","month"===data_r1.selectedPicker),core["advance"](1),core["property"]("ngIf","year"===data_r1.selectedPicker)}}const _c20=function(a0,a1,a2,a3){return{currentMonth:a0,currentYear:a1,selectedPicker:a2,minMax:a3}};function _class56_teta_dropdown_0_div_7_Template(rf,ctx){if(1&rf){const _r6=core["getCurrentView"]();core["elementStart"](0,"div",11),core["listener"]("click",(function _class56_teta_dropdown_0_div_7_Template_div_click_0_listener(){core["restoreView"](_r6),core["nextContext"]();const _r2=core["reference"](6);return core["resetView"](_r2.focus())})),core["text"](1),core["elementEnd"]()}if(2&rf){const ctx_r3=core["nextContext"](2);core["advance"](1),core["textInterpolate"](ctx_r3.placeholder)}}function _class56_teta_dropdown_0_ng_container_10_Template(rf,ctx){if(1&rf){const _r9=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",12)(2,"teta-range-calendar",13),core["listener"]("setDate",(function _class56_teta_dropdown_0_ng_container_10_Template_teta_range_calendar_setDate_2_listener($event){core["restoreView"](_r9);const data_r1=core["nextContext"]().ngIf,ctx_r7=core["nextContext"]();return core["resetView"](ctx_r7.changeSelectedDate($event,data_r1.selectedDate))})),core["elementEnd"]()(),core["elementContainerEnd"]()}if(2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r4=core["nextContext"]();core["advance"](2),core["property"]("isDateNull",null===ctx_r4.date||null===(null==ctx_r4.date?null:ctx_r4.date.from)&&null===(null==ctx_r4.date?null:ctx_r4.date.to))("open",ctx_r4.open)("max",ctx_r4.maxDate)("allowNull",ctx_r4.allowNull)("min",ctx_r4.minDate)("selectedDate",data_r1.selectedDate)("date",ctx_r4.date)("viewType",ctx_r4.viewType)("locale",ctx_r4.locale)}}function _class56_teta_dropdown_0_Template(rf,ctx){if(1&rf){const _r12=core["getCurrentView"]();core["elementStart"](0,"teta-dropdown",1),core["listener"]("openChange",(function _class56_teta_dropdown_0_Template_teta_dropdown_openChange_0_listener($event){core["restoreView"](_r12);const ctx_r11=core["nextContext"]();return core["resetView"](ctx_r11.open=$event)}))("openChange",(function _class56_teta_dropdown_0_Template_teta_dropdown_openChange_0_listener($event){core["restoreView"](_r12);const ctx_r13=core["nextContext"]();return core["resetView"](ctx_r13.openChange($event))})),core["elementStart"](1,"div",2)(2,"teta-input",3)(3,"div")(4,"div",4)(5,"input",5,6),core["listener"]("keydown",(function _class56_teta_dropdown_0_Template_input_keydown_5_listener($event){core["restoreView"](_r12);const ctx_r14=core["nextContext"]();return core["resetView"](ctx_r14.checkEnter($event))}))("ngModelChange",(function _class56_teta_dropdown_0_Template_input_ngModelChange_5_listener($event){core["restoreView"](_r12);const ctx_r15=core["nextContext"]();return core["resetView"](ctx_r15.inputText=$event)}))("ngModelChange",(function _class56_teta_dropdown_0_Template_input_ngModelChange_5_listener($event){core["restoreView"](_r12);const ctx_r16=core["nextContext"]();return core["resetView"](ctx_r16.changeInput($event))})),core["elementEnd"](),core["template"](7,_class56_teta_dropdown_0_div_7_Template,2,1,"div",7),core["elementEnd"](),core["element"](8,"teta-icon",8),core["elementEnd"]()()(),core["elementStart"](9,"div",9),core["listener"]("click",(function _class56_teta_dropdown_0_Template_div_click_9_listener($event){return $event.preventDefault()})),core["template"](10,_class56_teta_dropdown_0_ng_container_10_Template,3,9,"ng-container",10),core["elementEnd"]()()}if(2&rf){const data_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["property"]("appendToBody",ctx_r0.appendToBody)("backdrop",ctx_r0.backdrop)("open",ctx_r0.open)("viewType",ctx_r0.viewType)("disabled",ctx_r0.disabled)("verticalAlign",ctx_r0.verticalAlign)("align",ctx_r0.align)("autoCloseIgnore",core["pureFunction0"](21,_c15)),core["advance"](1),core["classMap"]("datepicker-head font-body-3 gap-8 datepicker_"+ctx_r0.viewType),core["property"]("ngClass",core["pureFunction2"](22,_c16,ctx_r0.invalid,ctx_r0.disabled)),core["advance"](2),core["classMap"]("row_auto row datepicker_"+ctx_r0.viewType),core["advance"](2),core["property"]("ngClass",core["pureFunction1"](25,_c17,!ctx_r0.disabled))("disabled",ctx_r0.disabled)("ngModel",ctx_r0.inputText)("maskito",ctx_r0.maskitoOptions),core["advance"](2),core["property"]("ngIf",data_r1.selectedDate||ctx_r0.allowNull),core["advance"](1),core["property"]("name","calendar")("palette","text"),core["advance"](2),core["property"]("ngIf",ctx_r0.open)}}function _class62_ng_container_5_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementContainerStart"](0),core["element"](1,"teta-delimiter",6),core["elementStart"](2,"button",2),core["listener"]("click",(function _class62_ng_container_5_Template_button_click_2_listener($event){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.crossClick.emit($event))})),core["element"](3,"teta-icon",3),core["elementEnd"](),core["elementContainerEnd"]()}2&rf&&(core["advance"](1),core["property"]("palette","text"),core["advance"](1),core["property"]("palette","text")("view","ghost")("square",!0),core["advance"](1),core["property"]("name","closeBig")("palette","text"))}function _class62_div_6_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",7),core["projection"](1,1),core["elementEnd"]())}const _c22=[[["head"]],"*"],_c23=["head","*"];function _class64_div_5_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",5),core["projection"](1,1),core["elementEnd"]())}function _class68_ng_container_0_ng_container_5_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class68_ng_container_0_ng_container_6_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class68_ng_container_0_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-toolbar",1)(2,"button",2),core["listener"]("click",(function _class68_ng_container_0_Template_button_click_2_listener(){core["restoreView"](_r5);const ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.closePanel())})),core["element"](3,"teta-icon",3),core["elementEnd"](),core["elementStart"](4,"span",4),core["template"](5,_class68_ng_container_0_ng_container_5_Template,1,0,"ng-container",5),core["elementEnd"]()(),core["template"](6,_class68_ng_container_0_ng_container_6_Template,1,0,"ng-container",5),core["elementContainerEnd"]()}if(2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["styleProp"]("justify-content","right"===ctx_r0.direction?"space-between":"unset")("flex-direction","right"===ctx_r0.direction?"row-reverse":"row"),core["advance"](1),core["property"]("square",!0)("palette","text")("view","ghost"),core["advance"](1),core["property"]("palette","text")("name","right"===ctx_r0.direction?"start":"end"),core["advance"](2),core["property"]("ngTemplateOutlet",null==ctx_r0.head?null:ctx_r0.head.template),core["advance"](1),core["property"]("ngTemplateOutlet",null==ctx_r0.content?null:ctx_r0.content.template)}}function _class68_ng_container_1_Template(rf,ctx){if(1&rf){const _r7=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",6)(2,"button",7),core["listener"]("click",(function _class68_ng_container_1_Template_button_click_2_listener(){core["restoreView"](_r7);const ctx_r6=core["nextContext"]();return core["resetView"](ctx_r6.openPanel())})),core["elementStart"](3,"div",8),core["text"](4),core["elementEnd"](),core["element"](5,"teta-icon",9),core["elementEnd"]()(),core["elementContainerEnd"]()}if(2&rf){const ctx_r1=core["nextContext"]();core["advance"](2),core["property"]("palette","text")("view","ghost"),core["advance"](2),core["textInterpolate"](ctx_r1.placeholder),core["advance"](1),core["property"]("palette","text")("name","right"===ctx_r1.direction?"start":"end")}}const _c24=["buttonTemplate"],_c25=["fileUpload"];function _class70_ng_template_5_Template(rf,ctx){1&rf&&(core["elementStart"](0,"teta-button",5),core["element"](1,"teta-icon",6),core["text"](2),core["pipe"](3,"transloco"),core["elementEnd"]()),2&rf&&(core["property"]("palette","primary"),core["advance"](1),core["property"]("name","search")("palette","white"),core["advance"](1),core["textInterpolate1"](" ",core["pipeBind1"](3,4,"common.browse")," "))}function _class76_div_0_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",1)(1,"teta-input",2)(2,"input",3),core["listener"]("ngModelChange",(function _class76_div_0_Template_input_ngModelChange_2_listener($event){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.filter.value.greaterThan=$event)})),core["elementEnd"]()(),core["elementStart"](3,"teta-input",2)(4,"input",3),core["listener"]("ngModelChange",(function _class76_div_0_Template_input_ngModelChange_4_listener($event){core["restoreView"](_r3);const ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.filter.value.lessThan=$event)})),core["elementEnd"]()()()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("label",loc_r1.from),core["advance"](1),core["property"]("tetaOnlyNumber",!0)("ngModel",null==ctx_r0.filter.value?null:ctx_r0.filter.value.greaterThan),core["advance"](1),core["property"]("label",loc_r1.to),core["advance"](1),core["property"]("tetaOnlyNumber",!0)("ngModel",null==ctx_r0.filter.value?null:ctx_r0.filter.value.lessThan)}}const _c26=["scrollableWrapper"],_c27=["scrollbarVertical"],_c28=["scrollbarHorizontal"];function _class82_div_8_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",3)(1,"teta-checkbox",7),core["listener"]("ngModelChange",(function _class82_div_8_Template_teta_checkbox_ngModelChange_1_listener($event){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.setFilter($event))})),core["text"](2),core["elementEnd"]()()}if(2&rf){const option_r1=ctx.$implicit,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngModel",ctx_r0.filter.value)("value",option_r1.id)("binary",!1),core["advance"](1),core["textInterpolate1"](" ",option_r1.name," ")}}const _c29=function(){return["list","padding-v-2"]};function _class84_div_0_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",1)(1,"teta-input",2)(2,"teta-date-picker",3),core["listener"]("ngModelChange",(function _class84_div_0_Template_teta_date_picker_ngModelChange_2_listener($event){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.filter.value.greaterThan=$event)})),core["elementEnd"]()(),core["elementStart"](3,"teta-input",2)(4,"teta-date-picker",3),core["listener"]("ngModelChange",(function _class84_div_0_Template_teta_date_picker_ngModelChange_4_listener($event){core["restoreView"](_r3);const ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.filter.value.lessThan=$event)})),core["elementEnd"]()()()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("label",loc_r1.from),core["advance"](1),core["property"]("ngModel",null==ctx_r0.filter.value?null:ctx_r0.filter.value.greaterThan)("appendToBody",!1),core["advance"](1),core["property"]("label",loc_r1.to),core["advance"](1),core["property"]("ngModel",null==ctx_r0.filter.value?null:ctx_r0.filter.value.lessThan)("appendToBody",!1)}}function _class86_div_1_Template(rf,ctx){1&rf&&core["element"](0,"div",2)}function _class87_div_0_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",1)(1,"teta-radio",2),core["listener"]("ngModelChange",(function _class87_div_0_Template_teta_radio_ngModelChange_1_listener(){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.setFilter())})),core["elementStart"](2,"teta-radio-button",3),core["text"](3),core["elementEnd"](),core["elementStart"](4,"teta-radio-button",3),core["text"](5),core["elementEnd"](),core["elementStart"](6,"teta-radio-button",3),core["text"](7),core["elementEnd"]()()()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngModel",ctx_r0.filter.value),core["advance"](1),core["property"]("value",null),core["advance"](1),core["textInterpolate"](null==loc_r1?null:loc_r1.notSelected),core["advance"](1),core["property"]("value",!0),core["advance"](1),core["textInterpolate"](null==loc_r1?null:loc_r1.yes),core["advance"](1),core["property"]("value",!1),core["advance"](1),core["textInterpolate"](null==loc_r1?null:loc_r1.no)}}function _class94_ng_container_0_teta_icon_4_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-icon",12),2&rf){const ctx_r2=core["nextContext"](2);core["property"]("name",ctx_r2.icon)("palette","text")}}function _class94_ng_container_0_span_5_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"span",13),core["text"](1),core["elementEnd"]()),2&rf){const loc_r1=core["nextContext"]().tetaLet,ctx_r3=core["nextContext"]();core["advance"](1),core["textInterpolate1"](" ",ctx_r3.placeholder||loc_r1.notSelected," ")}}function _class94_ng_container_0_ng_container_6_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class94_ng_container_0_div_8_ng_container_1_Template(rf,ctx){if(1&rf){const _r17=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",18)(2,"teta-text-field",19),core["listener"]("ngModelChange",(function _class94_ng_container_0_div_8_ng_container_1_Template_teta_text_field_ngModelChange_2_listener($event){core["restoreView"](_r17);const ctx_r16=core["nextContext"](3);return core["resetView"](ctx_r16.search($event))})),core["elementEnd"]()(),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"](2).tetaLet,ctx_r13=core["nextContext"]();core["advance"](2),core["classMap"]("select_"+ctx_r13.viewType),core["property"]("ngModel",ctx_r13.searchText)("placeholder",loc_r1.search)("leftIconName","search")}}function _class94_ng_container_0_div_8_ng_container_2_ng_container_1_Template(rf,ctx){if(1&rf){const _r24=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",22),core["listener"]("click",(function _class94_ng_container_0_div_8_ng_container_2_ng_container_1_Template_div_click_1_listener(){core["restoreView"](_r24);const ctx_r23=core["nextContext"](4);return core["resetView"](ctx_r23.clear())})),core["text"](2),core["elementEnd"](),core["element"](3,"div",23),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"](3).tetaLet,ctx_r19=core["nextContext"]();core["advance"](1),core["classMap"]("margin-h-2 list-item list-item_interactive select_"+ctx_r19.viewType),core["advance"](1),core["textInterpolate1"](" ",loc_r1.notSelected," ")}}function _class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_ng_container_2_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_teta_icon_3_Template(rf,ctx){1&rf&&core["element"](0,"teta-icon",30),2&rf&&core["property"]("name","tick")("palette","text")}const _c30=function(a0,a1){return{$implicit:a0,option:a1}};function _class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_Template(rf,ctx){if(1&rf){const _r31=core["getCurrentView"]();core["elementStart"](0,"div",27),core["listener"]("click",(function _class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_Template_div_click_0_listener($event){const option_r27=core["restoreView"](_r31).$implicit,ctx_r30=core["nextContext"](5);return core["resetView"](ctx_r30.clickOption(option_r27,$event))})),core["elementStart"](1,"div",28),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_ng_container_2_Template,1,0,"ng-container",6),core["elementEnd"](),core["template"](3,_class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_teta_icon_3_Template,1,2,"teta-icon",29),core["elementEnd"]()}if(2&rf){const option_r27=ctx.$implicit;core["nextContext"](4);const _r8=core["reference"](12),ctx_r26=core["nextContext"]();core["classMap"]("list-item list-item_interactive justify-content-between select_"+ctx_r26.viewType),core["classProp"]("list-item_active",ctx_r26.itemSelected(option_r27)),core["property"]("tetaHighlight",ctx_r26.searchText),core["advance"](1),core["property"]("tetaHighlight",ctx_r26.searchText),core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r26.optionDirective?ctx_r26.optionDirective.template:_r8)("ngTemplateOutletContext",core["pureFunction2"](9,_c30,option_r27,option_r27)),core["advance"](1),core["property"]("ngIf",ctx_r26.itemSelected(option_r27))}}function _class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-scrollable",24)(1,"cdk-virtual-scroll-viewport",25),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_div_2_Template,4,12,"div",26),core["elementEnd"]()()),2&rf){const ctx_r20=core["nextContext"](4);core["advance"](1),core["property"]("itemSize",40),core["advance"](1),core["property"]("cdkVirtualForOf",ctx_r20.visibleOptions)("cdkVirtualForTemplateCacheSize",0)}}function _class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_ng_container_2_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_teta_icon_3_Template(rf,ctx){1&rf&&core["element"](0,"teta-icon",7),2&rf&&core["property"]("name","tick")("palette","text")}function _class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_Template(rf,ctx){if(1&rf){const _r37=core["getCurrentView"]();core["elementStart"](0,"div",22),core["listener"]("click",(function _class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_Template_div_click_0_listener($event){const option_r33=core["restoreView"](_r37).$implicit,ctx_r36=core["nextContext"](5);return core["resetView"](ctx_r36.clickOption(option_r33,$event))})),core["elementStart"](1,"span",28),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_ng_container_2_Template,1,0,"ng-container",6),core["elementEnd"](),core["template"](3,_class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_teta_icon_3_Template,1,2,"teta-icon",34),core["elementEnd"]()}if(2&rf){const option_r33=ctx.$implicit;core["nextContext"](4);const _r8=core["reference"](12),ctx_r32=core["nextContext"]();core["classMap"]("list-item list-item_interactive justify-content-between  select_"+ctx_r32.viewType),core["classProp"]("list-item_active",ctx_r32.itemSelected(option_r33)),core["advance"](1),core["property"]("tetaHighlight",ctx_r32.searchText),core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r32.optionDirective?ctx_r32.optionDirective.template:_r8)("ngTemplateOutletContext",core["pureFunction2"](8,_c30,option_r33,option_r33)),core["advance"](1),core["property"]("ngIf",ctx_r32.itemSelected(option_r33)&&ctx_r32.multiple)}}const _c31=function(){return["column","column_auto"]};function _class94_ng_container_0_div_8_ng_container_2_ng_template_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-scrollable",31)(1,"div",32),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_ng_template_3_div_2_Template,4,11,"div",33),core["elementEnd"]()()),2&rf){const ctx_r22=core["nextContext"](4);core["property"]("contentClass",core["pureFunction0"](2,_c31)),core["advance"](2),core["property"]("ngForOf",ctx_r22.visibleOptions)}}function _class94_ng_container_0_div_8_ng_container_2_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class94_ng_container_0_div_8_ng_container_2_ng_container_1_Template,4,3,"ng-container",15),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_teta_scrollable_2_Template,3,3,"teta-scrollable",20),core["template"](3,_class94_ng_container_0_div_8_ng_container_2_ng_template_3_Template,3,3,"ng-template",null,21,core["templateRefExtractor"]),core["elementContainerEnd"]()),2&rf){const _r21=core["reference"](4),ctx_r14=core["nextContext"](3);core["advance"](1),core["property"]("ngIf",!ctx_r14.multiple&&ctx_r14.allowNull),core["advance"](1),core["property"]("ngIf",ctx_r14.virtual)("ngIfElse",_r21)}}function _class94_ng_container_0_div_8_div_3_div_1_Template(rf,ctx){if(1&rf){const _r41=core["getCurrentView"]();core["elementStart"](0,"div",37)(1,"p"),core["text"](2),core["elementEnd"](),core["elementStart"](3,"teta-icon",38),core["listener"]("click",(function _class94_ng_container_0_div_8_div_3_div_1_Template_teta_icon_click_3_listener($event){const item_r39=core["restoreView"](_r41).$implicit,ctx_r40=core["nextContext"](4);return core["resetView"](ctx_r40.removeItemClick(item_r39,$event))})),core["elementEnd"]()()}if(2&rf){const item_r39=ctx.$implicit,ctx_r38=core["nextContext"](4);core["advance"](2),core["textInterpolate"](ctx_r38.getText(item_r39)),core["advance"](1),core["property"]("palette","text")("name","closeCircle")}}function _class94_ng_container_0_div_8_div_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",35),core["template"](1,_class94_ng_container_0_div_8_div_3_div_1_Template,4,3,"div",36),core["elementEnd"]()),2&rf){const ctx_r15=core["nextContext"](3);core["advance"](1),core["property"]("ngForOf",ctx_r15.value)}}function _class94_ng_container_0_div_8_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",14),core["listener"]("click",(function _class94_ng_container_0_div_8_Template_div_click_0_listener($event){return $event.preventDefault()})),core["template"](1,_class94_ng_container_0_div_8_ng_container_1_Template,3,5,"ng-container",15),core["template"](2,_class94_ng_container_0_div_8_ng_container_2_Template,5,3,"ng-container",16),core["template"](3,_class94_ng_container_0_div_8_div_3_Template,2,1,"div",17),core["elementEnd"]()),2&rf){core["nextContext"]();const _r6=core["reference"](10),ctx_r5=core["nextContext"]();core["advance"](1),core["property"]("ngIf",ctx_r5.searchRef),core["advance"](1),core["property"]("ngIf",null==ctx_r5.visibleOptions?null:ctx_r5.visibleOptions.length)("ngIfElse",_r6),core["advance"](1),core["property"]("ngIf",ctx_r5.multiple&&(null==ctx_r5.value?null:ctx_r5.value.length))}}function _class94_ng_container_0_ng_template_9_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"p",39),core["text"](1),core["elementEnd"]()),2&rf){const loc_r1=core["nextContext"]().tetaLet,ctx_r7=core["nextContext"]();core["advance"](1),core["textInterpolate"](ctx_r7.notFoundText||loc_r1.notFound)}}function _class94_ng_container_0_ng_template_11_Template(rf,ctx){if(1&rf&&core["text"](0),2&rf){const option_r44=ctx.$implicit,ctx_r9=core["nextContext"](2);core["textInterpolate1"](" ",ctx_r9.getText(option_r44)," ")}}function _class94_ng_container_0_ng_template_13_div_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",41),core["text"](1),core["elementEnd"]()),2&rf){const value_r45=core["nextContext"]().$implicit,loc_r1=core["nextContext"]().tetaLet;core["advance"](1),core["textInterpolate1"](" ",loc_r1.selected+" "+(null==value_r45?null:value_r45.length)," ")}}function _class94_ng_container_0_ng_template_13_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["elementStart"](1,"span",42),core["text"](2),core["elementEnd"](),core["elementContainerEnd"]()),2&rf){const value_r45=core["nextContext"]().$implicit,ctx_r47=core["nextContext"](2);core["advance"](2),core["textInterpolate"](ctx_r47.getText(value_r45))}}function _class94_ng_container_0_ng_template_13_Template(rf,ctx){if(1&rf&&(core["template"](0,_class94_ng_container_0_ng_template_13_div_0_Template,2,1,"div",40),core["template"](1,_class94_ng_container_0_ng_template_13_ng_container_1_Template,3,1,"ng-container",15)),2&rf){const ctx_r11=core["nextContext"](2);core["property"]("ngIf",ctx_r11.multiple),core["advance"](1),core["property"]("ngIf",!ctx_r11.multiple)}}const _c32=function(a0,a1){return{$implicit:a0,value:a1}};function _class94_ng_container_0_Template(rf,ctx){if(1&rf){const _r52=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-dropdown",1),core["listener"]("openChange",(function _class94_ng_container_0_Template_teta_dropdown_openChange_1_listener($event){core["restoreView"](_r52);const ctx_r51=core["nextContext"]();return core["resetView"](ctx_r51.open=$event)})),core["elementStart"](2,"div",2)(3,"div",3),core["template"](4,_class94_ng_container_0_teta_icon_4_Template,1,2,"teta-icon",4),core["template"](5,_class94_ng_container_0_span_5_Template,2,1,"span",5),core["template"](6,_class94_ng_container_0_ng_container_6_Template,1,0,"ng-container",6),core["elementEnd"](),core["element"](7,"teta-icon",7),core["elementEnd"](),core["template"](8,_class94_ng_container_0_div_8_Template,4,4,"div",8),core["elementEnd"](),core["template"](9,_class94_ng_container_0_ng_template_9_Template,2,1,"ng-template",null,9,core["templateRefExtractor"]),core["template"](11,_class94_ng_container_0_ng_template_11_Template,1,1,"ng-template",null,10,core["templateRefExtractor"]),core["template"](13,_class94_ng_container_0_ng_template_13_Template,2,2,"ng-template",null,11,core["templateRefExtractor"]),core["elementContainerEnd"]()}if(2&rf){const _r10=core["reference"](14),ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("align",ctx_r0.align)("verticalAlign",ctx_r0.verticalAlign)("autoClose",ctx_r0.autoClose)("autoCloseIgnore",ctx_r0.autoCloseIgnore)("open",ctx_r0.open)("appendToBody",ctx_r0.appendToBody)("disabled",ctx_r0.disabled)("viewType",ctx_r0.viewType),core["advance"](1),core["classMap"]("row row_auto select-head select_"+ctx_r0.viewType),core["classProp"]("select-head_invalid",ctx_r0.invalid),core["advance"](2),core["property"]("ngIf",ctx_r0.icon),core["advance"](1),core["property"]("ngIf",(null===ctx_r0.value||void 0===ctx_r0.value||0===(null==ctx_r0.value?null:ctx_r0.value.length))&&!ctx_r0.multiple),core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r0.valueDirective?ctx_r0.valueDirective.template:_r10)("ngTemplateOutletContext",core["pureFunction2"](19,_c32,ctx_r0.value,ctx_r0.value)),core["advance"](1),core["property"]("name","arrowDownSmall")("palette","text"),core["advance"](1),core["property"]("ngIf",null==ctx_r0.options?null:ctx_r0.options.length)}}function _class107_div_5_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",6),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["textInterpolate1"](" ",ctx_r0.message.text,"\n")}}function _class107_ng_container_6_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}const _c33=function(a0){return{$implicit:a0}};function _class107_ng_container_6_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class107_ng_container_6_ng_container_1_Template,1,0,"ng-container",7),core["elementContainerEnd"]()),2&rf){const ctx_r1=core["nextContext"]();core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r1.message.template)("ngTemplateOutletContext",core["pureFunction1"](2,_c33,ctx_r1.message))}}function _class108_teta_message_0_Template(rf,ctx){if(1&rf){const _r4=core["getCurrentView"]();core["elementStart"](0,"teta-message",1),core["listener"]("closed",(function _class108_teta_message_0_Template_teta_message_closed_0_listener($event){core["restoreView"](_r4);const ctx_r3=core["nextContext"]();return core["resetView"](ctx_r3.closedItem($event))})),core["elementEnd"]()}if(2&rf){const message_r1=ctx.$implicit,i_r2=ctx.index;core["property"]("message",message_r1)("index",i_r2)}}function _class113_button_4_Template(rf,ctx){if(1&rf){const _r4=core["getCurrentView"]();core["elementStart"](0,"button",6),core["listener"]("click",(function _class113_button_4_Template_button_click_0_listener(){core["restoreView"](_r4);const ctx_r3=core["nextContext"]();return core["resetView"](ctx_r3.cancel())})),core["text"](1),core["pipe"](2,"transloco"),core["elementEnd"]()}2&rf&&(core["property"]("palette","text")("view","ghost"),core["advance"](1),core["textInterpolate1"](" ",core["pipeBind1"](2,3,"common.cancel")," "))}function _class113_teta_icon_6_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-icon",7),2&rf){const ctx_r1=core["nextContext"]();core["property"]("name",ctx_r1.buttonIcon)}}function _class113_ng_container_7_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["text"](1),core["pipe"](2,"transloco"),core["elementContainerEnd"]()),2&rf){const ctx_r2=core["nextContext"]();core["advance"](1),core["textInterpolate"](core["pipeBind1"](2,1,ctx_r2.buttonText))}}const _c34=["progressSlider"];function _class127_span_0_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",3),core["projection"](1),core["elementEnd"]())}function _class128_teta_input_0_ng_container_1_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class128_teta_input_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class128_teta_input_0_ng_container_1_ng_container_1_Template,1,0,"ng-container",5),core["elementContainerEnd"]()),2&rf){const ctx_r1=core["nextContext"](2);core["advance"](1),core["property"]("ngTemplateOutlet",ctx_r1.template.template)("ngTemplateOutletContext",core["pureFunction1"](2,_c33,null==ctx_r1.formGroup?null:ctx_r1.formGroup.get(ctx_r1.column.name)))}}function _class128_teta_input_0_ng_template_2_ng_container_0_teta_select_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-select",12),2&rf){const ctx_r7=core["nextContext"](4);let tmp_0_0;core["property"]("searchRef",(null==(tmp_0_0=ctx_r7.getDict())?null:tmp_0_0.length)>10?"name":"")("allowNull",!ctx_r7.column.required)("appendToBody",!0)("invalid",ctx_r7.controlIsInvalid(ctx_r7.column.name))("formControlName",ctx_r7.column.name)("options",ctx_r7.getDict())("valueRef","id")("textRef","name")("multiple",!1)}}function _class128_teta_input_0_ng_template_2_ng_container_0_teta_date_picker_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-date-picker",13),2&rf){const ctx_r8=core["nextContext"](4);core["property"]("appendToBody",!0)("invalid",ctx_r8.controlIsInvalid(ctx_r8.column.name))("formControlName",ctx_r8.column.name)}}function _class128_teta_input_0_ng_template_2_ng_container_0_teta_toggle_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-toggle",14),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r9=core["nextContext"](4);core["property"]("formControlName",ctx_r9.column.name),core["advance"](1),core["textInterpolate1"](" ",ctx_r9.column.caption," ")}}function _class128_teta_input_0_ng_template_2_ng_container_0_teta_text_field_4_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-text-field",15),2&rf){const ctx_r10=core["nextContext"](4);core["property"]("decimalPart",ctx_r10.column.filterType===ctx_r10.filterTypeEnum.number?ctx_r10.decimalPart:null)("onlyNumber",ctx_r10.column.filterType===ctx_r10.filterTypeEnum.number)("placeholder",ctx_r10.column.caption)("invalid",ctx_r10.controlIsInvalid(ctx_r10.column.name))("formControlName",ctx_r10.column.name)}}function _class128_teta_input_0_ng_template_2_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0,7),core["template"](1,_class128_teta_input_0_ng_template_2_ng_container_0_teta_select_1_Template,1,9,"teta-select",8),core["template"](2,_class128_teta_input_0_ng_template_2_ng_container_0_teta_date_picker_2_Template,1,3,"teta-date-picker",9),core["template"](3,_class128_teta_input_0_ng_template_2_ng_container_0_teta_toggle_3_Template,2,2,"teta-toggle",10),core["template"](4,_class128_teta_input_0_ng_template_2_ng_container_0_teta_text_field_4_Template,1,5,"teta-text-field",11),core["elementContainerEnd"]()),2&rf){const ctx_r6=core["nextContext"](3);core["property"]("ngSwitch",ctx_r6.column.filterType),core["advance"](1),core["property"]("ngSwitchCase",ctx_r6.filterTypeEnum.list),core["advance"](1),core["property"]("ngSwitchCase",ctx_r6.filterTypeEnum.date),core["advance"](1),core["property"]("ngSwitchCase",ctx_r6.filterTypeEnum.boolean)}}function _class128_teta_input_0_ng_template_2_Template(rf,ctx){if(1&rf&&core["template"](0,_class128_teta_input_0_ng_template_2_ng_container_0_Template,5,4,"ng-container",6),2&rf){const ctx_r3=core["nextContext"](2);core["property"]("ngIf",null==ctx_r3.formGroup?null:ctx_r3.formGroup.get(ctx_r3.column.name))}}function _class128_teta_input_0_div_4_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",16),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r4=core["nextContext"](2);core["advance"](1),core["textInterpolate1"](" ",ctx_r4.getError(ctx_r4.column)," ")}}function _class128_teta_input_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-input",1),core["template"](1,_class128_teta_input_0_ng_container_1_Template,2,4,"ng-container",2),core["template"](2,_class128_teta_input_0_ng_template_2_Template,1,1,"ng-template",null,3,core["templateRefExtractor"]),core["template"](4,_class128_teta_input_0_div_4_Template,2,1,"div",4),core["elementEnd"]()),2&rf){const _r2=core["reference"](3),ctx_r0=core["nextContext"]();core["property"]("label",ctx_r0.caption)("hint",ctx_r0.column.hint)("formGroup",ctx_r0.formGroup)("horizontal",ctx_r0.horizontal)("required",ctx_r0.column.required),core["advance"](1),core["property"]("ngIf",ctx_r0.template)("ngIfElse",_r2),core["advance"](3),core["property"]("ngIf",ctx_r0.controlIsInvalid(ctx_r0.column.name))}}function _class129_ng_container_4_ng_container_1_teta_property_grid_item_1_Template(rf,ctx){if(1&rf){const _r6=core["getCurrentView"]();core["elementStart"](0,"teta-property-grid-item",5),core["listener"]("controlValueChange",(function _class129_ng_container_4_ng_container_1_teta_property_grid_item_1_Template_teta_property_grid_item_controlValueChange_0_listener($event){core["restoreView"](_r6);const ctx_r5=core["nextContext"](3);return core["resetView"](ctx_r5.controlValueChange.emit($event))})),core["elementEnd"]()}if(2&rf){const col_r1=core["nextContext"](2).$implicit,ctx_r4=core["nextContext"]();core["property"]("id",col_r1.name)("dict",ctx_r4.dict)("column",col_r1)("item",ctx_r4.item)("itemTemplates",ctx_r4.itemTemplates)("decimalPart",ctx_r4.decimalPart)("hideNonEditable",ctx_r4.hideNonEditable)("horizontal",ctx_r4.horizontal)}}function _class129_ng_container_4_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class129_ng_container_4_ng_container_1_teta_property_grid_item_1_Template,1,8,"teta-property-grid-item",4),core["elementContainerEnd"]()),2&rf){const ctx_r2=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",ctx_r2.column.editable||!ctx_r2.hideNonEditable)}}function _class129_ng_container_4_ng_container_2_Template(rf,ctx){if(1&rf){const _r9=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"teta-property-grid-group",5),core["listener"]("controlValueChange",(function _class129_ng_container_4_ng_container_2_Template_teta_property_grid_group_controlValueChange_1_listener($event){core["restoreView"](_r9);const ctx_r8=core["nextContext"](2);return core["resetView"](ctx_r8.controlValueChange.emit($event))})),core["elementEnd"](),core["elementContainerEnd"]()}if(2&rf){const col_r1=core["nextContext"]().$implicit,ctx_r3=core["nextContext"]();core["advance"](1),core["property"]("id",col_r1.name)("dict",ctx_r3.dict)("column",col_r1)("item",ctx_r3.item)("itemTemplates",ctx_r3.itemTemplates)("decimalPart",ctx_r3.decimalPart)("hideNonEditable",ctx_r3.hideNonEditable)("horizontal",ctx_r3.horizontal)}}function _class129_ng_container_4_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class129_ng_container_4_ng_container_1_Template,2,1,"ng-container",3),core["template"](2,_class129_ng_container_4_ng_container_2_Template,2,8,"ng-container",3),core["elementContainerEnd"]()),2&rf){const col_r1=ctx.$implicit;core["advance"](1),core["property"]("ngIf",(null==col_r1.columns?null:col_r1.columns.length)<1),core["advance"](1),core["property"]("ngIf",(null==col_r1.columns?null:col_r1.columns.length)>0)}}function _class130_ng_container_0_ng_container_1_teta_property_grid_item_1_Template(rf,ctx){if(1&rf){const _r6=core["getCurrentView"]();core["elementStart"](0,"teta-property-grid-item",4),core["listener"]("controlValueChange",(function _class130_ng_container_0_ng_container_1_teta_property_grid_item_1_Template_teta_property_grid_item_controlValueChange_0_listener($event){core["restoreView"](_r6);const ctx_r5=core["nextContext"](3);return core["resetView"](ctx_r5.onControlValueChange($event))})),core["elementEnd"]()}if(2&rf){const column_r2=core["nextContext"]().$implicit,ctx_r3=core["nextContext"](2);core["property"]("dict",ctx_r3.dict)("column",column_r2)("item",ctx_r3.item)("id",column_r2.name)("itemTemplates",ctx_r3.itemTemplates)("decimalPart",ctx_r3.decimalPart)("formGroup",ctx_r3.formGroup)("horizontal",ctx_r3.horizontal)("hideNonEditable",ctx_r3.hideNonEditable)}}function _class130_ng_container_0_ng_container_1_teta_property_grid_group_2_Template(rf,ctx){if(1&rf){const _r9=core["getCurrentView"]();core["elementStart"](0,"teta-property-grid-group",5),core["listener"]("controlValueChange",(function _class130_ng_container_0_ng_container_1_teta_property_grid_group_2_Template_teta_property_grid_group_controlValueChange_0_listener($event){core["restoreView"](_r9);const ctx_r8=core["nextContext"](3);return core["resetView"](ctx_r8.onControlValueChange($event))})),core["elementEnd"]()}if(2&rf){const column_r2=core["nextContext"]().$implicit,ctx_r4=core["nextContext"](2);core["property"]("id",column_r2.name)("dict",ctx_r4.dict)("column",column_r2)("item",ctx_r4.item)("itemTemplates",ctx_r4.itemTemplates)("decimalPart",ctx_r4.decimalPart)("formGroup",ctx_r4.formGroup)("horizontal",ctx_r4.horizontal)("hideNonEditable",ctx_r4.hideNonEditable)}}function _class130_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class130_ng_container_0_ng_container_1_teta_property_grid_item_1_Template,1,9,"teta-property-grid-item",2),core["template"](2,_class130_ng_container_0_ng_container_1_teta_property_grid_group_2_Template,1,9,"teta-property-grid-group",3),core["elementContainerEnd"]()),2&rf){const column_r2=ctx.$implicit,ctx_r1=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",(null==column_r2.columns?null:column_r2.columns.length)<1&&(ctx_r1.getEditable(column_r2)||!ctx_r1.hideNonEditable)),core["advance"](1),core["property"]("ngIf",(null==column_r2.columns?null:column_r2.columns.length)>0&&(ctx_r1.getEditable(column_r2)||!ctx_r1.hideNonEditable))}}function _class130_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class130_ng_container_0_ng_container_1_Template,3,2,"ng-container",1),core["elementContainerEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngForOf",ctx_r0.columns)("ngForTrackBy",ctx_r0.trackColumns)}}function _class133_div_0_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"div",2),core["listener"]("click",(function _class133_div_0_Template_div_click_0_listener(){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.setOpen(!1))})),core["elementEnd"]()}2&rf&&core["property"]("@sidebar",void 0)}function _class133_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",3),core["projection"](1),core["elementEnd"]()),2&rf){const ctx_r1=core["nextContext"]();core["classProp"]("sidebar-top",ctx_r1.position===ctx_r1.sidebarPosition.top)("sidebar-bottom",ctx_r1.position===ctx_r1.sidebarPosition.bottom)("sidebar-left",ctx_r1.position===ctx_r1.sidebarPosition.left)("sidebar-right",ctx_r1.position===ctx_r1.sidebarPosition.right),core["property"]("@sidebar",void 0)("ngClass",ctx_r1.className)}}function _class149_div_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",3),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["textInterpolate1"](" [",ctx_r0.column.unit,"] ")}}function _class154_div_1_ng_template_3_Template(rf,ctx){}function _class154_div_1_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementStart"](0,"div",4),core["listener"]("click",(function _class154_div_1_Template_div_click_0_listener(){const tab_r2=core["restoreView"](_r5).$implicit,ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.select(tab_r2.id))})),core["elementStart"](1,"span",5),core["text"](2),core["template"](3,_class154_div_1_ng_template_3_Template,0,0,"ng-template",6),core["elementEnd"]()()}if(2&rf){const tab_r2=ctx.$implicit,ctx_r0=core["nextContext"]();core["classProp"]("tabs-head-item_active",tab_r2.id===ctx_r0.activeId)("tabs-head-item_disabled",tab_r2.disabled),core["advance"](1),core["property"]("id",tab_r2.id),core["attribute"]("tabindex",tab_r2.disabled?"-1":void 0)("aria-controls",ctx_r0.destroyOnHide&&tab_r2.id!==ctx_r0.activeId?null:tab_r2.id+"-panel")("aria-expanded",tab_r2.id===ctx_r0.activeId)("aria-disabled",tab_r2.disabled),core["advance"](1),core["textInterpolate1"](" ",tab_r2.title," "),core["advance"](1),core["property"]("ngTemplateOutlet",null==tab_r2.titleTpl?null:tab_r2.titleTpl.template)}}function _class154_ng_template_4_ng_container_0_ng_template_1_Template(rf,ctx){}function _class154_ng_template_4_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class154_ng_template_4_ng_container_0_ng_template_1_Template,0,0,"ng-template",6),core["elementContainerEnd"]()),2&rf){const tab_r6=core["nextContext"]().$implicit;core["advance"](1),core["property"]("ngTemplateOutlet",null==tab_r6.contentTpl?null:tab_r6.contentTpl.template)}}function _class154_ng_template_4_Template(rf,ctx){if(1&rf&&core["template"](0,_class154_ng_template_4_ng_container_0_Template,2,1,"ng-container",7),2&rf){const tab_r6=ctx.$implicit,ctx_r1=core["nextContext"]();core["property"]("ngIf",!ctx_r1.destroyOnHide||tab_r6.id===ctx_r1.activeId)}}function _class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_1_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["element"](1,"teta-icon",6),core["elementContainerEnd"]()),2&rf){const tab_r2=core["nextContext"](3).$implicit;core["advance"](1),core["property"]("name",tab_r2.icon)("palette","text")}}function _class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_1_Template(rf,ctx){if(1&rf&&core["template"](0,_class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_1_ng_container_0_Template,2,2,"ng-container",3),2&rf){const tab_r2=core["nextContext"](2).$implicit;core["property"]("ngIf",tab_r2.icon)}}function _class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_2_ng_container_0_Template(rf,ctx){1&rf&&core["elementContainer"](0)}const _c35=function(a0,a1,a2,a3,a4){return{column:a0,columns:a1,data:a2,state:a3,close:a4}};function _class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_2_Template(rf,ctx){if(1&rf&&core["template"](0,_class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_2_ng_container_0_Template,1,0,"ng-container",7),2&rf){const tab_r2=core["nextContext"](2).$implicit,ctx_r5=core["nextContext"](2);core["property"]("ngTemplateOutlet",tab_r2.template)("ngTemplateOutletContext",core["pureFunction5"](2,_c35,ctx_r5.column,ctx_r5.columns,ctx_r5.data,ctx_r5.state,ctx_r5.closeDropdown))}}function _class155_teta_tabs_0_ng_container_1_teta_tab_1_Template(rf,ctx){1&rf&&(core["elementStart"](0,"teta-tab"),core["template"](1,_class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_1_Template,1,1,"ng-template",4),core["template"](2,_class155_teta_tabs_0_ng_container_1_teta_tab_1_ng_template_2_Template,1,8,"ng-template",5),core["elementEnd"]())}function _class155_teta_tabs_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class155_teta_tabs_0_ng_container_1_teta_tab_1_Template,3,0,"teta-tab",3),core["elementContainerEnd"]()),2&rf){const tab_r2=ctx.$implicit,ctx_r1=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",tab_r2.showTab(ctx_r1.column))}}function _class155_teta_tabs_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-tabs",1),core["template"](1,_class155_teta_tabs_0_ng_container_1_Template,2,1,"ng-container",2),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngForOf",ctx_r0.tabTemplates)("ngForTrackBy",ctx_r0.trackIndex)}}function _class157_div_0_ng_container_1_Template(rf,ctx){if(1&rf){const _r6=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_1_Template_div_click_1_listener(){core["restoreView"](_r6);const ctx_r5=core["nextContext"](2);return core["resetView"](ctx_r5.pinColumn())})),core["text"](2),core["elementEnd"](),core["element"](3,"div",4),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"]().ngIf,ctx_r2=core["nextContext"]();core["advance"](2),core["textInterpolate1"](" ",ctx_r2.column.locked?loc_r1.unpin:loc_r1.pin," ")}}function _class157_div_0_ng_container_2_ng_container_5_div_1_Template(rf,ctx){if(1&rf){const _r11=core["getCurrentView"]();core["elementStart"](0,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_2_ng_container_5_div_1_Template_div_click_0_listener(){core["restoreView"](_r11);const ctx_r10=core["nextContext"](4);return core["resetView"](ctx_r10.clearSort())})),core["text"](1),core["elementEnd"]()}if(2&rf){const loc_r1=core["nextContext"](3).ngIf;core["advance"](1),core["textInterpolate1"](" ",loc_r1.clearSort," ")}}function _class157_div_0_ng_container_2_ng_container_5_Template(rf,ctx){if(1&rf){const _r14=core["getCurrentView"]();core["elementContainerStart"](0),core["template"](1,_class157_div_0_ng_container_2_ng_container_5_div_1_Template,2,1,"div",5),core["elementStart"](2,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_2_ng_container_5_Template_div_click_2_listener(){core["restoreView"](_r14);const ctx_r13=core["nextContext"](3);return core["resetView"](ctx_r13.clearAllSort())})),core["text"](3),core["elementEnd"](),core["element"](4,"div",4),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"](2).ngIf,ctx_r8=core["nextContext"]();core["advance"](1),core["property"]("ngIf",ctx_r8.sortParam),core["advance"](2),core["textInterpolate1"](" ",loc_r1.clearAllSort," ")}}function _class157_div_0_ng_container_2_Template(rf,ctx){if(1&rf){const _r17=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_2_Template_div_click_1_listener($event){core["restoreView"](_r17);const ctx_r16=core["nextContext"](2);return core["resetView"](ctx_r16.sortAsc($event))})),core["text"](2),core["elementEnd"](),core["elementStart"](3,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_2_Template_div_click_3_listener($event){core["restoreView"](_r17);const ctx_r18=core["nextContext"](2);return core["resetView"](ctx_r18.sortDesc($event))})),core["text"](4),core["elementEnd"](),core["template"](5,_class157_div_0_ng_container_2_ng_container_5_Template,5,2,"ng-container",2),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"]().ngIf,ctx_r3=core["nextContext"]();core["advance"](2),core["textInterpolate1"](" ",loc_r1.sortAsc," "),core["advance"](2),core["textInterpolate1"](" ",loc_r1.sortDesc," "),core["advance"](1),core["property"]("ngIf",ctx_r3.hasSortedColumns())}}function _class157_div_0_ng_container_3_div_1_Template(rf,ctx){if(1&rf){const _r22=core["getCurrentView"]();core["elementStart"](0,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_3_div_1_Template_div_click_0_listener(){core["restoreView"](_r22);const ctx_r21=core["nextContext"](3);return core["resetView"](ctx_r21.clearFilter())})),core["text"](1),core["elementEnd"]()}if(2&rf){const loc_r1=core["nextContext"](2).ngIf;core["advance"](1),core["textInterpolate1"](" ",loc_r1.clearFilter," ")}}function _class157_div_0_ng_container_3_Template(rf,ctx){if(1&rf){const _r25=core["getCurrentView"]();core["elementContainerStart"](0),core["template"](1,_class157_div_0_ng_container_3_div_1_Template,2,1,"div",5),core["elementStart"](2,"div",3),core["listener"]("click",(function _class157_div_0_ng_container_3_Template_div_click_2_listener(){core["restoreView"](_r25);const ctx_r24=core["nextContext"](2);return core["resetView"](ctx_r24.clearAllFilters())})),core["text"](3),core["elementEnd"](),core["element"](4,"div",4),core["elementContainerEnd"]()}if(2&rf){const loc_r1=core["nextContext"]().ngIf,ctx_r4=core["nextContext"]();core["advance"](1),core["property"]("ngIf",ctx_r4.filtered),core["advance"](2),core["textInterpolate1"](" ",loc_r1.clearAllFilters," ")}}function _class157_div_0_Template(rf,ctx){if(1&rf){const _r28=core["getCurrentView"]();core["elementStart"](0,"div",1),core["template"](1,_class157_div_0_ng_container_1_Template,4,1,"ng-container",2),core["template"](2,_class157_div_0_ng_container_2_Template,6,3,"ng-container",2),core["template"](3,_class157_div_0_ng_container_3_Template,5,2,"ng-container",2),core["elementStart"](4,"div",3),core["listener"]("click",(function _class157_div_0_Template_div_click_4_listener(){core["restoreView"](_r28);const ctx_r27=core["nextContext"]();return core["resetView"](ctx_r27.autosizeColumn())})),core["text"](5),core["elementEnd"](),core["elementStart"](6,"div",3),core["listener"]("click",(function _class157_div_0_Template_div_click_6_listener(){core["restoreView"](_r28);const ctx_r29=core["nextContext"]();return core["resetView"](ctx_r29.autosizeAllColumns())})),core["text"](7),core["elementEnd"](),core["element"](8,"div",4),core["elementStart"](9,"div",3),core["listener"]("click",(function _class157_div_0_Template_div_click_9_listener(){core["restoreView"](_r28);const ctx_r30=core["nextContext"]();return core["resetView"](ctx_r30.restoreDefaultColumns())})),core["text"](10),core["elementEnd"]()()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngIf",!ctx_r0.parent),core["advance"](1),core["property"]("ngIf",ctx_r0.column.sortable),core["advance"](1),core["property"]("ngIf",ctx_r0.hasFilteredColumns()),core["advance"](2),core["textInterpolate1"](" ",loc_r1.autosizeColumn," "),core["advance"](2),core["textInterpolate1"](" ",loc_r1.autosizeAll," "),core["advance"](3),core["textInterpolate1"](" ",loc_r1.resetColumnsSize," ")}}function _class158_ng_container_0_teta_filter_host_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-filter-host",6),2&rf){const options_r3=ctx.ngIf,ctx_r2=core["nextContext"](2);core["property"]("column",ctx_r2.column)("data",ctx_r2.data)("state",ctx_r2.state)("filterOptions",options_r3[ctx_r2.column.name])}}function _class158_ng_container_0_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementContainerStart"](0),core["template"](1,_class158_ng_container_0_teta_filter_host_1_Template,1,4,"teta-filter-host",1),core["pipe"](2,"async"),core["elementStart"](3,"teta-toolbar",2)(4,"button",3),core["listener"]("click",(function _class158_ng_container_0_Template_button_click_4_listener(){core["restoreView"](_r5);const ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.clearFilter())})),core["text"](5),core["elementEnd"](),core["elementStart"](6,"button",4),core["listener"]("click",(function _class158_ng_container_0_Template_button_click_6_listener(){core["restoreView"](_r5);const ctx_r6=core["nextContext"]();return core["resetView"](ctx_r6.applyFilter())})),core["element"](7,"teta-icon",5),core["text"](8),core["elementEnd"]()(),core["elementContainerEnd"]()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngIf",core["pipeBind1"](2,8,ctx_r0.filterOptions)),core["advance"](3),core["property"]("palette","text")("view","ghost"),core["advance"](1),core["textInterpolate1"](" ",loc_r1.clear," "),core["advance"](1),core["property"]("palette","primary"),core["advance"](1),core["property"]("name","tick")("palette","white"),core["advance"](1),core["textInterpolate1"](" ",loc_r1.apply," ")}}function _class161_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}const _c37=function(a0,a1,a2,a3,a4){return{$implicit:a0,item:a1,open:a2,service:a3,depth:a4}};function _class162_teta_scrollable_0_teta_tree_item_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-tree-item",5),2&rf){const item_r4=ctx.$implicit,ctx_r3=core["nextContext"](2);core["styleProp"]("height",ctx_r3.height,"px"),core["property"]("item",item_r4)("depth",item_r4.level)("padding",ctx_r3.padding)("childNodeName",ctx_r3.childNodeName)("childPadding",ctx_r3.childPadding)("template",null==ctx_r3.template?null:ctx_r3.template.template)}}function _class162_teta_scrollable_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-scrollable",2)(1,"cdk-virtual-scroll-viewport",3),core["template"](2,_class162_teta_scrollable_0_teta_tree_item_2_Template,1,8,"teta-tree-item",4),core["elementEnd"]()()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("itemSize",ctx_r0.height),core["advance"](1),core["property"]("cdkVirtualForOf",ctx_r0.displayData)("cdkVirtualForTemplateCacheSize",0)("cdkVirtualForTrackBy",ctx_r0.trackRow)}}function _class162_ng_template_1_teta_tree_item_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-tree-item",5),2&rf){const item_r6=ctx.$implicit,ctx_r5=core["nextContext"](2);core["styleProp"]("height",ctx_r5.height,"px"),core["property"]("item",item_r6)("depth",item_r6.level)("padding",ctx_r5.padding)("childNodeName",ctx_r5.childNodeName)("childPadding",ctx_r5.childPadding)("template",null==ctx_r5.template?null:ctx_r5.template.template)}}function _class162_ng_template_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"teta-scrollable",6),core["template"](1,_class162_ng_template_1_teta_tree_item_1_Template,1,8,"teta-tree-item",7),core["elementEnd"]()),2&rf){const ctx_r2=core["nextContext"]();core["advance"](1),core["property"]("ngForOf",ctx_r2.displayData)("ngForTrackBy",ctx_r2.trackRow)}}function _class164_ng_container_0_ng_template_7_teta_tree_item_toggle_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-tree-item-toggle",12),2&rf){const item_r3=core["nextContext"]().$implicit;core["property"]("item",item_r3)}}function _class164_ng_container_0_ng_template_7_Template(rf,ctx){if(1&rf){const _r7=core["getCurrentView"]();core["elementStart"](0,"div",9),core["template"](1,_class164_ng_container_0_ng_template_7_teta_tree_item_toggle_1_Template,1,1,"teta-tree-item-toggle",10),core["elementStart"](2,"teta-checkbox",11),core["listener"]("ngModelChange",(function _class164_ng_container_0_ng_template_7_Template_teta_checkbox_ngModelChange_2_listener($event){const item_r3=core["restoreView"](_r7).$implicit,ctx_r6=core["nextContext"](2);return core["resetView"](ctx_r6.setColumnVisibility(item_r3,$event))}))("click",(function _class164_ng_container_0_ng_template_7_Template_teta_checkbox_click_2_listener($event){return $event.stopPropagation()})),core["text"](3),core["elementEnd"]()()}if(2&rf){const item_r3=ctx.$implicit,ctx_r2=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",(null==item_r3.columns?null:item_r3.columns.length)>0),core["advance"](1),core["property"]("ngModel",!ctx_r2.columnIsHidden(item_r3))("binary",!0),core["advance"](1),core["textInterpolate1"](" ",item_r3.caption," ")}}function _class164_ng_container_0_Template(rf,ctx){if(1&rf){const _r10=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"div",1)(2,"teta-checkbox",2),core["listener"]("ngModelChange",(function _class164_ng_container_0_Template_teta_checkbox_ngModelChange_2_listener($event){core["restoreView"](_r10);const ctx_r9=core["nextContext"]();return core["resetView"](ctx_r9.setAllColumns($event))})),core["text"](3),core["elementEnd"]()(),core["element"](4,"div",3),core["elementStart"](5,"teta-scrollable",4)(6,"teta-tree",5),core["listener"]("openItemsChange",(function _class164_ng_container_0_Template_teta_tree_openItemsChange_6_listener($event){core["restoreView"](_r10);const ctx_r11=core["nextContext"]();return core["resetView"](ctx_r11.openItems=$event)})),core["template"](7,_class164_ng_container_0_ng_template_7_Template,4,4,"ng-template",6),core["elementEnd"]()(),core["elementStart"](8,"teta-toolbar",7)(9,"button",8),core["listener"]("click",(function _class164_ng_container_0_Template_button_click_9_listener(){core["restoreView"](_r10);const ctx_r12=core["nextContext"]();return core["resetView"](ctx_r12.setColumnsVisibility())})),core["text"](10),core["elementEnd"]()(),core["elementContainerEnd"]()}if(2&rf){const loc_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["classProp"]("padding-left-9",ctx_r0.childMode),core["advance"](1),core["property"]("binary",!0)("allowNull",!0)("ngModel",ctx_r0.allColumnsVisible()),core["advance"](1),core["textInterpolate1"](" ",loc_r1.all," "),core["advance"](3),core["property"]("data",ctx_r0.columns)("openItems",ctx_r0.openItems)("childNodeName","columns")("compareItems",ctx_r0.compareItems),core["advance"](3),core["property"]("disabled",!1===ctx_r0.allColumnsVisible())("palette","primary"),core["advance"](1),core["textInterpolate1"](" ",loc_r1.apply," ")}}const _c38=["mainTemplate"],_c39=["filterTemplate"],_c40=["columnsTemplate"];function _class165_teta_icon_5_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-icon",12),2&rf){const icon_r9=ctx.ngIf;core["property"]("palette","text")("name",icon_r9)}}function _class165_teta_head_cell_dropdown_7_Template(rf,ctx){if(1&rf){const _r11=core["getCurrentView"]();core["elementStart"](0,"teta-head-cell-dropdown",13),core["listener"]("dropDownOpenChange",(function _class165_teta_head_cell_dropdown_7_Template_teta_head_cell_dropdown_dropDownOpenChange_0_listener($event){core["restoreView"](_r11);const ctx_r10=core["nextContext"]();return core["resetView"](ctx_r10.dropDownOpen=$event)})),core["pipe"](1,"async"),core["pipe"](2,"async"),core["elementEnd"]()}if(2&rf){const ctx_r1=core["nextContext"]();core["property"]("tabTemplates",ctx_r1.tabTemplates)("data",ctx_r1.data)("column",ctx_r1.column)("columns",core["pipeBind1"](1,6,ctx_r1.columns))("state",core["pipeBind1"](2,8,ctx_r1.state))("dropDownOpen",ctx_r1.dropDownOpen)}}function _class165_div_8_Template(rf,ctx){if(1&rf&&core["element"](0,"div",14),2&rf){const ctx_r2=core["nextContext"]();core["classProp"]("drop-area_left","left"===ctx_r2.showDrag)("drop-area_right","right"===ctx_r2.showDrag)}}function _class165_ng_template_11_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-main-dropdown-tab",15),2&rf){const column_r12=ctx.column,state_r15=ctx.state,close_r16=ctx.close,ctx_r4=core["nextContext"]();core["property"]("column",column_r12)("state",state_r15)("close",close_r16)("headCellElementRef",ctx_r4.elementRef)}}function _class165_ng_template_13_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-filter-dropdown-tab",16),2&rf){const column_r17=ctx.column,data_r19=ctx.data,state_r20=ctx.state,close_r21=ctx.close;core["property"]("column",column_r17)("state",state_r20)("close",close_r21)("data",data_r19)}}function _class165_ng_template_15_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-visibility-dropdown-tab",17),2&rf){const column_r22=ctx.column,columns_r23=ctx.columns,data_r24=ctx.data,state_r25=ctx.state,close_r26=ctx.close;core["property"]("column",column_r22)("columns",columns_r23)("state",state_r25)("close",close_r26)("data",data_r24)}}const _c41=function(){return["enter","inside"]};function _class166_ng_container_0_ng_container_5_teta_table_head_group_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-table-head-group",6),2&rf){const col_r3=core["nextContext"]().$implicit,ctx_r4=core["nextContext"](2);core["property"]("data",ctx_r4.data)("showHeadCellMenu",ctx_r4.showHeadCellMenu)("column",col_r3)}}function _class166_ng_container_0_ng_container_5_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class166_ng_container_0_ng_container_5_teta_table_head_group_1_Template,1,3,"teta-table-head-group",5),core["elementContainerEnd"]()),2&rf){const col_r3=ctx.$implicit,ctx_r2=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",!ctx_r2.columnIsHidden(col_r3))}}function _class166_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["elementStart"](1,"div",1)(2,"div",2),core["text"](3),core["elementEnd"](),core["elementStart"](4,"div",3),core["template"](5,_class166_ng_container_0_ng_container_5_Template,2,1,"ng-container",4),core["elementEnd"]()(),core["elementContainerEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](3),core["textInterpolate1"](" ",ctx_r0.column.caption," "),core["advance"](2),core["property"]("ngForOf",ctx_r0.column.columns)}}function _class166_ng_container_1_teta_head_cell_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-head-cell",8),2&rf){const ctx_r6=core["nextContext"](2);core["property"]("data",ctx_r6.data)("showHeadCellMenu",ctx_r6.showHeadCellMenu)("column",ctx_r6.column),core["attribute"]("data-column",ctx_r6.column.name)}}function _class166_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class166_ng_container_1_teta_head_cell_1_Template,1,4,"teta-head-cell",7),core["elementContainerEnd"]()),2&rf){const ctx_r1=core["nextContext"]();core["advance"](1),core["property"]("ngIf",!ctx_r1.columnIsHidden(ctx_r1.column))}}function _class168_div_0_teta_selection_head_cell_1_Template(rf,ctx){1&rf&&core["element"](0,"teta-selection-head-cell",5)}function _class168_div_0_teta_table_head_group_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-table-head-group",6),2&rf){const column_r4=ctx.$implicit,ctx_r3=core["nextContext"](2);core["property"]("data",ctx_r3.data)("showHeadCellMenu",ctx_r3.showHeadCellMenu)("column",column_r4)}}function _class168_div_0_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",2),core["template"](1,_class168_div_0_teta_selection_head_cell_1_Template,1,0,"teta-selection-head-cell",3),core["template"](2,_class168_div_0_teta_table_head_group_2_Template,1,3,"teta-table-head-group",4),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["styleProp"]("flex-grow",ctx_r0.lockedFlex)("flex-basis",ctx_r0.lockedWidth,"px")("min-width",ctx_r0.lockedWidth,"px"),core["advance"](1),core["property"]("ngIf",ctx_r0.selectType===ctx_r0.selectTypeEnum.checkBox),core["advance"](1),core["property"]("ngForOf",ctx_r0.locked)("ngForTrackBy",ctx_r0.track)}}function _class168_ng_container_1_teta_selection_head_cell_1_Template(rf,ctx){1&rf&&core["element"](0,"teta-selection-head-cell",5)}function _class168_ng_container_1_teta_table_head_group_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-table-head-group",6),2&rf){const column_r7=ctx.$implicit,ctx_r6=core["nextContext"](2);core["property"]("data",ctx_r6.data)("showHeadCellMenu",ctx_r6.showHeadCellMenu)("column",column_r7)}}function _class168_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class168_ng_container_1_teta_selection_head_cell_1_Template,1,0,"teta-selection-head-cell",3),core["template"](2,_class168_ng_container_1_teta_table_head_group_2_Template,1,3,"teta-table-head-group",4),core["elementContainerEnd"]()),2&rf){const ctx_r1=core["nextContext"]();core["advance"](1),core["property"]("ngIf",ctx_r1.selectType===ctx_r1.selectTypeEnum.checkBox&&(null==ctx_r1.locked?null:ctx_r1.locked.length)<1),core["advance"](1),core["property"]("ngForOf",ctx_r1.unlocked)("ngForTrackBy",ctx_r1.track)}}function _class170_input_3_Template(rf,ctx){if(1&rf&&core["element"](0,"input",2,3),2&rf){const ctx_r0=core["nextContext"]();core["property"]("tetaOnlyNumber",!0)("formControl",ctx_r0.control)}}function _class171_teta_date_picker_3_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-date-picker",2,3),2&rf){const ctx_r0=core["nextContext"]();core["property"]("allowNull",!ctx_r0.column.required)("appendToBody",!0)("showTime",!1)("formControl",ctx_r0.control)}}function _class172_teta_select_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-select",2,3),2&rf){const ctx_r0=core["nextContext"]();core["property"]("allowNull",!ctx_r0.column.required)("verticalAlign",ctx_r0.verticalAlign.auto)("appendToBody",!0)("options",ctx_r0.displayFilterOptions)("valueRef","id")("textRef","name")("searchRef",(null==ctx_r0.displayFilterOptions?null:ctx_r0.displayFilterOptions.length)>20?"name":"")("formControl",ctx_r0.control)}}function _class173_input_2_Template(rf,ctx){if(1&rf&&core["element"](0,"input",2,3),2&rf){const ctx_r0=core["nextContext"]();core["property"]("formControl",ctx_r0.control)}}function _class174_teta_checkbox_2_Template(rf,ctx){if(1&rf){const _r3=core["getCurrentView"]();core["elementStart"](0,"teta-checkbox",2,3),core["listener"]("blur",(function _class174_teta_checkbox_2_Template_teta_checkbox_blur_0_listener(){core["restoreView"](_r3);const ctx_r2=core["nextContext"]();return core["resetView"](ctx_r2.setValue())})),core["elementEnd"]()}if(2&rf){const ctx_r0=core["nextContext"]();core["property"]("binary",!0)("formControl",ctx_r0.control)}}function _class178_teta_scrollable_0_ng_container_2_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}const _c43=function(a0,a1){return{row:a0,rowIndex:a1}};function _class178_teta_scrollable_0_ng_container_2_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class178_teta_scrollable_0_ng_container_2_ng_container_1_Template,1,0,"ng-container",8),core["elementContainerEnd"]()),2&rf){const row_r10=ctx.$implicit,rowIndex_r11=ctx.index;core["nextContext"](2);const _r3=core["reference"](4);core["advance"](1),core["property"]("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core["pureFunction2"](2,_c43,row_r10,rowIndex_r11))}}function _class178_teta_scrollable_0_Template(rf,ctx){if(1&rf){const _r14=core["getCurrentView"]();core["elementStart"](0,"teta-scrollable",5)(1,"cdk-virtual-scroll-viewport",6),core["listener"]("scroll",(function _class178_teta_scrollable_0_Template_cdk_virtual_scroll_viewport_scroll_1_listener($event){core["restoreView"](_r14);const ctx_r13=core["nextContext"]();return core["resetView"](ctx_r13.emitScroll($event))})),core["template"](2,_class178_teta_scrollable_0_ng_container_2_Template,2,5,"ng-container",7),core["elementEnd"]()()}if(2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("itemSize",28),core["advance"](1),core["property"]("cdkVirtualForOf",ctx_r0.data)("cdkVirtualForTemplateCacheSize",0)("cdkVirtualForTrackBy",ctx_r0.trackTableRow)}}function _class178_ng_template_1_div_2_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",15),core["projection"](1),core["elementEnd"]())}function _class178_ng_template_1_ng_container_3_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class178_ng_template_1_ng_container_3_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class178_ng_template_1_ng_container_3_ng_container_1_Template,1,0,"ng-container",8),core["elementContainerEnd"]()),2&rf){const row_r19=ctx.$implicit,rowIndex_r20=ctx.index;core["nextContext"](2);const _r3=core["reference"](4);core["advance"](1),core["property"]("ngTemplateOutlet",_r3)("ngTemplateOutletContext",core["pureFunction2"](2,_c43,row_r19,rowIndex_r20))}}function _class178_ng_template_1_ng_container_4_ng_container_1_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class178_ng_template_1_ng_container_4_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class178_ng_template_1_ng_container_4_ng_container_1_Template,1,0,"ng-container",14),core["elementContainerEnd"]()),2&rf){core["nextContext"](2);const _r5=core["reference"](6);core["advance"](1),core["property"]("ngTemplateOutlet",_r5)}}function _class178_ng_template_1_ng_container_5_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class178_ng_template_1_Template(rf,ctx){if(1&rf){const _r24=core["getCurrentView"]();core["elementStart"](0,"teta-scrollable",9),core["listener"]("scroll",(function _class178_ng_template_1_Template_teta_scrollable_scroll_0_listener($event){core["restoreView"](_r24);const ctx_r23=core["nextContext"]();return core["resetView"](ctx_r23.emitScroll($event))})),core["elementStart"](1,"div",10),core["template"](2,_class178_ng_template_1_div_2_Template,2,0,"div",11),core["template"](3,_class178_ng_template_1_ng_container_3_Template,2,5,"ng-container",12),core["template"](4,_class178_ng_template_1_ng_container_4_Template,2,1,"ng-container",13),core["template"](5,_class178_ng_template_1_ng_container_5_Template,1,0,"ng-container",14),core["elementEnd"]()()}if(2&rf){const ctx_r2=core["nextContext"](),_r7=core["reference"](8);core["advance"](2),core["property"]("ngIf",!(null!=ctx_r2.data&&ctx_r2.data.length)),core["advance"](1),core["property"]("ngForOf",ctx_r2.data)("ngForTrackBy",ctx_r2.trackTableRow),core["advance"](1),core["property"]("ngIf",ctx_r2.aggregate),core["advance"](1),core["property"]("ngTemplateOutlet",_r7)}}function _class178_ng_template_3_div_1_teta_selection_cell_1_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-selection-cell",21),2&rf){const row_r25=core["nextContext"](2).row;core["property"]("row",row_r25.data)}}const _c44=function(){return[]};function _class178_ng_template_3_div_1_teta_cell_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-cell",22),2&rf){const column_r33=ctx.$implicit,ctx_r35=core["nextContext"](2),row_r25=ctx_r35.row,rowIndex_r26=ctx_r35.rowIndex,ctx_r31=core["nextContext"]();core["styleProp"]("flex-grow",column_r33.flex)("flex-basis",column_r33.width,"px"),core["property"]("column",column_r33)("filterOptions",ctx_r31.dict?ctx_r31.dict[column_r33.name]:core["pureFunction0"](12,_c44))("dict",ctx_r31.dict)("row",row_r25)("ngClass",column_r33.cellClass),core["attribute"]("data-row",rowIndex_r26)("data-column",column_r33.name)("tabindex",0)}}function _class178_ng_template_3_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",20),core["template"](1,_class178_ng_template_3_div_1_teta_selection_cell_1_Template,1,1,"teta-selection-cell",18),core["template"](2,_class178_ng_template_3_div_1_teta_cell_2_Template,1,13,"teta-cell",19),core["elementEnd"]()),2&rf){const row_r25=core["nextContext"]().row,ctx_r27=core["nextContext"]();core["styleProp"]("flex-grow",ctx_r27.lockedFlex)("flex-basis",ctx_r27.lockedWidth,"px")("min-width",ctx_r27.lockedWidth,"px")("z-index",row_r25.data===ctx_r27.activeRow?2:1),core["advance"](1),core["property"]("ngIf",ctx_r27.selectType===ctx_r27.selectTypeEnum.checkBox&&ctx_r27.locked.length),core["advance"](1),core["property"]("ngForOf",ctx_r27.locked)("ngForTrackBy",ctx_r27.trackColumns)}}function _class178_ng_template_3_teta_selection_cell_2_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-selection-cell",21),2&rf){const row_r25=core["nextContext"]().row;core["property"]("row",row_r25.data)}}function _class178_ng_template_3_teta_cell_3_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-cell",22),2&rf){const column_r38=ctx.$implicit,ctx_r40=core["nextContext"](),row_r25=ctx_r40.row,rowIndex_r26=ctx_r40.rowIndex,ctx_r29=core["nextContext"]();core["styleProp"]("flex-grow",column_r38.flex)("flex-basis",column_r38.width,"px"),core["property"]("column",column_r38)("filterOptions",ctx_r29.dict?ctx_r29.dict[column_r38.name]:core["pureFunction0"](12,_c44))("dict",ctx_r29.dict)("row",row_r25)("ngClass",column_r38.cellClass),core["attribute"]("data-row",rowIndex_r26)("data-column",column_r38.name)("tabindex",0)}}function _class178_ng_template_3_Template(rf,ctx){if(1&rf){const _r42=core["getCurrentView"]();core["elementStart"](0,"div",16),core["listener"]("click",(function _class178_ng_template_3_Template_div_click_0_listener($event){const row_r25=core["restoreView"](_r42).row,ctx_r41=core["nextContext"]();return core["resetView"](ctx_r41.setActiveRow(row_r25.data,$event))})),core["template"](1,_class178_ng_template_3_div_1_Template,3,11,"div",17),core["template"](2,_class178_ng_template_3_teta_selection_cell_2_Template,1,1,"teta-selection-cell",18),core["template"](3,_class178_ng_template_3_teta_cell_3_Template,1,13,"teta-cell",19),core["elementEnd"]()}if(2&rf){const row_r25=ctx.row,rowIndex_r26=ctx.rowIndex,ctx_r4=core["nextContext"]();core["styleProp"]("flex-grow",ctx_r4.totalFlex)("flex-basis",ctx_r4.totalWidth,"px")("min-width",ctx_r4.totalWidth,"px"),core["classProp"]("table-row_odd",rowIndex_r26%2==1)("table-row_selected",ctx_r4.selectedRows&&ctx_r4.selectedRows.indexOf(row_r25.data)>=0),core["property"]("ngClass",ctx_r4.rowClass?ctx_r4.rowClass(row_r25.data,rowIndex_r26):""),core["attribute"]("data-row",rowIndex_r26),core["advance"](1),core["property"]("ngIf",ctx_r4.locked.length>0),core["advance"](1),core["property"]("ngIf",ctx_r4.selectType===ctx_r4.selectTypeEnum.checkBox&&ctx_r4.locked.length<1),core["advance"](1),core["property"]("ngForOf",ctx_r4.unlocked)("ngForTrackBy",ctx_r4.trackColumns)}}function _class178_ng_template_5_ng_container_0_div_1_div_1_div_1_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",28),core["element"](1,"teta-icon",29),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("name","sumColor"))}function _class178_ng_template_5_ng_container_0_div_1_div_1_div_2_span_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"span",32),core["text"](1),core["pipe"](2,"tetaNumber"),core["elementEnd"]()),2&rf){const column_r51=core["nextContext"]().$implicit,loc_r44=core["nextContext"](3).ngIf,ctx_r53=core["nextContext"](2);core["advance"](1),core["textInterpolate2"](" ",loc_r44[ctx_r53.getAggregateText(column_r51)],": ",core["pipeBind2"](2,2,ctx_r53.getAggregateValue(column_r51),2)," ")}}function _class178_ng_template_5_ng_container_0_div_1_div_1_div_2_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",30),core["template"](1,_class178_ng_template_5_ng_container_0_div_1_div_1_div_2_span_1_Template,3,5,"span",31),core["elementEnd"]()),2&rf){const column_r51=ctx.$implicit,ctx_r50=core["nextContext"](5);core["styleProp"]("flex-grow",column_r51.flex)("flex-basis",column_r51.width,"px"),core["property"]("ngClass",column_r51.cellClass),core["attribute"]("data-column",column_r51.name)("tabindex",0),core["advance"](1),core["property"]("ngIf",column_r51.aggregate!==ctx_r50.aggregationType.none)}}function _class178_ng_template_5_ng_container_0_div_1_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",20),core["template"](1,_class178_ng_template_5_ng_container_0_div_1_div_1_div_1_Template,2,1,"div",26),core["template"](2,_class178_ng_template_5_ng_container_0_div_1_div_1_div_2_Template,2,8,"div",27),core["elementEnd"]()),2&rf){const ctx_r46=core["nextContext"](4);core["styleProp"]("flex-grow",ctx_r46.lockedFlex)("flex-basis",ctx_r46.lockedWidth,"px")("min-width",ctx_r46.lockedWidth,"px"),core["advance"](1),core["property"]("ngIf",ctx_r46.selectType===ctx_r46.selectTypeEnum.checkBox&&ctx_r46.locked.length<1),core["advance"](1),core["property"]("ngForOf",ctx_r46.locked)("ngForTrackBy",ctx_r46.trackColumns)}}function _class178_ng_template_5_ng_container_0_div_1_div_2_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",28),core["element"](1,"teta-icon",29),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("name","sumColor"))}function _class178_ng_template_5_ng_container_0_div_1_div_3_span_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"span",32),core["text"](1),core["pipe"](2,"tetaNumber"),core["elementEnd"]()),2&rf){const column_r56=core["nextContext"]().$implicit,loc_r44=core["nextContext"](2).ngIf,ctx_r58=core["nextContext"](2);core["advance"](1),core["textInterpolate2"](" ",loc_r44[ctx_r58.getAggregateText(column_r56)],": ",core["pipeBind2"](2,2,ctx_r58.getAggregateValue(column_r56),2)," ")}}function _class178_ng_template_5_ng_container_0_div_1_div_3_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",30),core["template"](1,_class178_ng_template_5_ng_container_0_div_1_div_3_span_1_Template,3,5,"span",31),core["elementEnd"]()),2&rf){const column_r56=ctx.$implicit,ctx_r48=core["nextContext"](4);core["styleProp"]("flex-grow",column_r56.flex)("flex-basis",column_r56.width,"px"),core["property"]("ngClass",column_r56.cellClass),core["attribute"]("data-column",column_r56.name)("tabindex",0),core["advance"](1),core["property"]("ngIf",column_r56.aggregate!==ctx_r48.aggregationType.none)}}function _class178_ng_template_5_ng_container_0_div_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",24),core["template"](1,_class178_ng_template_5_ng_container_0_div_1_div_1_Template,3,9,"div",25),core["template"](2,_class178_ng_template_5_ng_container_0_div_1_div_2_Template,2,1,"div",26),core["template"](3,_class178_ng_template_5_ng_container_0_div_1_div_3_Template,2,8,"div",27),core["elementEnd"]()),2&rf){const ctx_r45=core["nextContext"](3);core["styleProp"]("flex-grow",ctx_r45.totalFlex)("flex-basis",ctx_r45.totalWidth,"px")("min-width",ctx_r45.totalWidth,"px"),core["classProp"]("table-row_virtual",ctx_r45.virtual),core["advance"](1),core["property"]("ngIf",ctx_r45.locked.length>0),core["advance"](1),core["property"]("ngIf",ctx_r45.selectType===ctx_r45.selectTypeEnum.checkBox&&ctx_r45.locked.length<1),core["advance"](1),core["property"]("ngForOf",ctx_r45.unlocked)("ngForTrackBy",ctx_r45.trackColumns)}}function _class178_ng_template_5_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class178_ng_template_5_ng_container_0_div_1_Template,4,12,"div",23),core["elementContainerEnd"]()),2&rf){const ctx_r43=core["nextContext"](2);core["advance"](1),core["property"]("ngIf",ctx_r43.aggregate)}}function _class178_ng_template_5_Template(rf,ctx){if(1&rf&&(core["template"](0,_class178_ng_template_5_ng_container_0_Template,2,1,"ng-container",13),core["pipe"](1,"async")),2&rf){const ctx_r6=core["nextContext"]();core["property"]("ngIf",core["pipeBind1"](1,1,ctx_r6.locale))}}function _class178_ng_template_7_Template(rf,ctx){if(1&rf&&core["element"](0,"div",33),2&rf){const ctx_r8=core["nextContext"]();core["styleProp"]("flex-grow",ctx_r8.totalFlex)("flex-basis",ctx_r8.totalWidth,"px")("min-width",ctx_r8.totalWidth,"px")}}const _c45=["contextMenu"];function _class183_teta_date_picker_3_Template(rf,ctx){if(1&rf&&core["element"](0,"teta-date-picker",2,3),2&rf){const ctx_r0=core["nextContext"]();core["property"]("appendToBody",!0)("showTime",!0)("formControl",ctx_r0.control)}}function _class192_ng_container_0_ngt_box_geometry_2_Template(rf,ctx){1&rf&&core["element"](0,"ngt-box-geometry")}const _c46=function(a0,a1,a2){return[a0,a1,a2]},_c47=function(){return[5,5,5]};function _class192_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["elementStart"](1,"ngt-mesh",1),core["template"](2,_class192_ng_container_0_ngt_box_geometry_2_Template,1,0,"ngt-box-geometry",2),core["element"](3,"ngt-mesh-basic-material"),core["elementEnd"](),core["elementContainerEnd"]()),2&rf){const scales_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("position",core["pureFunction3"](2,_c46,scales_r1.scales.x(ctx_r0.series.data[0].x),scales_r1.scales.y(ctx_r0.series.data[0].y),scales_r1.scales.z(ctx_r0.series.data[0].z))),core["advance"](1),core["property"]("args",core["pureFunction0"](6,_c47))}}const _c48=function(a0){return{scales:a0}};function _class193_ng_container_2_ngt_primitive_1_Template(rf,ctx){1&rf&&core["element"](0,"ngt-primitive")}const _c49=function(a0){return[a0]};function _class193_ng_container_2_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class193_ng_container_2_ngt_primitive_1_Template,1,0,"ngt-primitive",2),core["elementContainerEnd"]()),2&rf){const rect_r1=ctx.$implicit;core["advance"](1),core["property"]("args",core["pureFunction1"](1,_c49,rect_r1))}}const _c50=function(a0,a1){return[a0,a1,50]};function _class194_ng_container_0_ngts_text_1_Template(rf,ctx){if(1&rf&&core["element"](0,"ngts-text",3),2&rf){const tick_r5=ctx.$implicit,ctx_r2=core["nextContext"](2);core["property"]("text",tick_r5.value+"-")("color","var(--color-text-90)")("rotation",ctx_r2.rotation)("fontSize",2.5)("position",core["pureFunction2"](8,_c50,tick_r5.position,-50))("anchorX","right")("anchorY","middle")("textAlign","right")}}const _c51=function(a1){return[0,a1,50]};function _class194_ng_container_0_ngts_text_2_Template(rf,ctx){if(1&rf&&core["element"](0,"ngts-text",3),2&rf){const tick_r7=ctx.$implicit,ctx_r3=core["nextContext"](2);core["property"]("text",tick_r7.value+"-")("color","var(--color-text-90)")("rotation",ctx_r3.rotation)("fontSize",2.5)("position",core["pureFunction1"](8,_c51,tick_r7.position))("anchorX","right")("anchorY","middle")("textAlign","right")}}const _c52=function(a1,a2){return[25,a1,a2]};function _class194_ng_container_0_ngts_text_3_Template(rf,ctx){if(1&rf&&core["element"](0,"ngts-text",4),2&rf){const tick_r9=ctx.$implicit,ctx_r4=core["nextContext"](2);core["property"]("text",tick_r9.value)("color","var(--color-text-90)")("rotation",ctx_r4.rotation)("fontSize",2.5)("position",core["pureFunction2"](5,_c52,-50,tick_r9.position))}}function _class194_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class194_ng_container_0_ngts_text_1_Template,1,11,"ngts-text",1),core["template"](2,_class194_ng_container_0_ngts_text_2_Template,1,10,"ngts-text",1),core["template"](3,_class194_ng_container_0_ngts_text_3_Template,1,8,"ngts-text",2),core["elementContainerEnd"]()),2&rf){const data_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](1),core["property"]("ngForOf",null==data_r1.axes?null:data_r1.axes.x)("ngForTrackBy",ctx_r0.trackBy),core["advance"](1),core["property"]("ngForOf",null==data_r1.axes?null:data_r1.axes.y)("ngForTrackBy",ctx_r0.trackBy),core["advance"](1),core["property"]("ngForOf",null==data_r1.axes?null:data_r1.axes.z)("ngForTrackBy",ctx_r0.trackBy)}}const _c53=function(a0){return{axes:a0}};function _class195_ng_container_0_ng_container_1_ngt_primitive_1_Template(rf,ctx){1&rf&&core["element"](0,"ngt-primitive")}function _class195_ng_container_0_ng_container_1_ngt_primitive_3_Template(rf,ctx){1&rf&&core["element"](0,"ngt-primitive")}const _c54=function(a1){return[0,a1,0]},_c55=function(a1){return[1,a1,5]};function _class195_ng_container_0_ng_container_1_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class195_ng_container_0_ng_container_1_ngt_primitive_1_Template,1,0,"ngt-primitive",2),core["element"](2,"ngts-text",3),core["template"](3,_class195_ng_container_0_ng_container_1_ngt_primitive_3_Template,1,0,"ngt-primitive",2),core["elementContainerEnd"]()),2&rf){const mesh_r3=ctx.$implicit,i_r4=ctx.index,ctx_r2=core["nextContext"](2);core["advance"](1),core["property"]("args",core["pureFunction1"](9,_c49,mesh_r3[0].component)),core["advance"](1),core["property"]("text",ctx_r2.series.data[i_r4].name)("fontSize",2.5)("rotation",core["pureFunction1"](11,_c54,ctx_r2.Math.PI/2))("position",core["pureFunction1"](13,_c55,mesh_r3[0].position))("textAlign","left")("anchorX","center")("anchorY","middle"),core["advance"](1),core["property"]("args",core["pureFunction1"](15,_c49,mesh_r3[1].component))}}function _class195_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class195_ng_container_0_ng_container_1_Template,4,17,"ng-container",1),core["elementContainerEnd"]()),2&rf){const data_r1=ctx.ngIf;core["advance"](1),core["property"]("ngForOf",data_r1.blocks)}}const _c56=function(a0,a1){return{blocks:a0,scales:a1}};function _class196_ng_container_0_ngt_mesh_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"ngt-mesh"),core["element"](1,"ngts-line",1)(2,"ngt-line-basic-material"),core["elementEnd"]()),2&rf){const data_r1=core["nextContext"]().ngIf,ctx_r2=core["nextContext"]();core["advance"](1),core["property"]("color",ctx_r2.series.color)("lineWidth",2)("points",data_r1.points)}}function _class196_ng_container_0_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["template"](1,_class196_ng_container_0_ngt_mesh_1_Template,3,3,"ngt-mesh",0),core["elementContainerEnd"]()),2&rf){const data_r1=ctx.ngIf;core["advance"](1),core["property"]("ngIf",null==data_r1||null==data_r1.points?null:data_r1.points.length)}}const _c57=function(a0){return{points:a0}};function _class198_ng_container_0_ng_container_4_Template(rf,ctx){if(1&rf&&(core["elementContainerStart"](0),core["element"](1,"div",4),core["elementContainerEnd"]()),2&rf){const s_r3=ctx.$implicit;core["advance"](1),core["property"]("series",s_r3)}}function _class198_ng_container_0_Template(rf,ctx){if(1&rf){const _r5=core["getCurrentView"]();core["elementContainerStart"](0),core["elementStart"](1,"ngt-scene")(2,"ngts-orbit-controls",1),core["listener"]("change",(function _class198_ng_container_0_Template_ngts_orbit_controls_change_2_listener(){core["restoreView"](_r5);const ctx_r4=core["nextContext"]();return core["resetView"](ctx_r4.setRotation())})),core["elementEnd"]()(),core["element"](3,"teta-area-3d"),core["template"](4,_class198_ng_container_0_ng_container_4_Template,2,1,"ng-container",2),core["element"](5,"teta-axes-3d",3),core["elementContainerEnd"]()}if(2&rf){const config_r1=ctx.ngIf,ctx_r0=core["nextContext"]();core["advance"](2),core["property"]("minAzimuthAngle",0)("maxAzimuthAngle",ctx_r0.Math.PI/2)("maxZoom",30)("minZoom",2),core["advance"](2),core["property"]("ngForOf",null==config_r1.data?null:config_r1.data.series),core["advance"](1),core["property"]("rotation",ctx_r0.rotation)}}const _c59=function(a0){return{data:a0}};function _class199_ngt_canvas_0_Template(rf,ctx){if(1&rf&&core["element"](0,"ngt-canvas",2),2&rf){const ctx_r0=core["nextContext"]();core["property"]("sceneGraph",ctx_r0.scene)("camera",ctx_r0.camera)}}function _class199_ng_template_1_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"p"),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r2=core["nextContext"]();core["advance"](1),core["textInterpolate"]((null==ctx_r2.data?null:ctx_r2.data.noDataText)||"no data")}}const _c61=["canvas"];function _class205_div_2_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",4),core["text"](1),core["elementEnd"]()),2&rf){const ctx_r0=core["nextContext"]();core["advance"](1),core["textInterpolate"](ctx_r0.label)}}function _class205_ng_template_4_ng_container_0_Template(rf,ctx){1&rf&&core["elementContainer"](0)}function _class205_ng_template_4_Template(rf,ctx){if(1&rf&&core["template"](0,_class205_ng_template_4_ng_container_0_Template,1,0,"ng-container",5),2&rf){const ctx_r2=core["nextContext"]();core["property"]("ngTemplateOutlet",ctx_r2.template)}}class AccordionComponent{constructor(){defineProperty_defineProperty(this,"accordionClassName",!0)}}_class=AccordionComponent,defineProperty_defineProperty(AccordionComponent,"fac",(function _class_Factory(t){return new(t||_class)})),defineProperty_defineProperty(AccordionComponent,"cmp",core["defineComponent"]({type:_class,selectors:[["teta-accordion"]],hostVars:2,hostBindings:function _class_HostBindings(rf,ctx){2&rf&&core["classProp"]("accordion",ctx.accordionClassName)},ngContentSelectors:_c0,decls:1,vars:0,template:function _class_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AccordionComponent,[{type:core.Component,args:[{selector:"teta-accordion",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],null,{accordionClassName:[{type:core.HostBinding,args:["class.accordion"]}]});class AccordionContentDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class2=AccordionContentDirective,defineProperty_defineProperty(AccordionContentDirective,"fac",(function _class2_Factory(t){return new(t||_class2)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(AccordionContentDirective,"dir",core["defineDirective"]({type:_class2,selectors:[["","tetaAccordionContent",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AccordionContentDirective,[{type:core.Directive,args:[{selector:"[tetaAccordionContent]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class AccordionItemComponent{get class(){return`accordion_${this.viewType}`}constructor(accordion,cdr$){defineProperty_defineProperty(this,"cdr$",void 0),defineProperty_defineProperty(this,"content",void 0),defineProperty_defineProperty(this,"open",!1),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"accordionItemClass",!0),defineProperty_defineProperty(this,"accordion$",void 0),this.cdr$=cdr$,this.accordion$=accordion}toggle(){this.open=!this.open,this.cdr$.detectChanges()}}var TetaSize,AvatarColorEnum;_class3=AccordionItemComponent,defineProperty_defineProperty(AccordionItemComponent,"fac",(function _class3_Factory(t){return new(t||_class3)(core["directiveInject"](AccordionComponent,8),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(AccordionItemComponent,"cmp",core["defineComponent"]({type:_class3,selectors:[["teta-accordion-item"]],contentQueries:function _class3_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,AccordionContentDirective,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.content=_t.first)}},hostVars:6,hostBindings:function _class3_HostBindings(rf,ctx){2&rf&&(core["classMap"](ctx.class),core["classProp"]("accordion-item_active",ctx.open)("accordion-item",ctx.accordionItemClass))},inputs:{open:"open",disabled:"disabled",viewType:"viewType"},ngContentSelectors:["teta-accordion-head"],decls:2,vars:1,consts:[["class","accordion-content",4,"ngIf"],[1,"accordion-content"],[4,"ngTemplateOutlet"]],template:function _class3_Template(rf,ctx){1&rf&&(core["projectionDef"](_c1),core["projection"](0),core["template"](1,_class3_div_1_Template,2,1,"div",0)),2&rf&&(core["advance"](1),core["property"]("ngIf",ctx.open))},dependencies:[common.NgIf,common.NgTemplateOutlet],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AccordionItemComponent,[{type:core.Component,args:[{selector:"teta-accordion-item",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-content select="teta-accordion-head"></ng-content>\n<div class="accordion-content" *ngIf="open">\n  <ng-container *ngTemplateOutlet="content.template"></ng-container>\n</div>\n'}]}],(function(){return[{type:AccordionComponent,decorators:[{type:core.Optional},{type:core.Inject,args:[AccordionComponent]}]},{type:core.ChangeDetectorRef}]}),{content:[{type:core.ContentChild,args:[AccordionContentDirective,{static:!1}]}],open:[{type:core.HostBinding,args:["class.accordion-item_active"]},{type:core.Input}],disabled:[{type:core.Input}],viewType:[{type:core.Input}],accordionItemClass:[{type:core.HostBinding,args:["class.accordion-item"]}],class:[{type:core.HostBinding,args:["class"]}]}),function(TetaSize){TetaSize[TetaSize.XS=0]="XS",TetaSize[TetaSize.S=1]="S",TetaSize[TetaSize.M=2]="M",TetaSize[TetaSize.L=3]="L",TetaSize[TetaSize.XL=4]="XL"}(TetaSize||(TetaSize={}));class IconComponent{constructor(){defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"size",TetaSize.M),defineProperty_defineProperty(this,"palette",void 0),defineProperty_defineProperty(this,"class",void 0)}get getClass(){const result=[this.class,"icon"];return this.palette&&result.push(`icon-${this.palette}`),result.join(" ")}getName(){return`#${this.name}`}}_class4=IconComponent,defineProperty_defineProperty(IconComponent,"fac",(function _class4_Factory(t){return new(t||_class4)})),defineProperty_defineProperty(IconComponent,"cmp",core["defineComponent"]({type:_class4,selectors:[["teta-icon"]],hostVars:2,hostBindings:function _class4_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.getClass)},inputs:{name:"name",size:"size",palette:"palette",class:"class"},decls:2,vars:1,consts:[[1,"icon__image",2,"width","100%","height","100%"]],template:function _class4_Template(rf,ctx){1&rf&&(core["namespaceSVG"](),core["elementStart"](0,"svg",0),core["element"](1,"use"),core["elementEnd"]()),2&rf&&(core["advance"](1),core["attribute"]("href",ctx.getName(),null,"xlink"))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconComponent,[{type:core.Component,args:[{selector:"teta-icon",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<svg class="icon__image" style="width: 100%;height: 100%">\n  <use [attr.xlink:href]="getName()"></use>\n</svg>\n'}]}],null,{name:[{type:core.Input}],size:[{type:core.Input}],palette:[{type:core.Input}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}]});class AccordionHeadComponent{constructor(accordionItem){defineProperty_defineProperty(this,"accordionHeadClass",!0),defineProperty_defineProperty(this,"showToggle",!0),defineProperty_defineProperty(this,"accordionItem$",void 0),this.accordionItem$=accordionItem}toggle(){this.disabled||this.accordionItem$.toggle()}get open(){return this.accordionItem$.open}get disabled(){return this.accordionItem$.disabled}ngOnInit(){}}_class5=AccordionHeadComponent,defineProperty_defineProperty(AccordionHeadComponent,"fac",(function _class5_Factory(t){return new(t||_class5)(core["directiveInject"](AccordionItemComponent,1))})),defineProperty_defineProperty(AccordionHeadComponent,"cmp",core["defineComponent"]({type:_class5,selectors:[["teta-accordion-head"]],hostVars:6,hostBindings:function _class5_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class5_click_HostBindingHandler(){return ctx.toggle()})),2&rf&&core["classProp"]("accordion-head",ctx.accordionHeadClass)("accordion-head_open",ctx.open)("accordion-head_disabled",ctx.disabled)},inputs:{showToggle:"showToggle"},ngContentSelectors:_c0,decls:2,vars:1,consts:[["class","accordion-toggle",4,"ngIf"],[1,"accordion-toggle"],[3,"name","palette"]],template:function _class5_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0),core["template"](1,_class5_div_1_Template,2,2,"div",0)),2&rf&&(core["advance"](1),core["property"]("ngIf",ctx.showToggle))},dependencies:[common.NgIf,IconComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AccordionHeadComponent,[{type:core.Component,args:[{selector:"teta-accordion-head",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-content></ng-content>\n<div *ngIf="showToggle" class="accordion-toggle">\n  <teta-icon [name]="open ? \'arrowUpKey\' : \'arrowDownKey\'" [palette]="\'text\'"></teta-icon>\n</div>\n\n'}]}],(function(){return[{type:AccordionItemComponent,decorators:[{type:core.Host},{type:core.Inject,args:[AccordionItemComponent]}]}]}),{accordionHeadClass:[{type:core.HostBinding,args:["class.accordion-head"]}],showToggle:[{type:core.Input}],toggle:[{type:core.HostListener,args:["click"]}],open:[{type:core.HostBinding,args:["class.accordion-head_open"]}],disabled:[{type:core.HostBinding,args:["class.accordion-head_disabled"]}]});class IconService{constructor(_document,_rendererFactory,_httpBackend,_http){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_rendererFactory",void 0),defineProperty_defineProperty(this,"_httpBackend",void 0),defineProperty_defineProperty(this,"_http",void 0),defineProperty_defineProperty(this,"_renderer",void 0),this._document=_document,this._rendererFactory=_rendererFactory,this._httpBackend=_httpBackend,this._http=_http,this._renderer=this._rendererFactory.createRenderer(null,null)}addSprite(url,bypassInterceptors=!0){IconService._loaded.indexOf(url)<0&&IconService._pending.indexOf(url)<0&&(IconService._pending.push(url),this.getSVG(url,bypassInterceptors).subscribe((svg=>{IconService._pending=IconService._pending.filter((_=>_!==url)),IconService._loaded.push(url),this._renderer.insertBefore(this._document.body,svg,this._document.body.firstChild)})))}getSVG(url,bypassInterceptors=!0){return(bypassInterceptors?new fesm2022_http.eN(this._httpBackend):this._http).get(url,{responseType:"text"}).pipe((0,map.U)((svgText=>{const svgEl=this.svgElementFromString(svgText);return this.cloneSVG(svgEl)})))}svgElementFromString(str){const div=this._renderer.createElement("DIV");div.innerHTML=str;const svg=div.querySelector("svg");if(!svg)throw new Error("No SVG found in loaded contents");return svg}cloneSVG(svg){return svg.cloneNode(!0)}}_class6=IconService,defineProperty_defineProperty(IconService,"_loaded",[]),defineProperty_defineProperty(IconService,"_pending",[]),defineProperty_defineProperty(IconService,"fac",(function _class6_Factory(t){return new(t||_class6)(core["inject"](common.DOCUMENT),core["inject"](core.RendererFactory2),core["inject"](fesm2022_http.jN),core["inject"](fesm2022_http.eN))})),defineProperty_defineProperty(IconService,"prov",core["defineInjectable"]({token:_class6,factory:_class6.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.RendererFactory2},{type:fesm2022_http.jN},{type:fesm2022_http.eN}]}),null);class IconSpriteDirective{constructor(_iconService){defineProperty_defineProperty(this,"_iconService",void 0),defineProperty_defineProperty(this,"tetaIconSprite",void 0),defineProperty_defineProperty(this,"bypassInterceptors",!0),this._iconService=_iconService}ngOnInit(){"string"==typeof this.tetaIconSprite&&this._iconService.addSprite(this.tetaIconSprite,this.bypassInterceptors),this.tetaIconSprite instanceof Array&&this.tetaIconSprite?.length&&this.tetaIconSprite.forEach((sprite=>{this._iconService.addSprite(sprite,this.bypassInterceptors)}))}}_class7=IconSpriteDirective,defineProperty_defineProperty(IconSpriteDirective,"fac",(function _class7_Factory(t){return new(t||_class7)(core["directiveInject"](IconService))})),defineProperty_defineProperty(IconSpriteDirective,"dir",core["defineDirective"]({type:_class7,selectors:[["","tetaIconSprite",""]],inputs:{tetaIconSprite:"tetaIconSprite",bypassInterceptors:"bypassInterceptors"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconSpriteDirective,[{type:core.Directive,args:[{selector:"[tetaIconSprite]"}]}],(function(){return[{type:IconService}]}),{tetaIconSprite:[{type:core.Input}],bypassInterceptors:[{type:core.Input}]});class IconModule{}_class8=IconModule,defineProperty_defineProperty(IconModule,"fac",(function _class8_Factory(t){return new(t||_class8)})),defineProperty_defineProperty(IconModule,"mod",core["defineNgModule"]({type:_class8,declarations:[IconComponent,IconSpriteDirective],imports:[common.CommonModule,fesm2022_http.JF],exports:[IconComponent,IconSpriteDirective]})),defineProperty_defineProperty(IconModule,"inj",core["defineInjector"]({imports:[common.CommonModule,fesm2022_http.JF]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconModule,[{type:core.NgModule,args:[{declarations:[IconComponent,IconSpriteDirective],exports:[IconComponent,IconSpriteDirective],imports:[common.CommonModule,fesm2022_http.JF]}]}],null,null);class AccordionModule{}_class9=AccordionModule,defineProperty_defineProperty(AccordionModule,"fac",(function _class9_Factory(t){return new(t||_class9)})),defineProperty_defineProperty(AccordionModule,"mod",core["defineNgModule"]({type:_class9,declarations:[AccordionComponent,AccordionHeadComponent,AccordionContentDirective,AccordionItemComponent],imports:[common.CommonModule,IconModule],exports:[AccordionComponent,AccordionHeadComponent,AccordionContentDirective,AccordionItemComponent]})),defineProperty_defineProperty(AccordionModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AccordionModule,[{type:core.NgModule,args:[{declarations:[AccordionComponent,AccordionHeadComponent,AccordionContentDirective,AccordionItemComponent],exports:[AccordionComponent,AccordionHeadComponent,AccordionContentDirective,AccordionItemComponent],imports:[common.CommonModule,IconModule]}]}],null,null),function(AvatarColorEnum){AvatarColorEnum[AvatarColorEnum.vibrant=0]="vibrant",AvatarColorEnum[AvatarColorEnum.nebula=1]="nebula",AvatarColorEnum[AvatarColorEnum.gorgonzola=2]="gorgonzola",AvatarColorEnum[AvatarColorEnum.lagoon=3]="lagoon",AvatarColorEnum[AvatarColorEnum.lime=4]="lime",AvatarColorEnum[AvatarColorEnum.pumpkin=5]="pumpkin",AvatarColorEnum[AvatarColorEnum.vanity=6]="vanity",AvatarColorEnum[AvatarColorEnum.navy=7]="navy",AvatarColorEnum[AvatarColorEnum.turquoise=8]="turquoise",AvatarColorEnum[AvatarColorEnum.greyish=9]="greyish",AvatarColorEnum[AvatarColorEnum.heart=10]="heart",AvatarColorEnum[AvatarColorEnum.gloomy=11]="gloomy",AvatarColorEnum[AvatarColorEnum.rockman=12]="rockman",AvatarColorEnum[AvatarColorEnum.hair=13]="hair",AvatarColorEnum[AvatarColorEnum.cerise=14]="cerise",AvatarColorEnum[AvatarColorEnum.iris=15]="iris",AvatarColorEnum[AvatarColorEnum.caribbean=16]="caribbean",AvatarColorEnum[AvatarColorEnum.poisonous=17]="poisonous"}(AvatarColorEnum||(AvatarColorEnum={}));class AvatarComponent{get avatar(){let avatar="avatar ";return avatar+="avatar-size-"+this.size,avatar}constructor(){defineProperty_defineProperty(this,"photo",void 0),defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"id",0),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"size","28"),defineProperty_defineProperty(this,"colorMap",(new Map).set(AvatarColorEnum.vibrant,"#FAB13C").set(AvatarColorEnum.pumpkin,"#F67A1A").set(AvatarColorEnum.heart,"#CC3E3E").set(AvatarColorEnum.cerise,"#EB3673").set(AvatarColorEnum.nebula,"#9121A3").set(AvatarColorEnum.vanity,"#9C2AD6").set(AvatarColorEnum.gloomy,"#855EE1").set(AvatarColorEnum.iris,"#5350D1").set(AvatarColorEnum.gorgonzola,"#3858DA").set(AvatarColorEnum.navy,"#1F7CE0").set(AvatarColorEnum.rockman,"#3AA2F4").set(AvatarColorEnum.caribbean,"#1CC3D9").set(AvatarColorEnum.lagoon,"#1D96AE").set(AvatarColorEnum.turquoise,"#1F9D8C").set(AvatarColorEnum.hair,"#1EAE66").set(AvatarColorEnum.poisonous,"#33C333").set(AvatarColorEnum.lime,"#80C026").set(AvatarColorEnum.greyish,"#7F8697"))}ngOnInit(){}}_class10=AvatarComponent,defineProperty_defineProperty(AvatarComponent,"fac",(function _class10_Factory(t){return new(t||_class10)})),defineProperty_defineProperty(AvatarComponent,"cmp",core["defineComponent"]({type:_class10,selectors:[["teta-avatar"]],hostVars:2,hostBindings:function _class10_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.avatar)},inputs:{photo:"photo",name:"name",id:"id",viewType:"viewType",size:"size"},decls:4,vars:4,consts:[["alt","",3,"class","src",4,"ngIf","ngIfElse"],["withoutPhoto",""],["alt","",3,"src"],[1,"column","align-center","justify-content-center","position-relative"],[4,"ngIf","ngIfElse"],["withoutName",""],[1,"position-absolute",2,"width","100%","z-index","1","height","100%","background","linear-gradient(180deg, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 100%)"],["name","photoCamera",1,"width-10","height-10"]],template:function _class10_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div"),core["template"](1,_class10_img_1_Template,1,3,"img",0),core["template"](2,_class10_ng_template_2_Template,5,8,"ng-template",null,1,core["templateRefExtractor"]),core["elementEnd"]()),2&rf){const _r1=core["reference"](3);core["classMap"](ctx.avatar),core["advance"](1),core["property"]("ngIf",ctx.photo)("ngIfElse",_r1)}},dependencies:[common.NgIf,IconComponent],styles:[".avatar[_ngcontent-%COMP%]{font-style:normal;font-weight:600;line-height:16px}.avatar_brick[_ngcontent-%COMP%]{border-radius:var(--radius-base-brick)}.avatar_circle[_ngcontent-%COMP%]{border-radius:var(--radius-base-circle)}.avatar_rounded[_ngcontent-%COMP%]{border-radius:var(--radius-base-round)}.avatar-size-24[_ngcontent-%COMP%]{height:24px;width:24px;font-size:11px}.avatar-size-24[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-24[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:24px;width:24px}.avatar-size-28[_ngcontent-%COMP%]{height:28px;width:28px;font-size:11px}.avatar-size-28[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-28[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:28px;width:28px}.avatar-size-32[_ngcontent-%COMP%]{height:32px;width:32px;font-size:11px}.avatar-size-32[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-32[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:32px;width:32px}.avatar-size-44[_ngcontent-%COMP%]{height:44px;width:44px;font-size:14px}.avatar-size-44[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-44[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:44px;width:44px}.avatar-size-64[_ngcontent-%COMP%]{height:64px;width:64px;font-size:16px}.avatar-size-64[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-64[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:64px;width:64px}.avatar-size-128[_ngcontent-%COMP%]{height:128px;width:128px;font-size:28px}.avatar-size-128[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-128[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:128px;width:128px}.avatar-size-200[_ngcontent-%COMP%]{height:200px;width:200px;font-size:35px}.avatar-size-200[_ngcontent-%COMP%]   img[_ngcontent-%COMP%], .avatar-size-200[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{height:200px;width:200px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AvatarComponent,[{type:core.Component,args:[{selector:"teta-avatar",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div [class]="avatar">\n  <img [class]="\'avatar_\' + this.viewType" *ngIf="photo;else withoutPhoto" [src]="photo" alt=""/>\n  <ng-template #withoutPhoto>\n    <div [class]="\'avatar_\' + this.viewType" [style.background-color]="colorMap.get(id%17)||colorMap.get(0)"\n         class="column align-center justify-content-center position-relative">\n      <ng-container *ngIf="name;else withoutName">\n        <p>{{name}}</p>\n      </ng-container>\n      <ng-template #withoutName>\n        <teta-icon class="width-10 height-10" style="fill: white;width:{{size}}px; height:{{size}}px"\n                   name="photoCamera"></teta-icon>\n      </ng-template>\n      <div [class]="\'avatar_\' + this.viewType" class="position-absolute"\n           style="width: 100%;z-index:1;height: 100%; background: linear-gradient(180deg, rgba(255, 255, 255, 0.24) 0%, rgba(255, 255, 255, 0) 100%);\'"></div>\n    </div>\n  </ng-template>\n\n</div>\n',styles:[".avatar{font-style:normal;font-weight:600;line-height:16px}.avatar_brick{border-radius:var(--radius-base-brick)}.avatar_circle{border-radius:var(--radius-base-circle)}.avatar_rounded{border-radius:var(--radius-base-round)}.avatar-size-24{height:24px;width:24px;font-size:11px}.avatar-size-24 img,.avatar-size-24 div{height:24px;width:24px}.avatar-size-28{height:28px;width:28px;font-size:11px}.avatar-size-28 img,.avatar-size-28 div{height:28px;width:28px}.avatar-size-32{height:32px;width:32px;font-size:11px}.avatar-size-32 img,.avatar-size-32 div{height:32px;width:32px}.avatar-size-44{height:44px;width:44px;font-size:14px}.avatar-size-44 img,.avatar-size-44 div{height:44px;width:44px}.avatar-size-64{height:64px;width:64px;font-size:16px}.avatar-size-64 img,.avatar-size-64 div{height:64px;width:64px}.avatar-size-128{height:128px;width:128px;font-size:28px}.avatar-size-128 img,.avatar-size-128 div{height:128px;width:128px}.avatar-size-200{height:200px;width:200px;font-size:35px}.avatar-size-200 img,.avatar-size-200 div{height:200px;width:200px}\n"]}]}],(function(){return[]}),{photo:[{type:core.Input}],name:[{type:core.Input}],id:[{type:core.Input}],viewType:[{type:core.Input}],size:[{type:core.Input}],avatar:[{type:core.HostBinding,args:["class"]}]});class AvatarModule{}_class11=AvatarModule,defineProperty_defineProperty(AvatarModule,"fac",(function _class11_Factory(t){return new(t||_class11)})),defineProperty_defineProperty(AvatarModule,"mod",core["defineNgModule"]({type:_class11,declarations:[AvatarComponent],imports:[common.CommonModule,IconModule],exports:[AvatarComponent]})),defineProperty_defineProperty(AvatarModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AvatarModule,[{type:core.NgModule,args:[{declarations:[AvatarComponent],imports:[common.CommonModule,IconModule],exports:[AvatarComponent]}]}],null,null);class AutocompleteComponent{constructor(){}ngOnInit(){}}_class12=AutocompleteComponent,defineProperty_defineProperty(AutocompleteComponent,"fac",(function _class12_Factory(t){return new(t||_class12)})),defineProperty_defineProperty(AutocompleteComponent,"cmp",core["defineComponent"]({type:_class12,selectors:[["teta-autocomplete"]],decls:2,vars:0,template:function _class12_Template(rf,ctx){1&rf&&(core["elementStart"](0,"p"),core["text"](1,"autocomplete works!"),core["elementEnd"]())},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AutocompleteComponent,[{type:core.Component,args:[{selector:"teta-autocomplete",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<p>autocomplete works!</p>\n"}]}],(function(){return[]}),null);class AutocompleteModule{}_class13=AutocompleteModule,defineProperty_defineProperty(AutocompleteModule,"fac",(function _class13_Factory(t){return new(t||_class13)})),defineProperty_defineProperty(AutocompleteModule,"mod",core["defineNgModule"]({type:_class13,declarations:[AutocompleteComponent],imports:[common.CommonModule],exports:[AutocompleteComponent]})),defineProperty_defineProperty(AutocompleteModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AutocompleteModule,[{type:core.NgModule,args:[{declarations:[AutocompleteComponent],exports:[AutocompleteComponent],imports:[common.CommonModule]}]}],null,null);class ButtonComponent{get getClass(){const result=[this.class,"button"];switch(this.palette&&result.push(`button-${this.palette}`),this.view&&result.push(`button_${this.view}`),this.square&&result.push("button-square"),this.size){case"l":result.push("font-button-1");break;case"m":result.push("font-button-2")}return result.push(`button_${this.viewType}`),result.join(" ")}constructor(){defineProperty_defineProperty(this,"palette",void 0),defineProperty_defineProperty(this,"class",void 0),defineProperty_defineProperty(this,"view","primary"),defineProperty_defineProperty(this,"square",!1),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"size","m")}ngOnInit(){}}_class14=ButtonComponent,defineProperty_defineProperty(ButtonComponent,"fac",(function _class14_Factory(t){return new(t||_class14)})),defineProperty_defineProperty(ButtonComponent,"cmp",core["defineComponent"]({type:_class14,selectors:[["button","teta-button",""],["teta-button"]],hostVars:2,hostBindings:function _class14_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.getClass)},inputs:{palette:"palette",class:"class",view:"view",square:"square",viewType:"viewType",size:"size"},attrs:["teta-button",""],ngContentSelectors:_c0,decls:1,vars:0,template:function _class14_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ButtonComponent,[{type:core.Component,args:[{selector:"button[teta-button], teta-button",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],(function(){return[]}),{palette:[{type:core.Input}],class:[{type:core.Input}],view:[{type:core.Input}],square:[{type:core.Input}],viewType:[{type:core.Input}],size:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}]});class ButtonModule{}_class15=ButtonModule,defineProperty_defineProperty(ButtonModule,"fac",(function _class15_Factory(t){return new(t||_class15)})),defineProperty_defineProperty(ButtonModule,"mod",core["defineNgModule"]({type:_class15,declarations:[ButtonComponent],imports:[common.CommonModule],exports:[ButtonComponent]})),defineProperty_defineProperty(ButtonModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ButtonModule,[{type:core.NgModule,args:[{declarations:[ButtonComponent],imports:[common.CommonModule],exports:[ButtonComponent]}]}],null,null);const CHECKBOX_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>CheckboxComponent)),multi:!0};class CheckboxComponent{get getClass(){const result=[this.class,"checkbox"];return this.palette&&result.push(`checkbox-${this.palette}`),result.join(" ")}get model(){return this.model$}set model(v){v!==this.model$&&(this.model$=v,this.onChange(v))}constructor(cdr){defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"tabindex",0),defineProperty_defineProperty(this,"class",void 0),defineProperty_defineProperty(this,"palette","primary"),defineProperty_defineProperty(this,"noLabel",void 0),defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"value",void 0),defineProperty_defineProperty(this,"binary",void 0),defineProperty_defineProperty(this,"labelPosition","right"),defineProperty_defineProperty(this,"allowNull",void 0),defineProperty_defineProperty(this,"checked",void 0),defineProperty_defineProperty(this,"model$",null),this.cdr=cdr}changeValue(){this.disabled||(this.binary?this.model=!this.model:this.isChecked()?this.removeValue():this.addValue(),this.checked=this.isChecked())}writeValue(model){this.binary?this.model$=model:this.model$=model&&model instanceof Array?model:[],this.checked=this.isChecked(),this.cdr.detectChanges()}isChecked(){return this.binary?this.allowNull?this.model:!!this.model:this.model&&this.model.indexOf(this.value)>=0}removeValue(){this.model=this.model.filter((val=>val!==this.value))}addValue(){this.model?this.model=[...this.model,this.value]:this.model=[this.value]}ngOnInit(){}onChange(_){}onTouched(){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this.cdr.detectChanges()}}_class16=CheckboxComponent,defineProperty_defineProperty(CheckboxComponent,"fac",(function _class16_Factory(t){return new(t||_class16)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(CheckboxComponent,"cmp",core["defineComponent"]({type:_class16,selectors:[["teta-checkbox"]],hostVars:5,hostBindings:function _class16_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class16_click_HostBindingHandler(){return ctx.changeValue()})),2&rf&&(core["attribute"]("tabindex",ctx.tabindex),core["classMap"](ctx.getClass),core["classProp"]("checkbox_disabled",ctx.disabled))},inputs:{class:"class",palette:"palette",noLabel:"noLabel",disabled:"disabled",value:"value",binary:"binary",labelPosition:"labelPosition",allowNull:"allowNull"},features:[core["ProvidersFeature"]([CHECKBOX_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:4,vars:2,consts:[[4,"ngIf"],["content",""],[1,"checkbox__tick"],[3,"name"],["class","font-body-3",4,"ngIf"],[1,"font-body-3"],[4,"ngTemplateOutlet"]],template:function _class16_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["template"](0,_class16_ng_container_0_Template,4,4,"ng-container",0),core["template"](1,_class16_ng_container_1_Template,4,4,"ng-container",0),core["template"](2,_class16_ng_template_2_Template,1,0,"ng-template",null,1,core["templateRefExtractor"])),2&rf&&(core["property"]("ngIf","right"===ctx.labelPosition),core["advance"](1),core["property"]("ngIf","left"===ctx.labelPosition))},dependencies:[common.NgIf,common.NgTemplateOutlet,IconComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CheckboxComponent,[{type:core.Component,args:[{selector:"teta-checkbox",providers:[CHECKBOX_CONTROL_VALUE_ACCESSOR],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="labelPosition===\'right\'">\n  <div class="checkbox__tick" [class.checkbox__tick_active]="checked != false">\n    <teta-icon [name]="checked ? \'tick\' : checked === false ? \'\' : \'dash\'"></teta-icon>\n  </div>\n  <span class="font-body-3" *ngIf="!noLabel">\n    <ng-container *ngTemplateOutlet="content"></ng-container>\n  </span>\n</ng-container>\n<ng-container *ngIf="labelPosition===\'left\'">\n  <span class="font-body-3" *ngIf="!noLabel">\n    <ng-container *ngTemplateOutlet="content"></ng-container>\n  </span>\n  <div class="checkbox__tick" [class.checkbox__tick_active]="checked != false">\n    <teta-icon [name]="checked ? \'tick\' : checked === false ? \'\' : \'dash\'"></teta-icon>\n  </div>\n</ng-container>\n<ng-template #content><ng-content></ng-content></ng-template>\n'}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{tabindex:[{type:core.HostBinding,args:["attr.tabindex"]}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}],palette:[{type:core.Input}],noLabel:[{type:core.Input}],disabled:[{type:core.HostBinding,args:["class.checkbox_disabled"]},{type:core.Input}],value:[{type:core.Input}],binary:[{type:core.Input}],labelPosition:[{type:core.Input}],allowNull:[{type:core.Input}],changeValue:[{type:core.HostListener,args:["click"]}]});class CheckboxModule{}_class17=CheckboxModule,defineProperty_defineProperty(CheckboxModule,"fac",(function _class17_Factory(t){return new(t||_class17)})),defineProperty_defineProperty(CheckboxModule,"mod",core["defineNgModule"]({type:_class17,declarations:[CheckboxComponent],imports:[common.CommonModule,IconModule],exports:[CheckboxComponent]})),defineProperty_defineProperty(CheckboxModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CheckboxModule,[{type:core.NgModule,args:[{declarations:[CheckboxComponent],imports:[common.CommonModule,IconModule],exports:[CheckboxComponent]}]}],null,null);class DomUtil{static clickedInside(target,event){return!!target&&event.composedPath().indexOf(target)>=0}static findTransformedParent(node){for(;null!==node&&"BODY"!==node.tagName;){if("none"!==getComputedStyle(node).transform)return node;node=node.parentNode}return null}static isOverflown(element){return element.scrollHeight>element.clientHeight||element.scrollWidth>element.clientWidth}}class ClickOutsideDirective{set tetaClickOutside(val){this._handleEvents=val,this._handleEvents?this._ngZone.runOutsideAngular((()=>{setTimeout((()=>{this.addListener(this.rightClick)}))})):this.removeListener()}get tetaClickOutside(){return this._handleEvents}constructor(_elementRef,_ngZone){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_ngZone",void 0),defineProperty_defineProperty(this,"clickOutside",new core.EventEmitter),defineProperty_defineProperty(this,"rightClick",!1),defineProperty_defineProperty(this,"_handleEvents",!1),defineProperty_defineProperty(this,"listener",(click=>{if(!this._handleEvents)return;DomUtil.clickedInside(this._elementRef.nativeElement,click)||this.clickOutside.emit(click)})),this._elementRef=_elementRef,this._ngZone=_ngZone}ngOnDestroy(){this.removeListener()}addListener(handleRightClick){window.addEventListener("click",this.listener),handleRightClick&&window.addEventListener("contextmenu",this.listener)}removeListener(){window.removeEventListener("click",this.listener),window.removeEventListener("contextmenu",this.listener)}}_class18=ClickOutsideDirective,defineProperty_defineProperty(ClickOutsideDirective,"fac",(function _class18_Factory(t){return new(t||_class18)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.NgZone))})),defineProperty_defineProperty(ClickOutsideDirective,"dir",core["defineDirective"]({type:_class18,selectors:[["","tetaClickOutside",""]],inputs:{rightClick:"rightClick",tetaClickOutside:"tetaClickOutside"},outputs:{clickOutside:"clickOutside"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ClickOutsideDirective,[{type:core.Directive,args:[{selector:"[tetaClickOutside]"}]}],(function(){return[{type:core.ElementRef},{type:core.NgZone}]}),{clickOutside:[{type:core.Output}],rightClick:[{type:core.Input}],tetaClickOutside:[{type:core.Input}]});class ClickOutsideModule{}_class19=ClickOutsideModule,defineProperty_defineProperty(ClickOutsideModule,"fac",(function _class19_Factory(t){return new(t||_class19)})),defineProperty_defineProperty(ClickOutsideModule,"mod",core["defineNgModule"]({type:_class19,declarations:[ClickOutsideDirective],imports:[common.CommonModule],exports:[ClickOutsideDirective]})),defineProperty_defineProperty(ClickOutsideModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ClickOutsideModule,[{type:core.NgModule,args:[{declarations:[ClickOutsideDirective],exports:[ClickOutsideDirective],imports:[common.CommonModule]}]}],null,null);class ScrollIntoViewDirective{constructor(platformId,elementRef){defineProperty_defineProperty(this,"platformId",void 0),defineProperty_defineProperty(this,"elementRef",void 0),defineProperty_defineProperty(this,"tetaScrollIntoView",void 0),defineProperty_defineProperty(this,"behavior","smooth"),defineProperty_defineProperty(this,"block","end"),this.platformId=platformId,this.elementRef=elementRef}ngOnChanges(simpleChange){(0,common.isPlatformBrowser)(this.platformId)&&(0,coercion.Ig)(this.tetaScrollIntoView)&&this.elementRef.nativeElement.scrollIntoView({behavior:"smooth",block:"start"})}}_class20=ScrollIntoViewDirective,defineProperty_defineProperty(ScrollIntoViewDirective,"fac",(function _class20_Factory(t){return new(t||_class20)(core["directiveInject"](core.PLATFORM_ID),core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(ScrollIntoViewDirective,"dir",core["defineDirective"]({type:_class20,selectors:[["","tetaScrollIntoView",""]],inputs:{tetaScrollIntoView:"tetaScrollIntoView",behavior:"behavior",block:"block"},features:[core["NgOnChangesFeature"]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollIntoViewDirective,[{type:core.Directive,args:[{selector:"[tetaScrollIntoView]"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[core.PLATFORM_ID]}]},{type:core.ElementRef}]}),{tetaScrollIntoView:[{type:core.Input}],behavior:[{type:core.Input}],block:[{type:core.Input}]});class ScrollIntoViewModule{}var Align,VerticalAlign;_class21=ScrollIntoViewModule,defineProperty_defineProperty(ScrollIntoViewModule,"fac",(function _class21_Factory(t){return new(t||_class21)})),defineProperty_defineProperty(ScrollIntoViewModule,"mod",core["defineNgModule"]({type:_class21,declarations:[ScrollIntoViewDirective],imports:[common.CommonModule],exports:[ScrollIntoViewDirective]})),defineProperty_defineProperty(ScrollIntoViewModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollIntoViewModule,[{type:core.NgModule,args:[{declarations:[ScrollIntoViewDirective],exports:[ScrollIntoViewDirective],imports:[common.CommonModule]}]}],null,null),function(Align){Align[Align.left=0]="left",Align[Align.right=1]="right",Align[Align.center=2]="center",Align[Align.auto=3]="auto",Align[Align.fitWidth=4]="fitWidth",Align[Align.minWidth=5]="minWidth",Align[Align.outerLeft=6]="outerLeft",Align[Align.outerRight=7]="outerRight",Align[Align.outerAuto=8]="outerAuto"}(Align||(Align={})),function(VerticalAlign){VerticalAlign[VerticalAlign.top=0]="top",VerticalAlign[VerticalAlign.bottom=1]="bottom",VerticalAlign[VerticalAlign.center=2]="center",VerticalAlign[VerticalAlign.auto=3]="auto",VerticalAlign[VerticalAlign.innerTop=4]="innerTop",VerticalAlign[VerticalAlign.innerBottom=5]="innerBottom",VerticalAlign[VerticalAlign.innerAuto=6]="innerAuto"}(VerticalAlign||(VerticalAlign={}));class PositionUtil{static getPosition(containerPosition,elementPosition,align,verticalAlign,margin=0,verticalMargin=0,transformedParentRect={left:0,right:0,top:0,bottom:0}){const rect={},elementWidth=elementPosition.right-elementPosition.left,elementHeight=elementPosition.bottom-elementPosition.top,containerWidth=containerPosition.right-containerPosition.left;containerPosition.bottom,containerPosition.top;return align===Align.auto&&(align=Align.left,window.innerWidth<containerPosition.left+elementWidth&&(align=Align.right)),align===Align.left&&(rect.left=containerPosition.left+margin),align===Align.right&&(rect.left=containerPosition.right-elementWidth-margin),align===Align.center&&(rect.left=(containerPosition.left+containerPosition.right)/2-elementWidth/2),align===Align.outerAuto&&(align=Align.outerRight,window.innerWidth<containerPosition.right+elementWidth&&(align=Align.outerLeft)),align===Align.outerLeft&&(rect.left=containerPosition.left-elementWidth+margin),align===Align.outerRight&&(rect.left=containerPosition.right-margin),align===Align.fitWidth&&(rect.left=containerPosition.left+margin,rect.right=window.innerWidth-containerPosition.right+margin),align===Align.minWidth&&(rect.left=containerPosition.left+margin,rect.minWidth=containerWidth),verticalAlign===VerticalAlign.auto&&(verticalAlign=containerPosition.bottom+elementHeight>window.innerHeight&&containerPosition.bottom>=window.innerHeight/2?VerticalAlign.top:VerticalAlign.bottom),verticalAlign===VerticalAlign.innerAuto&&(verticalAlign=containerPosition.bottom+elementHeight>window.innerHeight&&containerPosition.bottom>=window.innerHeight/2?VerticalAlign.innerTop:VerticalAlign.innerBottom),verticalAlign===VerticalAlign.top&&(rect.top=containerPosition.top-elementHeight-verticalMargin),verticalAlign===VerticalAlign.bottom&&(rect.top=containerPosition.bottom+verticalMargin),verticalAlign===VerticalAlign.innerTop&&(rect.top=containerPosition.bottom-elementHeight-verticalMargin),verticalAlign===VerticalAlign.innerBottom&&(rect.top=containerPosition.top+verticalMargin),verticalAlign===VerticalAlign.center&&(rect.top=(containerPosition.top+containerPosition.bottom)/2-elementHeight/2),rect.left+elementWidth>window.innerWidth&&(rect.left=window.innerWidth-elementWidth),rect.left<0&&(rect.left=0),(rect.top+elementHeight>window.innerHeight||rect.bottom<0)&&(rect.bottom=0),rect.top<0&&(rect.top=0),verticalAlign!==VerticalAlign.bottom&&verticalAlign!==VerticalAlign.center&&verticalAlign!==VerticalAlign.innerBottom||(rect.maxHeight=window.innerHeight-rect.top),verticalAlign!==VerticalAlign.top&&verticalAlign!==VerticalAlign.innerTop||(rect.maxHeight=containerPosition.top),isNaN(rect.left)||(rect.left=rect.left-transformedParentRect.left),isNaN(rect.right)||(rect.right=rect.right-transformedParentRect.left),isNaN(rect.top)||(rect.top=rect.top-transformedParentRect.top),isNaN(rect.bottom)||(rect.bottom=rect.bottom?rect.bottom-transformedParentRect.bottom:rect.bottom),rect}static setElementPosition(element,rect){element.style.left=null!=rect.left?`${rect.left}px`:"",element.style.right=null!=rect.right?`${rect.right}px`:"",element.style.top=null!=rect.top?`${rect.top}px`:"",element.style.bottom=null!=rect.bottom?`${rect.bottom}px`:"",element.style.maxHeight=null!=rect.maxHeight?`${rect.maxHeight}px`:"",element.style.minWidth=null!=rect.minWidth?`${rect.minWidth}px`:""}static getMaxHeight(position){let maxHeight=null;return maxHeight=1,1}static getMaxWidth(position){let maxWidth=null;return maxWidth=1,1}}class DropdownContentDirective{constructor(_elementRef){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"nativeElement",void 0),this._elementRef=_elementRef,this.nativeElement=_elementRef.nativeElement}}_class22=DropdownContentDirective,defineProperty_defineProperty(DropdownContentDirective,"fac",(function _class22_Factory(t){return new(t||_class22)(core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(DropdownContentDirective,"dir",core["defineDirective"]({type:_class22,selectors:[["","tetaDropdownContent",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownContentDirective,[{type:core.Directive,args:[{selector:"[tetaDropdownContent]"}]}],(function(){return[{type:core.ElementRef}]}),null);class DropdownHeadDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class23=DropdownHeadDirective,defineProperty_defineProperty(DropdownHeadDirective,"fac",(function _class23_Factory(t){return new(t||_class23)(core["directiveInject"](core.TemplateRef,8))})),defineProperty_defineProperty(DropdownHeadDirective,"dir",core["defineDirective"]({type:_class23,selectors:[["","tetaDropdownHead",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownHeadDirective,[{type:core.Directive,args:[{selector:"[tetaDropdownHead]"}]}],(function(){return[{type:core.TemplateRef,decorators:[{type:core.Optional}]}]}),null);class DropdownBase{set open(val){null==val||val===this._open||this.disabled||(val?this.openDropdown():this.closeDropdown())}get open(){return this._open}get container(){return this.appendToBody?this._document.body:this._elementRef.nativeElement}constructor(_cdr,_document,_elementRef,_zone,_renderer){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"align",Align.left),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"appendToBody",void 0),defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"backdrop",!1),defineProperty_defineProperty(this,"className",void 0),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"openChange",new core.EventEmitter),defineProperty_defineProperty(this,"autoClose",!0),defineProperty_defineProperty(this,"autoCloseIgnore",["inside"]),defineProperty_defineProperty(this,"_head",void 0),defineProperty_defineProperty(this,"_content",void 0),defineProperty_defineProperty(this,"_body",null),defineProperty_defineProperty(this,"_backdrop",null),defineProperty_defineProperty(this,"_open",!1),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"scrollListener",(event=>{this.open&&!this._body.contains(event.target)&&this._body!==event.target&&this.closeDropdown()})),this._cdr=_cdr,this._document=_document,this._elementRef=_elementRef,this._zone=_zone,this._renderer=_renderer,this._zone.onStable.pipe((0,takeWhile.o)((_=>this._alive)),(0,throttleTime.p)(10,void 0,{trailing:!0})).subscribe((_=>{this._head?.nativeElement&&this._body&&setTimeout((()=>{this._head?.nativeElement&&this._body&&this.setPosition(this._head.nativeElement,this._body)}))})),this.addScrollListener()}click(event){this.open?(!DomUtil.clickedInside(this._body,event)||this.autoCloseIgnore.indexOf("inside")<0)&&this.closeDropdown():DomUtil.clickedInside(this._head.nativeElement,event)&&this.openDropdown()}documentClick(event){this.open&&this.autoClose&&0!==event.detail&&!DomUtil.clickedInside(this._head.nativeElement,event)&&(DomUtil.clickedInside(this._body,event)?this.autoCloseIgnore.indexOf("inside")<0&&this.closeDropdown():this.autoCloseIgnore.indexOf("outside")<0&&this.closeDropdown())}keyUp(event){this.open&&this.autoClose&&!["esc","enter"].every((_=>this.autoCloseIgnore.indexOf(_)>=0))&&("Escape"===event.code&&this.autoCloseIgnore.indexOf("esc")<0||"Enter"===event.code&&this.autoCloseIgnore.indexOf("enter")<0)&&this.closeDropdown()}addScrollListener(){window.addEventListener("scroll",this.scrollListener,!0)}removeScrollListener(){window.removeEventListener("scroll",this.scrollListener,!0)}closeDropdown(){this.open&&this._body&&this.container.contains(this._body)&&(this._renderer.removeChild(this.container,this._body),this._open=!1,this._body=null,this._backdrop&&this._renderer.removeChild(this._document.body,this._backdrop),this.openChange.emit(this.open),this._cdr.detectChanges())}openDropdown(){if(this._open||!this._content||this.disabled)return;this._open=!0,this.openChange.emit(this.open);const renderer=this._renderer,content=this._content.nativeElement,container=this._body=this._body||renderer.createElement("div");renderer.addClass(container,"dropdown"),renderer.addClass(container,"dropdown_"+this.viewType),this.backdrop&&(this._backdrop=renderer.createElement("div"),renderer.addClass(this._backdrop,"dropdown-backdrop"),renderer.appendChild(this._document.body,this._backdrop)),null!=this.className&&(this.className instanceof Array&&this.className.length>0&&this.className.forEach((_=>{renderer.addClass(container,_)})),"string"==typeof this.className&&renderer.addClass(container,this.className)),renderer.appendChild(container,content),renderer.appendChild(this.container,container),setTimeout((()=>{this.setPosition(this._head.nativeElement,this._body)}))}setPosition(container,target){const containerPosition=container.getBoundingClientRect(),targetPosition=target.getBoundingClientRect(),rect={bottom:containerPosition.bottom,top:containerPosition.top,left:containerPosition.left,right:containerPosition.right},targetRect={bottom:targetPosition.bottom,top:targetPosition.top,left:targetPosition.left,right:targetPosition.right},targetTransformedParent=DomUtil.findTransformedParent(target);let parentPosition={left:0,right:0,top:0,bottom:0};targetTransformedParent&&(parentPosition=targetTransformedParent.getBoundingClientRect());const position=PositionUtil.getPosition(rect,targetRect,this.align,this.verticalAlign,0,0,parentPosition);PositionUtil.setElementPosition(target,position)}}_class24=DropdownBase,defineProperty_defineProperty(DropdownBase,"fac",(function _class24_Factory(t){core["invalidFactory"]()})),defineProperty_defineProperty(DropdownBase,"dir",core["defineDirective"]({type:_class24,contentQueries:function _class24_ContentQueries(rf,ctx,dirIndex){if(1&rf&&(core["contentQuery"](dirIndex,DropdownHeadDirective,5,core.ElementRef),core["contentQuery"](dirIndex,DropdownContentDirective,5)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._head=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._content=_t.first)}},hostBindings:function _class24_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class24_click_HostBindingHandler($event){return ctx.click($event)}))("click",(function _class24_click_HostBindingHandler($event){return ctx.documentClick($event)}),!1,core["resolveDocument"])("keyup",(function _class24_keyup_HostBindingHandler($event){return ctx.keyUp($event)}),!1,core["resolveWindow"])},inputs:{align:"align",verticalAlign:"verticalAlign",appendToBody:"appendToBody",disabled:"disabled",backdrop:"backdrop",className:"className",viewType:"viewType",open:"open",autoClose:"autoClose",autoCloseIgnore:"autoCloseIgnore"},outputs:{openChange:"openChange"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownBase,[{type:core.Directive}],(function(){return[{type:core.ChangeDetectorRef},{type:void 0},{type:core.ElementRef},{type:core.NgZone},{type:core.Renderer2}]}),{align:[{type:core.Input}],verticalAlign:[{type:core.Input}],appendToBody:[{type:core.Input}],disabled:[{type:core.Input}],backdrop:[{type:core.Input}],className:[{type:core.Input}],viewType:[{type:core.Input}],open:[{type:core.Input}],openChange:[{type:core.Output}],autoClose:[{type:core.Input}],autoCloseIgnore:[{type:core.Input}],_head:[{type:core.ContentChild,args:[DropdownHeadDirective,{static:!1,read:core.ElementRef}]}],_content:[{type:core.ContentChild,args:[DropdownContentDirective,{static:!1}]}],click:[{type:core.HostListener,args:["click",["$event"]]}],documentClick:[{type:core.HostListener,args:["document:click",["$event"]]}],keyUp:[{type:core.HostListener,args:["window:keyup",["$event"]]}]});class DropdownComponent extends DropdownBase{constructor(_cdr,_document,_elementRef,_zone,_renderer){super(_cdr,_document,_elementRef,_zone,_renderer),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_renderer",void 0),this._cdr=_cdr,this._document=_document,this._elementRef=_elementRef,this._zone=_zone,this._renderer=_renderer}ngOnInit(){}ngOnDestroy(){this.closeDropdown(),this.removeScrollListener(),this._alive=!1}}_class25=DropdownComponent,defineProperty_defineProperty(DropdownComponent,"fac",(function _class25_Factory(t){return new(t||_class25)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.ElementRef),core["directiveInject"](core.NgZone),core["directiveInject"](core.Renderer2))})),defineProperty_defineProperty(DropdownComponent,"cmp",core["defineComponent"]({type:_class25,selectors:[["teta-dropdown"]],exportAs:["dropdown"],features:[core["InheritDefinitionFeature"]],ngContentSelectors:["[tetaDropdownHead]"],decls:1,vars:0,template:function _class25_Template(rf,ctx){1&rf&&(core["projectionDef"](_c4),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownComponent,[{type:core.Component,args:[{selector:"teta-dropdown",changeDetection:core.ChangeDetectionStrategy.OnPush,exportAs:"dropdown",template:'<ng-content select="[tetaDropdownHead]"></ng-content>\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.ElementRef},{type:core.NgZone},{type:core.Renderer2}]}),null);class DropdownDirective extends DropdownBase{constructor(_cdr,_document,_elementRef,_zone,_renderer){super(_cdr,_document,_elementRef,_zone,_renderer),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_renderer",void 0),this._cdr=_cdr,this._document=_document,this._elementRef=_elementRef,this._zone=_zone,this._renderer=_renderer}ngOnInit(){}ngOnDestroy(){this.closeDropdown(),this.removeScrollListener(),this._alive=!1}ngAfterViewInit(){this._content&&this._renderer.removeChild(this._content.nativeElement.parentNode,this._content.nativeElement)}}_class26=DropdownDirective,defineProperty_defineProperty(DropdownDirective,"fac",(function _class26_Factory(t){return new(t||_class26)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.ElementRef),core["directiveInject"](core.NgZone),core["directiveInject"](core.Renderer2))})),defineProperty_defineProperty(DropdownDirective,"dir",core["defineDirective"]({type:_class26,selectors:[["","tetaDropdown",""]],features:[core["InheritDefinitionFeature"]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownDirective,[{type:core.Directive,args:[{selector:"[tetaDropdown]"}]}],(function(){return[{type:core.ChangeDetectorRef},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.ElementRef},{type:core.NgZone},{type:core.Renderer2}]}),null);class DropdownModule{}_class27=DropdownModule,defineProperty_defineProperty(DropdownModule,"fac",(function _class27_Factory(t){return new(t||_class27)})),defineProperty_defineProperty(DropdownModule,"mod",core["defineNgModule"]({type:_class27,declarations:[DropdownComponent,DropdownHeadDirective,DropdownContentDirective,DropdownDirective],imports:[common.CommonModule],exports:[DropdownComponent,DropdownHeadDirective,DropdownContentDirective,DropdownDirective]})),defineProperty_defineProperty(DropdownModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DropdownModule,[{type:core.NgModule,args:[{declarations:[DropdownComponent,DropdownHeadDirective,DropdownContentDirective,DropdownDirective],exports:[DropdownComponent,DropdownHeadDirective,DropdownContentDirective,DropdownDirective],imports:[common.CommonModule]}]}],null,null);class ArrayUtil{static asArray(value){return null==value?[]:value instanceof Array?value:[value]}static flatten(data,children,onlyLeafs){const result=[];return data.forEach((child=>{let childItems=[];children?("string"==typeof children&&(childItems=child[children]),"function"==typeof children&&(childItems=children(child))):childItems=child.children,null!=childItems&&childItems.length>0?(onlyLeafs||result.push(child),result.push(...ArrayUtil.flatten(childItems,children,onlyLeafs))):result.push(child)})),result}static findRecursive(tree,comparer,children="children"){const found=tree.find((x=>comparer(x)));if(null!=found)return found;for(let i=0,l=tree.length;i<l;i++){const item=tree[i];if(item[children]&&item[children].length){const res=ArrayUtil.findRecursive(item[children],comparer);if(null!=res)return res}}return null}static filterRecursive(array,filter,children="children",keepChildren=!0,fullscanChildren=!1){const result=[];if(array&&array.length)for(const item of array){const resultItem=Object.assign({},item);if(filter(resultItem)){if(result.push(resultItem),!keepChildren){if(resultItem[children]=[],fullscanChildren)continue;break}}else if(item[children]&&item[children].length>0){resultItem[children]=[];const found=ArrayUtil.filterRecursive(item[children],filter,children,keepChildren,fullscanChildren);found?.length>0&&(resultItem[children]=found,result.push(resultItem))}}return result}static distinct(array,comparator){const result=[];if(array&&array.length)for(const item of array){result.find((_=>comparator(_)===comparator(item)))||result.push(item)}return result}static findParents(tree,item){if(tree?.indexOf(item)>=0)return tree;if(Array.isArray(tree))for(const treeNode of tree){const childResult=this.findParents(treeNode.children,item);if(Array.isArray(childResult))return[treeNode].concat(childResult)}return null}static moveItem(list,sourceIndex,targetIndex){const res=[...list],item=list[sourceIndex];return targetIndex>sourceIndex?(res.splice(targetIndex,0,item),res.splice(sourceIndex,1)):(res.splice(sourceIndex,1),res.splice(targetIndex,0,item)),res}}class PopupContentComponent{get getClass(){return[...ArrayUtil.asArray(this.className),"popup-content"].join(" ")}constructor(){defineProperty_defineProperty(this,"dialog",!0),defineProperty_defineProperty(this,"className",void 0)}addClass(className){this.className?("string"==typeof this.className&&(this.className=className),this.className instanceof Array&&this.className.push(className)):this.className=[className]}ngOnInit(){}ngOnDestroy(){}}_class28=PopupContentComponent,defineProperty_defineProperty(PopupContentComponent,"fac",(function _class28_Factory(t){return new(t||_class28)})),defineProperty_defineProperty(PopupContentComponent,"cmp",core["defineComponent"]({type:_class28,selectors:[["teta-popup-content"]],hostVars:3,hostBindings:function _class28_HostBindings(rf,ctx){2&rf&&(core["syntheticHostProperty"]("@dialog",ctx.dialog),core["classMap"](ctx.getClass))},inputs:{className:"className"},ngContentSelectors:_c0,decls:1,vars:0,template:function _class28_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},data:{animation:[(0,animations.X$)("dialog",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(200,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(200,(0,animations.oB)({opacity:"0"}))])])]},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PopupContentComponent,[{type:core.Component,args:[{selector:"teta-popup-content",animations:[(0,animations.X$)("dialog",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(200,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(200,(0,animations.oB)({opacity:"0"}))])])],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],(function(){return[]}),{dialog:[{type:core.HostBinding,args:["@dialog"]}],className:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}]});class DynamicData{constructor(value){for(const key in value)value.hasOwnProperty(key)&&(this[key]=value[key])}}class TetaContentRef{constructor(nodes,viewRef,componentRef){defineProperty_defineProperty(this,"nodes",void 0),defineProperty_defineProperty(this,"viewRef",void 0),defineProperty_defineProperty(this,"componentRef",void 0),this.nodes=nodes,this.viewRef=viewRef,this.componentRef=componentRef}}class DynamicComponentService{constructor(_componentFactoryResolver,_rendererFactory,_appRef){defineProperty_defineProperty(this,"_componentFactoryResolver",void 0),defineProperty_defineProperty(this,"_rendererFactory",void 0),defineProperty_defineProperty(this,"_appRef",void 0),defineProperty_defineProperty(this,"_renderer",void 0),this._componentFactoryResolver=_componentFactoryResolver,this._rendererFactory=_rendererFactory,this._appRef=_appRef,this._renderer=this._rendererFactory.createRenderer(null,null)}createComponent(component,contentRef,injector,container){const componentRef=this._componentFactoryResolver.resolveComponentFactory(component).create(injector,contentRef.nodes);return this._appRef.attachView(componentRef.hostView),container.appendChild(componentRef.location.nativeElement),componentRef}createContent(content,injector,context){if(null==content)throw new Error("Content is undefined");return"string"==typeof content?this.fromString(content):content instanceof core.TemplateRef?this.fromTemplate(content,context):this.fromComponent(content,injector,context)}destroy(component,content,container){component&&(this._appRef.detachView(component.hostView),component.destroy()),content&&content.viewRef&&content.viewRef.destroy(),content=null}getContext(content,context){return content instanceof core.TemplateRef?{$implicit:context,data:context}:context}getInjector(data,parent){return core.Injector.create({providers:[{provide:DynamicData,useValue:data}],parent})}fromString(content){return new TetaContentRef([[this._renderer.createText(`${content}`)]])}fromTemplate(content,context){const viewRef=content.createEmbeddedView(context);return this._appRef.attachView(viewRef),new TetaContentRef([viewRef.rootNodes],viewRef)}fromComponent(content,injector,context){const componentRef=this._componentFactoryResolver.resolveComponentFactory(content).create(injector);for(const key in context)Object.prototype.hasOwnProperty.call(context,key)&&(componentRef.instance[key]=context[key]);const componentNativeEl=componentRef.location.nativeElement;return this._appRef.attachView(componentRef.hostView),new TetaContentRef([[componentNativeEl]],componentRef.hostView,componentRef)}}_class30=DynamicComponentService,defineProperty_defineProperty(DynamicComponentService,"fac",(function _class30_Factory(t){return new(t||_class30)(core["inject"](core.ComponentFactoryResolver),core["inject"](core.RendererFactory2),core["inject"](core.ApplicationRef))})),defineProperty_defineProperty(DynamicComponentService,"prov",core["defineInjectable"]({token:_class30,factory:_class30.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DynamicComponentService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:core.ComponentFactoryResolver},{type:core.RendererFactory2},{type:core.ApplicationRef}]}),null);class DynamicContentBaseDirective{set open(open){this._open=open,this._open?this.createContentRef():this.destroyContentRef()}constructor(_document,_elementRef,_service,_injector,_zone,_cdr){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_service",void 0),defineProperty_defineProperty(this,"_injector",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"className",void 0),defineProperty_defineProperty(this,"align",Align.left),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"appendToBody",!1),defineProperty_defineProperty(this,"openChange",new core.EventEmitter),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_componentRef",void 0),defineProperty_defineProperty(this,"_content",void 0),defineProperty_defineProperty(this,"_open",!1),this._document=_document,this._elementRef=_elementRef,this._service=_service,this._injector=_injector,this._zone=_zone,this._cdr=_cdr,this._zone.onStable.pipe((0,takeWhile.o)((_=>this._alive)),(0,filter.h)((_=>this._open))).subscribe((_=>{this.setPosition()}))}ngOnDestroy(){this._alive=!1,this.destroyContentRef()}createContentRef(className){if(!this._componentRef){this._open=!0;const injector=this._service.getInjector(this.data,this._injector),context=this._service.getContext(this._dynamicContent,this.data);this._content=this._service.createContent(this._dynamicContent,this._injector,context),this._componentRef=this._service.createComponent(PopupContentComponent,this._content,injector,this.appendToBody?this._document.body:this._elementRef.nativeElement),className&&this._componentRef.instance.addClass(className)}return this._componentRef}destroyContentRef(){this._open=!1,this._service.destroy(this._componentRef,this._content,this.appendToBody?this._document.body:this._elementRef.nativeElement),this._componentRef=null}}_class31=DynamicContentBaseDirective,defineProperty_defineProperty(DynamicContentBaseDirective,"fac",(function _class31_Factory(t){core["invalidFactory"]()})),defineProperty_defineProperty(DynamicContentBaseDirective,"dir",core["defineDirective"]({type:_class31,inputs:{data:"data",className:"className",align:"align",verticalAlign:"verticalAlign",appendToBody:"appendToBody",open:"open"},outputs:{openChange:"openChange"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DynamicContentBaseDirective,[{type:core.Directive}],(function(){return[{type:void 0},{type:core.ElementRef},{type:DynamicComponentService},{type:core.Injector},{type:core.NgZone},{type:core.ChangeDetectorRef}]}),{data:[{type:core.Input}],className:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],appendToBody:[{type:core.Input}],open:[{type:core.Input}],openChange:[{type:core.Output}]});class HintDirective extends DynamicContentBaseDirective{get _dynamicContent(){return this.tetaHint}constructor(_document,_elementRef,_service,_injector,_zone,_cdr){super(_document,_elementRef,_service,_injector,_zone,_cdr),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_service",void 0),defineProperty_defineProperty(this,"_injector",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"tetaHint",void 0),defineProperty_defineProperty(this,"align",Align.center),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.top),defineProperty_defineProperty(this,"delay",300),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"overflownOnly",!1),defineProperty_defineProperty(this,"_timeout",void 0),defineProperty_defineProperty(this,"_componentRect",void 0),this._document=_document,this._elementRef=_elementRef,this._service=_service,this._injector=_injector,this._zone=_zone,this._cdr=_cdr}mouseenter(){clearTimeout(this._timeout),this._timeout=setTimeout((()=>{this.createHint()}),this.delay)}mouseleave(){clearTimeout(this._timeout),this._open&&this._componentRef&&(this._timeout=setTimeout((()=>{this.destroyContentRef()}),this.delay))}click(event){this._open&&this._componentRef&&DomUtil.clickedInside(this._componentRef.location.nativeElement,event)&&event.stopPropagation()}setPosition(){if(this._componentRef&&this._open){this._componentRect||(this._componentRect=this._componentRef.location.nativeElement.getBoundingClientRect());const position=PositionUtil.getPosition(this._elementRef.nativeElement.getBoundingClientRect(),this._componentRect,this.align,this.verticalAlign,0,4);PositionUtil.setElementPosition(this._componentRef.location.nativeElement,position)}}createHint(){!this._dynamicContent||this.overflownOnly&&!DomUtil.isOverflown(this._elementRef.nativeElement)||(this._componentRef=this.createContentRef(),this._componentRef.instance.className=[...ArrayUtil.asArray(this.className),"hint ","hint_"+this.viewType])}ngOnDestroy(){super.ngOnDestroy()}}_class32=HintDirective,defineProperty_defineProperty(HintDirective,"fac",(function _class32_Factory(t){return new(t||_class32)(core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.ElementRef),core["directiveInject"](DynamicComponentService),core["directiveInject"](core.Injector),core["directiveInject"](core.NgZone),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(HintDirective,"dir",core["defineDirective"]({type:_class32,selectors:[["","tetaHint",""]],hostBindings:function _class32_HostBindings(rf,ctx){1&rf&&core["listener"]("mouseenter",(function _class32_mouseenter_HostBindingHandler($event){return ctx.mouseenter($event)}))("mouseleave",(function _class32_mouseleave_HostBindingHandler($event){return ctx.mouseleave($event)}))("click",(function _class32_click_HostBindingHandler($event){return ctx.click($event)}))},inputs:{tetaHint:"tetaHint",align:"align",verticalAlign:"verticalAlign",delay:"delay",viewType:"viewType",overflownOnly:"overflownOnly"},features:[core["InheritDefinitionFeature"]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HintDirective,[{type:core.Directive,args:[{selector:"[tetaHint]"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.ElementRef},{type:DynamicComponentService},{type:core.Injector},{type:core.NgZone},{type:core.ChangeDetectorRef}]}),{tetaHint:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],delay:[{type:core.Input}],viewType:[{type:core.Input}],overflownOnly:[{type:core.Input}],mouseenter:[{type:core.HostListener,args:["mouseenter",["$event"]]}],mouseleave:[{type:core.HostListener,args:["mouseleave",["$event"]]}],click:[{type:core.HostListener,args:["click",["$event"]]}]});class InputComponent{constructor(){defineProperty_defineProperty(this,"label",void 0),defineProperty_defineProperty(this,"hint",void 0),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"horizontal",!1),defineProperty_defineProperty(this,"required",!1),defineProperty_defineProperty(this,"align",Align)}get column(){return!this.horizontal}}_class33=InputComponent,defineProperty_defineProperty(InputComponent,"fac",(function _class33_Factory(t){return new(t||_class33)})),defineProperty_defineProperty(InputComponent,"cmp",core["defineComponent"]({type:_class33,selectors:[["teta-input"]],hostVars:4,hostBindings:function _class33_HostBindings(rf,ctx){2&rf&&core["classProp"]("row",ctx.horizontal)("column",ctx.column)},inputs:{label:"label",hint:"hint",viewType:"viewType",horizontal:"horizontal",required:"required"},ngContentSelectors:["*","message"],decls:5,vars:5,consts:[["class","font-caption color-text-70 align-center row nowrap overflow-hidden text-overflow-ellipsis",3,"row_6","text-field_required",4,"ngIf"],[1,"input-message","font-error-message","font-caption"],[1,"font-caption","color-text-70","align-center","row","nowrap","overflow-hidden","text-overflow-ellipsis"],[1,"overflow-hidden","text-overflow-ellipsis",3,"tetaHint","align","overflownOnly"]],template:function _class33_Template(rf,ctx){1&rf&&(core["projectionDef"](_c6),core["template"](0,_class33_div_0_Template,3,8,"div",0),core["elementStart"](1,"div"),core["projection"](2),core["elementStart"](3,"div",1),core["projection"](4,1),core["elementEnd"]()()),2&rf&&(core["property"]("ngIf",(null==ctx.label?null:ctx.label.length)>0),core["advance"](1),core["classMap"]("input-container input_"+ctx.viewType),core["classProp"]("row_6",ctx.horizontal))},dependencies:[common.NgIf,HintDirective],styles:["[_nghost-%COMP%]{display:flex;grid-gap:4px;flex-grow:1;flex-basis:10px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](InputComponent,[{type:core.Component,args:[{selector:"teta-input",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="font-caption color-text-70 align-center row nowrap overflow-hidden text-overflow-ellipsis"\n     [class.row_6]="horizontal"\n     [class.text-field_required]="required"\n     *ngIf="label?.length > 0">\n  <span class="overflow-hidden text-overflow-ellipsis"\n        [tetaHint]="hint ?? label"\n        [align]="align.left"\n        [overflownOnly]="!hint || hint === label">\n    {{label}}\n  </span>\n</div>\n<div [class]="\'input-container input_\'+viewType" [class.row_6]="horizontal">\n    <ng-content></ng-content>\n  <div class="input-message font-error-message font-caption">\n    <ng-content select="message"></ng-content>\n  </div>\n</div>\n',styles:[":host{display:flex;grid-gap:4px;flex-grow:1;flex-basis:10px}\n"]}]}],null,{label:[{type:core.Input}],hint:[{type:core.Input}],viewType:[{type:core.Input}],horizontal:[{type:core.Input},{type:core.HostBinding,args:["class.row"]}],required:[{type:core.Input}],column:[{type:core.HostBinding,args:["class.column"]}]});class OnlyNumberDirective{constructor(_elementRef,_control){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_control",void 0),defineProperty_defineProperty(this,"tetaOnlyNumber",!0),defineProperty_defineProperty(this,"allowDecimals",!0),defineProperty_defineProperty(this,"allowSign",!0),defineProperty_defineProperty(this,"decimalSeparator","."),defineProperty_defineProperty(this,"commaSeparator",","),defineProperty_defineProperty(this,"_previousValue",""),defineProperty_defineProperty(this,"_integerUnsigned","^[0-9]*$"),defineProperty_defineProperty(this,"_integerSigned","^-?[0-9]+$"),defineProperty_defineProperty(this,"_decimalUnsigned","^[0-9]+(.[0-9]+)?$"),defineProperty_defineProperty(this,"_decimalSigned","^-?[0-9]+(.[0-9]+)?$"),defineProperty_defineProperty(this,"_minusSign","-"),this._elementRef=_elementRef,this._control=_control}onChange(e){!1!==this.tetaOnlyNumber&&this.validateValue(this._elementRef.nativeElement.value)}dblclick(e){!1!==this.tetaOnlyNumber&&this._elementRef.nativeElement.select()}onPaste(e){!1!==this.tetaOnlyNumber&&(this.validateValue(e.clipboardData.getData("text/plain")),e.preventDefault())}onKeyDown(e){if(!1===this.tetaOnlyNumber)return;const cursorPosition=e.target.selectionStart??0,originalValue=e.target.value,controlOrCommand=!0===e.ctrlKey||!0===e.metaKey,signExists=originalValue.includes("-"),separatorExists=originalValue.includes(this.decimalSeparator)||originalValue.includes(this.commaSeparator),allowedKeys=["Backspace","ArrowLeft","ArrowRight","Delete","Escape","Tab","Home","End"],separatorIsCloseToSign=signExists&&cursorPosition<=1;!this.allowDecimals||separatorIsCloseToSign||separatorExists||allowedKeys.push(".");const firstCharacterIsSeparator=originalValue.charAt(0)!==this.decimalSeparator;if(this.allowSign&&!signExists&&firstCharacterIsSeparator&&0===cursorPosition&&allowedKeys.push("-"),-1!==allowedKeys.indexOf(e.key)||"KeyA"===e.code&&controlOrCommand||"KeyC"===e.code&&controlOrCommand||"KeyV"===e.code&&controlOrCommand||"KeyZ"===e.code&&controlOrCommand||"KeyX"===e.code&&controlOrCommand)return;this._previousValue=originalValue;new RegExp(this._integerUnsigned).test(e.key)||(","===e.key&&originalValue.indexOf(".")<0&&(this._control.control.patchValue(`${originalValue.slice(0,cursorPosition)}.${originalValue.slice(cursorPosition)}`),this._elementRef.nativeElement.setSelectionRange&&this._elementRef.nativeElement.setSelectionRange(cursorPosition+1,cursorPosition+1)),e.preventDefault())}validateValue(value){if(!1===this.tetaOnlyNumber)return;value=value.replace(",",".").trim();let regex=this._integerUnsigned;this.allowDecimals||this.allowSign||(regex=this._integerUnsigned),!this.allowDecimals&&this.allowSign&&(regex=this._integerSigned),this.allowDecimals&&!this.allowSign&&(regex=this._decimalUnsigned),this.allowDecimals&&this.allowSign&&(regex=this._decimalSigned);let firstCharacter=value.charAt(0);firstCharacter===this.decimalSeparator&&(value=0+value);value.charAt(value.length-1)===this.decimalSeparator&&(value+=0);let signedValue=!1;firstCharacter===this._minusSign&&(signedValue=!0,firstCharacter=(value=value.substring(1)).charAt(0));let secondChar=value.charAt(1);for(;"0"===firstCharacter&&""!==secondChar&&secondChar!==this.decimalSeparator;)firstCharacter=(value=value.substring(1)).charAt(0),secondChar=value.charAt(1);!0===signedValue&&(value=this._minusSign+value);const valueParts=value.split(this.decimalSeparator),naturalPart=valueParts?.[0];let decimalPart=valueParts?.[1];if(null!=decimalPart&&/^0+$/.test(decimalPart)&&(decimalPart="0",value=naturalPart+"."+decimalPart),"-0"===value&&(value="0"),"-0.0"===value&&(value="0.0"),null==value||""===value)return;new RegExp(regex).test(value.toString())&&this._control.control.patchValue(parseFloat(value))}}_class34=OnlyNumberDirective,defineProperty_defineProperty(OnlyNumberDirective,"fac",(function _class34_Factory(t){return new(t||_class34)(core["directiveInject"](core.ElementRef),core["directiveInject"](fesm2022_forms.a5))})),defineProperty_defineProperty(OnlyNumberDirective,"dir",core["defineDirective"]({type:_class34,selectors:[["","tetaOnlyNumber",""]],hostBindings:function _class34_HostBindings(rf,ctx){1&rf&&core["listener"]("change",(function _class34_change_HostBindingHandler($event){return ctx.onChange($event)}))("dblclick",(function _class34_dblclick_HostBindingHandler($event){return ctx.dblclick($event)}))("paste",(function _class34_paste_HostBindingHandler($event){return ctx.onPaste($event)}))("keydown",(function _class34_keydown_HostBindingHandler($event){return ctx.onKeyDown($event)}))},inputs:{tetaOnlyNumber:"tetaOnlyNumber",allowDecimals:"allowDecimals",allowSign:"allowSign",decimalSeparator:"decimalSeparator",commaSeparator:"commaSeparator"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](OnlyNumberDirective,[{type:core.Directive,args:[{selector:"[tetaOnlyNumber]"}]}],(function(){return[{type:core.ElementRef},{type:fesm2022_forms.a5}]}),{tetaOnlyNumber:[{type:core.Input}],allowDecimals:[{type:core.Input}],allowSign:[{type:core.Input}],decimalSeparator:[{type:core.Input}],commaSeparator:[{type:core.Input}],onChange:[{type:core.HostListener,args:["change",["$event"]]}],dblclick:[{type:core.HostListener,args:["dblclick",["$event"]]}],onPaste:[{type:core.HostListener,args:["paste",["$event"]]}],onKeyDown:[{type:core.HostListener,args:["keydown",["$event"]]}]});const formatNumber=(value,decimalLength,chunkDelimiter,decimalDelimiter,chunkLength)=>{const abs=Math.abs(value);if(0<abs&&1>abs){decimalLength+=Math.floor(Math.abs(Math.log10(abs)))}const precision=Math.min((a=>{if(!isFinite(a))return 0;let e=1,p=0;for(;Math.round(a*e)/e!==a;)e*=10,p++;return p})(value),Math.floor(decimalLength)),result="\\d(?=(\\d{"+chunkLength+"})+"+(precision>0?"\\D":"$")+")",num=value.toFixed(precision);return(decimalDelimiter?num.replace(".",decimalDelimiter):num).replace(new RegExp(result,"g"),"$&"+chunkDelimiter)},prependZero=(input,length)=>("0".repeat(length)+input).slice(-length);class NumberPipe{transform(value,decimalLength=2,chunkDelimiter="",decimalDelimiter=".",chunkLength=3){return null==value||""===value?"":"string"==typeof value&&isNaN(parseFloat(value))||null===decimalLength?value.toString():(value=Number(value),formatNumber(value,decimalLength,chunkDelimiter,decimalDelimiter,chunkLength))}}_class35=NumberPipe,defineProperty_defineProperty(NumberPipe,"fac",(function _class35_Factory(t){return new(t||_class35)})),defineProperty_defineProperty(NumberPipe,"pipe",core["definePipe"]({name:"tetaNumber",type:_class35,pure:!0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NumberPipe,[{type:core.Pipe,args:[{name:"tetaNumber"}]}],null,null);class TextFieldComponent{constructor(_cdr){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"placeholder",""),defineProperty_defineProperty(this,"leftIconName",void 0),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"onlyNumber",!1),defineProperty_defineProperty(this,"decimalPart",void 0),defineProperty_defineProperty(this,"invalid",void 0),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"inputFocused",void 0),defineProperty_defineProperty(this,"textField",!0),defineProperty_defineProperty(this,"value",""),this._cdr=_cdr}onFocus(){this.disabled||this.input.nativeElement.focus()}keyPress(event){"Enter"!==event.key&&13!==event.keyCode||this.emitBlur()}emitBlur(){this.onTouched()}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this._cdr.markForCheck()}writeValue(input){this.value=input,this._cdr.detectChanges()}onChange(input){}onTouched(){}}_class36=TextFieldComponent,defineProperty_defineProperty(TextFieldComponent,"fac",(function _class36_Factory(t){return new(t||_class36)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TextFieldComponent,"cmp",core["defineComponent"]({type:_class36,selectors:[["teta-text-field"]],viewQuery:function _class36_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},hostVars:6,hostBindings:function _class36_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class36_click_HostBindingHandler(){return ctx.onFocus()})),2&rf&&core["classProp"]("text-field_disabled",ctx.disabled)("text-field_invalid",ctx.invalid)("text-field",ctx.textField)},inputs:{placeholder:"placeholder",leftIconName:"leftIconName",disabled:"disabled",onlyNumber:"onlyNumber",decimalPart:"decimalPart",invalid:"invalid"},features:[core["ProvidersFeature"]([{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>_class36)),multi:!0}])],decls:5,vars:12,consts:[[3,"name","palette",4,"ngIf"],["type","text",3,"ngModel","tetaOnlyNumber","placeholder","disabled","ngClass","ngModelChange","focus","blur","keydown"],["input",""],["class","close-icon",3,"name","palette","click",4,"ngIf"],[3,"name","palette"],[1,"close-icon",3,"name","palette","click"]],template:function _class36_Template(rf,ctx){1&rf&&(core["template"](0,_class36_teta_icon_0_Template,1,2,"teta-icon",0),core["elementStart"](1,"input",1,2),core["listener"]("ngModelChange",(function _class36_Template_input_ngModelChange_1_listener($event){return ctx.value=$event,ctx.onChange($event)}))("focus",(function _class36_Template_input_focus_1_listener(){return ctx.inputFocused=!0}))("blur",(function _class36_Template_input_blur_1_listener(){return ctx.inputFocused=!1,ctx.emitBlur()}))("keydown",(function _class36_Template_input_keydown_1_listener($event){return ctx.keyPress($event)})),core["pipe"](3,"tetaNumber"),core["elementEnd"](),core["template"](4,_class36_teta_icon_4_Template,1,2,"teta-icon",3)),2&rf&&(core["property"]("ngIf",ctx.leftIconName),core["advance"](1),core["property"]("ngModel",core["pipeBind2"](3,7,ctx.value,ctx.onlyNumber?ctx.inputFocused?1e3:ctx.decimalPart:null))("tetaOnlyNumber",ctx.onlyNumber)("placeholder",ctx.placeholder)("disabled",ctx.disabled)("ngClass",core["pureFunction1"](10,_c9,ctx.disabled)),core["advance"](3),core["property"]("ngIf",ctx.value&&!ctx.disabled))},dependencies:[common.NgClass,common.NgIf,IconComponent,fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On,OnlyNumberDirective,NumberPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TextFieldComponent,[{type:core.Component,args:[{selector:"teta-text-field",providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>TextFieldComponent)),multi:!0}],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<teta-icon *ngIf='leftIconName' [name]='leftIconName' [palette]=\"'text'\"></teta-icon>\n<input\n  #input\n  [ngModel]='value | tetaNumber : !onlyNumber ? null : inputFocused ? 1000 : decimalPart'\n  [tetaOnlyNumber]='onlyNumber'\n  (ngModelChange)='value = $event; onChange($event);'\n  [placeholder]='placeholder'\n  [disabled]='disabled'\n  [ngClass]=\"{'color-text-40':disabled}\"\n  (focus)='inputFocused = true'\n  (blur)='inputFocused = false;emitBlur()'\n  (keydown)='keyPress($event)'\n  type='text'\n/>\n<teta-icon\n  *ngIf='value && !disabled'\n  class='close-icon'\n  [name]=\"'closeCircle'\"\n  [palette]=\"'text'\"\n  (click)=\"value = ''; onChange('');\"\n></teta-icon>\n"}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{placeholder:[{type:core.Input}],leftIconName:[{type:core.Input}],disabled:[{type:core.HostBinding,args:["class.text-field_disabled"]},{type:core.Input}],onlyNumber:[{type:core.Input}],decimalPart:[{type:core.Input}],invalid:[{type:core.HostBinding,args:["class.text-field_invalid"]},{type:core.Input}],input:[{type:core.ViewChild,args:["input",{static:!1}]}],textField:[{type:core.HostBinding,args:["class.text-field"]}],onFocus:[{type:core.HostListener,args:["click"]}]});class OnlyNumberModule{}_class37=OnlyNumberModule,defineProperty_defineProperty(OnlyNumberModule,"fac",(function _class37_Factory(t){return new(t||_class37)})),defineProperty_defineProperty(OnlyNumberModule,"mod",core["defineNgModule"]({type:_class37,declarations:[OnlyNumberDirective],imports:[common.CommonModule],exports:[OnlyNumberDirective]})),defineProperty_defineProperty(OnlyNumberModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](OnlyNumberModule,[{type:core.NgModule,args:[{declarations:[OnlyNumberDirective],exports:[OnlyNumberDirective],imports:[common.CommonModule]}]}],null,null);class FormGroupTitleComponent{constructor(){defineProperty_defineProperty(this,"className",!0)}ngOnInit(){}}_class38=FormGroupTitleComponent,defineProperty_defineProperty(FormGroupTitleComponent,"fac",(function _class38_Factory(t){return new(t||_class38)})),defineProperty_defineProperty(FormGroupTitleComponent,"cmp",core["defineComponent"]({type:_class38,selectors:[["teta-form-group-title"]],hostVars:2,hostBindings:function _class38_HostBindings(rf,ctx){2&rf&&core["classProp"]("form-group-title",ctx.className)},ngContentSelectors:_c0,decls:3,vars:0,consts:[[1,"font-overline","form-group-title-text"],[1,"form-group-title-line"]],template:function _class38_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0),core["projection"](1),core["elementEnd"](),core["element"](2,"div",1))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FormGroupTitleComponent,[{type:core.Component,args:[{selector:"teta-form-group-title",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="font-overline form-group-title-text">\n  <ng-content></ng-content>\n</div>\n<div class="form-group-title-line"></div>\n'}]}],(function(){return[]}),{className:[{type:core.HostBinding,args:["class.form-group-title"]}]});class DynamicComponentModule{}_class39=DynamicComponentModule,defineProperty_defineProperty(DynamicComponentModule,"fac",(function _class39_Factory(t){return new(t||_class39)})),defineProperty_defineProperty(DynamicComponentModule,"mod",core["defineNgModule"]({type:_class39,declarations:[PopupContentComponent],imports:[common.CommonModule],exports:[PopupContentComponent]})),defineProperty_defineProperty(DynamicComponentModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DynamicComponentModule,[{type:core.NgModule,args:[{declarations:[PopupContentComponent],exports:[PopupContentComponent],imports:[common.CommonModule]}]}],null,null);class HintModule{}_class40=HintModule,defineProperty_defineProperty(HintModule,"fac",(function _class40_Factory(t){return new(t||_class40)})),defineProperty_defineProperty(HintModule,"mod",core["defineNgModule"]({type:_class40,declarations:[HintDirective],imports:[common.CommonModule,DynamicComponentModule],exports:[HintDirective]})),defineProperty_defineProperty(HintModule,"inj",core["defineInjector"]({imports:[common.CommonModule,DynamicComponentModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HintModule,[{type:core.NgModule,args:[{declarations:[HintDirective],exports:[HintDirective],imports:[common.CommonModule,DynamicComponentModule]}]}],null,null);class ColorInputComponent{constructor(_cdr){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"value",""),this._cdr=_cdr}onFocus(){this.disabled||this.input.nativeElement.focus()}emitBlur(){this.onTouched()}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this._cdr.markForCheck()}writeValue(input){this.value=input,this._cdr.detectChanges()}onChange(input){}onTouched(){}getHexColor(color){if(color&&color.startsWith("rgb")){const colorArray=color.substring(color.indexOf("(")+1,color.lastIndexOf(")")).split(",");color=`#${("00"+parseInt(colorArray[0],10).toString(16)).slice(-2)}${("00"+parseInt(colorArray[1],10).toString(16)).slice(-2)}${("00"+parseInt(colorArray[2],10).toString(16)).slice(-2)}`}return color}}_class41=ColorInputComponent,defineProperty_defineProperty(ColorInputComponent,"fac",(function _class41_Factory(t){return new(t||_class41)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(ColorInputComponent,"cmp",core["defineComponent"]({type:_class41,selectors:[["teta-color-input"]],viewQuery:function _class41_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},hostBindings:function _class41_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class41_click_HostBindingHandler(){return ctx.onFocus()}))},inputs:{disabled:"disabled"},features:[core["ProvidersFeature"]([{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>_class41)),multi:!0}])],decls:2,vars:4,consts:[["type","color",3,"disabled","ngModel","ngModelOptions","blur","ngModelChange"],["input",""]],template:function _class41_Template(rf,ctx){1&rf&&(core["elementStart"](0,"input",0,1),core["listener"]("blur",(function _class41_Template_input_blur_0_listener(){return ctx.emitBlur()}))("ngModelChange",(function _class41_Template_input_ngModelChange_0_listener($event){return ctx.value=$event,ctx.onChange($event)})),core["elementEnd"]()),2&rf&&core["property"]("disabled",ctx.disabled)("ngModel",ctx.getHexColor(ctx.value))("ngModelOptions",core["pureFunction0"](3,_c10))},dependencies:[fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}input[type=color][_ngcontent-%COMP%]{height:12px;width:12px;padding:0;border:0}input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch, input[type=color][_ngcontent-%COMP%]::-webkit-color-swatch-wrapper{border:0;padding:0}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ColorInputComponent,[{type:core.Component,args:[{selector:"teta-color-input",providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>ColorInputComponent)),multi:!0}],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<input type='color'\n       #input\n       [disabled]='disabled'\n       (blur)='emitBlur();'\n       [ngModel]=\"getHexColor(value)\"\n       (ngModelChange)=\"value = $event;onChange($event)\"\n       [ngModelOptions]='{updateOn: \"blur\"}'/>\n",styles:[":host{display:inline-flex;align-items:center}input[type=color]{height:12px;width:12px;padding:0;border:0}input[type=color]::-webkit-color-swatch,input[type=color]::-webkit-color-swatch-wrapper{border:0;padding:0}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{disabled:[{type:core.Input}],input:[{type:core.ViewChild,args:["input",{static:!1}]}],onFocus:[{type:core.HostListener,args:["click"]}]});class NumberPipeModule{}_class42=NumberPipeModule,defineProperty_defineProperty(NumberPipeModule,"fac",(function _class42_Factory(t){return new(t||_class42)})),defineProperty_defineProperty(NumberPipeModule,"mod",core["defineNgModule"]({type:_class42,declarations:[NumberPipe],imports:[common.CommonModule],exports:[NumberPipe]})),defineProperty_defineProperty(NumberPipeModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NumberPipeModule,[{type:core.NgModule,args:[{declarations:[NumberPipe],exports:[NumberPipe],imports:[common.CommonModule]}]}],null,null);class InputModule{}_class43=InputModule,defineProperty_defineProperty(InputModule,"fac",(function _class43_Factory(t){return new(t||_class43)})),defineProperty_defineProperty(InputModule,"mod",core["defineNgModule"]({type:_class43,declarations:[InputComponent,TextFieldComponent,FormGroupTitleComponent,ColorInputComponent],imports:[common.CommonModule,IconModule,fesm2022_forms.u5,OnlyNumberModule,HintModule,NumberPipeModule],exports:[InputComponent,TextFieldComponent,FormGroupTitleComponent,ColorInputComponent]})),defineProperty_defineProperty(InputModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule,fesm2022_forms.u5,OnlyNumberModule,HintModule,NumberPipeModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](InputModule,[{type:core.NgModule,args:[{declarations:[InputComponent,TextFieldComponent,FormGroupTitleComponent,ColorInputComponent],exports:[InputComponent,TextFieldComponent,FormGroupTitleComponent,ColorInputComponent],imports:[common.CommonModule,IconModule,fesm2022_forms.u5,OnlyNumberModule,HintModule,NumberPipeModule]}]}],null,null);class DayModel{constructor(options){defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"isCurrentMonth",void 0),defineProperty_defineProperty(this,"today",void 0),defineProperty_defineProperty(this,"selected",void 0),defineProperty_defineProperty(this,"date",void 0),defineProperty_defineProperty(this,"weekend",void 0),options&&(this.disabled=options.disabled,this.isCurrentMonth=options.isCurrentMonth,this.today=options.today,this.selected=options.selected,this.date=options.date,this.weekend=options.weekend)}}class BaseCalendar{constructor(_cdr){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"currentMonth",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"minMax",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"currentYear",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"selectedPicker",new BehaviorSubject.X("day")),defineProperty_defineProperty(this,"localeMonths",(new Map).set("ru",["","","","","","","","","","","",""]).set("en",["January","February","March","April","May","June","July","August","September","October","November","December"])),defineProperty_defineProperty(this,"alive",!0),defineProperty_defineProperty(this,"scrollMonth",((e,month,year)=>{const delta=e?.deltaY??e;e instanceof WheelEvent&&e.preventDefault(),delta>0?this.changeMonth(month-1,year):this.changeMonth(month+1,year)})),this._cdr=_cdr}generateCalendar(selectedDate,year,month,minMax){const calendarStartDay=selectedDate.set("year",year).set("month",month).set("date",1).startOf("week");return new Array(42).fill(1).map(((v,i)=>calendarStartDay.add(i,"day"))).map((d=>new DayModel({date:new Date(d.toDate()),isCurrentMonth:month===d.month(),disabled:!this.isSuitableMinDate(d.toDate(),minMax.min)||!this.isSuitableMaxDate(d.toDate(),minMax.max),selected:this.isSelected(d.toDate(),selectedDate.toDate())})))}isSuitableMinDate(d,minDate){return dayjs_min_default()(new Date(minDate)).startOf("date").toDate()<=new Date(d)||null===minDate}isSuitableMaxDate(d,maxDate){return new Date(d)<dayjs_min_default()(new Date(maxDate)).endOf("date").toDate()||null===maxDate}isSelected(date,selectedDate){const isSelectedDate=date.getDate()===selectedDate?.getDate(),isSelectedYear=date.getFullYear()===selectedDate?.getFullYear(),isSelectedMonth=date.getMonth()===selectedDate?.getMonth();return isSelectedDate&&isSelectedMonth&&isSelectedYear&&!this.isDateNull}ngOnDestroy(){this.alive=!1}selectPicker(entity){this.selectedPicker.next(entity)}selectMonth(month){this.currentMonth.next(month),this.selectPicker("day")}selectYear(year){this.setYear(year),this.selectPicker("day")}ngOnChanges(changes){this.changeCalendarData(this.selectedDate)}changeCalendarData(selectedDate){const date=new Date(selectedDate||new Date);this.currentMonth.next(new Date(date).getMonth()),this.currentYear.next(new Date(date).getFullYear()),this.minMax.next({min:this.min,max:this.max})}setYear(year){this.currentYear.next(year)}changeMonth(month,year){const{availableYear,availableMonth}=this.getAvailableMonthYear(month,year);this.currentMonth.next(availableMonth),this.currentYear.next(availableYear)}getAvailableMonthYear(month,year){return month>11?{availableMonth:month-12,availableYear:year+1}:month<0?{availableMonth:12+month,availableYear:year-1}:{availableMonth:month,availableYear:year}}getMothName(month){return this.localeMonths.get(this.locale)[month]}selectDate(date){this.setDate.emit(date)}}_class45=BaseCalendar,defineProperty_defineProperty(BaseCalendar,"fac",(function _class45_Factory(t){return new(t||_class45)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(BaseCalendar,"cmp",core["defineComponent"]({type:_class45,selectors:[["ng-component"]],features:[core["NgOnChangesFeature"]],decls:0,vars:0,template:function _class45_Template(rf,ctx){},encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](BaseCalendar,[{type:core.Component,args:[{template:"",changeDetection:core.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:core.ChangeDetectorRef}]}),null);class DayItemComponent{constructor(){defineProperty_defineProperty(this,"day",void 0)}ngOnInit(){}}_class46=DayItemComponent,defineProperty_defineProperty(DayItemComponent,"fac",(function _class46_Factory(t){return new(t||_class46)})),defineProperty_defineProperty(DayItemComponent,"cmp",core["defineComponent"]({type:_class46,selectors:[["teta-day-item"]],inputs:{day:"day"},decls:2,vars:1,template:function _class46_Template(rf,ctx){1&rf&&(core["elementStart"](0,"p"),core["text"](1),core["elementEnd"]()),2&rf&&(core["advance"](1),core["textInterpolate"](ctx.day.date.getDate()))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DayItemComponent,[{type:core.Component,args:[{selector:"teta-day-item",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<p>{{day.date.getDate()}}</p>\n\n"}]}],null,{day:[{type:core.Input}]});class DayPickerComponent{constructor(){defineProperty_defineProperty(this,"date",new Date),defineProperty_defineProperty(this,"calendar",void 0),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"range",void 0),defineProperty_defineProperty(this,"min",void 0),defineProperty_defineProperty(this,"max",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"hoveredDate",void 0),defineProperty_defineProperty(this,"hoveredDateChange",new core.EventEmitter),defineProperty_defineProperty(this,"selectDate",new core.EventEmitter),defineProperty_defineProperty(this,"daysOfWeek",(new Map).set("ru",["","","","","","",""]).set("en",["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]))}isInRange(day,from,to){const matchesMinDate=dayjs_min_default()(new Date(from)).startOf("date").toDate()<=day.date,matchesMaxDate=day.date<dayjs_min_default()(new Date(to)).endOf("date").toDate();return matchesMinDate&&matchesMaxDate}isHoveredRange(day){return!(this.range?.to||!this.range?.from)&&(this.isInRange(day,this.range.from,this.hoveredDate)||this.isInRange(day,this.hoveredDate,this.range.from))}isActiveRange(day){return!(!this.range?.from||!this.range?.to)&&this.isInRange(day,this.range.from,this.range.to)}pickDate(day){day.disabled||this.selectDate.emit(day.date)}getRangeActiveClass(d){return this.range&&new Date(this.range?.from).getTime()!==new Date(this.range?.to).getTime()?this.range.to?this.getClassStaticItem(d):this.hoveredDate.getTime()===d.date.getTime()?this.getClassHoveredItem():this.getClassSelectedItem(d):""}hover(date){date?.getTime()!==this.hoveredDate?.getTime()&&(this.hoveredDate=date,this.hoveredDateChange.emit(date))}getClassStaticItem(d){const from=dayjs_min_default()(new Date(this.range.from)).startOf("day").toDate(),to=dayjs_min_default()(new Date(this.range.to)).startOf("day").toDate(),itemDate=dayjs_min_default()(new Date(d.date)).startOf("day").toDate();return from.getTime()===itemDate.getTime()?"datepicker-date_active-first":to.getTime()===itemDate.getTime()?"datepicker-date_active-second":""}getClassHoveredItem(){return new Date(this.range.from)>this.hoveredDate?"datepicker-date_active-first":new Date(this.range.from)<this.hoveredDate?"datepicker-date_active-second":void 0}getClassSelectedItem(d){return d.selected&&d.date<this.hoveredDate?"datepicker-date_active-first":d.selected&&d.date>this.hoveredDate?"datepicker-date_active-second":""}}_class47=DayPickerComponent,defineProperty_defineProperty(DayPickerComponent,"fac",(function _class47_Factory(t){return new(t||_class47)})),defineProperty_defineProperty(DayPickerComponent,"cmp",core["defineComponent"]({type:_class47,selectors:[["teta-day-picker"]],inputs:{date:"date",calendar:"calendar",viewType:"viewType",range:"range",min:"min",max:"max",locale:"locale",hoveredDate:"hoveredDate"},outputs:{hoveredDateChange:"hoveredDateChange",selectDate:"selectDate"},decls:4,vars:2,consts:[[1,"datepicker-week","font-caption"],["class","datepicker-day",4,"ngFor","ngForOf"],[1,"datepicker-picker","color-text-90","font-body-3"],[4,"ngFor","ngForOf"],[1,"datepicker-day"],[3,"ngClass","mouseenter","click"],[3,"day"]],template:function _class47_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0),core["template"](1,_class47_p_1_Template,2,1,"p",1),core["elementEnd"](),core["elementStart"](2,"div",2),core["template"](3,_class47_ng_container_3_Template,3,11,"ng-container",3),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("ngForOf",ctx.daysOfWeek.get(ctx.locale)),core["advance"](2),core["property"]("ngForOf",ctx.calendar))},dependencies:[common.NgClass,common.NgForOf,DayItemComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DayPickerComponent,[{type:core.Component,args:[{selector:"teta-day-picker",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="datepicker-week font-caption">\n  <p class="datepicker-day" *ngFor="let day of daysOfWeek.get(locale)">\n    {{day}}\n  </p>\n</div>\n<div class="datepicker-picker color-text-90 font-body-3">\n  <ng-container *ngFor="let day of calendar">\n    <div [class]="getRangeActiveClass(day)+\' datepicker-date font-body-3 datepicker_\'+viewType"\n         (mouseenter)="hover(day.date)"\n         (click)="pickDate(day)"\n         [ngClass]="{\'datepicker-date_active\':day.selected||(day.date===hoveredDate&&range&&!range.to),\'datepicker-date-range_hover\':range&&isHoveredRange(day),\n         \'datepicker-date_disabled\':day.disabled,\'color-text-30\':day.disabled||(!range&&!day.isCurrentMonth),\'datepicker-date-range_disabled\':!day.isCurrentMonth&&range,\'datepicker-date-range_active\':isActiveRange(day)}">\n      <teta-day-item [day]="day"></teta-day-item>\n    </div>\n  </ng-container>\n</div>\n\n'}]}],(function(){return[]}),{date:[{type:core.Input}],calendar:[{type:core.Input}],viewType:[{type:core.Input}],range:[{type:core.Input}],min:[{type:core.Input}],max:[{type:core.Input}],locale:[{type:core.Input}],hoveredDate:[{type:core.Input}],hoveredDateChange:[{type:core.Output}],selectDate:[{type:core.Output}]});class MonthPickerComponent{constructor(){defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"selectedMonth",1),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"currentYear",void 0),defineProperty_defineProperty(this,"localeMoths",void 0),defineProperty_defineProperty(this,"selectMonth",new core.EventEmitter),defineProperty_defineProperty(this,"changeYear",new core.EventEmitter),defineProperty_defineProperty(this,"months",[])}pickMonth(monthId){this.selectMonth.emit(monthId)}pickYear(year){this.changeYear.emit(year)}ngOnInit(){this.months=this.localeMoths.get(this.locale).map(((m,i)=>({id:i,name:m,isSelected:this.selectedMonth===i})))}}_class48=MonthPickerComponent,defineProperty_defineProperty(MonthPickerComponent,"fac",(function _class48_Factory(t){return new(t||_class48)})),defineProperty_defineProperty(MonthPickerComponent,"cmp",core["defineComponent"]({type:_class48,selectors:[["teta-month-picker"]],inputs:{locale:"locale",selectedMonth:"selectedMonth",viewType:"viewType",currentYear:"currentYear",localeMoths:"localeMoths"},outputs:{selectMonth:"selectMonth",changeYear:"changeYear"},decls:10,vars:10,consts:[[1,"padding-h-3","padding-v-2","gap-8","column","datepicker-month-wrapper"],[1,"row","align-center","justify-content-between","font-button-2"],["palette","text","view","ghost",3,"square","click"],["name","arrowLeftKey",3,"palette"],["name","arrowRightKey",3,"palette"],[1,"datepicker-month","font-body-3","color-text-90",2,"width","100%"],[3,"click",4,"ngFor","ngForOf"],[3,"click"],[3,"ngClass"]],template:function _class48_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0)(1,"div",1)(2,"teta-button",2),core["listener"]("click",(function _class48_Template_teta_button_click_2_listener(){return ctx.pickYear(ctx.currentYear-1)})),core["element"](3,"teta-icon",3),core["elementEnd"](),core["elementStart"](4,"p"),core["text"](5),core["elementEnd"](),core["elementStart"](6,"teta-button",2),core["listener"]("click",(function _class48_Template_teta_button_click_6_listener(){return ctx.pickYear(ctx.currentYear+1)})),core["element"](7,"teta-icon",4),core["elementEnd"]()(),core["elementStart"](8,"div",5),core["template"](9,_class48_div_9_Template,4,6,"div",6),core["elementEnd"]()()),2&rf&&(core["advance"](2),core["classMap"]("change-month-button datepicker_"+ctx.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["textInterpolate"](ctx.currentYear),core["advance"](1),core["classMap"]("change-month-button datepicker_"+ctx.viewType),core["property"]("square",!0),core["advance"](1),core["property"]("palette","text"),core["advance"](2),core["property"]("ngForOf",ctx.months))},dependencies:[common.NgClass,common.NgForOf,ButtonComponent,IconComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MonthPickerComponent,[{type:core.Component,args:[{selector:"teta-month-picker",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="padding-h-3 padding-v-2 gap-8 column datepicker-month-wrapper">\n  <div class="row align-center justify-content-between font-button-2">\n    <teta-button [class]="\'change-month-button datepicker_\'+viewType" [square]="true"\n                 (click)="pickYear(currentYear-1)"\n                 palette="text"\n                 view="ghost">\n      <teta-icon name="arrowLeftKey" [palette]="\'text\'"></teta-icon>\n    </teta-button>\n    <p>{{currentYear}}</p>\n    <teta-button [square]="true" [class]="\'change-month-button datepicker_\'+viewType"\n                 (click)="pickYear(currentYear+1)"\n                 palette="text"\n                 view="ghost">\n      <teta-icon name="arrowRightKey" [palette]="\'text\'"></teta-icon>\n    </teta-button>\n  </div>\n  <div class="datepicker-month font-body-3 color-text-90"\n       style="width: 100%">\n    <div *ngFor="let month of months" (click)="pickMonth(month.id)">\n      <div [ngClass]="{\'datepicker-month_item_active\':month.isSelected}"\n           [class]="\'datepicker-month_item column align-center justify-content-center datepicker_\'+viewType">\n         <p>\n            {{month.name}}\n          </p>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n'}]}],(function(){return[]}),{locale:[{type:core.Input}],selectedMonth:[{type:core.Input}],viewType:[{type:core.Input}],currentYear:[{type:core.Input}],localeMoths:[{type:core.Input}],selectMonth:[{type:core.Output}],changeYear:[{type:core.Output}]});class ScrollToSelectedYearDirective{constructor(el){defineProperty_defineProperty(this,"el",void 0),defineProperty_defineProperty(this,"alive",!0),this.el=el}ngOnDestroy(){this.alive=!1}ngAfterViewInit(){this.el.nativeElement.scrollIntoView({inline:"center",block:"center"})}}_class49=ScrollToSelectedYearDirective,defineProperty_defineProperty(ScrollToSelectedYearDirective,"fac",(function _class49_Factory(t){return new(t||_class49)(core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(ScrollToSelectedYearDirective,"dir",core["defineDirective"]({type:_class49,selectors:[["","tetaScrollToSelectedYear",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollToSelectedYearDirective,[{type:core.Directive,args:[{selector:"[tetaScrollToSelectedYear]"}]}],(function(){return[{type:core.ElementRef,decorators:[{type:core.Inject,args:[core.ElementRef]}]}]}),null);class YearPickerComponent{constructor(){defineProperty_defineProperty(this,"selectedYear",void 0),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"minMax",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"selectYear",new core.EventEmitter),defineProperty_defineProperty(this,"yearPickerDictionary",(new Map).set("ru"," ").set("en","Select year")),defineProperty_defineProperty(this,"alive",!0),defineProperty_defineProperty(this,"years",void 0)}pickYear(year,disabled){disabled||this.selectYear.emit(year)}ngOnInit(){this.years=new Array(100).fill(1).map(((v,i)=>{const year=(new Date).getFullYear()+(i-50);return{id:year,isSelected:year===this.selectedYear,disabled:this.isDisabled(year)}}))}isDisabled(year){if(this.minMax){const isSuitableMax=dayjs_min_default()((new Date).setFullYear(year)).startOf("year").isAfter(new Date(this.minMax.max))&&null!==this.minMax.max,isSuitableMin=dayjs_min_default()((new Date).setFullYear(year)).endOf("year").isBefore(new Date(this.minMax.min))&&null!==this.minMax.min;return isSuitableMax||isSuitableMin}return!1}}_class50=YearPickerComponent,defineProperty_defineProperty(YearPickerComponent,"fac",(function _class50_Factory(t){return new(t||_class50)})),defineProperty_defineProperty(YearPickerComponent,"cmp",core["defineComponent"]({type:_class50,selectors:[["teta-year-picker"]],inputs:{selectedYear:"selectedYear",viewType:"viewType",minMax:"minMax",locale:"locale"},outputs:{selectYear:"selectYear"},decls:6,vars:2,consts:[[1,"column"],[1,"font-title-3","padding-v-4","padding-h-3"],[1,"datepicker-year","overflow-y-auto"],["class","font-button-2",3,"click",4,"ngFor","ngForOf"],[1,"font-button-2",3,"click"],[3,"ngClass"],["tetaScrollToSelectedYear","",4,"ngIf"],[4,"ngIf"],["tetaScrollToSelectedYear",""]],template:function _class50_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0)(1,"div",1)(2,"p"),core["text"](3),core["elementEnd"]()(),core["elementStart"](4,"div",2),core["template"](5,_class50_div_5_Template,4,8,"div",3),core["elementEnd"]()()),2&rf&&(core["advance"](3),core["textInterpolate"](ctx.yearPickerDictionary.get(ctx.locale)),core["advance"](2),core["property"]("ngForOf",ctx.years))},dependencies:[common.NgClass,common.NgForOf,common.NgIf,ScrollToSelectedYearDirective],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](YearPickerComponent,[{type:core.Component,args:[{selector:"teta-year-picker",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="column">\n  <div class="font-title-3 padding-v-4 padding-h-3">\n    <p>{{yearPickerDictionary.get(locale)}}</p>\n  </div>\n  <div class="datepicker-year overflow-y-auto">\n    <div *ngFor="let y of years" class="font-button-2" (click)="pickYear(y.id,y.disabled)">\n      <div [ngClass]="{\'datepicker-year_item_active\':y.isSelected,\'datepicker-year_item_disabled\':y.disabled}"\n           [class]="\'datepicker-year_item column align-center justify-content-center datepicker_\'+viewType">\n        <div *ngIf=" y.isSelected===true" tetaScrollToSelectedYear>\n          <span>{{y.id}}</span>\n        </div>\n        <div *ngIf="!y.isSelected">\n          <span>{{y.id}} </span>\n        </div>\n      </div>\n    </div>\n  </div>\n</div>\n\n'}]}],(function(){return[]}),{selectedYear:[{type:core.Input}],viewType:[{type:core.Input}],minMax:[{type:core.Input}],locale:[{type:core.Input}],selectYear:[{type:core.Output}]});class DateCalendarComponent extends BaseCalendar{constructor(_cdr){super(_cdr),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"selectedDate",new Date),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"open",void 0),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"min",void 0),defineProperty_defineProperty(this,"isDateNull",void 0),defineProperty_defineProperty(this,"max",void 0),defineProperty_defineProperty(this,"setDate",new core.EventEmitter),defineProperty_defineProperty(this,"calendar",[]),this._cdr=_cdr,dayjs_min_default()().locale("ru",{weekStart:1}),(0,combineLatest.a)([this.currentYear,this.currentMonth,this.minMax]).pipe((0,takeWhile.o)((()=>this.alive)),(0,filter.h)((([currentYear,currentMonth])=>null!==currentMonth&&null!==currentYear)),(0,map.U)((([year,month,minMax])=>this.generateCalendar(dayjs_min_default()(new Date(this.selectedDate)).locale(this.locale),year,month,minMax)))).subscribe((_=>{this.calendar=_}))}}_class51=DateCalendarComponent,defineProperty_defineProperty(DateCalendarComponent,"fac",(function _class51_Factory(t){return new(t||_class51)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DateCalendarComponent,"cmp",core["defineComponent"]({type:_class51,selectors:[["teta-date-calendar"]],inputs:{selectedDate:"selectedDate",locale:"locale",open:"open",viewType:"viewType",min:"min",isDateNull:"isDateNull",max:"max"},outputs:{setDate:"setDate"},features:[core["InheritDefinitionFeature"]],decls:4,vars:11,consts:[["class","datepicker-content overflow-y-auto",4,"ngIf"],[1,"datepicker-content","overflow-y-auto"],[4,"ngIf"],[1,"padding-h-3","padding-v-2",3,"wheel"],[1,"row","align-center","justify-content-between"],["palette","text","view","ghost",3,"square","click"],["name","arrowLeftKey",3,"palette"],[1,"row","gap-4","font-button-2"],["teta-button","","view","ghost","palette","text",3,"click"],["name","arrowRightKey",3,"palette"],[3,"viewType","locale","calendar","selectDate"],[3,"localeMoths","currentYear","selectedMonth","viewType","locale","changeYear","selectMonth"],[3,"locale","viewType","selectedYear","selectYear"]],template:function _class51_Template(rf,ctx){1&rf&&(core["template"](0,_class51_div_0_Template,4,3,"div",0),core["pipe"](1,"async"),core["pipe"](2,"async"),core["pipe"](3,"async")),2&rf&&core["property"]("ngIf",core["pureFunction3"](7,_c14,core["pipeBind1"](1,1,ctx.currentMonth),core["pipeBind1"](2,3,ctx.currentYear),core["pipeBind1"](3,5,ctx.selectedPicker)))},dependencies:[common.NgIf,ButtonComponent,IconComponent,DayPickerComponent,MonthPickerComponent,YearPickerComponent,common.AsyncPipe],styles:[".change-month-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DateCalendarComponent,[{type:core.Component,args:[{selector:"teta-date-calendar",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div *ngIf="{currentMonth:currentMonth|async,currentYear:currentYear|async,selectedPicker:selectedPicker|async} as data"\n     class="datepicker-content overflow-y-auto"\n>\n  <ng-container *ngIf="data.selectedPicker===\'day\'">\n    <div class="padding-h-3 padding-v-2" (wheel)="scrollMonth($event,data.currentMonth,data.currentYear)">\n      <div class="row align-center justify-content-between">\n        <teta-button [class]="\'change-month-button datepicker_\'+viewType" [square]="true"\n                     (click)="changeMonth(data.currentMonth-1,data.currentYear)"\n                     palette="text"\n                     view="ghost">\n          <teta-icon name="arrowLeftKey" [palette]="\'text\'"></teta-icon>\n        </teta-button>\n        <div class="row gap-4 font-button-2 ">\n          <button [class]="\'datepicker_\'+viewType " teta-button view="ghost" palette="text"\n                  (click)="selectPicker(\'month\')"> {{getMothName(data.currentMonth)}}</button>\n          <button [class]="\'datepicker_\'+viewType" teta-button view="ghost" palette="text"\n                  (click)="selectPicker(\'year\')">{{data.currentYear}}</button>\n        </div>\n        <teta-button [square]="true" [class]="\'change-month-button datepicker_\'+viewType"\n                     (click)="changeMonth(data.currentMonth+1,data.currentYear)"\n                     palette="text"\n                     view="ghost">\n          <teta-icon name="arrowRightKey" [palette]="\'text\'"></teta-icon>\n        </teta-button>\n      </div>\n      <div>\n        <teta-day-picker [viewType]="viewType" (selectDate)="selectDate($event)" [locale]="locale"\n                         [calendar]="calendar"></teta-day-picker>\n      </div>\n    </div>\n  </ng-container>\n  <ng-container *ngIf="data.selectedPicker===\'month\'">\n    <teta-month-picker [localeMoths]="localeMonths" [currentYear]="data.currentYear" (changeYear)="setYear($event)"\n                       [selectedMonth]="data.currentMonth" [viewType]="viewType" [locale]="locale"\n                       (selectMonth)="selectMonth($event)"></teta-month-picker>\n  </ng-container>\n  <ng-container *ngIf="data.selectedPicker===\'year\'">\n    <teta-year-picker [locale]="locale" [viewType]="viewType" (selectYear)="selectYear($event)"\n                      [selectedYear]="data.currentYear"></teta-year-picker>\n  </ng-container>\n</div>\n\n',styles:[".change-month-button{-webkit-user-select:none;user-select:none}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{selectedDate:[{type:core.Input}],locale:[{type:core.Input}],open:[{type:core.Input}],viewType:[{type:core.Input}],min:[{type:core.Input}],isDateNull:[{type:core.Input}],max:[{type:core.Input}],setDate:[{type:core.Output}]});class BasePicker{constructor(_elementRef,_cdr,datePipe){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"datePipe",void 0),defineProperty_defineProperty(this,"open",!1),defineProperty_defineProperty(this,"placeholder",""),defineProperty_defineProperty(this,"inputText",void 0),defineProperty_defineProperty(this,"maskitoOptions",void 0),defineProperty_defineProperty(this,"openPicker",(show=>{this.disabled||(this.open=show,this._cdr.markForCheck())})),this._elementRef=_elementRef,this._cdr=_cdr,this.datePipe=datePipe,this.inputText=this.checkNull()}changeInput(v){this.changePlaceholder(v)}changePlaceholder(value){const val=this.mask.split("");for(let i=0;value.length>i;i++)val.splice(i,1,value[i]);this.placeholder=val.join("")}openChange(e){e||this.onBlur(),this.open=e}checkNull(){return!this.date&&this.allowNull?null:this.datePipe.transform(new Date,"dd.MM.yyyy, HH:mm")}changeSelectedDate(date,selectedDate){this.setDate(date),this.emitValue(date),this.open=!1}emitValue(value){this.isValueChange(value)&&(this.date=value,this.selectDate.emit(value),this.onChange(value))}isValueChange(value){return new Date(value).getTime()!==new Date(this.date).getTime()}checkEnter(e){"Enter"===e.key&&(this.inputText=e.target.value,this.onBlur()),"-"===e.key&&e.preventDefault(),this.open=!0}isAvailableLength(val,length){return!!val?.length&&val.length===length}getDateFromStr(str,separator="."){const date=str?.split(separator);return{day:this.isAvailableLength(date?.[0],2)?Number(date[0]):null,month:this.isAvailableLength(date?.[1],2)?Number(date[1]):null,year:this.isAvailableLength(date?.[2],4)?Number(date[2]):null}}getTimeFromStr(str,separator=":"){const time=str?.trim().split(separator);return{hours:this.isAvailableLength(time?.[0],2)?Number(time[0]):null,mins:this.isAvailableLength(time?.[1],2)?Number(time[1]):null}}focus(){this._elementRef.nativeElement.focus()}getLocaleString(date){return new Date(date).toLocaleString([],{year:"numeric",month:"2-digit",day:"2-digit",hour:this.showTime?"2-digit":void 0,minute:this.showTime?"2-digit":void 0})}getAvailableDate(min,max,date){const minDate=dayjs_min_default()(new Date(min)).startOf("day").toDate(),maxDate=dayjs_min_default()(new Date(max)).endOf("day").toDate();return min&&minDate.getTime()>=new Date(date).getTime()?new Date:max&&maxDate.getTime()<=new Date(date).getTime()?maxDate:new Date(date)}}const enLocale={apply:"Apply",cancel:"Cancel",clear:"Clear",pin:"Pin",unpin:"Unpin",sortAsc:"Sort asc",sortDesc:"Sort desc",clearSort:"Clear sort",clearAllSort:"Clear all sort",clearFilter:"Clear filter",clearAllFilters:"Clear all filters",dateRangeMask:"dd.mm.yyyy - dd.mm.yyyy",dateMask:"dd.mm.yyyy",dateTimeMask:"dd.mm.yyyy, hh:mm",autosizeColumn:"Autosize column",autosizeAll:"Autosize all columns",resetColumnsSize:"Reset columns settings",from:"From",to:"To",all:"All",min:"Min",max:"Max",sum:"Sum",avg:"Avg",search:"Search",selected:"Selected",notSelected:"Not selected",notFound:"Not found",yes:"Yes",no:"No",months:["January","February","March","April","May","June","July","August","September","October","November","December"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Su","Mo","Tu","We","Th","Fr","Sa"]};class TetaConfigService{constructor(){defineProperty_defineProperty(this,"defaultLocale",enLocale),defineProperty_defineProperty(this,"locale$",new BehaviorSubject.X(this.defaultLocale)),defineProperty_defineProperty(this,"locale",this.locale$.asObservable())}setLocale(newLocale){newLocale?this.locale$.next(newLocale):this.locale$.next(this.defaultLocale)}}_class53=TetaConfigService,defineProperty_defineProperty(TetaConfigService,"fac",(function _class53_Factory(t){return new(t||_class53)})),defineProperty_defineProperty(TetaConfigService,"prov",core["defineInjectable"]({token:_class53,factory:_class53.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TetaConfigService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);const DATE_PICKER_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>DatePickerComponent)),multi:!0};class DatePickerComponent extends BasePicker{constructor(_elementRef,_cdr,datePipe,localeService){super(_elementRef,_cdr,datePipe),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"datePipe",void 0),defineProperty_defineProperty(this,"localeService",void 0),defineProperty_defineProperty(this,"date",null),defineProperty_defineProperty(this,"locale","ru"),defineProperty_defineProperty(this,"showTime",!1),defineProperty_defineProperty(this,"minDate",null),defineProperty_defineProperty(this,"maxDate",null),defineProperty_defineProperty(this,"invalid",!1),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"align",Align.left),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"appendToBody",void 0),defineProperty_defineProperty(this,"backdrop",!1),defineProperty_defineProperty(this,"allowNull",!0),defineProperty_defineProperty(this,"firstDayOfWeek",1),defineProperty_defineProperty(this,"disabledDates",void 0),defineProperty_defineProperty(this,"disabledPeriods",void 0),defineProperty_defineProperty(this,"disabledDays",void 0),defineProperty_defineProperty(this,"minYearDate",void 0),defineProperty_defineProperty(this,"maxYearDate",void 0),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"selectDate",new core.EventEmitter),defineProperty_defineProperty(this,"selectedDate",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"mask",""),defineProperty_defineProperty(this,"classDatepicker",!0),defineProperty_defineProperty(this,"tabindex",0),this._elementRef=_elementRef,this._cdr=_cdr,this.datePipe=datePipe,this.localeService=localeService}ngOnInit(){this.date?this.setDate(new Date(this.date)):(this.setDate(this.allowNull?null:new Date),this.date=this.allowNull?null:new Date),this.prepareInput()}prepareInput(){var _this=this;return(0,asyncToGenerator.Z)((function*(){const config=yield(0,lastValueFrom.n)(_this.localeService.locale.pipe((0,take.q)(1))),str=_this.date?_this.getLocaleString(_this.date):"";let option;const setMinMax=()=>{_this.minDate&&(option.min=dayjs_min_default()(new Date(_this.minDate)).startOf("day")),_this.maxDate&&(option.max=dayjs_min_default()(new Date(_this.maxDate)).endOf("day"))};_this.showTime?(_this.mask=config.dateTimeMask,option={dateMode:"dd/mm/yyyy",timeMode:"HH:MM",dateSeparator:"."},setMinMax(),_this.maskitoOptions=(0,index_esm.H$)(option)):(_this.mask=config.dateMask,option={mode:"dd/mm/yyyy",separator:"."},setMinMax(),_this.maskitoOptions=(0,index_esm.tr)(option)),_this.changePlaceholder(str)}))()}onBlur(){if(this.allowNull&&""===this.inputText.trim())this.setDate(null),this.emitValue(null);else{const val=this.inputText.split(","),{day,year,month}=this.getDateFromStr(val[0]),{mins,hours}=this.getTimeFromStr(val[1]);if(day&&year&&month){let date=new Date(year,month-1,day);this.showTime&&(date=new Date(date.setHours(hours||0,mins||0))),this.changeSelectedDate(this.getAvailableDate(this.minDate,this.maxDate,date))}else this.setDate(this.date)}}setDate(date){!date&&this.allowNull?(this.inputText="",this.changePlaceholder(""),this.selectedDate.next(new Date(this.minDate||new Date))):(this.inputText=this.getLocaleString(date),this.changePlaceholder(this.getLocaleString(date)),this.selectedDate.next(date))}onChange(date){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){}writeValue(obj){obj?(this.date=new Date(obj),this.setDate(new Date(this.date))):this.allowNull?(this.date=null,this.selectedDate.next(null)):(this.date=this.minDate||new Date,this.selectedDate.next(this.minDate||new Date))}}_class54=DatePickerComponent,defineProperty_defineProperty(DatePickerComponent,"fac",(function _class54_Factory(t){return new(t||_class54)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](common.DatePipe),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(DatePickerComponent,"cmp",core["defineComponent"]({type:_class54,selectors:[["teta-date-picker"]],viewQuery:function _class54_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},hostVars:3,hostBindings:function _class54_HostBindings(rf,ctx){2&rf&&(core["hostProperty"]("tabindex",ctx.tabindex),core["classProp"]("datepicker",ctx.classDatepicker))},inputs:{date:"date",locale:"locale",showTime:"showTime",minDate:"minDate",maxDate:"maxDate",invalid:"invalid",disabled:"disabled",align:"align",verticalAlign:"verticalAlign",viewType:"viewType",appendToBody:"appendToBody",backdrop:"backdrop",allowNull:"allowNull",firstDayOfWeek:"firstDayOfWeek",disabledDates:"disabledDates",disabledPeriods:"disabledPeriods",disabledDays:"disabledDays",minYearDate:"minYearDate",maxYearDate:"maxYearDate"},outputs:{selectDate:"selectDate"},features:[core["ProvidersFeature"]([DATE_PICKER_CONTROL_VALUE_ACCESSOR,common.DatePipe]),core["InheritDefinitionFeature"]],decls:2,vars:5,consts:[["class","row row_auto",3,"appendToBody","backdrop","open","viewType","disabled","verticalAlign","align","autoCloseIgnore","openChange",4,"ngIf"],[1,"row","row_auto",3,"appendToBody","backdrop","open","viewType","disabled","verticalAlign","align","autoCloseIgnore","openChange"],["tetaDropdownHead","",3,"ngClass"],[1,"row","row_auto","flex"],[1,"row","row_auto","position-relative","font-body-3","align-center"],[1,"row_auto","border-0",2,"z-index","1",3,"ngClass","disabled","ngModel","maskito","keydown","ngModelChange"],["input",""],["class","position-absolute color-text-10","style","top:-0.3px;cursor: text;user-select: none",3,"click",4,"ngIf"],[3,"name","palette"],["tetaDropdownContent","",3,"click"],[3,"isDateNull","open","max","min","selectedDate","viewType","locale","setDate"],[1,"position-absolute","color-text-10",2,"top","-0.3px","cursor","text","user-select","none",3,"click"]],template:function _class54_Template(rf,ctx){1&rf&&(core["template"](0,_class54_teta_dropdown_0_Template,11,33,"teta-dropdown",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c18,core["pipeBind1"](1,1,ctx.selectedDate)))},dependencies:[common.NgClass,common.NgIf,DropdownComponent,DropdownHeadDirective,DropdownContentDirective,fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On,maskito_angular.ro,maskito_angular.Fs,IconComponent,InputComponent,DateCalendarComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DatePickerComponent,[{type:core.Component,args:[{selector:"teta-date-picker",changeDetection:core.ChangeDetectionStrategy.OnPush,providers:[DATE_PICKER_CONTROL_VALUE_ACCESSOR,common.DatePipe],template:"<teta-dropdown *ngIf='{\n                selectedDate:selectedDate | async\n               } as data'\n               class='row row_auto'\n               [appendToBody]='appendToBody'\n               [backdrop]='backdrop'\n               [open]='open'\n               (openChange)='openChange($event)'\n               [viewType]='viewType'\n               [disabled]='disabled'\n               [verticalAlign]='verticalAlign'\n               [align]='align'\n               [autoCloseIgnore]=\"['esc', 'inside','enter']\">\n  <div tetaDropdownHead\n       [class]=\"'datepicker-head font-body-3 gap-8  datepicker_'+viewType\"\n       [ngClass]=\"{'datepicker-head_invalid':invalid,'datepicker-head_disabled':disabled}\">\n    <teta-input class='row row_auto flex'>\n      <div [class]=\"'row_auto row datepicker_'+viewType\">\n        <div class='row row_auto position-relative font-body-3 align-center'>\n          <input [ngClass]=\"{'color-text-90':!disabled}\"\n                 [disabled]='disabled' #input style='z-index: 1'\n                 class='row_auto border-0'\n                 (keydown)='checkEnter($event)'\n                 [(ngModel)]='inputText'\n                 (ngModelChange)='changeInput($event)'\n                 [maskito]='maskitoOptions'>\n          <div (click)='input.focus()' *ngIf='data.selectedDate||allowNull' class='position-absolute color-text-10'\n               style='top:-0.3px;cursor: text;user-select: none'>{{placeholder}}</div>\n        </div>\n        <teta-icon [name]=\"'calendar'\" [palette]=\"'text'\"></teta-icon>\n      </div>\n    </teta-input>\n  </div>\n  <div tetaDropdownContent\n       (click)='$event.preventDefault()'>\n    \x3c!--    <ng-container *ngIf='open'>--\x3e\n    <teta-date-calendar [isDateNull]='date===null'\n                        [open]='open'\n                        [max]='maxDate'\n                        [min]='minDate'\n                        (setDate)='changeSelectedDate($event)'\n                        [selectedDate]='data.selectedDate'\n                        [viewType]='viewType' [locale]='locale'></teta-date-calendar>\n    \x3c!--    </ng-container>--\x3e\n  </div>\n</teta-dropdown>\n"}]}],(function(){return[{type:core.ElementRef},{type:core.ChangeDetectorRef},{type:common.DatePipe},{type:TetaConfigService}]}),{date:[{type:core.Input}],locale:[{type:core.Input}],showTime:[{type:core.Input}],minDate:[{type:core.Input}],maxDate:[{type:core.Input}],invalid:[{type:core.Input}],disabled:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],viewType:[{type:core.Input}],appendToBody:[{type:core.Input}],backdrop:[{type:core.Input}],allowNull:[{type:core.Input}],firstDayOfWeek:[{type:core.Input}],disabledDates:[{type:core.Input}],disabledPeriods:[{type:core.Input}],disabledDays:[{type:core.Input}],minYearDate:[{type:core.Input}],maxYearDate:[{type:core.Input}],input:[{type:core.ViewChild,args:["input"]}],selectDate:[{type:core.Output}],classDatepicker:[{type:core.HostBinding,args:["class.datepicker"]}],tabindex:[{type:core.HostBinding,args:["tabindex"]}]});class RangeCalendarComponent extends BaseCalendar{get hoveredDate(){return this._hoveredDate}set hoveredDate(e){this._hoveredDate=e,this._cdr.detectChanges()}constructor(_cdr){super(_cdr),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"open",void 0),defineProperty_defineProperty(this,"date",void 0),defineProperty_defineProperty(this,"viewType",void 0),defineProperty_defineProperty(this,"allowNull",!0),defineProperty_defineProperty(this,"selectedDate",void 0),defineProperty_defineProperty(this,"min",void 0),defineProperty_defineProperty(this,"isDateNull",void 0),defineProperty_defineProperty(this,"max",void 0),defineProperty_defineProperty(this,"hoveredDateChange",new core.EventEmitter),defineProperty_defineProperty(this,"setDate",new core.EventEmitter),defineProperty_defineProperty(this,"calendar",void 0),defineProperty_defineProperty(this,"_hoveredDate",null),this._cdr=_cdr,dayjs_min_default()().locale("ru",{weekStart:1}),(0,combineLatest.a)([this.currentYear,this.currentMonth,this.minMax]).pipe((0,takeWhile.o)((()=>this.alive)),(0,shareReplay.d)({bufferSize:1,refCount:!1}),(0,filter.h)((([currentYear,currentMonth])=>null!==currentMonth&&null!==currentYear)),(0,map.U)((([year,month,minMax])=>{const{availableYear,availableMonth}=this.getAvailableMonthYear(month+1,year);return{currentMonth:this.generateCalendar(dayjs_min_default()(new Date(this.selectedDate.from||new Date)).locale(this.locale),year,month,minMax),nextMonth:this.generateCalendar(dayjs_min_default()(new Date(this.selectedDate.from||new Date)).locale(this.locale),availableYear,availableMonth,minMax)}}))).subscribe((_=>{this.calendar=_}))}getFromTo(){let dateFrom,dateTo;return this.selectedDate?.from?(dateFrom=new Date(this.selectedDate.from),dateTo=null):this.allowNull?(dateFrom=this.date?.from?new Date(this.date.from):null,dateTo=this.date?.to?new Date(this.date.to):null):(dateFrom=this.date?.from?new Date(this.date.from):new Date,dateTo=this.date?.to?new Date(this.date.to):new Date),{from:dateFrom,to:dateTo}}isSelected(d,selectedDate){const{from,to}=this.getFromTo();return this.checkSelected(d,from)||this.checkSelected(d,to)}checkSelected(date,selectedDate){const isSelectedDate=date.getDate()===selectedDate?.getDate(),isSelectedYear=date.getFullYear()===selectedDate?.getFullYear(),isSelectedMonth=date.getMonth()===selectedDate?.getMonth();return isSelectedDate&&isSelectedMonth&&isSelectedYear}isFirstDaySuitable(m,y,max){const{availableYear,availableMonth}=this.getAvailableMonthYear(m,y);return this.isSuitableMaxDate(dayjs_min_default()(new Date(availableYear,availableMonth)).startOf("month").toDate(),max)}isLastDaySuitable(m,y,min){const{availableYear,availableMonth}=this.getAvailableMonthYear(m,y);return this.isSuitableMinDate(dayjs_min_default()(new Date(availableYear,availableMonth)).endOf("month").toDate(),min)}ngOnChanges(changes){changes?.hoveredDate||this.changeCalendarData(this.selectedDate.from||this.date.from)}}_class55=RangeCalendarComponent,defineProperty_defineProperty(RangeCalendarComponent,"fac",(function _class55_Factory(t){return new(t||_class55)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(RangeCalendarComponent,"cmp",core["defineComponent"]({type:_class55,selectors:[["teta-range-calendar"]],inputs:{locale:"locale",open:"open",date:"date",viewType:"viewType",allowNull:"allowNull",selectedDate:"selectedDate",min:"min",isDateNull:"isDateNull",max:"max"},outputs:{hoveredDateChange:"hoveredDateChange",setDate:"setDate"},features:[core["InheritDefinitionFeature"],core["NgOnChangesFeature"]],decls:5,vars:14,consts:[["class","datepicker-content overflow-y-auto",4,"ngIf"],[1,"datepicker-content","overflow-y-auto"],[4,"ngIf"],[1,"row",3,"wheel"],[1,"padding-h-3","padding-v-2"],[1,"row","align-center","justify-content-between"],["palette","text","view","ghost",3,"ngClass","square","click"],["name","arrowLeftKey",3,"palette"],[1,"row","gap-4","font-button-2","align-center","padding-left-1"],["teta-button","","view","ghost","palette","text",3,"click"],["palette","text","view","ghost",3,"square"],["name","arrowRightKey",3,"palette"],[3,"hoveredDate","range","viewType","locale","calendar","hoveredDateChange","selectDate"],["class","padding-h-3 padding-v-2",4,"ngIf"],["palette","text","view","ghost",3,"square","ngClass","click"],[3,"localeMoths","currentYear","selectedMonth","viewType","locale","changeYear","selectMonth"],[3,"minMax","locale","viewType","selectedYear","selectYear"]],template:function _class55_Template(rf,ctx){1&rf&&(core["template"](0,_class55_div_0_Template,4,3,"div",0),core["pipe"](1,"async"),core["pipe"](2,"async"),core["pipe"](3,"async"),core["pipe"](4,"async")),2&rf&&core["property"]("ngIf",core["pureFunction4"](9,_c20,core["pipeBind1"](1,1,ctx.currentMonth),core["pipeBind1"](2,3,ctx.currentYear),core["pipeBind1"](3,5,ctx.selectedPicker),core["pipeBind1"](4,7,ctx.minMax)))},dependencies:[common.NgClass,common.NgIf,ButtonComponent,IconComponent,DayPickerComponent,MonthPickerComponent,YearPickerComponent,common.AsyncPipe],styles:[".change-month-button[_ngcontent-%COMP%]{-webkit-user-select:none;user-select:none}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](RangeCalendarComponent,[{type:core.Component,args:[{selector:"teta-range-calendar",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div\n  *ngIf="{currentMonth:currentMonth|async,currentYear:currentYear|async,selectedPicker:selectedPicker|async,minMax:minMax|async} as data"\n  class="datepicker-content overflow-y-auto"\n>\n  <ng-container *ngIf="data.selectedPicker===\'day\'">\n    <div class="row " (wheel)="scrollMonth($event,data.currentMonth,data.currentYear)">\n      <div class="padding-h-3 padding-v-2">\n        <div class="row align-center justify-content-between">\n          <teta-button\n            [ngClass]="{\'datepicker-arrow_hidden\':!isLastDaySuitable(data.currentMonth-1,data.currentYear,min)}"\n            [class]="\'change-month-button datepicker_\'+viewType" [square]="true"\n            (click)="changeMonth(data.currentMonth-1,data.currentYear)"\n            palette="text"\n            view="ghost">\n            <teta-icon name="arrowLeftKey" [palette]="\'text\'"></teta-icon>\n          </teta-button>\n          <div class="row gap-4 font-button-2 align-center padding-left-1">\n            <p> {{getMothName(data.currentMonth)}}</p>\n            <button [class]="\'datepicker_\'+viewType" teta-button view="ghost" palette="text"\n                    (click)="selectPicker(\'year\')">{{data.currentYear}}</button>\n          </div>\n          <teta-button [square]="true" [class]="\'change-month-button datepicker-arrow_hidden datepicker_\'+viewType"\n                       palette="text"\n                       view="ghost">\n            <teta-icon name="arrowRightKey" [palette]="\'text\'"></teta-icon>\n          </teta-button>\n        </div>\n        <div>\n          <teta-day-picker [(hoveredDate)]="hoveredDate" [range]="getFromTo()" [viewType]="viewType"\n                           (selectDate)="selectDate($event)" [locale]="locale"\n                           [calendar]="calendar.currentMonth"></teta-day-picker>\n        </div>\n      </div>\n      <div class="padding-h-3 padding-v-2"\n           *ngIf="getAvailableMonthYear(data.currentMonth+1,data.currentYear) as availableMonthYear">\n        <div class="row align-center justify-content-between">\n          <teta-button [square]="true" [class]="\'change-month-button datepicker-arrow_hidden datepicker_\'+viewType"\n                       palette="text"\n                       view="ghost">\n            <teta-icon name="arrowLeftKey" [palette]="\'text\'"></teta-icon>\n          </teta-button>\n          <div class="row gap-4 font-button-2 align-center padding-left-1">\n            <p>{{getMothName(availableMonthYear.availableMonth)}}</p>\n            <button [class]="\'datepicker_\'+viewType" teta-button view="ghost" palette="text"\n                    (click)="selectPicker(\'year\')">{{availableMonthYear.availableYear}}</button>\n          </div>\n          <teta-button [square]="true"\n                       [ngClass]="{\'datepicker-arrow_hidden\': !isFirstDaySuitable(data.currentMonth+2,data.currentYear,max)}"\n                       [class]="\'change-month-button datepicker_\'+viewType"\n                       (click)="changeMonth(data.currentMonth+1,data.currentYear)"\n                       palette="text"\n                       view="ghost">\n            <teta-icon name="arrowRightKey" [palette]="\'text\'"></teta-icon>\n          </teta-button>\n        </div>\n        <div>\n          <teta-day-picker [(hoveredDate)]="hoveredDate" [range]="getFromTo()" [viewType]="viewType"\n                           (selectDate)="selectDate($event)" [locale]="locale"\n                           [calendar]="calendar.nextMonth"></teta-day-picker>\n        </div>\n      </div>\n    </div>\n\n  </ng-container>\n  <ng-container *ngIf="data.selectedPicker===\'month\'">\n    <teta-month-picker [localeMoths]="localeMonths" [currentYear]="data.currentYear" (changeYear)="setYear($event)"\n                       [selectedMonth]="data.currentMonth" [viewType]="viewType" [locale]="locale"\n                       (selectMonth)="selectMonth($event)"></teta-month-picker>\n  </ng-container>\n  <ng-container *ngIf="data.selectedPicker===\'year\'">\n    <teta-year-picker [minMax]="data.minMax" [locale]="locale" [viewType]="viewType" (selectYear)="selectYear($event)"\n                      [selectedYear]="data.currentYear"></teta-year-picker>\n  </ng-container>\n</div>\n\n',styles:[".change-month-button{-webkit-user-select:none;user-select:none}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{locale:[{type:core.Input}],open:[{type:core.Input}],date:[{type:core.Input}],viewType:[{type:core.Input}],allowNull:[{type:core.Input}],selectedDate:[{type:core.Input}],min:[{type:core.Input}],isDateNull:[{type:core.Input}],max:[{type:core.Input}],hoveredDateChange:[{type:core.Output}],setDate:[{type:core.Output}]});const DATE_Range_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>DateRangeComponent)),multi:!0};class DateRangeComponent extends BasePicker{constructor(_cdr,_elementRef,datePipe,localeService){super(_elementRef,_cdr,datePipe),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"datePipe",void 0),defineProperty_defineProperty(this,"localeService",void 0),defineProperty_defineProperty(this,"date",{from:null,to:null}),defineProperty_defineProperty(this,"locale","ru"),defineProperty_defineProperty(this,"showTime",!1),defineProperty_defineProperty(this,"minDate",null),defineProperty_defineProperty(this,"maxDate",null),defineProperty_defineProperty(this,"invalid",!1),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"align",Align.left),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"appendToBody",void 0),defineProperty_defineProperty(this,"backdrop",void 0),defineProperty_defineProperty(this,"allowNull",!0),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"selectDate",new core.EventEmitter),defineProperty_defineProperty(this,"mask",""),defineProperty_defineProperty(this,"selectedDate",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"classDaterange",!0),this._cdr=_cdr,this._elementRef=_elementRef,this.datePipe=datePipe,this.localeService=localeService}changeSelectedDate(date,selectedDate){if(selectedDate.from){const from=new Date(Math.min(new Date(selectedDate.from).getTime(),date.getTime())),to=new Date(Math.max(new Date(selectedDate.from).getTime(),date.getTime()));this.setDate({from,to}),this.selectedDate.next({from:null,to:null}),this.open=!1,this._cdr.detectChanges()}else this.setDate({from:date,to:null}),this.selectedDate.next({from:date,to:null})}checkNull(){return this.allowNull?null:this.datePipe.transform(new Date,"dd.MM.yyyy")+" - "+this.datePipe.transform(new Date,"dd.MM.yyyy")}prepareInput(){var _this2=this;return(0,asyncToGenerator.Z)((function*(){const config=yield(0,lastValueFrom.n)(_this2.localeService.locale.pipe((0,take.q)(1)));let str=_this2.getLocaleString(_this2.date.from)+" - "+_this2.getLocaleString(_this2.date.to);_this2.date?.from||(str=_this2.allowNull?"":_this2.getLocaleString(new Date)+" - "+_this2.getLocaleString(new Date));const option={mode:"dd/mm/yyyy",separator:"."};_this2.mask=config.dateRangeMask,_this2.minDate&&(option.min=dayjs_min_default()(new Date(_this2.minDate)).startOf("day")),_this2.maxDate&&(option.max=dayjs_min_default()(new Date(_this2.maxDate)).endOf("day")),_this2.maskitoOptions=(0,index_esm.n9)(option),_this2.changePlaceholder(str)}))()}onBlur(){if(this.allowNull&&""===this.inputText.trim())this.setDate({from:null,to:null}),this.selectedDate.next({from:null,to:null}),this.emitValue({from:null,to:null});else{const val=this.inputText.replace("","-").split("-"),from=this.getDateFromStr(val[0].trim()),to=this.getDateFromStr(val[1]?.trim());if(to.day&&to.year&&to.month){let fromDate=this.getAvailableDate(this.minDate,this.maxDate,new Date(from.year,from.month-1,from.day)),toDate=this.getAvailableDate(this.minDate,this.maxDate,new Date(to.year,to.month-1,to.day));fromDate.getTime()>toDate.getTime()&&([fromDate,toDate]=[toDate,fromDate]),this.setDate({from:fromDate,to:toDate}),this.emitValue({from:fromDate,to:toDate}),this.selectedDate.next({from:null,to:null}),toDate&&fromDate&&(this.open=!1)}else this.setDate(this.date),this.selectedDate.next({from:null,to:null})}}setDate(range){if(range?.from||range?.to||!this.allowNull){const from=this.getLocaleString(range.from),to=range.from&&!range.to?"":this.getLocaleString(range.to);this.inputText=from+" - "+to,this.changePlaceholder(from+" - "+to)}else this.inputText="",this.changePlaceholder(""),this.selectedDate.next({from:range?.from||null,to:range?.to||null})}writeValue(obj){obj?.from?(this.date={from:new Date(obj.from),to:new Date(obj.to)},this.setDate({from:new Date(obj.from),to:new Date(obj.to)})):this.date={from:null,to:null},this.selectedDate.next({from:null,to:null})}isValueChange(value){return!(new Date(value.from).getTime()===new Date(this.date.from).getTime()&&new Date(value.to).getTime()===new Date(this.date.to).getTime())}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){}ngOnInit(){this.date?.from?this.setDate({from:this.allowNull?null:new Date(this.date?.from),to:this.allowNull?null:new Date(this.date?.to)}):this.setDate({from:this.allowNull?null:new Date,to:this.allowNull?null:new Date}),this.selectedDate.next({from:null,to:null}),this.prepareInput()}onChange(date){}}_class56=DateRangeComponent,defineProperty_defineProperty(DateRangeComponent,"fac",(function _class56_Factory(t){return new(t||_class56)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](core.ElementRef),core["directiveInject"](common.DatePipe),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(DateRangeComponent,"cmp",core["defineComponent"]({type:_class56,selectors:[["teta-date-range"]],viewQuery:function _class56_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},hostVars:2,hostBindings:function _class56_HostBindings(rf,ctx){2&rf&&core["classProp"]("daterange",ctx.classDaterange)},inputs:{date:"date",locale:"locale",showTime:"showTime",minDate:"minDate",maxDate:"maxDate",invalid:"invalid",disabled:"disabled",align:"align",verticalAlign:"verticalAlign",viewType:"viewType",appendToBody:"appendToBody",backdrop:"backdrop",allowNull:"allowNull"},outputs:{selectDate:"selectDate"},features:[core["ProvidersFeature"]([DATE_Range_CONTROL_VALUE_ACCESSOR,common.DatePipe]),core["InheritDefinitionFeature"]],decls:2,vars:5,consts:[["class","row row_auto",3,"appendToBody","backdrop","open","viewType","disabled","verticalAlign","align","autoCloseIgnore","openChange",4,"ngIf"],[1,"row","row_auto",3,"appendToBody","backdrop","open","viewType","disabled","verticalAlign","align","autoCloseIgnore","openChange"],["tetaDropdownHead","",3,"ngClass"],[1,"row","row_auto","flex"],[1,"row","row_auto","position-relative","font-body-3","align-center"],[1,"border-0","color-text-90",2,"z-index","1",3,"ngClass","disabled","ngModel","maskito","keydown","ngModelChange"],["input",""],["class","position-absolute color-text-10","style","top:-0.3px;cursor: text;user-select: none",3,"click",4,"ngIf"],[3,"name","palette"],["tetaDropdownContent","",1,"scrollable",3,"click"],[4,"ngIf"],[1,"position-absolute","color-text-10",2,"top","-0.3px","cursor","text","user-select","none",3,"click"],[1,"row"],[3,"isDateNull","open","max","allowNull","min","selectedDate","date","viewType","locale","setDate"]],template:function _class56_Template(rf,ctx){1&rf&&(core["template"](0,_class56_teta_dropdown_0_Template,11,27,"teta-dropdown",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c18,core["pipeBind1"](1,1,ctx.selectedDate)))},dependencies:[common.NgClass,common.NgIf,DropdownComponent,DropdownHeadDirective,DropdownContentDirective,fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On,maskito_angular.ro,maskito_angular.Fs,IconComponent,InputComponent,RangeCalendarComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DateRangeComponent,[{type:core.Component,args:[{selector:"teta-date-range",providers:[DATE_Range_CONTROL_VALUE_ACCESSOR,common.DatePipe],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-dropdown *ngIf="{selectedDate:selectedDate|async}as data" [appendToBody]="appendToBody" [backdrop]="backdrop"\n               class=\'row row_auto\'\n               [(open)]="open" (openChange)="openChange($event)" [viewType]="viewType"\n               [disabled]="disabled" [verticalAlign]="verticalAlign" [align]="align"\n               [autoCloseIgnore]="[\'esc\', \'inside\',\'enter\']">\n  <div tetaDropdownHead\n       [class]="\'datepicker-head font-body-3 gap-8 datepicker_\'+viewType"\n       [ngClass]="{\'datepicker-head_invalid\':invalid,\'datepicker-head_disabled\':disabled}">\n    <teta-input class="row row_auto flex">\n      <div [class]="\'row_auto row datepicker_\'+viewType">\n        <div class="row row_auto position-relative font-body-3 align-center">\n          <input [ngClass]="{\'color-text-90\':!disabled}" [disabled]="disabled" #input style="z-index: 1"\n                 class="border-0 color-text-90" (keydown)="checkEnter($event)"\n                 [(ngModel)]="inputText" (ngModelChange)="changeInput($event)"\n                 [maskito]="maskitoOptions">\n          <div (click)="input.focus()" *ngIf="data.selectedDate||allowNull" class="position-absolute color-text-10"\n               style="top:-0.3px;cursor: text;user-select: none">{{placeholder}}</div>\n        </div>\n        <teta-icon [name]="\'calendar\'" [palette]="\'text\'"></teta-icon>\n      </div>\n    </teta-input>\n  </div>\n  <div tetaDropdownContent class="scrollable" (click)="$event.preventDefault()">\n    <ng-container *ngIf="open">\n      <div class="row">\n        <teta-range-calendar [isDateNull]="date===null||(date?.from===null&&date?.to===null)" [open]="open"\n                             [max]="maxDate"\n                             [allowNull]="allowNull"\n                             [min]="minDate"\n                             (setDate)="changeSelectedDate($event,data.selectedDate)"\n                             [selectedDate]="data.selectedDate"\n                             [date]="date"\n                             [viewType]="viewType" [locale]="locale"></teta-range-calendar>\n      </div>\n    </ng-container>\n  </div>\n</teta-dropdown>\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:core.ElementRef},{type:common.DatePipe},{type:TetaConfigService}]}),{date:[{type:core.Input}],locale:[{type:core.Input}],showTime:[{type:core.Input}],minDate:[{type:core.Input}],maxDate:[{type:core.Input}],invalid:[{type:core.Input}],disabled:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],viewType:[{type:core.Input}],appendToBody:[{type:core.Input}],backdrop:[{type:core.Input}],allowNull:[{type:core.Input}],input:[{type:core.ViewChild,args:["input"]}],selectDate:[{type:core.Output}],classDaterange:[{type:core.HostBinding,args:["class.daterange"]}]});class DatePickerModule{}_class57=DatePickerModule,defineProperty_defineProperty(DatePickerModule,"fac",(function _class57_Factory(t){return new(t||_class57)})),defineProperty_defineProperty(DatePickerModule,"mod",core["defineNgModule"]({type:_class57,declarations:[DateCalendarComponent,DayPickerComponent,DatePickerComponent,RangeCalendarComponent,DayItemComponent,MonthPickerComponent,ScrollToSelectedYearDirective,YearPickerComponent,ScrollToSelectedYearDirective,DateRangeComponent],imports:[common.CommonModule,DropdownModule,ButtonModule,fesm2022_forms.u5,maskito_angular.U5,IconModule,InputModule,ScrollIntoViewModule,ClickOutsideModule,fesm2022_forms.UX],exports:[DatePickerComponent,DateCalendarComponent,RangeCalendarComponent,DateRangeComponent]})),defineProperty_defineProperty(DatePickerModule,"inj",core["defineInjector"]({imports:[common.CommonModule,DropdownModule,ButtonModule,fesm2022_forms.u5,maskito_angular.U5,IconModule,InputModule,ScrollIntoViewModule,ClickOutsideModule,fesm2022_forms.UX]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DatePickerModule,[{type:core.NgModule,args:[{declarations:[DateCalendarComponent,DayPickerComponent,DatePickerComponent,RangeCalendarComponent,DayItemComponent,MonthPickerComponent,ScrollToSelectedYearDirective,YearPickerComponent,ScrollToSelectedYearDirective,DateRangeComponent],imports:[common.CommonModule,DropdownModule,ButtonModule,fesm2022_forms.u5,maskito_angular.U5,IconModule,InputModule,ScrollIntoViewModule,ClickOutsideModule,fesm2022_forms.UX],exports:[DatePickerComponent,DateCalendarComponent,RangeCalendarComponent,DateRangeComponent]}]}],null,null);var DatePickerMode,StringFilterType,ListFilterType,FilterType;!function(DatePickerMode){DatePickerMode[DatePickerMode.date=0]="date",DatePickerMode[DatePickerMode.month=1]="month",DatePickerMode[DatePickerMode.year=2]="year"}(DatePickerMode||(DatePickerMode={}));class DelimiterComponent{get getClass(){return[this.class,"delimiter",this.getBgColor(),"horizontal"===this.direction?"display-flex":"display-inline-flex"].join(" ")}get getHeight(){return"vertical"===this.direction?"":"1px"}get getWidth(){return"horizontal"===this.direction?"":"1px"}get getMargin(){return"horizontal"===this.direction?"8px":"0"}constructor(){defineProperty_defineProperty(this,"direction","vertical"),defineProperty_defineProperty(this,"palette","text"),defineProperty_defineProperty(this,"height",32),defineProperty_defineProperty(this,"verticalMargin",4),defineProperty_defineProperty(this,"horizontalMargin",8),defineProperty_defineProperty(this,"class",void 0)}getBgColor(){return this.palette?`bg-${this.palette}-10`:""}ngOnInit(){}}_class59=DelimiterComponent,defineProperty_defineProperty(DelimiterComponent,"fac",(function _class59_Factory(t){return new(t||_class59)})),defineProperty_defineProperty(DelimiterComponent,"cmp",core["defineComponent"]({type:_class59,selectors:[["teta-delimiter"]],hostVars:8,hostBindings:function _class59_HostBindings(rf,ctx){2&rf&&(core["classMap"](ctx.getClass),core["styleProp"]("height",ctx.getHeight)("width",ctx.getWidth)("margin",ctx.getMargin))},inputs:{direction:"direction",palette:"palette",height:"height",verticalMargin:"verticalMargin",horizontalMargin:"horizontalMargin",class:"class"},decls:0,vars:0,template:function _class59_Template(rf,ctx){},styles:[".delimiter[_nghost-%COMP%]{flex-shrink:0}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DelimiterComponent,[{type:core.Component,args:[{selector:"teta-delimiter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"",styles:[":host.delimiter{flex-shrink:0}\n"]}]}],(function(){return[]}),{direction:[{type:core.Input}],palette:[{type:core.Input}],height:[{type:core.Input}],verticalMargin:[{type:core.Input}],horizontalMargin:[{type:core.Input}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}],getHeight:[{type:core.HostBinding,args:["style.height"]}],getWidth:[{type:core.HostBinding,args:["style.width"]}],getMargin:[{type:core.HostBinding,args:["style.margin"]}]});class DelimiterModule{}_class60=DelimiterModule,defineProperty_defineProperty(DelimiterModule,"fac",(function _class60_Factory(t){return new(t||_class60)})),defineProperty_defineProperty(DelimiterModule,"mod",core["defineNgModule"]({type:_class60,declarations:[DelimiterComponent],imports:[common.CommonModule],exports:[DelimiterComponent]})),defineProperty_defineProperty(DelimiterModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DelimiterModule,[{type:core.NgModule,args:[{declarations:[DelimiterComponent],exports:[DelimiterComponent],imports:[common.CommonModule]}]}],null,null);class ToolbarComponent{constructor(){defineProperty_defineProperty(this,"palette",void 0),defineProperty_defineProperty(this,"class",void 0)}get getClass(){const result=[this.class,"toolbar"];return this.palette&&result.push(`toolbar-${this.palette}`),result.join(" ")}ngOnInit(){}}_class61=ToolbarComponent,defineProperty_defineProperty(ToolbarComponent,"fac",(function _class61_Factory(t){return new(t||_class61)})),defineProperty_defineProperty(ToolbarComponent,"cmp",core["defineComponent"]({type:_class61,selectors:[["teta-toolbar"]],hostVars:2,hostBindings:function _class61_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.getClass)},inputs:{palette:"palette",class:"class"},ngContentSelectors:_c0,decls:1,vars:0,template:function _class61_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ToolbarComponent,[{type:core.Component,args:[{selector:"teta-toolbar",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],null,{palette:[{type:core.Input}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}]});class ExpandCardComponent{constructor(){defineProperty_defineProperty(this,"open",!0),defineProperty_defineProperty(this,"openChange",new core.EventEmitter),defineProperty_defineProperty(this,"showCross",!0),defineProperty_defineProperty(this,"crossClick",new core.EventEmitter)}ngOnInit(){}setOpen(){this.open=!this.open,this.openChange.emit(this.open)}}_class62=ExpandCardComponent,defineProperty_defineProperty(ExpandCardComponent,"fac",(function _class62_Factory(t){return new(t||_class62)})),defineProperty_defineProperty(ExpandCardComponent,"cmp",core["defineComponent"]({type:_class62,selectors:[["teta-expand-card"]],inputs:{open:"open",showCross:"showCross"},outputs:{openChange:"openChange",crossClick:"crossClick"},exportAs:["expand-card"],ngContentSelectors:_c23,decls:7,vars:7,consts:[[1,"justify-content-between","align-center"],[1,"row","gap","align-center"],["type","button","teta-button","",3,"palette","view","square","click"],[3,"name","palette"],[4,"ngIf"],["class","content",4,"ngIf"],[1,"height-4",3,"palette"],[1,"content"]],template:function _class62_Template(rf,ctx){1&rf&&(core["projectionDef"](_c22),core["elementStart"](0,"teta-toolbar",0),core["projection"](1),core["elementStart"](2,"div",1)(3,"button",2),core["listener"]("click",(function _class62_Template_button_click_3_listener(){return ctx.setOpen()})),core["element"](4,"teta-icon",3),core["elementEnd"](),core["template"](5,_class62_ng_container_5_Template,4,6,"ng-container",4),core["elementEnd"]()(),core["template"](6,_class62_div_6_Template,2,0,"div",5)),2&rf&&(core["advance"](3),core["property"]("palette","text")("view","ghost")("square",!0),core["advance"](1),core["property"]("name",ctx.open?"arrowUpKey":"arrowDownKey")("palette","text"),core["advance"](1),core["property"]("ngIf",ctx.showCross),core["advance"](1),core["property"]("ngIf",ctx.open))},dependencies:[common.NgIf,ToolbarComponent,ButtonComponent,IconComponent,DelimiterComponent],styles:["[_nghost-%COMP%]{border:solid 1px var(--color-text-5);border-radius:4px;animation:_ngcontent-%COMP%_append-animate .5s linear;transition:order 5s ease-in}.content[_ngcontent-%COMP%]{padding:0 12px 12px;animation:_ngcontent-%COMP%_append-animate .5s linear}@keyframes _ngcontent-%COMP%_append-animate{0%{opacity:0}to{opacity:1}}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandCardComponent,[{type:core.Component,args:[{selector:"teta-expand-card",changeDetection:core.ChangeDetectionStrategy.OnPush,exportAs:"expand-card",template:'<teta-toolbar class="justify-content-between align-center">\n  <ng-content select="head"></ng-content>\n  <div class="row gap align-center">\n    <button type="button" teta-button (click)="setOpen()" [palette]="\'text\'" [view]="\'ghost\'" [square]="true">\n      <teta-icon [name]="open ? \'arrowUpKey\' : \'arrowDownKey\'" [palette]="\'text\'"></teta-icon>\n    </button>\n    <ng-container *ngIf="showCross">\n      <teta-delimiter [palette]="\'text\'" class=\'height-4\'></teta-delimiter>\n      <button type="button" teta-button (click)="crossClick.emit($event)" [palette]="\'text\'" [view]="\'ghost\'" [square]="true">\n        <teta-icon [name]="\'closeBig\'" [palette]="\'text\'"></teta-icon>\n      </button>\n    </ng-container>\n  </div>\n</teta-toolbar>\n<div class="content" *ngIf="open">\n  <ng-content></ng-content>\n</div>\n',styles:[":host{border:solid 1px var(--color-text-5);border-radius:4px;animation:append-animate .5s linear;transition:order 5s ease-in}.content{padding:0 12px 12px;animation:append-animate .5s linear}@keyframes append-animate{0%{opacity:0}to{opacity:1}}\n"]}]}],(function(){return[]}),{open:[{type:core.Input}],openChange:[{type:core.Output}],showCross:[{type:core.Input}],crossClick:[{type:core.Output}]});class ToolbarModule{}_class63=ToolbarModule,defineProperty_defineProperty(ToolbarModule,"fac",(function _class63_Factory(t){return new(t||_class63)})),defineProperty_defineProperty(ToolbarModule,"mod",core["defineNgModule"]({type:_class63,declarations:[ToolbarComponent],imports:[common.CommonModule],exports:[ToolbarComponent]})),defineProperty_defineProperty(ToolbarModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ToolbarModule,[{type:core.NgModule,args:[{declarations:[ToolbarComponent],exports:[ToolbarComponent],imports:[common.CommonModule]}]}],null,null);class ExpandItemComponent{constructor(){defineProperty_defineProperty(this,"open",!0),defineProperty_defineProperty(this,"openChange",new core.EventEmitter)}setOpen(){this.open=!this.open,this.openChange.emit(this.open)}}_class64=ExpandItemComponent,defineProperty_defineProperty(ExpandItemComponent,"fac",(function _class64_Factory(t){return new(t||_class64)})),defineProperty_defineProperty(ExpandItemComponent,"cmp",core["defineComponent"]({type:_class64,selectors:[["teta-expand-item"]],inputs:{open:"open"},outputs:{openChange:"openChange"},exportAs:["expand-item"],ngContentSelectors:_c23,decls:6,vars:6,consts:[[1,"row","align-center","gap","color-text-90","height-6"],[1,"row","row_auto","align-center","font-title-2"],["type","button","teta-button","",3,"palette","view","square","click"],[3,"name","palette"],["class","content",4,"ngIf"],[1,"content"]],template:function _class64_Template(rf,ctx){1&rf&&(core["projectionDef"](_c22),core["elementStart"](0,"div",0)(1,"div",1),core["projection"](2),core["elementEnd"](),core["elementStart"](3,"button",2),core["listener"]("click",(function _class64_Template_button_click_3_listener(){return ctx.setOpen()})),core["element"](4,"teta-icon",3),core["elementEnd"]()(),core["template"](5,_class64_div_5_Template,2,0,"div",4)),2&rf&&(core["advance"](3),core["property"]("palette","text")("view","ghost")("square",!0),core["advance"](1),core["property"]("name",ctx.open?"arrowUpKey":"arrowDownKey")("palette","text"),core["advance"](1),core["property"]("ngIf",ctx.open))},dependencies:[common.NgIf,ButtonComponent,IconComponent],styles:["[_nghost-%COMP%]{animation:_ngcontent-%COMP%_append-animate .5s linear;transition:order 5s ease-in;display:flex;flex-direction:column;gap:12px}.content[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_append-animate .5s linear}@keyframes _ngcontent-%COMP%_append-animate{0%{opacity:0}to{opacity:1}}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandItemComponent,[{type:core.Component,args:[{selector:"teta-expand-item",changeDetection:core.ChangeDetectionStrategy.OnPush,exportAs:"expand-item",template:'<div class="row align-center gap color-text-90 height-6">\n  <div class="row row_auto align-center font-title-2">\n    <ng-content select="head"></ng-content>\n  </div>\n  <button type="button" teta-button (click)="setOpen()" [palette]="\'text\'" [view]="\'ghost\'" [square]="true">\n    <teta-icon [name]="open ? \'arrowUpKey\' : \'arrowDownKey\'" [palette]="\'text\'"></teta-icon>\n  </button>\n</div>\n<div class="content" *ngIf="open">\n  <ng-content></ng-content>\n</div>\n',styles:[":host{animation:append-animate .5s linear;transition:order 5s ease-in;display:flex;flex-direction:column;gap:12px}.content{animation:append-animate .5s linear}@keyframes append-animate{0%{opacity:0}to{opacity:1}}\n"]}]}],null,{open:[{type:core.Input}],openChange:[{type:core.Output}]});class ExpandCardModule{}_class65=ExpandCardModule,defineProperty_defineProperty(ExpandCardModule,"fac",(function _class65_Factory(t){return new(t||_class65)})),defineProperty_defineProperty(ExpandCardModule,"mod",core["defineNgModule"]({type:_class65,declarations:[ExpandCardComponent,ExpandItemComponent],imports:[common.CommonModule,ToolbarModule,ButtonModule,IconModule,DelimiterModule],exports:[ExpandCardComponent,ExpandItemComponent]})),defineProperty_defineProperty(ExpandCardModule,"inj",core["defineInjector"]({imports:[common.CommonModule,ToolbarModule,ButtonModule,IconModule,DelimiterModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandCardModule,[{type:core.NgModule,args:[{declarations:[ExpandCardComponent,ExpandItemComponent],exports:[ExpandCardComponent,ExpandItemComponent],imports:[common.CommonModule,ToolbarModule,ButtonModule,IconModule,DelimiterModule]}]}],null,null);class ExpandPanelContentDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class66=ExpandPanelContentDirective,defineProperty_defineProperty(ExpandPanelContentDirective,"fac",(function _class66_Factory(t){return new(t||_class66)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(ExpandPanelContentDirective,"dir",core["defineDirective"]({type:_class66,selectors:[["","tetaExpandPanelContent",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandPanelContentDirective,[{type:core.Directive,args:[{selector:"[tetaExpandPanelContent]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class ExpandPanelHeadDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class67=ExpandPanelHeadDirective,defineProperty_defineProperty(ExpandPanelHeadDirective,"fac",(function _class67_Factory(t){return new(t||_class67)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(ExpandPanelHeadDirective,"dir",core["defineDirective"]({type:_class67,selectors:[["","tetaExpandPanelHead",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandPanelHeadDirective,[{type:core.Directive,args:[{selector:"[tetaExpandPanelHead]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class ExpandPanelComponent{constructor(){defineProperty_defineProperty(this,"content",void 0),defineProperty_defineProperty(this,"head",void 0),defineProperty_defineProperty(this,"placeholder",void 0),defineProperty_defineProperty(this,"open",!0),defineProperty_defineProperty(this,"openChange",new core.EventEmitter),defineProperty_defineProperty(this,"cookieName",void 0),defineProperty_defineProperty(this,"direction","left")}openPanel(){this.open=!0,this.openChange.emit(!0),this.saveCookie()}closePanel(){this.open=!1,this.openChange.emit(!1),this.saveCookie()}ngOnInit(){this.restoreCookie()}saveCookie(){this.cookieName?.length&&localStorage.setItem(this.cookieName,JSON.stringify(this.open))}restoreCookie(){if(!this.cookieName?.length)return;const cookie=localStorage.getItem(this.cookieName);this.open=null==cookie||JSON.parse(cookie),this.openChange.emit(this.open)}}_class68=ExpandPanelComponent,defineProperty_defineProperty(ExpandPanelComponent,"fac",(function _class68_Factory(t){return new(t||_class68)})),defineProperty_defineProperty(ExpandPanelComponent,"cmp",core["defineComponent"]({type:_class68,selectors:[["teta-expand-panel"]],contentQueries:function _class68_ContentQueries(rf,ctx,dirIndex){if(1&rf&&(core["contentQuery"](dirIndex,ExpandPanelContentDirective,5),core["contentQuery"](dirIndex,ExpandPanelHeadDirective,5)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.content=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.head=_t.first)}},inputs:{placeholder:"placeholder",open:"open",cookieName:"cookieName",direction:"direction"},outputs:{openChange:"openChange"},decls:2,vars:2,consts:[[4,"ngIf"],[2,"display","flex"],["teta-button","",3,"square","palette","view","click"],[3,"palette","name"],[1,"font-title-2",2,"display","contents"],[4,"ngTemplateOutlet"],[1,"width-10","overflow-hidden",2,"height","100%"],["teta-button","",2,"transform-origin","0 0","transform","rotate(-90deg) translateX(-100%)","margin","6px",3,"palette","view","click"],[1,"font-button-2","nowrap"],[2,"transform-origin","0 0","transform","rotate(-90deg) translateX(-100%)",3,"palette","name"]],template:function _class68_Template(rf,ctx){1&rf&&(core["template"](0,_class68_ng_container_0_Template,7,11,"ng-container",0),core["template"](1,_class68_ng_container_1_Template,6,5,"ng-container",0)),2&rf&&(core["property"]("ngIf",ctx.open),core["advance"](1),core["property"]("ngIf",!ctx.open))},dependencies:[common.NgIf,common.NgTemplateOutlet,ToolbarComponent,ButtonComponent,IconComponent],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;min-width:0;min-height:0;height:100%}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandPanelComponent,[{type:core.Component,args:[{selector:"teta-expand-panel",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-container *ngIf='open'>\n  <teta-toolbar\n    style='display: flex'\n    [style.justifyContent]=\"direction === 'right' ? 'space-between' : 'unset'\"\n    [style.flexDirection]=\"direction === 'right' ? 'row-reverse' : 'row'\">\n    <button\n      teta-button\n      [square]='true'\n      [palette]=\"'text'\"\n      [view]=\"'ghost'\"\n      (click)='closePanel()'\n    >\n      <teta-icon [palette]=\"'text'\" [name]=\"direction === 'right' ? 'start' : 'end'\"></teta-icon>\n    </button>\n    <span class='font-title-2' style='display: contents'>\n      <ng-container *ngTemplateOutlet='head?.template'></ng-container>\n    </span>\n  </teta-toolbar>\n  <ng-container *ngTemplateOutlet='content?.template'></ng-container>\n</ng-container>\n<ng-container *ngIf='!open'>\n  <div class='width-10 overflow-hidden' style='height: 100%;'>\n    <button\n      teta-button\n      style='\n        transform-origin: 0 0;\n        transform: rotate(-90deg) translateX(-100%);\n        margin: 6px;\n      '\n      [palette]=\"'text'\"\n      [view]=\"'ghost'\"\n      (click)='openPanel()'\n    >\n      <div class='font-button-2 nowrap'>{{ placeholder }}</div>\n      <teta-icon style='transform-origin: 0 0;transform: rotate(-90deg) translateX(-100%);'\n                 [palette]=\"'text'\" [name]=\"direction === 'right' ? 'start' : 'end'\"></teta-icon>\n    </button>\n  </div>\n</ng-container>\n",styles:[":host{display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;min-width:0;min-height:0;height:100%}\n"]}]}],(function(){return[]}),{content:[{type:core.ContentChild,args:[ExpandPanelContentDirective,{static:!1}]}],head:[{type:core.ContentChild,args:[ExpandPanelHeadDirective,{static:!1}]}],placeholder:[{type:core.Input}],open:[{type:core.Input}],openChange:[{type:core.Output}],cookieName:[{type:core.Input}],direction:[{type:core.Input}]});class ExpandPanelModule{}_class69=ExpandPanelModule,defineProperty_defineProperty(ExpandPanelModule,"fac",(function _class69_Factory(t){return new(t||_class69)})),defineProperty_defineProperty(ExpandPanelModule,"mod",core["defineNgModule"]({type:_class69,declarations:[ExpandPanelComponent,ExpandPanelHeadDirective,ExpandPanelContentDirective],imports:[common.CommonModule,DelimiterModule,ToolbarModule,ButtonModule,IconModule],exports:[ExpandPanelComponent,ExpandPanelHeadDirective,ExpandPanelContentDirective]})),defineProperty_defineProperty(ExpandPanelModule,"inj",core["defineInjector"]({imports:[common.CommonModule,DelimiterModule,ToolbarModule,ButtonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ExpandPanelModule,[{type:core.NgModule,args:[{declarations:[ExpandPanelComponent,ExpandPanelHeadDirective,ExpandPanelContentDirective],exports:[ExpandPanelComponent,ExpandPanelHeadDirective,ExpandPanelContentDirective],imports:[common.CommonModule,DelimiterModule,ToolbarModule,ButtonModule,IconModule]}]}],null,null);class FileUploadAreaComponent{constructor(){defineProperty_defineProperty(this,"fileUpload",!0),defineProperty_defineProperty(this,"multiple",!0),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"accept",[]),defineProperty_defineProperty(this,"upload",new core.EventEmitter),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"buttonTemplate",void 0),defineProperty_defineProperty(this,"files",void 0),defineProperty_defineProperty(this,"_asActive",!1)}get fileUploadActive(){return this._asActive}dragEnter(event){this.preventDefaults(event),this._asActive=!0}dragOver(event){this.preventDefaults(event),this._asActive=!0}dragLeave(event){this.preventDefaults(event),this._asActive=!1}drop(event){this.upload.emit(event.dataTransfer?.files),this.preventDefaults(event)}fileChanged(event){event.target&&event.target.files&&(this.upload.emit(event.target.files),this.input&&(this.input.nativeElement.value=null))}preventDefaults(event){event.preventDefault(),event.stopPropagation()}}_class70=FileUploadAreaComponent,defineProperty_defineProperty(FileUploadAreaComponent,"fac",(function _class70_Factory(t){return new(t||_class70)})),defineProperty_defineProperty(FileUploadAreaComponent,"cmp",core["defineComponent"]({type:_class70,selectors:[["teta-file-upload-area"]],contentQueries:function _class70_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,_c24,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.buttonTemplate=_t.first)}},viewQuery:function _class70_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c25,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},hostVars:4,hostBindings:function _class70_HostBindings(rf,ctx){1&rf&&core["listener"]("dragenter",(function _class70_dragenter_HostBindingHandler($event){return ctx.dragEnter($event)}))("dragover",(function _class70_dragover_HostBindingHandler($event){return ctx.dragOver($event)}))("dragleave",(function _class70_dragleave_HostBindingHandler($event){return ctx.dragLeave($event)}))("drop",(function _class70_drop_HostBindingHandler($event){return ctx.drop($event)})),2&rf&&core["classProp"]("file-upload",ctx.fileUpload)("file-upload_active",ctx.fileUploadActive)},inputs:{multiple:"multiple",disabled:"disabled",accept:"accept"},outputs:{upload:"upload"},ngContentSelectors:_c0,decls:7,vars:4,consts:[[1,"file-upload-label"],["id","upload-input","type","file","name","fileUpload",1,"file-upload-input",3,"disabled","change"],["fileUpload",""],[3,"ngTemplateOutlet"],["defaultTemplate",""],["type","button",3,"palette"],[3,"name","palette"]],template:function _class70_Template(rf,ctx){if(1&rf&&(core["projectionDef"](),core["projection"](0),core["elementStart"](1,"label",0)(2,"input",1,2),core["listener"]("change",(function _class70_Template_input_change_2_listener($event){return ctx.fileChanged($event)})),core["elementEnd"](),core["elementContainer"](4,3),core["elementEnd"](),core["template"](5,_class70_ng_template_5_Template,4,6,"ng-template",null,4,core["templateRefExtractor"])),2&rf){const _r1=core["reference"](6);core["advance"](2),core["property"]("disabled",ctx.disabled),core["attribute"]("accept",ctx.accept)("multiple",ctx.multiple?"multiple":null),core["advance"](2),core["property"]("ngTemplateOutlet",ctx.buttonTemplate||_r1)}},dependencies:[common.NgTemplateOutlet,ButtonComponent,IconComponent,ngneat_transloco.Ot],styles:["[_nghost-%COMP%]{display:flex}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FileUploadAreaComponent,[{type:core.Component,args:[{selector:"teta-file-upload-area",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-content></ng-content>\n<label class="file-upload-label">\n  <input #fileUpload\n         id="upload-input"\n         class="file-upload-input"\n         type="file"\n         name="fileUpload"\n         [attr.accept]="accept"\n         [attr.multiple]="multiple ? \'multiple\' : null"\n         [disabled]="disabled"\n         (change)="fileChanged($event)"/>\n  <ng-container\n    [ngTemplateOutlet]="buttonTemplate || defaultTemplate"\n  ></ng-container>\n</label>\n<ng-template #defaultTemplate>\n  <teta-button [palette]="\'primary\'" type="button">\n    <teta-icon [name]="\'search\'" [palette]="\'white\'"></teta-icon>\n    {{\'common.browse\' | transloco}}\n  </teta-button>\n</ng-template>\n',styles:[":host{display:flex}\n"]}]}],null,{fileUpload:[{type:core.HostBinding,args:["class.file-upload"]}],fileUploadActive:[{type:core.HostBinding,args:["class.file-upload_active"]}],multiple:[{type:core.Input}],disabled:[{type:core.Input}],accept:[{type:core.Input}],upload:[{type:core.Output}],input:[{type:core.ViewChild,args:["fileUpload",{static:!1}]}],buttonTemplate:[{type:core.ContentChild,args:["buttonTemplate"]}],dragEnter:[{type:core.HostListener,args:["dragenter",["$event"]]}],dragOver:[{type:core.HostListener,args:["dragover",["$event"]]}],dragLeave:[{type:core.HostListener,args:["dragleave",["$event"]]}],drop:[{type:core.HostListener,args:["drop",["$event"]]}]});class FileItemComponent{constructor(){}ngOnInit(){}}_class71=FileItemComponent,defineProperty_defineProperty(FileItemComponent,"fac",(function _class71_Factory(t){return new(t||_class71)})),defineProperty_defineProperty(FileItemComponent,"cmp",core["defineComponent"]({type:_class71,selectors:[["teta-file-item"]],decls:2,vars:0,template:function _class71_Template(rf,ctx){1&rf&&(core["elementStart"](0,"p"),core["text"](1,"file-item works!"),core["elementEnd"]())},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FileItemComponent,[{type:core.Component,args:[{selector:"teta-file-item",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<p>file-item works!</p>\n"}]}],(function(){return[]}),null);class FileUploadModule{}_class72=FileUploadModule,defineProperty_defineProperty(FileUploadModule,"fac",(function _class72_Factory(t){return new(t||_class72)})),defineProperty_defineProperty(FileUploadModule,"mod",core["defineNgModule"]({type:_class72,declarations:[FileUploadAreaComponent,FileItemComponent],imports:[common.CommonModule,ButtonModule,IconModule,ngneat_transloco.y4],exports:[FileUploadAreaComponent,FileItemComponent]})),defineProperty_defineProperty(FileUploadModule,"inj",core["defineInjector"]({imports:[common.CommonModule,ButtonModule,IconModule,ngneat_transloco.y4]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FileUploadModule,[{type:core.NgModule,args:[{declarations:[FileUploadAreaComponent,FileItemComponent],exports:[FileUploadAreaComponent,FileItemComponent],imports:[common.CommonModule,ButtonModule,IconModule,ngneat_transloco.y4]}]}],null,null);class StringUtil{static firstLetterToLower(input){return input.charAt(0).toLocaleLowerCase()+input.slice(1)}static firstLetterToUpper(input){return input.charAt(0).toLocaleUpperCase()+input.slice(1)}}class FilterBase{constructor(options){defineProperty_defineProperty(this,"field",void 0),defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"value",void 0),options&&(this.field=StringUtil.firstLetterToLower(options.field),this.name=StringUtil.firstLetterToLower(options.name))}}class NumericFilter extends FilterBase{constructor(options){super(options),defineProperty_defineProperty(this,"strict",void 0),this.value=options?.value||this.value,this.strict=options?.strict||!1}}class FilterComponentBase{}class NumericFilterValue{constructor(options){defineProperty_defineProperty(this,"lessThan",void 0),defineProperty_defineProperty(this,"greaterThan",void 0),defineProperty_defineProperty(this,"equalsTo",void 0),options&&(this.lessThan=options.lessThan,this.greaterThan=options.greaterThan,this.equalsTo=options.equalsTo)}}class NumericFilterComponent extends FilterComponentBase{set state(val){this.state$=val,this.filter=this.getFilter(),this.changeDetector.detectChanges()}get state(){return this.state$}constructor(changeDetector,_config){super(),defineProperty_defineProperty(this,"changeDetector",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"filter",void 0),defineProperty_defineProperty(this,"state$",void 0),defineProperty_defineProperty(this,"locale",void 0),this.changeDetector=changeDetector,this._config=_config,this.locale=this._config.locale}ngOnInit(){this.filter=this.getFilter()}getFilter(){let filter=this.state.numericFilters?.find((f=>f.field===this.column.filterField));return null==filter&&(filter=this.state.addNumericFilter(new NumericFilter({value:new NumericFilterValue,field:this.column.filterField,name:this.column.name,strict:!0}))),filter}}_class76=NumericFilterComponent,defineProperty_defineProperty(NumericFilterComponent,"fac",(function _class76_Factory(t){return new(t||_class76)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(NumericFilterComponent,"cmp",core["defineComponent"]({type:_class76,selectors:[["teta-numeric-filter"]],inputs:{column:"column",data:"data",filterOptions:"filterOptions",state:"state"},outputs:{filterChanged:"filterChanged"},features:[core["InheritDefinitionFeature"]],decls:2,vars:3,consts:[["class","form-row padding-3",4,"ngIf"],[1,"form-row","padding-3"],[3,"label"],["type","text",1,"input",2,"width","110px",3,"tetaOnlyNumber","ngModel","ngModelChange"]],template:function _class76_Template(rf,ctx){1&rf&&(core["template"](0,_class76_div_0_Template,5,6,"div",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On,InputComponent,OnlyNumberDirective,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NumericFilterComponent,[{type:core.Component,args:[{selector:"teta-numeric-filter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="form-row padding-3" *ngIf="locale | async as loc">\n  <teta-input [label]="loc.from">\n    <input class="input" type="text"\n           style="width: 110px"\n           [tetaOnlyNumber]="true"\n           [ngModel]="filter.value?.greaterThan"\n           (ngModelChange)="filter.value.greaterThan=$event"/>\n  </teta-input>\n  <teta-input [label]="loc.to">\n    <input class="input" type="text"\n           style="width: 110px"\n           [tetaOnlyNumber]="true"\n           [ngModel]="filter.value?.lessThan"\n           (ngModelChange)="filter.value.lessThan=$event"/>\n  </teta-input>\n</div>\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:TetaConfigService}]}),{column:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}],state:[{type:core.Input}]}),function(StringFilterType){StringFilterType[StringFilterType.Equals=1]="Equals",StringFilterType[StringFilterType.StartsWith=2]="StartsWith",StringFilterType[StringFilterType.EndsWith=3]="EndsWith",StringFilterType[StringFilterType.Contains=4]="Contains"}(StringFilterType||(StringFilterType={}));class StringFilter extends FilterBase{constructor(options){super(options),defineProperty_defineProperty(this,"type",void 0),options&&(this.value=options.value||this.value,this.type=options.type||StringFilterType.Contains)}}class StringFilterComponent extends FilterComponentBase{set state(val){this.state$=val,this.filter=this.getFilter(),this.changeDetector.detectChanges()}get state(){return this.state$}constructor(changeDetector,_config){super(),defineProperty_defineProperty(this,"changeDetector",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"filter",void 0),defineProperty_defineProperty(this,"state$",void 0),defineProperty_defineProperty(this,"locale",void 0),this.changeDetector=changeDetector,this._config=_config,this.locale=this._config.locale}ngOnInit(){}setFilter(){this.filterChanged.emit(this.filter)}getFilter(){let filter=this.state.stringFilters.find((f=>f.field===this.column.filterField));return filter||(filter=this.state.addStringFilter(new StringFilter({value:"",field:this.column.filterField,type:this.column.stringFilterType,name:this.column.name}))),filter.type=this.column.stringFilterType,filter}}_class78=StringFilterComponent,defineProperty_defineProperty(StringFilterComponent,"fac",(function _class78_Factory(t){return new(t||_class78)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(StringFilterComponent,"cmp",core["defineComponent"]({type:_class78,selectors:[["teta-string-filter"]],inputs:{column:"column",data:"data",filterOptions:"filterOptions",state:"state"},outputs:{filterChanged:"filterChanged"},features:[core["InheritDefinitionFeature"]],decls:4,vars:4,consts:[[1,"padding-3"],[3,"label"],["type","text",1,"input",3,"ngModel","ngModelChange","blur","keydown.enter"]],template:function _class78_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",0)(1,"teta-input",1),core["pipe"](2,"async"),core["elementStart"](3,"input",2),core["listener"]("ngModelChange",(function _class78_Template_input_ngModelChange_3_listener($event){return ctx.filter.value=$event}))("blur",(function _class78_Template_input_blur_3_listener(){return ctx.setFilter()}))("keydown.enter",(function _class78_Template_input_keydown_enter_3_listener(){return ctx.setFilter()})),core["elementEnd"]()()()),2&rf){let tmp_0_0;core["advance"](1),core["property"]("label",null==(tmp_0_0=core["pipeBind1"](2,2,ctx.locale))?null:tmp_0_0.search),core["advance"](2),core["property"]("ngModel",ctx.filter.value)}},dependencies:[fesm2022_forms.Fj,fesm2022_forms.JJ,fesm2022_forms.On,InputComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](StringFilterComponent,[{type:core.Component,args:[{selector:"teta-string-filter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="padding-3">\n  <teta-input [label]="(locale | async)?.search">\n    <input type="text" class="input" [(ngModel)]="filter.value" (blur)="setFilter()" (keydown.enter)="setFilter()" />\n  </teta-input>\n</div>\n\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:TetaConfigService}]}),{column:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}],state:[{type:core.Input}]}),function(ListFilterType){ListFilterType[ListFilterType.None=0]="None",ListFilterType[ListFilterType.Excluded=1]="Excluded"}(ListFilterType||(ListFilterType={}));class ListFilter extends FilterBase{constructor(options){super(options),defineProperty_defineProperty(this,"type",void 0),options&&(this.value=options.value||this.value,this.type=options.type||ListFilterType.None)}}class ScrollableDirective{constructor(){defineProperty_defineProperty(this,"hideScrollClass",!0)}}_class80=ScrollableDirective,defineProperty_defineProperty(ScrollableDirective,"fac",(function _class80_Factory(t){return new(t||_class80)})),defineProperty_defineProperty(ScrollableDirective,"dir",core["defineDirective"]({type:_class80,selectors:[["","tetaScrollable",""]],hostVars:2,hostBindings:function _class80_HostBindings(rf,ctx){2&rf&&core["classProp"]("scrollable_hide_scroll",ctx.hideScrollClass)}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollableDirective,[{type:core.Directive,args:[{selector:"[tetaScrollable]"}]}],null,{hideScrollClass:[{type:core.HostBinding,args:["class.scrollable_hide_scroll"]}]});class ScrollableComponent{constructor(_cdr){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_scrollDirective",void 0),defineProperty_defineProperty(this,"_scrollableWrapper",void 0),defineProperty_defineProperty(this,"_scrollbarVertical",void 0),defineProperty_defineProperty(this,"_scrollbarHorizontal",void 0),defineProperty_defineProperty(this,"direction","row"),defineProperty_defineProperty(this,"showScrollbars",!1),defineProperty_defineProperty(this,"contentClass",void 0),defineProperty_defineProperty(this,"scroll",new core.EventEmitter),defineProperty_defineProperty(this,"scrollSize",void 0),defineProperty_defineProperty(this,"_container",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_observer",void 0),defineProperty_defineProperty(this,"_observe",(()=>{this.scrollSize={scrollHeight:this._container.nativeElement.scrollHeight,scrollWidth:this._container.nativeElement.scrollWidth,clientHeight:this._container.nativeElement.clientHeight,clientWidth:this._container.nativeElement.clientWidth},this._cdr.detectChanges()})),this._cdr=_cdr,this._observer=new ResizeObserver(this._observe)}scrollVertical(event){this._container.nativeElement.scrollTop=event.target.scrollTop}scrollHorizontal(event){this._container.nativeElement.scrollLeft=event.target.scrollLeft}ngOnInit(){this._container=this._scrollableWrapper,this._scrollDirective&&(this._container=this._scrollDirective),(0,fromEvent.R)(this._container.nativeElement,"scroll").pipe((0,takeWhile.o)((()=>this._alive)),(0,tap.b)((event=>{this._scrollbarHorizontal.nativeElement.scrollLeft=event.target.scrollLeft,this._scrollbarVertical.nativeElement.scrollTop=event.target.scrollTop,this.scroll.emit(event)}))).subscribe(),this._observer.observe(this._container.nativeElement)}ngOnDestroy(){this._alive=!1,this._observer.unobserve(this._container.nativeElement),this._observer.disconnect()}}_class81=ScrollableComponent,defineProperty_defineProperty(ScrollableComponent,"fac",(function _class81_Factory(t){return new(t||_class81)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(ScrollableComponent,"cmp",core["defineComponent"]({type:_class81,selectors:[["teta-scrollable"]],contentQueries:function _class81_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,ScrollableDirective,7,core.ElementRef),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._scrollDirective=_t.first)}},viewQuery:function _class81_Query(rf,ctx){if(1&rf&&(core["viewQuery"](_c26,7),core["viewQuery"](_c27,7),core["viewQuery"](_c28,7)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._scrollableWrapper=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._scrollbarVertical=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._scrollbarHorizontal=_t.first)}},hostVars:2,hostBindings:function _class81_HostBindings(rf,ctx){2&rf&&core["classProp"]("show-scrollbars",ctx.showScrollbars)},inputs:{direction:"direction",showScrollbars:"showScrollbars",contentClass:"contentClass"},outputs:{scroll:"scroll"},ngContentSelectors:_c0,decls:10,vars:11,consts:[[1,"scroll-controls"],[1,"scroll-scrollbar","scroll-scrollbar-vertical",3,"scroll"],["scrollbarVertical",""],[2,"width","1px"],[1,"scroll-scrollbar","scroll-scrollbar-horizontal",3,"scroll"],["scrollbarHorizontal",""],[2,"height","1px"],[1,"scroll-content-wrapper",3,"ngClass"],["scrollableWrapper",""]],template:function _class81_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0)(1,"div",1,2),core["listener"]("scroll",(function _class81_Template_div_scroll_1_listener($event){return ctx.scrollVertical($event)})),core["element"](3,"div",3),core["elementEnd"](),core["elementStart"](4,"div",4,5),core["listener"]("scroll",(function _class81_Template_div_scroll_4_listener($event){return ctx.scrollHorizontal($event)})),core["element"](6,"div",6),core["elementEnd"]()(),core["elementStart"](7,"div",7,8),core["projection"](9),core["elementEnd"]()),2&rf&&(core["advance"](1),core["classProp"]("display-none",(null==ctx.scrollSize?null:ctx.scrollSize.scrollHeight)<=(null==ctx.scrollSize?null:ctx.scrollSize.clientHeight)),core["advance"](2),core["styleProp"]("height",null==ctx.scrollSize?null:ctx.scrollSize.scrollHeight,"px"),core["advance"](1),core["classProp"]("display-none",(null==ctx.scrollSize?null:ctx.scrollSize.scrollWidth)<=(null==ctx.scrollSize?null:ctx.scrollSize.clientWidth)),core["advance"](2),core["styleProp"]("width",null==ctx.scrollSize?null:ctx.scrollSize.scrollWidth,"px"),core["advance"](1),core["classProp"]("column","column"===ctx.direction),core["property"]("ngClass",ctx.contentClass))},dependencies:[common.NgClass],styles:["[_nghost-%COMP%]{overflow:hidden;position:relative;z-index:0;display:flex}[_nghost-%COMP%]:hover   .scroll-controls[_ngcontent-%COMP%]{opacity:1}.show-scrollbars[_nghost-%COMP%]   .scroll-controls[_ngcontent-%COMP%]{opacity:1}[_nghost-%COMP%]::-webkit-scrollbar{width:0;height:0}.scroll-content-wrapper[_ngcontent-%COMP%]{display:flex;overflow:auto;flex-grow:1}.scroll-content-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{width:0;height:0}.scroll-content[_ngcontent-%COMP%]{position:relative;z-index:0;flex:1;display:flex;height:auto;min-width:0}.scroll-controls[_ngcontent-%COMP%]{position:absolute;inset:0;z-index:1;pointer-events:none;opacity:0;transition:opacity .5s linear}.scroll-scrollbar[_ngcontent-%COMP%]{position:absolute;overflow:auto;pointer-events:auto}.scroll-scrollbar-vertical[_ngcontent-%COMP%]{right:0;top:0;bottom:12px;width:12px}.scroll-scrollbar-horizontal[_ngcontent-%COMP%]{right:12px;left:0;bottom:0;height:12px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollableComponent,[{type:core.Component,args:[{selector:"teta-scrollable",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="scroll-controls">\n  <div #scrollbarVertical\n       [class.display-none]="scrollSize?.scrollHeight <= scrollSize?.clientHeight"\n       class="scroll-scrollbar scroll-scrollbar-vertical"\n       (scroll)="scrollVertical($event)">\n    <div [style.height.px]="scrollSize?.scrollHeight" style="width: 1px;"></div>\n  </div>\n  <div #scrollbarHorizontal\n       [class.display-none]="scrollSize?.scrollWidth <= scrollSize?.clientWidth"\n       class="scroll-scrollbar scroll-scrollbar-horizontal"\n       (scroll)="scrollHorizontal($event)">\n    <div [style.width.px]="scrollSize?.scrollWidth" style="height: 1px;"></div>\n  </div>\n</div>\n\n\n\x3c!--<div #scrollableWrapper class="scroll-content-wrapper">--\x3e\n\x3c!--  <div class="scroll-content"--\x3e\n\x3c!--       [class.column]="direction === \'column\'">--\x3e\n\x3c!--    &lt;!&ndash;  <div class="scroll-content">&ndash;&gt;--\x3e\n\x3c!--    <ng-content></ng-content>--\x3e\n\x3c!--  </div>--\x3e\n\x3c!--</div>--\x3e\n<div #scrollableWrapper class="scroll-content-wrapper"\n     [ngClass]="contentClass"\n     [class.column]="direction === \'column\'">\n  <ng-content></ng-content>\n</div>\n',styles:[":host{overflow:hidden;position:relative;z-index:0;display:flex}:host:hover .scroll-controls{opacity:1}:host.show-scrollbars .scroll-controls{opacity:1}:host::-webkit-scrollbar{width:0;height:0}.scroll-content-wrapper{display:flex;overflow:auto;flex-grow:1}.scroll-content-wrapper::-webkit-scrollbar{width:0;height:0}.scroll-content{position:relative;z-index:0;flex:1;display:flex;height:auto;min-width:0}.scroll-controls{position:absolute;inset:0;z-index:1;pointer-events:none;opacity:0;transition:opacity .5s linear}.scroll-scrollbar{position:absolute;overflow:auto;pointer-events:auto}.scroll-scrollbar-vertical{right:0;top:0;bottom:12px;width:12px}.scroll-scrollbar-horizontal{right:12px;left:0;bottom:0;height:12px}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{_scrollDirective:[{type:core.ContentChild,args:[ScrollableDirective,{static:!0,read:core.ElementRef}]}],_scrollableWrapper:[{type:core.ViewChild,args:["scrollableWrapper",{static:!0}]}],_scrollbarVertical:[{type:core.ViewChild,args:["scrollbarVertical",{static:!0}]}],_scrollbarHorizontal:[{type:core.ViewChild,args:["scrollbarHorizontal",{static:!0}]}],direction:[{type:core.Input}],showScrollbars:[{type:core.Input},{type:core.HostBinding,args:["class.show-scrollbars"]}],contentClass:[{type:core.Input}],scroll:[{type:core.Output}]});class ListFilterComponent extends FilterComponentBase{get visibleOptions(){return this.filterOptions?.filter((option=>option.name?.toLowerCase().toString().indexOf(this.search?.toLowerCase())>=0))}set state(val){this.state$=val,this.filter=this.getFilter(),this.changeDetector.detectChanges()}get state(){return this.state$}constructor(changeDetector,_config){super(),defineProperty_defineProperty(this,"changeDetector",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"filter",void 0),defineProperty_defineProperty(this,"state$",void 0),defineProperty_defineProperty(this,"search",""),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"excluded",void 0),this.changeDetector=changeDetector,this._config=_config,this.locale=this._config.locale}ngOnInit(){}all(){if(!this.filter?.value||0===this.filter?.value?.length)return!1;const notSet=this.visibleOptions?.find((_=>this.filter?.value?.indexOf(_.id)<0));return!notSet||null}setAll(value){value?this.setFilter(this.visibleOptions?.map((_=>_.id))):this.setFilter([])}setType(){this.excluded=!this.excluded,this.filter.type=this.excluded?ListFilterType.Excluded:ListFilterType.None}setFilter(value){this.filter.value=value,this.filterChanged.emit(this.filter)}getFilter(){let filter=this.state.listFilters?.find((f=>f.field===this.column.filterField));return filter||(filter=this.state.addListFilter(new ListFilter({field:this.column.filterField,value:[],type:this.column.listFilterType,name:this.column.name}))),this.excluded=filter.type===ListFilterType.Excluded,filter}}_class82=ListFilterComponent,defineProperty_defineProperty(ListFilterComponent,"fac",(function _class82_Factory(t){return new(t||_class82)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(ListFilterComponent,"cmp",core["defineComponent"]({type:_class82,selectors:[["teta-list-filter"]],inputs:{column:"column",data:"data",filterOptions:"filterOptions",state:"state"},outputs:{filterChanged:"filterChanged"},features:[core["InheritDefinitionFeature"]],decls:9,vars:10,consts:[[1,"padding-2"],[3,"ngModel","ngModelChange"],[1,"column","column_auto",3,"contentClass"],[1,"list-item"],[3,"binary","allowNull","ngModel","ngModelChange"],[1,"list-divider"],["class","list-item",4,"ngFor","ngForOf"],[3,"ngModel","value","binary","ngModelChange"]],template:function _class82_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",0)(1,"teta-text-field",1),core["listener"]("ngModelChange",(function _class82_Template_teta_text_field_ngModelChange_1_listener($event){return ctx.search=$event})),core["elementEnd"]()(),core["elementStart"](2,"teta-scrollable",2)(3,"div",3)(4,"teta-checkbox",4),core["listener"]("ngModelChange",(function _class82_Template_teta_checkbox_ngModelChange_4_listener($event){return ctx.setAll($event)})),core["text"](5),core["pipe"](6,"async"),core["elementEnd"]()(),core["element"](7,"div",5),core["template"](8,_class82_div_8_Template,3,4,"div",6),core["elementEnd"]()),2&rf){let tmp_5_0;core["advance"](1),core["property"]("ngModel",ctx.search),core["advance"](1),core["property"]("contentClass",core["pureFunction0"](9,_c29)),core["advance"](2),core["property"]("binary",!0)("allowNull",!0)("ngModel",ctx.all()),core["advance"](1),core["textInterpolate1"](" ",null==(tmp_5_0=core["pipeBind1"](6,7,ctx.locale))?null:tmp_5_0.all," "),core["advance"](3),core["property"]("ngForOf",ctx.visibleOptions)}},dependencies:[common.NgForOf,fesm2022_forms.JJ,fesm2022_forms.On,TextFieldComponent,CheckboxComponent,ScrollableComponent,common.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;min-height:0;min-width:0}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ListFilterComponent,[{type:core.Component,args:[{selector:"teta-list-filter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="padding-2">\n  <teta-text-field [(ngModel)]="search"></teta-text-field>\n</div>\n<teta-scrollable class="column column_auto" [contentClass]="[\'list\', \'padding-v-2\']">\n  <div class="list-item">\n    <teta-checkbox [binary]="true"\n                   [allowNull]="true"\n                   [ngModel]="all()"\n                   (ngModelChange)="setAll($event)">\n      {{(locale | async)?.all}}\n    </teta-checkbox>\n  </div>\n  <div class="list-divider"></div>\n  <div class="list-item" *ngFor="let option of visibleOptions">\n    <teta-checkbox [ngModel]="filter.value"\n                   (ngModelChange)="setFilter($event)"\n                   [value]="option.id"\n                   [binary]="false">\n      {{option.name}}\n    </teta-checkbox>\n  </div>\n</teta-scrollable>\n',styles:[":host{display:flex;flex-direction:column;flex-grow:1;min-height:0;min-width:0}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef},{type:TetaConfigService}]}),{column:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}],state:[{type:core.Input}]});class DateFilterValue{constructor(options){defineProperty_defineProperty(this,"lessThan",void 0),defineProperty_defineProperty(this,"greaterThan",void 0),options&&(this.lessThan="string"==typeof options.lessThan?new Date(options.lessThan):options.lessThan,this.greaterThan="string"==typeof options.greaterThan?new Date(options.greaterThan):options.greaterThan)}}class DateFilter extends FilterBase{constructor(options){super(options),options&&(this.value=new DateFilterValue(options.value))}}class DateFilterComponent extends FilterComponentBase{set state(val){this.state$=val,this.filter=this.getFilter(),this.changeDetector.detectChanges(),this.changeDetector.markForCheck()}get state(){return this.state$}constructor(changeDetector,_config){super(),defineProperty_defineProperty(this,"changeDetector",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"filter",void 0),defineProperty_defineProperty(this,"state$",void 0),defineProperty_defineProperty(this,"locale",void 0),this.changeDetector=changeDetector,this._config=_config,this.locale=this._config.locale}ngOnInit(){this.filter=this.getFilter()}getFilter(){let filter=this.state.dateFilters.find((f=>f.field===this.column.filterField));return null==filter&&(filter=this.state.addDateFilter(new DateFilter({value:new DateFilterValue,field:this.column.filterField,name:this.column.name}))),filter}}_class84=DateFilterComponent,defineProperty_defineProperty(DateFilterComponent,"fac",(function _class84_Factory(t){return new(t||_class84)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(DateFilterComponent,"cmp",core["defineComponent"]({type:_class84,selectors:[["teta-date-filter"]],inputs:{column:"column",data:"data",filterOptions:"filterOptions",state:"state"},outputs:{filterChanged:"filterChanged"},features:[core["InheritDefinitionFeature"]],decls:2,vars:3,consts:[["class","form-row padding-3",4,"ngIf"],[1,"form-row","padding-3"],[3,"label"],[2,"width","110px",3,"ngModel","appendToBody","ngModelChange"]],template:function _class84_Template(rf,ctx){1&rf&&(core["template"](0,_class84_div_0_Template,5,6,"div",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,fesm2022_forms.JJ,fesm2022_forms.On,DatePickerComponent,InputComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DateFilterComponent,[{type:core.Component,args:[{selector:"teta-date-filter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="form-row padding-3" *ngIf="locale | async as loc">\n  <teta-input [label]="loc.from">\n    <teta-date-picker style="width: 110px"\n                      [ngModel]="filter.value?.greaterThan"\n                      [appendToBody]="false"\n                      (ngModelChange)="filter.value.greaterThan=$event"></teta-date-picker>\n  </teta-input>\n  <teta-input [label]="loc.to">\n    <teta-date-picker style="width: 110px"\n                      [ngModel]="filter.value?.lessThan"\n                      [appendToBody]="false"\n                      (ngModelChange)="filter.value.lessThan=$event"></teta-date-picker>\n  </teta-input>\n</div>\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:TetaConfigService}]}),{column:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}],state:[{type:core.Input}]}),function(FilterType){FilterType[FilterType.string=0]="string",FilterType[FilterType.number=1]="number",FilterType[FilterType.date=2]="date",FilterType[FilterType.list=3]="list",FilterType[FilterType.boolean=4]="boolean",FilterType[FilterType.custom=5]="custom"}(FilterType||(FilterType={}));class BooleanFilter extends FilterBase{constructor(options){super(options),this.value=!!options?.value}}class RadioComponent{set disabled(val){this.disabled$=val,this.buttons$.forEach((b=>b.disabled=this.disabled))}get disabled(){return this.disabled$}get value(){return this.checkedButton$?this.checkedButton$.value:null}set value(val){this.writeValue(val)}constructor(_cdr){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"tabindex",0),defineProperty_defineProperty(this,"radioClass",!0),defineProperty_defineProperty(this,"inline",void 0),defineProperty_defineProperty(this,"checkChangeSelected",!0),defineProperty_defineProperty(this,"buttons$",[]),defineProperty_defineProperty(this,"checkedButton$",void 0),defineProperty_defineProperty(this,"selectedButton$",void 0),defineProperty_defineProperty(this,"disabled$",!1),defineProperty_defineProperty(this,"_onChange",(()=>{})),defineProperty_defineProperty(this,"_onTouched",(()=>{})),this._cdr=_cdr}focusHandler(event){this.selectFirst()}focusoutHandler(event){this.selectedButton$&&(this.selectedButton$.selected=!1,this.selectedButton$=null)}keyEvent(event){switch(event.code||event.key){case"Space":case"Enter":case"Spacebar":this.checkSelected();break;case"ArrowUp":case"Up":case"ArrowLeft":case"Left":this.selectPrevious();break;case"ArrowDown":case"Down":case"ArrowRight":case"Right":this.selectNext();break;default:return}return event.cancelBubble=!0,event.stopPropagation&&event.stopPropagation(),!1}ngOnInit(){}selectFirst(){if(!this.selectedButton$){if(this.checkedButton$)return this.selectedButton$=this.checkedButton$,this.selectedButton$.selected=!0,!0;for(const btn of this.buttons$)if(!btn.disabled)return this.selectedButton$=btn,this.selectedButton$.selected=!0,!0}return!1}_setChecked(btn){this.checkedButton$&&(this.checkedButton$.checked=!1),this.checkedButton$=btn,this.checkedButton$.checked=!0,this.selectedButton$&&(this.selectedButton$.selected=!1),this.selectedButton$=btn,this.selectedButton$.selected=!0,this._onChange(this.value),this._cdr.markForCheck()}_addButton(btn){return this.disabled&&(btn.disabled=this.disabled),this.buttons$.push(btn)-1}_removeButton(btn){const index=this.buttons$.indexOf(btn);index>-1&&this.buttons$.splice(index,1)}writeValue(obj){this.checkedButton$&&(this.checkedButton$.checked=!1),this.checkedButton$=this.buttons$.find((b=>b.value===obj)),this.checkedButton$&&(this.checkedButton$.checked=!0),this._cdr.markForCheck()}registerOnChange(fn){this._onChange=fn}registerOnTouched(fn){this._onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this._cdr.markForCheck()}selectBtn(btn){this.selectedButton$&&(this.selectedButton$.selected=!1),this.selectedButton$=btn,this.selectedButton$.selected=!0,this.checkChangeSelected&&this.checkSelected(),this._cdr.markForCheck()}selectNext(){if(this.selectFirst())return;const length=this.buttons$.length;let newIndex=this.selectedButton$?this.buttons$.indexOf(this.selectedButton$):0,firstCycle=!0;do{newIndex++,firstCycle&&newIndex===length&&(newIndex=0,firstCycle=!1);const btn=this.buttons$[newIndex];if(btn&&!btn.disabled)return void this.selectBtn(btn)}while(newIndex<length)}selectPrevious(){if(this.selectFirst())return;let newIndex=this.selectedButton$?this.buttons$.indexOf(this.selectedButton$):0,firstCycle=!0;do{newIndex--,firstCycle&&-1===newIndex&&(newIndex=this.buttons$.length-1,firstCycle=!1);const btn=this.buttons$[newIndex];if(btn&&!btn.disabled)return void this.selectBtn(btn)}while(newIndex>=0)}checkSelected(){this.selectFirst()||this.selectedButton$&&this._setChecked(this.selectedButton$)}}_class85=RadioComponent,defineProperty_defineProperty(RadioComponent,"fac",(function _class85_Factory(t){return new(t||_class85)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(RadioComponent,"cmp",core["defineComponent"]({type:_class85,selectors:[["teta-radio"]],hostVars:5,hostBindings:function _class85_HostBindings(rf,ctx){1&rf&&core["listener"]("focus",(function _class85_focus_HostBindingHandler($event){return ctx.focusHandler($event)}))("focusout",(function _class85_focusout_HostBindingHandler($event){return ctx.focusoutHandler($event)}))("keydown",(function _class85_keydown_HostBindingHandler($event){return ctx.keyEvent($event)})),2&rf&&(core["hostProperty"]("tabindex",ctx.tabindex),core["classProp"]("radio",ctx.radioClass)("radio_inline",ctx.inline))},inputs:{inline:"inline",checkChangeSelected:"checkChangeSelected",disabled:"disabled",value:"value"},features:[core["ProvidersFeature"]([{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>_class85)),multi:!0}])],ngContentSelectors:_c0,decls:1,vars:0,template:function _class85_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](RadioComponent,[{type:core.Component,args:[{selector:"teta-radio",providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>RadioComponent)),multi:!0}],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>"}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{tabindex:[{type:core.HostBinding,args:["tabindex"]}],radioClass:[{type:core.HostBinding,args:["class.radio"]}],inline:[{type:core.Input},{type:core.HostBinding,args:["class.radio_inline"]}],checkChangeSelected:[{type:core.Input}],disabled:[{type:core.Input}],value:[{type:core.Input}],focusHandler:[{type:core.HostListener,args:["focus",["$event"]]}],focusoutHandler:[{type:core.HostListener,args:["focusout",["$event"]]}],keyEvent:[{type:core.HostListener,args:["keydown",["$event"]]}]});class RadioButtonComponent{set value(val){this._value=val}get value(){return void 0===this._value&&this.container.element.nativeElement instanceof HTMLElement?this.container.element.nativeElement.innerText:this._value}constructor(container,radio){defineProperty_defineProperty(this,"container",void 0),defineProperty_defineProperty(this,"radio",void 0),defineProperty_defineProperty(this,"radioButton",!0),defineProperty_defineProperty(this,"selected",void 0),defineProperty_defineProperty(this,"checked",void 0),defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"_value",void 0),this.container=container,this.radio=radio}hostClick(){this.disabled||this.radio._setChecked(this)}ngOnInit(){this.radio._addButton(this)}ngOnDestroy(){this.radio._removeButton(this)}}_class86=RadioButtonComponent,defineProperty_defineProperty(RadioButtonComponent,"fac",(function _class86_Factory(t){return new(t||_class86)(core["directiveInject"](core.ViewContainerRef),core["directiveInject"](RadioComponent,1))})),defineProperty_defineProperty(RadioButtonComponent,"cmp",core["defineComponent"]({type:_class86,selectors:[["teta-radio-button"]],hostVars:8,hostBindings:function _class86_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class86_click_HostBindingHandler(){return ctx.hostClick()})),2&rf&&core["classProp"]("radio-button",ctx.radioButton)("radio-button-selected",ctx.selected)("radio-button-checked",ctx.checked)("radio-button_disabled",ctx.disabled)},inputs:{checked:"checked",disabled:"disabled",value:"value"},ngContentSelectors:_c0,decls:3,vars:1,consts:[[1,"radio-button-icon"],["class","radio-button-small-icon",4,"ngIf"],[1,"radio-button-small-icon"]],template:function _class86_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0),core["template"](1,_class86_div_1_Template,1,0,"div",1),core["elementEnd"](),core["projection"](2)),2&rf&&(core["advance"](1),core["property"]("ngIf",ctx.checked))},dependencies:[common.NgIf],encapsulation:2})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](RadioButtonComponent,[{type:core.Component,args:[{selector:"teta-radio-button",encapsulation:core.ViewEncapsulation.None,template:'<div class="radio-button-icon">\n  <div *ngIf="checked" class="radio-button-small-icon"></div>\n</div>\n<ng-content></ng-content>\n'}]}],(function(){return[{type:core.ViewContainerRef},{type:RadioComponent,decorators:[{type:core.Host}]}]}),{radioButton:[{type:core.HostBinding,args:["class.radio-button"]}],selected:[{type:core.HostBinding,args:["class.radio-button-selected"]}],checked:[{type:core.Input},{type:core.HostBinding,args:["class.radio-button-checked"]}],disabled:[{type:core.Input},{type:core.HostBinding,args:["class.radio-button_disabled"]}],value:[{type:core.Input}],hostClick:[{type:core.HostListener,args:["click"]}]});class BooleanFilterComponent extends FilterComponentBase{set state(val){this.state$=val,this.filter=this.getFilter(),this.changeDetector.detectChanges()}get state(){return this.state$}constructor(changeDetector,_config){super(),defineProperty_defineProperty(this,"changeDetector",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"filter",void 0),defineProperty_defineProperty(this,"state$",void 0),defineProperty_defineProperty(this,"locale",void 0),this.changeDetector=changeDetector,this._config=_config,this.locale=this._config.locale}ngOnInit(){}setFilter(){this.filterChanged.emit(this.filter)}getFilter(){let filter=this.state.booleanFilters.find((f=>f.field===this.column.filterField));return filter||(filter=this.state.addBooleanFilter(new BooleanFilter({value:null,field:this.column.filterField,name:this.column.name}))),filter}}_class87=BooleanFilterComponent,defineProperty_defineProperty(BooleanFilterComponent,"fac",(function _class87_Factory(t){return new(t||_class87)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(BooleanFilterComponent,"cmp",core["defineComponent"]({type:_class87,selectors:[["teta-boolean-filter"]],inputs:{column:"column",data:"data",filterOptions:"filterOptions",state:"state"},outputs:{filterChanged:"filterChanged"},features:[core["InheritDefinitionFeature"]],decls:2,vars:3,consts:[["class","padding-3",4,"ngIf"],[1,"padding-3"],[3,"ngModel","ngModelChange"],[3,"value"]],template:function _class87_Template(rf,ctx){1&rf&&(core["template"](0,_class87_div_0_Template,8,7,"div",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,fesm2022_forms.JJ,fesm2022_forms.On,RadioComponent,RadioButtonComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](BooleanFilterComponent,[{type:core.Component,args:[{selector:"teta-boolean-filter",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="padding-3" *ngIf="locale | async as loc">\n  <teta-radio [ngModel]="filter.value" (ngModelChange)="setFilter()">\n    <teta-radio-button [value]="null">{{loc?.notSelected}}</teta-radio-button>\n    <teta-radio-button [value]="true">{{loc?.yes}}</teta-radio-button>\n    <teta-radio-button [value]="false">{{loc?.no}}</teta-radio-button>\n  </teta-radio>\n</div>\n'}]}],(function(){return[{type:core.ChangeDetectorRef},{type:TetaConfigService}]}),{column:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}],state:[{type:core.Input}]});const filterComponentsMap=(new Map).set(FilterType.number,NumericFilterComponent).set(FilterType.date,DateFilterComponent).set(FilterType.list,ListFilterComponent).set(FilterType.string,StringFilterComponent).set(FilterType.boolean,BooleanFilterComponent).set(FilterType.custom,StringFilterComponent);class FilterHostComponent{set column(val){this._column=val,this._init&&(this._componentRef.instance.filterField=this._column,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}set state(val){this._state=val,this._init&&(this._componentRef.instance.state=this._state,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}set data(data){this._data=data,this._init&&(this._componentRef.instance.data=this._data,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}set filterOptions(val){this._filterOptions=val,this._init&&(this._componentRef.instance.filterOptions=this._filterOptions,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}constructor(viewContainerRef){defineProperty_defineProperty(this,"viewContainerRef",void 0),defineProperty_defineProperty(this,"filterChanged",new core.EventEmitter),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_column",void 0),defineProperty_defineProperty(this,"_state",void 0),defineProperty_defineProperty(this,"_data",void 0),defineProperty_defineProperty(this,"_filterOptions",void 0),defineProperty_defineProperty(this,"_componentRef",void 0),defineProperty_defineProperty(this,"_init",void 0),this.viewContainerRef=viewContainerRef}ngOnInit(){var item;FilterComponentBase.isPrototypeOf(this._column.filterComponent)||(this._column.filterComponent=(item=this._column,filterComponentsMap.has(item.filterType)?filterComponentsMap.get(item.filterType):StringFilterComponent)),this._componentRef=this.viewContainerRef.createComponent(this._column.filterComponent),this._componentRef.instance.column=this._column,this._componentRef.instance.state=this._state,this._componentRef.instance.data=this._data,this._componentRef.instance.filterOptions=this._filterOptions,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges(),this._init=!0,this._componentRef.instance.filterChanged.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((filter=>{this.filterChanged.emit(filter)}))}ngOnDestroy(){this._alive=!1}}_class88=FilterHostComponent,defineProperty_defineProperty(FilterHostComponent,"fac",(function _class88_Factory(t){return new(t||_class88)(core["directiveInject"](core.ViewContainerRef))})),defineProperty_defineProperty(FilterHostComponent,"cmp",core["defineComponent"]({type:_class88,selectors:[["teta-filter-host"]],inputs:{column:"column",state:"state",data:"data",filterOptions:"filterOptions"},outputs:{filterChanged:"filterChanged"},decls:0,vars:0,template:function _class88_Template(rf,ctx){},encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FilterHostComponent,[{type:core.Component,args:[{selector:"teta-filter-host",template:"",changeDetection:core.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:core.ViewContainerRef}]}),{column:[{type:core.Input}],state:[{type:core.Input}],data:[{type:core.Input}],filterOptions:[{type:core.Input}],filterChanged:[{type:core.Output}]});class SelectOptionDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class89=SelectOptionDirective,defineProperty_defineProperty(SelectOptionDirective,"fac",(function _class89_Factory(t){return new(t||_class89)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(SelectOptionDirective,"dir",core["defineDirective"]({type:_class89,selectors:[["","tetaSelectOption",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectOptionDirective,[{type:core.Directive,args:[{selector:"[tetaSelectOption]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class SelectValueDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class90=SelectValueDirective,defineProperty_defineProperty(SelectValueDirective,"fac",(function _class90_Factory(t){return new(t||_class90)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(SelectValueDirective,"dir",core["defineDirective"]({type:_class90,selectors:[["","tetaSelectValue",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectValueDirective,[{type:core.Directive,args:[{selector:"[tetaSelectValue]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class HighlightDirective{set tetaHighlight(text){setTimeout((()=>{if(this._initialElement&&(this.elementRef.nativeElement.innerHTML=this._initialElement),!text)return;const searchWithOutRegExp=text.toLowerCase().replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&").split(" ").filter((t=>t.length>0)).join("|");this._initialElement=this.elementRef.nativeElement.innerHTML,this.recursiveReplaceNode(this.elementRef.nativeElement.childNodes,searchWithOutRegExp)}),10)}constructor(elementRef){defineProperty_defineProperty(this,"elementRef",void 0),defineProperty_defineProperty(this,"_initialElement",null),this.elementRef=elementRef}recursiveReplaceNode(nodes,searchWithOutRegExp){let match=!1;const cacheNodes=[];return nodes.forEach((node=>{cacheNodes.push(node)})),cacheNodes.forEach((node=>{3===node.nodeType?node.nodeValue&&node.nodeValue.search(new RegExp(searchWithOutRegExp,"i"))>-1&&(match=!0,this.wrapNode(node,searchWithOutRegExp)):match=this.recursiveReplaceNode(node.childNodes,searchWithOutRegExp)||match})),match}wrapNode(textNode,searchWithOutRegExp){if(!textNode||!textNode.nodeValue)return;const tempDiv=document.createElement("div");tempDiv.innerHTML=textNode.nodeValue.replace(new RegExp(searchWithOutRegExp,"gi"),(match=>`<mark>${match}</mark>`));const parentNode=textNode.parentNode;if(parentNode){for(;tempDiv.firstChild;)parentNode.insertBefore(tempDiv.firstChild,textNode);parentNode.removeChild(textNode)}}}_class91=HighlightDirective,defineProperty_defineProperty(HighlightDirective,"fac",(function _class91_Factory(t){return new(t||_class91)(core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(HighlightDirective,"dir",core["defineDirective"]({type:_class91,selectors:[["","tetaHighlight",""]],inputs:{tetaHighlight:"tetaHighlight"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HighlightDirective,[{type:core.Directive,args:[{selector:"[tetaHighlight]"}]}],(function(){return[{type:core.ElementRef}]}),{tetaHighlight:[{type:core.Input}]});class LetDirective{constructor(viewContainer,templateRef){defineProperty_defineProperty(this,"tetaLet",void 0),viewContainer.createEmbeddedView(templateRef,new LetContext(this))}static ngTemplateContextGuard(_dir,_ctx){return!0}}_class92=LetDirective,defineProperty_defineProperty(LetDirective,"fac",(function _class92_Factory(t){return new(t||_class92)(core["directiveInject"](core.ViewContainerRef),core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(LetDirective,"dir",core["defineDirective"]({type:_class92,selectors:[["","tetaLet",""]],inputs:{tetaLet:"tetaLet"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](LetDirective,[{type:core.Directive,args:[{selector:"[tetaLet]"}]}],(function(){return[{type:core.ViewContainerRef,decorators:[{type:core.Inject,args:[core.ViewContainerRef]}]},{type:core.TemplateRef,decorators:[{type:core.Inject,args:[core.TemplateRef]}]}]}),{tetaLet:[{type:core.Input}]});class LetContext{constructor(internalDirectiveInstance){defineProperty_defineProperty(this,"internalDirectiveInstance",void 0),this.internalDirectiveInstance=internalDirectiveInstance}get $implicit(){return this.internalDirectiveInstance.tetaLet}get tetaLet(){return this.internalDirectiveInstance.tetaLet}}class SelectComponent{set options(options){this._options=options,null!==this._internalValue&&void 0!==this._internalValue&&this.options&&this.getSelectedValue(this._internalValue)}get options(){return this._options}get tabindex(){return this.disabled?null:0}get isDisabled(){return this.disabled}get visibleOptions(){return this.searchText?this.options?.filter((option=>this.getSearchString(option).toLowerCase().indexOf(this.searchText.toLowerCase())>=0)):this.options}constructor(_cdr,_elementRef,_config){defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"multiple",void 0),defineProperty_defineProperty(this,"invalid",void 0),defineProperty_defineProperty(this,"align",Align.minWidth),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"autoClose",!0),defineProperty_defineProperty(this,"autoCloseIgnore",["inside"]),defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"itemSize",32),defineProperty_defineProperty(this,"virtual",void 0),defineProperty_defineProperty(this,"icon",void 0),defineProperty_defineProperty(this,"placeholder",void 0),defineProperty_defineProperty(this,"appendToBody",void 0),defineProperty_defineProperty(this,"allowNull",!0),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"notFoundText",void 0),defineProperty_defineProperty(this,"valueRef",void 0),defineProperty_defineProperty(this,"textRef",void 0),defineProperty_defineProperty(this,"searchRef",void 0),defineProperty_defineProperty(this,"optionDirective",void 0),defineProperty_defineProperty(this,"valueDirective",void 0),defineProperty_defineProperty(this,"open",!1),defineProperty_defineProperty(this,"selectClass",!0),defineProperty_defineProperty(this,"value",void 0),defineProperty_defineProperty(this,"searchText",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"_options",void 0),defineProperty_defineProperty(this,"_internalValue",void 0),defineProperty_defineProperty(this,"onChange",(()=>{})),defineProperty_defineProperty(this,"onTouched",(()=>{})),this._cdr=_cdr,this._elementRef=_elementRef,this._config=_config,this.locale=this._config.locale}clear(){let val;val=!0===this.multiple?[]:null,this.value=val,this.onChange(this.value),this.open=!1,this._cdr.markForCheck(),this._cdr.detectChanges()}clickOption(option,event){!0===this.multiple?(this.value?.length||(this.value=[]),this.value.indexOf(option)>=0?this.removeItem(option):this.value=[...this.value,option],this._internalValue=this.value.map((_=>this.getValue(_))),this.onChange(this._internalValue)):(this.value=option,this._internalValue=this.getValue(this.value),this.onChange(this._internalValue),this.open=!1),this._cdr.markForCheck(),this._cdr.detectChanges()}itemSelected(option){return this.multiple?this.value?.indexOf(option)>=0:this.value===option}removeItemClick(option,event){event.stopPropagation(),this.removeItem(option),this._internalValue=this.value.map((_=>this.getValue(_))),this.onChange(this._internalValue)}removeItem(option){this.value=this.value.filter((_=>_!==option))}search(text){this.searchText=text}getText(option){if(null==option)return"";switch(typeof this.textRef){case"string":return option[this.textRef];case"function":return this.textRef(option);default:return option}}getValue(option){switch(typeof this.valueRef){case"string":return option[this.valueRef];case"function":return this.valueRef(option);default:return option}}getSearchString(option){switch(typeof this.searchRef){case"string":return option[this.searchRef];case"function":return this.searchRef(option);default:return""}}focus(){this._elementRef.nativeElement.focus()}writeValue(value){this._internalValue=value,this.getSelectedValue(value),this._cdr.detectChanges()}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this._cdr.markForCheck()}getSelectedValue(value){this.multiple?this.value=value&&this.options?this.options.filter((option=>value.indexOf(this.getValue(option))>-1)):[]:this.value=this.options&&this.options?.find((option=>this.getValue(option)===value))}}_class94=SelectComponent,defineProperty_defineProperty(SelectComponent,"fac",(function _class94_Factory(t){return new(t||_class94)(core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](core.ElementRef),core["directiveInject"](TetaConfigService))})),defineProperty_defineProperty(SelectComponent,"cmp",core["defineComponent"]({type:_class94,selectors:[["teta-select"]],contentQueries:function _class94_ContentQueries(rf,ctx,dirIndex){if(1&rf&&(core["contentQuery"](dirIndex,SelectOptionDirective,7),core["contentQuery"](dirIndex,SelectValueDirective,7)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.optionDirective=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.valueDirective=_t.first)}},hostVars:9,hostBindings:function _class94_HostBindings(rf,ctx){2&rf&&(core["hostProperty"]("tabindex",ctx.tabindex),core["classProp"]("select_multiple",ctx.multiple)("select_open",ctx.open)("select",ctx.selectClass)("select_disabled",ctx.isDisabled))},inputs:{multiple:"multiple",options:"options",invalid:"invalid",align:"align",verticalAlign:"verticalAlign",autoClose:"autoClose",autoCloseIgnore:"autoCloseIgnore",disabled:"disabled",itemSize:"itemSize",virtual:"virtual",icon:"icon",placeholder:"placeholder",appendToBody:"appendToBody",allowNull:"allowNull",viewType:"viewType",notFoundText:"notFoundText",valueRef:"valueRef",textRef:"textRef",searchRef:"searchRef"},features:[core["ProvidersFeature"]([{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>_class94)),multi:!0}])],decls:2,vars:3,consts:[[4,"tetaLet"],[1,"row","row_auto",3,"align","verticalAlign","autoClose","autoCloseIgnore","open","appendToBody","disabled","viewType","openChange"],["tetaDropdownHead",""],[1,"row_auto","flex","align-center"],["class","margin-right-1",3,"name","palette",4,"ngIf"],["class","placeholder",4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"name","palette"],["tetaDropdownContent","","class","select-body row_auto",3,"click",4,"ngIf"],["notFound",""],["optionDefault",""],["valueDefault",""],[1,"margin-right-1",3,"name","palette"],[1,"placeholder"],["tetaDropdownContent","",1,"select-body","row_auto",3,"click"],[4,"ngIf"],[4,"ngIf","ngIfElse"],["class","row row_auto select-chip-field flex-wrap",4,"ngIf"],[1,"select-search","padding-h-2"],[3,"ngModel","placeholder","leftIconName","ngModelChange"],["class","column column_auto padding-h-2",4,"ngIf","ngIfElse"],["default",""],[3,"click"],[1,"list-divider","margin-bottom-0"],[1,"column","column_auto","padding-h-2"],["tetaScrollable","","minBufferPx","200","maxBufferPx","600",3,"itemSize"],[3,"class","list-item_active","tetaHighlight","click",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize"],[3,"tetaHighlight","click"],[3,"tetaHighlight"],["class","margin-left-2",3,"name","palette",4,"ngIf"],[1,"margin-left-2",3,"name","palette"],[1,"column","column_auto","padding-h-2",3,"contentClass"],[1,"list"],[3,"class","list-item_active","click",4,"ngFor","ngForOf"],[3,"name","palette",4,"ngIf"],[1,"row","row_auto","select-chip-field","flex-wrap"],["class","tag",4,"ngFor","ngForOf"],[1,"tag"],[1,"cursor-pointer",3,"palette","name","click"],[1,"padding-h-3","text-overflow-ellipsis","overflow-hidden","select-not-found-option"],["class","row_auto overflow-hidden text-overflow-ellipsis",4,"ngIf"],[1,"row_auto","overflow-hidden","text-overflow-ellipsis"],[1,"row","row_auto","overflow-hidden","text-overflow-ellipsis"]],template:function _class94_Template(rf,ctx){1&rf&&(core["template"](0,_class94_ng_container_0_Template,15,22,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("tetaLet",core["pipeBind1"](1,1,ctx.locale))},dependencies:[DropdownComponent,DropdownHeadDirective,DropdownContentDirective,common.NgForOf,common.NgIf,common.NgTemplateOutlet,scrolling.xd,scrolling.x0,scrolling.N7,fesm2022_forms.JJ,fesm2022_forms.On,IconComponent,HighlightDirective,TextFieldComponent,LetDirective,ScrollableDirective,ScrollableComponent,common.AsyncPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectComponent,[{type:core.Component,args:[{selector:"teta-select",providers:[{provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>SelectComponent)),multi:!0}],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-container *tetaLet='locale | async as loc'>\n  <teta-dropdown [align]='align'\n                 [verticalAlign]='verticalAlign'\n                 [autoClose]='autoClose'\n                 [autoCloseIgnore]='autoCloseIgnore'\n                 [(open)]='open'\n                 [appendToBody]='appendToBody'\n                 [disabled]='disabled'\n                 [viewType]='viewType'\n                 class='row row_auto'>\n    <div tetaDropdownHead\n         [class]=\"'row row_auto select-head select_'+viewType\"\n         [class.select-head_invalid]='invalid'>\n      <div class='row_auto flex align-center'>\n        <teta-icon *ngIf='icon' [name]='icon' [palette]=\"'text'\" class='margin-right-1'></teta-icon>\n        <span class='placeholder' *ngIf='(value=== null ||value=== undefined || value?.length === 0)&&!multiple'>\n          {{placeholder || loc.notSelected}}\n        </span>\n        <ng-container\n          *ngTemplateOutlet='valueDirective ? valueDirective.template : valueDefault; context: {$implicit: value, value: value}'></ng-container>\n      </div>\n      <teta-icon [name]=\"'arrowDownSmall'\" [palette]=\"'text'\"></teta-icon>\n    </div>\n    <div *ngIf='options?.length'\n         tetaDropdownContent\n         class='select-body row_auto'\n         (click)='$event.preventDefault()'>\n      <ng-container *ngIf='searchRef'>\n        <div class='select-search padding-h-2'>\n          <teta-text-field [ngModel]='searchText'\n                           [class]=\"'select_'+viewType\"\n                           (ngModelChange)='search($event)'\n                           [placeholder]='loc.search'\n                           [leftIconName]=\"'search'\"></teta-text-field>\n        </div>\n      </ng-container>\n      <ng-container *ngIf='visibleOptions?.length;else notFound '>\n        <ng-container *ngIf='!multiple && allowNull'>\n          <div [class]=\"'margin-h-2 list-item list-item_interactive select_'+viewType\"\n               (click)='clear()'>\n            {{loc.notSelected}}\n          </div>\n          <div class='list-divider margin-bottom-0'></div>\n        </ng-container>\n        <teta-scrollable *ngIf='virtual; else default' class='column column_auto padding-h-2'>\n          <cdk-virtual-scroll-viewport tetaScrollable\n                                       [itemSize]='40'\n                                       minBufferPx='200'\n                                       maxBufferPx='600'>\n            <div [class]=\"'list-item list-item_interactive justify-content-between select_'+viewType\"\n                 *cdkVirtualFor='let option of visibleOptions; templateCacheSize: 0;'\n                 [class.list-item_active]='itemSelected(option)'\n                 [tetaHighlight]='searchText'\n                 (click)='clickOption(option, $event)'>\n              <div [tetaHighlight]='searchText'>\n                <ng-container\n                  *ngTemplateOutlet='optionDirective ? optionDirective.template : optionDefault; context: {$implicit: option, option: option}'>\n                </ng-container>\n              </div>\n              <teta-icon *ngIf='itemSelected(option)' [name]=\"'tick'\" [palette]=\"'text'\"\n                         class='margin-left-2'></teta-icon>\n            </div>\n          </cdk-virtual-scroll-viewport>\n        </teta-scrollable>\n        <ng-template #default>\n          <teta-scrollable class='column column_auto padding-h-2' [contentClass]=\"['column', 'column_auto']\">\n            <div class='list'>\n              <div [class]=\"'list-item list-item_interactive justify-content-between  select_'+viewType\"\n                   *ngFor='let option of visibleOptions'\n                   [class.list-item_active]='itemSelected(option)'\n                   (click)='clickOption(option, $event)'>\n              <span [tetaHighlight]='searchText'>\n                <ng-container\n                  *ngTemplateOutlet='optionDirective ? optionDirective.template : optionDefault; context: {$implicit: option, option: option}'>\n                </ng-container>\n              </span>\n                <teta-icon *ngIf='itemSelected(option) && multiple' [name]=\"'tick'\" [palette]=\"'text'\"></teta-icon>\n              </div>\n            </div>\n          </teta-scrollable>\n        </ng-template>\n      </ng-container>\n      <div class='row row_auto select-chip-field flex-wrap' *ngIf='multiple && value?.length'>\n        <div *ngFor='let item of value' class='tag'>\n          <p>{{getText(item)}}</p>\n          <teta-icon class='cursor-pointer' [palette]=\"'text'\" [name]=\"'closeCircle'\"\n                     (click)='removeItemClick(item, $event)'></teta-icon>\n        </div>\n      </div>\n    </div>\n  </teta-dropdown>\n  <ng-template #notFound>\n    <p\n      class='padding-h-3 text-overflow-ellipsis overflow-hidden select-not-found-option'>{{notFoundText || loc.notFound}}</p>\n  </ng-template>\n  <ng-template #optionDefault let-option>\n    {{getText(option)}}\n  </ng-template>\n  <ng-template #valueDefault let-value>\n    <div class='row_auto overflow-hidden text-overflow-ellipsis' *ngIf='multiple'>\n      {{loc.selected + ' ' + value?.length}}\n    </div>\n    <ng-container *ngIf='!multiple'>\n      <span class='row row_auto overflow-hidden text-overflow-ellipsis'>{{getText(value)}}</span>\n    </ng-container>\n  </ng-template>\n</ng-container>\n\n"}]}],(function(){return[{type:core.ChangeDetectorRef},{type:core.ElementRef},{type:TetaConfigService}]}),{multiple:[{type:core.HostBinding,args:["class.select_multiple"]},{type:core.Input}],options:[{type:core.Input}],invalid:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],autoClose:[{type:core.Input}],autoCloseIgnore:[{type:core.Input}],disabled:[{type:core.Input}],itemSize:[{type:core.Input}],virtual:[{type:core.Input}],icon:[{type:core.Input}],placeholder:[{type:core.Input}],appendToBody:[{type:core.Input}],allowNull:[{type:core.Input}],viewType:[{type:core.Input}],notFoundText:[{type:core.Input}],valueRef:[{type:core.Input}],textRef:[{type:core.Input}],searchRef:[{type:core.Input}],optionDirective:[{type:core.ContentChild,args:[SelectOptionDirective,{static:!0}]}],valueDirective:[{type:core.ContentChild,args:[SelectValueDirective,{static:!0}]}],open:[{type:core.HostBinding,args:["class.select_open"]}],selectClass:[{type:core.HostBinding,args:["class.select"]}],tabindex:[{type:core.HostBinding,args:["tabindex"]}],isDisabled:[{type:core.HostBinding,args:["class.select_disabled"]}]});class HighlightModule{}_class95=HighlightModule,defineProperty_defineProperty(HighlightModule,"fac",(function _class95_Factory(t){return new(t||_class95)})),defineProperty_defineProperty(HighlightModule,"mod",core["defineNgModule"]({type:_class95,declarations:[HighlightDirective],imports:[common.CommonModule],exports:[HighlightDirective]})),defineProperty_defineProperty(HighlightModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HighlightModule,[{type:core.NgModule,args:[{declarations:[HighlightDirective],exports:[HighlightDirective],imports:[common.CommonModule]}]}],null,null);class LetModule{}_class96=LetModule,defineProperty_defineProperty(LetModule,"fac",(function _class96_Factory(t){return new(t||_class96)})),defineProperty_defineProperty(LetModule,"mod",core["defineNgModule"]({type:_class96,declarations:[LetDirective],imports:[common.CommonModule],exports:[LetDirective]})),defineProperty_defineProperty(LetModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](LetModule,[{type:core.NgModule,args:[{declarations:[LetDirective],exports:[LetDirective],imports:[common.CommonModule]}]}],null,null);class ScrollableModule{}_class97=ScrollableModule,defineProperty_defineProperty(ScrollableModule,"fac",(function _class97_Factory(t){return new(t||_class97)})),defineProperty_defineProperty(ScrollableModule,"mod",core["defineNgModule"]({type:_class97,declarations:[ScrollableDirective,ScrollableComponent],imports:[common.CommonModule,LetModule],exports:[ScrollableDirective,ScrollableComponent]})),defineProperty_defineProperty(ScrollableModule,"inj",core["defineInjector"]({imports:[common.CommonModule,LetModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ScrollableModule,[{type:core.NgModule,args:[{declarations:[ScrollableDirective,ScrollableComponent],exports:[ScrollableDirective,ScrollableComponent],imports:[common.CommonModule,LetModule]}]}],null,null);class SelectModule{}_class98=SelectModule,defineProperty_defineProperty(SelectModule,"fac",(function _class98_Factory(t){return new(t||_class98)})),defineProperty_defineProperty(SelectModule,"mod",core["defineNgModule"]({type:_class98,declarations:[SelectComponent,SelectOptionDirective,SelectValueDirective],imports:[DropdownModule,common.CommonModule,scrolling.Cl,fesm2022_forms.u5,IconModule,HighlightModule,InputModule,LetModule,ScrollableModule],exports:[SelectComponent,SelectOptionDirective,SelectValueDirective]})),defineProperty_defineProperty(SelectModule,"inj",core["defineInjector"]({imports:[DropdownModule,common.CommonModule,scrolling.Cl,fesm2022_forms.u5,IconModule,HighlightModule,InputModule,LetModule,ScrollableModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectModule,[{type:core.NgModule,args:[{declarations:[SelectComponent,SelectOptionDirective,SelectValueDirective],exports:[SelectComponent,SelectOptionDirective,SelectValueDirective],imports:[DropdownModule,common.CommonModule,scrolling.Cl,fesm2022_forms.u5,IconModule,HighlightModule,InputModule,LetModule,ScrollableModule]}]}],null,null);class RadioModule{}_class99=RadioModule,defineProperty_defineProperty(RadioModule,"fac",(function _class99_Factory(t){return new(t||_class99)})),defineProperty_defineProperty(RadioModule,"mod",core["defineNgModule"]({type:_class99,declarations:[RadioComponent,RadioButtonComponent],imports:[common.CommonModule,fesm2022_forms.u5],exports:[RadioComponent,RadioButtonComponent]})),defineProperty_defineProperty(RadioModule,"inj",core["defineInjector"]({imports:[common.CommonModule,fesm2022_forms.u5]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](RadioModule,[{type:core.NgModule,args:[{declarations:[RadioComponent,RadioButtonComponent],exports:[RadioComponent,RadioButtonComponent],imports:[common.CommonModule,fesm2022_forms.u5]}]}],null,null);class FilterModule{}_class100=FilterModule,defineProperty_defineProperty(FilterModule,"fac",(function _class100_Factory(t){return new(t||_class100)})),defineProperty_defineProperty(FilterModule,"mod",core["defineNgModule"]({type:_class100,declarations:[NumericFilterComponent,StringFilterComponent,ListFilterComponent,DateFilterComponent,FilterHostComponent,BooleanFilterComponent],imports:[common.CommonModule,SelectModule,fesm2022_forms.u5,DatePickerModule,RadioModule,InputModule,CheckboxModule,OnlyNumberModule,ScrollableModule],exports:[NumericFilterComponent,StringFilterComponent,ListFilterComponent,DateFilterComponent,FilterHostComponent,BooleanFilterComponent]})),defineProperty_defineProperty(FilterModule,"inj",core["defineInjector"]({imports:[common.CommonModule,SelectModule,fesm2022_forms.u5,DatePickerModule,RadioModule,InputModule,CheckboxModule,OnlyNumberModule,ScrollableModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FilterModule,[{type:core.NgModule,args:[{declarations:[NumericFilterComponent,StringFilterComponent,ListFilterComponent,DateFilterComponent,FilterHostComponent,BooleanFilterComponent],exports:[NumericFilterComponent,StringFilterComponent,ListFilterComponent,DateFilterComponent,FilterHostComponent,BooleanFilterComponent],imports:[common.CommonModule,SelectModule,fesm2022_forms.u5,DatePickerModule,RadioModule,InputModule,CheckboxModule,OnlyNumberModule,ScrollableModule]}]}],null,null);class FilterItem{constructor(options){defineProperty_defineProperty(this,"sortOrder",Number.MAX_VALUE),defineProperty_defineProperty(this,"caption",void 0),defineProperty_defineProperty(this,"hint",void 0),defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"sortable",!0),defineProperty_defineProperty(this,"filterable",!0),defineProperty_defineProperty(this,"sortField",void 0),defineProperty_defineProperty(this,"filterField",void 0),defineProperty_defineProperty(this,"filterType",void 0),defineProperty_defineProperty(this,"stringFilterType",void 0),defineProperty_defineProperty(this,"listFilterType",void 0),defineProperty_defineProperty(this,"strict",void 0),defineProperty_defineProperty(this,"filterComponent",void 0),defineProperty_defineProperty(this,"columns",void 0),this.sortOrder=options?.sortOrder??Number.MAX_VALUE,this.name=options?.name??"",this.caption=options?.caption??this.name,this.hint=options?.hint??"",this.sortable=options?.sortable??!0,this.filterable=options?.filterable??!0,this.sortField=StringUtil.firstLetterToLower(options?.sortField??this.name),this.filterField=StringUtil.firstLetterToLower(options?.filterField??this.name),this.filterType=options?.filterType,this.stringFilterType=options?.stringFilterType??StringFilterType.Contains,this.listFilterType=options?.listFilterType??ListFilterType.None,this.strict=options?.strict??!1,this.filterComponent=options?.filterComponent,this.columns=options?.columns?.map((_=>new FilterItem(_)))??[]}}class SortParam{constructor(options){defineProperty_defineProperty(this,"field",void 0),defineProperty_defineProperty(this,"asc",void 0),defineProperty_defineProperty(this,"order",void 0),options&&(this.field=StringUtil.firstLetterToLower(options.field||this.field),this.asc=options.asc||!1,this.order=options.order||this.order)}}class FilterState{constructor(options){defineProperty_defineProperty(this,"stringFilters",[]),defineProperty_defineProperty(this,"numericFilters",[]),defineProperty_defineProperty(this,"dateFilters",[]),defineProperty_defineProperty(this,"listFilters",[]),defineProperty_defineProperty(this,"booleanFilters",[]),defineProperty_defineProperty(this,"sortParams",[]),options&&(options.stringFilters&&options.stringFilters.length&&(this.stringFilters=options.stringFilters.map((x=>new StringFilter(x)))),options.booleanFilters&&options.booleanFilters.length&&(this.booleanFilters=options.booleanFilters.map((x=>new BooleanFilter(x)))),options.numericFilters&&options.numericFilters.length&&(this.numericFilters=options.numericFilters.map((x=>new NumericFilter(x)))),options.dateFilters&&options.dateFilters.length&&(this.dateFilters=options.dateFilters.map((x=>new DateFilter(x)))),options.listFilters&&options.listFilters.length&&(this.listFilters=options.listFilters.map((x=>new ListFilter(x)))),options.sortParams&&options.sortParams.length&&(this.sortParams=options.sortParams.map((x=>new SortParam(x)))))}static restore(cookie){const state=localStorage.getItem(cookie)||"null";return JSON.parse(state)}save(cookieName){cookieName&&localStorage.setItem(cookieName,JSON.stringify(this))}addListFilter(value){null!==this.listFilters&&void 0!==this.listFilters||(this.listFilters=[]);const filter=this.listFilters.find((f=>f.field===value.field));return null==filter?(this.listFilters.push(value),value):(filter.value=value.value,filter)}addDateFilter(value){null!==this.dateFilters&&void 0!==this.dateFilters||(this.dateFilters=[]);const filter=this.dateFilters.find((f=>f.field===value.field));return null==filter?(this.dateFilters.push(value),value):(filter.value=value.value,filter)}addStringFilter(value){null!==this.stringFilters&&void 0!==this.stringFilters||(this.stringFilters=[]);const filter=this.stringFilters.find((f=>f.field===value.field));return null==filter?(this.stringFilters.push(value),value):(filter.value=value.value,filter)}addBooleanFilter(value){null!==this.booleanFilters&&void 0!==this.booleanFilters||(this.booleanFilters=[]);const filter=this.booleanFilters.find((f=>f.field===value.field));return null==filter?(this.booleanFilters.push(value),value):(filter.value=value.value,filter)}addNumericFilter(value){null!==this.numericFilters&&void 0!==this.numericFilters||(this.numericFilters=[]);const filter=this.numericFilters.find((f=>f.field===value.field));return null==filter?(this.numericFilters.push(value),value):(filter.value=value.value,filter)}clear(){this.sortParams.length=0,this.stringFilters.map((f=>{f.value=""})),this.booleanFilters.map((f=>{f.value=null})),this.dateFilters.map((f=>{f.value=new DateFilterValue({lessThan:null,greaterThan:null})})),this.numericFilters.map((f=>{f.value=new NumericFilterValue({lessThan:null,greaterThan:null,equalsTo:null})})),this.listFilters.map((f=>{f.value=[],f.type=ListFilterType.None}))}}class IconFileComponent{get getClass(){return[this.class,"icon icon-file"].join(" ")}constructor(){defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"class",void 0)}ngOnInit(){}getName(){return`#${this.name}`}}_class104=IconFileComponent,defineProperty_defineProperty(IconFileComponent,"fac",(function _class104_Factory(t){return new(t||_class104)})),defineProperty_defineProperty(IconFileComponent,"cmp",core["defineComponent"]({type:_class104,selectors:[["teta-icon-file"]],hostVars:2,hostBindings:function _class104_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.getClass)},inputs:{name:"name",class:"class"},decls:2,vars:1,consts:[[1,"icon__image"]],template:function _class104_Template(rf,ctx){1&rf&&(core["namespaceSVG"](),core["elementStart"](0,"svg",0),core["element"](1,"use"),core["elementEnd"]()),2&rf&&(core["advance"](1),core["attribute"]("href",ctx.getName(),null,"xlink"))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconFileComponent,[{type:core.Component,args:[{selector:"teta-icon-file",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<svg class="icon__image">\n  <use [attr.xlink:href]="getName()"></use>\n</svg>\n'}]}],(function(){return[]}),{name:[{type:core.Input}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}]});class IconFileModule{}_class105=IconFileModule,defineProperty_defineProperty(IconFileModule,"fac",(function _class105_Factory(t){return new(t||_class105)})),defineProperty_defineProperty(IconFileModule,"mod",core["defineNgModule"]({type:_class105,declarations:[IconFileComponent],imports:[common.CommonModule,fesm2022_http.JF],exports:[IconFileComponent]})),defineProperty_defineProperty(IconFileModule,"inj",core["defineInjector"]({imports:[common.CommonModule,fesm2022_http.JF]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](IconFileModule,[{type:core.NgModule,args:[{declarations:[IconFileComponent],exports:[IconFileComponent],imports:[common.CommonModule,fesm2022_http.JF]}]}],null,null);class MessageService{constructor(){defineProperty_defineProperty(this,"message",void 0),defineProperty_defineProperty(this,"clear",void 0),defineProperty_defineProperty(this,"_message",new ReplaySubject.t(1)),defineProperty_defineProperty(this,"_clear",new Subject.x),this.message=this._message.asObservable(),this.clear=this._clear.asObservable()}add(message){message&&this._message.next(message)}addMultiple(messages){messages&&messages.length&&messages.forEach((n=>{this._message.next(n)}))}clearMessages(name){this._clear.next(name)}}_class106=MessageService,defineProperty_defineProperty(MessageService,"fac",(function _class106_Factory(t){return new(t||_class106)})),defineProperty_defineProperty(MessageService,"prov",core["defineInjectable"]({token:_class106,factory:_class106.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MessageService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class MessageComponent{get getClass(){const result=["message"];return this.message.className?.length>0&&result.push(...this.message.className),this.message.palette&&result.push(`message-${this.message.palette}`),result.push("message_"+this.message.viewType),result.join(" ")}constructor(){defineProperty_defineProperty(this,"message",void 0),defineProperty_defineProperty(this,"index",void 0),defineProperty_defineProperty(this,"closed",new core.EventEmitter),defineProperty_defineProperty(this,"class",void 0),defineProperty_defineProperty(this,"timeout",void 0)}init(){this.message.infinite||(this.timeout=setTimeout((()=>{this.closed.emit({index:this.index,message:this.message})}),this.message.duration))}reset(){this.timeout&&(clearTimeout(this.timeout),this.timeout=null)}closeMe(event){this.reset(),this.closed.emit({index:this.index,message:this.message}),event.preventDefault()}ngAfterViewInit(){this.init()}ngOnDestroy(){this.reset()}}_class107=MessageComponent,defineProperty_defineProperty(MessageComponent,"fac",(function _class107_Factory(t){return new(t||_class107)})),defineProperty_defineProperty(MessageComponent,"cmp",core["defineComponent"]({type:_class107,selectors:[["teta-message"]],hostVars:2,hostBindings:function _class107_HostBindings(rf,ctx){1&rf&&core["listener"]("mouseleave",(function _class107_mouseleave_HostBindingHandler(){return ctx.init()}))("mouseenter",(function _class107_mouseenter_HostBindingHandler(){return ctx.reset()})),2&rf&&core["classMap"](ctx.getClass)},inputs:{message:"message",index:"index",class:"class"},outputs:{closed:"closed"},decls:7,vars:6,consts:[[1,"row","align-center","justify-content-between"],[1,"font-title-2","padding-left-4"],["teta-button","","type","button",3,"square","view","click"],[1,"fill-text-90",3,"name"],["class","font-body-3 padding-v-2 padding-left-4",4,"ngIf"],[4,"ngIf"],[1,"font-body-3","padding-v-2","padding-left-4"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function _class107_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0)(1,"div",1),core["text"](2),core["elementEnd"](),core["elementStart"](3,"button",2),core["listener"]("click",(function _class107_Template_button_click_3_listener($event){return ctx.closeMe($event)})),core["element"](4,"teta-icon",3),core["elementEnd"]()(),core["template"](5,_class107_div_5_Template,2,1,"div",4),core["template"](6,_class107_ng_container_6_Template,2,4,"ng-container",5)),2&rf&&(core["advance"](2),core["textInterpolate1"](" ",ctx.message.title," "),core["advance"](1),core["property"]("square",!0)("view","ghost"),core["advance"](1),core["property"]("name","closeBig"),core["advance"](1),core["property"]("ngIf",!ctx.message.template&&ctx.message.text),core["advance"](1),core["property"]("ngIf",ctx.message.template))},dependencies:[common.NgIf,common.NgTemplateOutlet,IconComponent,ButtonComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MessageComponent,[{type:core.Component,args:[{selector:"teta-message",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="row align-center justify-content-between">\n  <div class="font-title-2 padding-left-4">\n    {{message.title}}\n  </div>\n  <button teta-button\n          type="button"\n          [square]="true"\n          [view]="\'ghost\'"\n          (click)="closeMe($event)">\n    <teta-icon class="fill-text-90" [name]="\'closeBig\'"></teta-icon>\n  </button>\n</div>\n<div class="font-body-3 padding-v-2 padding-left-4" *ngIf="!message.template && message.text">\n  {{message.text}}\n</div>\n<ng-container *ngIf="message.template">\n  <ng-container *ngTemplateOutlet="message.template; context: {$implicit: message}"></ng-container>\n</ng-container>\n'}]}],(function(){return[]}),{message:[{type:core.Input}],index:[{type:core.Input}],closed:[{type:core.Output}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}],init:[{type:core.HostListener,args:["mouseleave"]}],reset:[{type:core.HostListener,args:["mouseenter"]}]});class MessageHostComponent{get getClass(){const result=[this.class,"message-host"];return this._alignMap.has(this.align)&&result.push(this._alignMap.get(this.align)),this._valignMap.has(this.verticalAlign)&&result.push(this._valignMap.get(this.verticalAlign)),result.join(" ")}constructor(_svc,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"class",void 0),defineProperty_defineProperty(this,"align",Align.right),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.bottom),defineProperty_defineProperty(this,"itemClose",new core.EventEmitter),defineProperty_defineProperty(this,"messages",[]),defineProperty_defineProperty(this,"_alignMap",(new Map).set(Align.right,"message-host_right").set(Align.left,"message-host_left").set(Align.center,"message-host_center")),defineProperty_defineProperty(this,"_valignMap",(new Map).set(VerticalAlign.top,"message-host_top").set(VerticalAlign.center,"message-host_vertical-center").set(VerticalAlign.bottom,"message-host_bottom")),defineProperty_defineProperty(this,"_alive",!0),this._svc=_svc,this._cdr=_cdr}ngOnInit(){this._svc.message.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((messages=>{messages&&(this.messages||(this.messages=[]),this.messages.push(messages)),this._cdr.markForCheck()})),this._svc.clear.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((x=>{this.messages=x?this.messages?.filter((_=>_.name!==x)):[],this._cdr.markForCheck()}))}closedItem(event){this.messages.splice(event.index,1),this.itemClose.emit({message:event.message})}ngOnDestroy(){this._alive=!1}}_class108=MessageHostComponent,defineProperty_defineProperty(MessageHostComponent,"fac",(function _class108_Factory(t){return new(t||_class108)(core["directiveInject"](MessageService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(MessageHostComponent,"cmp",core["defineComponent"]({type:_class108,selectors:[["teta-message-host"]],hostVars:2,hostBindings:function _class108_HostBindings(rf,ctx){2&rf&&core["classMap"](ctx.getClass)},inputs:{class:"class",align:"align",verticalAlign:"verticalAlign"},outputs:{itemClose:"itemClose"},decls:1,vars:1,consts:[[3,"message","index","closed",4,"ngFor","ngForOf"],[3,"message","index","closed"]],template:function _class108_Template(rf,ctx){1&rf&&core["template"](0,_class108_teta_message_0_Template,1,2,"teta-message",0),2&rf&&core["property"]("ngForOf",ctx.messages)},dependencies:[common.NgForOf,MessageComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MessageHostComponent,[{type:core.Component,args:[{selector:"teta-message-host",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-message\n  *ngFor="let message of messages; let i=index"\n  (closed)="closedItem($event)"\n  [message]="message"\n  [index]="i">\n</teta-message>\n'}]}],(function(){return[{type:MessageService},{type:core.ChangeDetectorRef}]}),{class:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],itemClose:[{type:core.Output}],getClass:[{type:core.HostBinding,args:["class"]}]});class MessageModule{}_class109=MessageModule,defineProperty_defineProperty(MessageModule,"fac",(function _class109_Factory(t){return new(t||_class109)})),defineProperty_defineProperty(MessageModule,"mod",core["defineNgModule"]({type:_class109,declarations:[MessageHostComponent,MessageComponent],imports:[common.CommonModule,IconModule,ButtonModule],exports:[MessageHostComponent,MessageComponent]})),defineProperty_defineProperty(MessageModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule,ButtonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MessageModule,[{type:core.NgModule,args:[{declarations:[MessageHostComponent,MessageComponent],exports:[MessageHostComponent,MessageComponent],imports:[common.CommonModule,IconModule,ButtonModule]}]}],null,null);var ModalCloseReason;!function(ModalCloseReason){ModalCloseReason[ModalCloseReason.resolve=0]="resolve",ModalCloseReason[ModalCloseReason.exit=1]="exit",ModalCloseReason[ModalCloseReason.backdrop=2]="backdrop",ModalCloseReason[ModalCloseReason.esc=3]="esc"}(ModalCloseReason||(ModalCloseReason={}));class ModalContainerComponent{get classList(){const classList=["modal__window"];return this.config&&(this.config&&this.config.class&&classList.push(...this.config.class),this.config.backdrop&&classList.push("modal__backdrop")),classList.join(" ")}constructor(elRef$){defineProperty_defineProperty(this,"elRef$",void 0),defineProperty_defineProperty(this,"config",void 0),defineProperty_defineProperty(this,"closeEvent",new core.EventEmitter),defineProperty_defineProperty(this,"tabindex",-1),defineProperty_defineProperty(this,"dialog",!0),this.elRef$=elRef$}keyup(event){if(this.config&&this.config.esc&&!event.defaultPrevented){const key=event.key||event.keyCode;"Escape"!==key&&"Esc"!==key&&27!==key||this.closeEvent.emit({reason:ModalCloseReason.esc})}}click(event){!0===this.config.closeOnBackdropClick&&this.elRef$.nativeElement===event.target&&this.closeEvent.emit({reason:ModalCloseReason.backdrop})}}_class111=ModalContainerComponent,defineProperty_defineProperty(ModalContainerComponent,"fac",(function _class111_Factory(t){return new(t||_class111)(core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(ModalContainerComponent,"cmp",core["defineComponent"]({type:_class111,selectors:[["teta-modal-container"]],hostVars:4,hostBindings:function _class111_HostBindings(rf,ctx){1&rf&&core["listener"]("keyup",(function _class111_keyup_HostBindingHandler($event){return ctx.keyup($event)}))("click",(function _class111_click_HostBindingHandler($event){return ctx.click($event)})),2&rf&&(core["attribute"]("tabindex",ctx.tabindex),core["syntheticHostProperty"]("@dialog",ctx.dialog),core["classMap"](ctx.classList))},inputs:{config:"config"},outputs:{closeEvent:"closeEvent"},ngContentSelectors:_c0,decls:2,vars:2,consts:[[1,"modal__container"]],template:function _class111_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0),core["projection"](1),core["elementEnd"]()),2&rf&&core["classProp"]("modal__container_resize",null==ctx.config?null:ctx.config.resizable)},data:{animation:[(0,animations.X$)("dialog",[(0,animations.eR)("void => *",[(0,animations.oB)({top:"-100%"}),(0,animations.jt)("150ms ease-in",(0,animations.oB)({top:"0"}))]),(0,animations.eR)("* => void",[(0,animations.jt)("150ms ease-in",(0,animations.oB)({top:"-100%"}))])])]},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ModalContainerComponent,[{type:core.Component,args:[{selector:"teta-modal-container",animations:[(0,animations.X$)("dialog",[(0,animations.eR)("void => *",[(0,animations.oB)({top:"-100%"}),(0,animations.jt)("150ms ease-in",(0,animations.oB)({top:"0"}))]),(0,animations.eR)("* => void",[(0,animations.jt)("150ms ease-in",(0,animations.oB)({top:"-100%"}))])])],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="modal__container" [class.modal__container_resize]="config?.resizable">\n  <ng-content></ng-content>\n</div>\n'}]}],(function(){return[{type:core.ElementRef}]}),{config:[{type:core.Input}],closeEvent:[{type:core.Output}],tabindex:[{type:core.HostBinding,args:["attr.tabindex"]}],dialog:[{type:core.HostBinding,args:["@dialog"]}],classList:[{type:core.HostBinding,args:["class"]}],keyup:[{type:core.HostListener,args:["keyup",["$event"]]}],click:[{type:core.HostListener,args:["click",["$event"]]}]});class CurrentModal{constructor(){defineProperty_defineProperty(this,"close",void 0)}}class DialogComponent{constructor(modal,data){defineProperty_defineProperty(this,"modal",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"message",void 0),defineProperty_defineProperty(this,"buttonText",void 0),defineProperty_defineProperty(this,"buttonIcon",void 0),defineProperty_defineProperty(this,"buttonPalette",void 0),defineProperty_defineProperty(this,"showCancelButton",void 0),this.modal=modal,this.data=data}cancel(){this.modal.close({reason:ModalCloseReason.exit})}ok(){this.modal.close({reason:ModalCloseReason.resolve})}ngOnInit(){}}_class113=DialogComponent,defineProperty_defineProperty(DialogComponent,"fac",(function _class113_Factory(t){return new(t||_class113)(core["directiveInject"](CurrentModal),core["directiveInject"](DynamicData))})),defineProperty_defineProperty(DialogComponent,"cmp",core["defineComponent"]({type:_class113,selectors:[["teta-dialog"]],inputs:{message:"message",buttonText:"buttonText",buttonIcon:"buttonIcon",buttonPalette:"buttonPalette",showCancelButton:"showCancelButton"},decls:8,vars:8,consts:[[1,"padding-2","font-body-2"],[1,"justify-content-end"],["teta-button","",3,"palette","view","click",4,"ngIf"],["teta-button","",3,"square","palette","click"],[3,"name",4,"ngIf"],[4,"ngIf"],["teta-button","",3,"palette","view","click"],[3,"name"]],template:function _class113_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0),core["text"](1),core["pipe"](2,"transloco"),core["elementEnd"](),core["elementStart"](3,"teta-toolbar",1),core["template"](4,_class113_button_4_Template,3,5,"button",2),core["elementStart"](5,"button",3),core["listener"]("click",(function _class113_Template_button_click_5_listener(){return ctx.ok()})),core["template"](6,_class113_teta_icon_6_Template,1,1,"teta-icon",4),core["template"](7,_class113_ng_container_7_Template,3,3,"ng-container",5),core["elementEnd"]()()),2&rf&&(core["advance"](1),core["textInterpolate1"](" ",core["pipeBind1"](2,6,ctx.message),"\n"),core["advance"](3),core["property"]("ngIf",ctx.showCancelButton),core["advance"](1),core["property"]("square",!(null!=ctx.buttonText&&ctx.buttonText.length))("palette",ctx.buttonPalette),core["advance"](1),core["property"]("ngIf",ctx.buttonIcon),core["advance"](1),core["property"]("ngIf",(null==ctx.buttonText?null:ctx.buttonText.length)>0))},dependencies:[common.NgIf,ToolbarComponent,ButtonComponent,IconComponent,ngneat_transloco.Ot],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:300px}"]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DialogComponent,[{type:core.Component,args:[{selector:"teta-dialog",template:'<div class="padding-2 font-body-2">\n  {{message | transloco}}\n</div>\n<teta-toolbar class="justify-content-end">\n  <button teta-button\n          *ngIf="showCancelButton"\n          (click)="cancel()"\n          [palette]="\'text\'"\n          [view]="\'ghost\'">\n    {{\'common.cancel\' | transloco}}\n  </button>\n\n  <button teta-button\n          (click)="ok()"\n          [square]="!buttonText?.length"\n          [palette]="buttonPalette">\n    <teta-icon *ngIf="buttonIcon" [name]="buttonIcon"></teta-icon>\n    <ng-container *ngIf="buttonText?.length > 0">{{buttonText | transloco}}</ng-container>\n  </button>\n</teta-toolbar>\n',styles:[":host{display:flex;flex-direction:column;width:300px}\n"]}]}],(function(){return[{type:CurrentModal},{type:DynamicData}]}),{message:[{type:core.Input}],buttonText:[{type:core.Input}],buttonIcon:[{type:core.Input}],buttonPalette:[{type:core.Input}],showCancelButton:[{type:core.Input}]});class ModalModule{}_class114=ModalModule,defineProperty_defineProperty(ModalModule,"fac",(function _class114_Factory(t){return new(t||_class114)})),defineProperty_defineProperty(ModalModule,"mod",core["defineNgModule"]({type:_class114,declarations:[ModalContainerComponent,DialogComponent],imports:[common.CommonModule,ToolbarModule,ButtonModule,ngneat_transloco.y4,IconModule],exports:[ModalContainerComponent,DialogComponent]})),defineProperty_defineProperty(ModalModule,"inj",core["defineInjector"]({providers:[{provide:ngneat_transloco.Hn,useValue:{scope:"common",alias:"common"},multi:!0}],imports:[common.CommonModule,ToolbarModule,ButtonModule,ngneat_transloco.y4,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ModalModule,[{type:core.NgModule,args:[{declarations:[ModalContainerComponent,DialogComponent],exports:[ModalContainerComponent,DialogComponent],imports:[common.CommonModule,ToolbarModule,ButtonModule,ngneat_transloco.y4,IconModule],providers:[{provide:ngneat_transloco.Hn,useValue:{scope:"common",alias:"common"},multi:!0}]}]}],null,null);class ModalInstance{constructor(_window,_content){defineProperty_defineProperty(this,"_window",void 0),defineProperty_defineProperty(this,"_content",void 0),defineProperty_defineProperty(this,"onClose",void 0),defineProperty_defineProperty(this,"_onClose",new Subject.x),defineProperty_defineProperty(this,"close",(event=>{this._onClose.next(event),this._onClose.complete(),this.destroy()})),this._window=_window,this._content=_content,this.onClose=this._onClose.asObservable(),this._window&&this._window.instance&&this._window.instance.closeEvent.subscribe((event=>{this.close(event)}))}get window(){return this._window}get component(){return this._content.componentRef?this._content.componentRef:null}destroy(){this._window.destroy(),this._content&&this._content.viewRef&&setTimeout((()=>{this._content.viewRef.destroy()}),150)}}class ModalService{constructor(_document,_injector,_factory){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_injector",void 0),defineProperty_defineProperty(this,"_factory",void 0),defineProperty_defineProperty(this,"_stack",[]),defineProperty_defineProperty(this,"_modalChanged",new Subject.x),defineProperty_defineProperty(this,"_container",void 0),defineProperty_defineProperty(this,"unregister",(instance=>{const index=this._stack.indexOf(instance);index>-1&&(this._stack.splice(index,1),this._modalChanged.next())})),this._document=_document,this._injector=_injector,this._factory=_factory,this._container=this._document.body,this._modalChanged.subscribe((()=>{this._stack&&this._stack.length>0&&this.focus(this._stack[this._stack.length-1])}))}closeAll(){this._stack&&this._stack.length>0&&this._stack.forEach((instance=>{instance.close({reason:ModalCloseReason.exit})}))}create(content,data,config,injector){if(null==content)throw new Error("Specify template or component to render");null==config&&(config=Object.assign({backdrop:!0,class:[],esc:!0},config)),null==injector&&(injector=this._injector);const currentModal=new CurrentModal,modalData=new DynamicData(data);injector=this.getInjector(currentModal,modalData,injector);const contentInstance=this._factory.createContent(content,injector,this.getContext(content,modalData,currentModal)),window=this._factory.createComponent(ModalContainerComponent,contentInstance,injector,this._container);window.instance.config=config;const instance=new ModalInstance(window,contentInstance);return currentModal.close=instance.close,this.register(instance),instance}getContext(content,context,currentModal){return content instanceof core.TemplateRef?{$implicit:{modal:currentModal,data:context},modal:currentModal,data:context,close:result=>{currentModal.close(result)}}:context}getInjector(currentModal,data,parent){return core.Injector.create({providers:[{provide:CurrentModal,useValue:currentModal},{provide:DynamicData,useValue:data}],parent})}register(instance){this._stack.push(instance),this._modalChanged.next(),instance.onClose.subscribe((()=>this.unregister(instance)))}focus(instance){instance&&instance.window&&instance.window.location.nativeElement&&setTimeout((()=>{instance.window.location.nativeElement.focus()}),0)}}_class116=ModalService,defineProperty_defineProperty(ModalService,"fac",(function _class116_Factory(t){return new(t||_class116)(core["inject"](common.DOCUMENT),core["inject"](core.Injector),core["inject"](DynamicComponentService))})),defineProperty_defineProperty(ModalService,"prov",core["defineInjectable"]({token:_class116,factory:_class116.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ModalService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.Injector},{type:DynamicComponentService}]}),null);class DialogService{constructor(_modal){defineProperty_defineProperty(this,"_modal",void 0),this._modal=_modal}alert(message){this.createDialog(message,"common.ok",null,"primary",!1)}confirm(message,buttonText="common.ok",buttonIcon=null,buttonPalette="primary"){return this.createDialog(message,buttonText,buttonIcon,buttonPalette,!0).pipe((0,map.U)((result=>result.reason===ModalCloseReason.resolve)))}createDialog(message,buttonText="common.ok",buttonIcon=null,buttonPalette="primary",showCancelButton=!0){return this._modal.create(DialogComponent,{message,buttonText,buttonIcon,buttonPalette,showCancelButton},{esc:!0,backdrop:!0}).onClose}}_class117=DialogService,defineProperty_defineProperty(DialogService,"fac",(function _class117_Factory(t){return new(t||_class117)(core["inject"](ModalService))})),defineProperty_defineProperty(DialogService,"prov",core["defineInjectable"]({token:_class117,factory:_class117.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DialogService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:ModalService}]}),null);class PagerComponent{constructor(){}ngOnInit(){}}_class118=PagerComponent,defineProperty_defineProperty(PagerComponent,"fac",(function _class118_Factory(t){return new(t||_class118)})),defineProperty_defineProperty(PagerComponent,"cmp",core["defineComponent"]({type:_class118,selectors:[["teta-pager"]],decls:2,vars:0,template:function _class118_Template(rf,ctx){1&rf&&(core["elementStart"](0,"p"),core["text"](1,"pager works!"),core["elementEnd"]())},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PagerComponent,[{type:core.Component,args:[{selector:"teta-pager",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<p>pager works!</p>\n"}]}],(function(){return[]}),null);class PagerModule{}_class119=PagerModule,defineProperty_defineProperty(PagerModule,"fac",(function _class119_Factory(t){return new(t||_class119)})),defineProperty_defineProperty(PagerModule,"mod",core["defineNgModule"]({type:_class119,declarations:[PagerComponent],imports:[common.CommonModule,IconModule],exports:[PagerComponent]})),defineProperty_defineProperty(PagerModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PagerModule,[{type:core.NgModule,args:[{declarations:[PagerComponent],exports:[PagerComponent],imports:[common.CommonModule,IconModule]}]}],null,null);class PanelComponent{get panel(){return{value:!0,params:{width:this.width}}}constructor(){defineProperty_defineProperty(this,"width",500),defineProperty_defineProperty(this,"column",!0),defineProperty_defineProperty(this,"auto",!0)}ngOnInit(){}}_class121=PanelComponent,defineProperty_defineProperty(PanelComponent,"fac",(function _class121_Factory(t){return new(t||_class121)})),defineProperty_defineProperty(PanelComponent,"cmp",core["defineComponent"]({type:_class121,selectors:[["teta-panel"]],hostVars:5,hostBindings:function _class121_HostBindings(rf,ctx){2&rf&&(core["syntheticHostProperty"]("@panel",ctx.panel),core["classProp"]("column",ctx.column)("column_fixed",ctx.auto))},inputs:{width:"width"},ngContentSelectors:_c0,decls:1,vars:0,template:function _class121_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},data:{animation:[(0,animations.X$)("panel",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(300,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(150,(0,animations.oB)({opacity:"0"}))])])]},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PanelComponent,[{type:core.Component,args:[{selector:"teta-panel",changeDetection:core.ChangeDetectionStrategy.OnPush,animations:[(0,animations.X$)("panel",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(300,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(150,(0,animations.oB)({opacity:"0"}))])])],template:"<ng-content></ng-content>\n"}]}],(function(){return[]}),{width:[{type:core.Input}],panel:[{type:core.HostBinding,args:["@panel"]}],column:[{type:core.HostBinding,args:["class.column"]}],auto:[{type:core.HostBinding,args:["class.column_fixed"]}]});class PanelModule{}_class122=PanelModule,defineProperty_defineProperty(PanelModule,"fac",(function _class122_Factory(t){return new(t||_class122)})),defineProperty_defineProperty(PanelModule,"mod",core["defineNgModule"]({type:_class122,declarations:[PanelComponent],imports:[common.CommonModule],exports:[PanelComponent]})),defineProperty_defineProperty(PanelModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PanelModule,[{type:core.NgModule,args:[{declarations:[PanelComponent],exports:[PanelComponent],imports:[common.CommonModule]}]}],null,null);const SLIDER_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>ProgressBarComponent)),multi:!0};class ProgressBarComponent{set value(value){this._value=value,this.percent=this.setPercentFromValue(),this._cdr.detectChanges()}get value(){return this._value}get containerPosition(){const rect=this._elementRef.nativeElement.getBoundingClientRect();return{min:rect.x,max:rect.x+rect.width}}constructor(_elementRef,_renderer,_cdr,_document){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"min",0),defineProperty_defineProperty(this,"max",100),defineProperty_defineProperty(this,"step",0),defineProperty_defineProperty(this,"slider",void 0),defineProperty_defineProperty(this,"progressBar",!0),defineProperty_defineProperty(this,"percent",void 0),defineProperty_defineProperty(this,"moving",void 0),defineProperty_defineProperty(this,"_value",void 0),defineProperty_defineProperty(this,"click",(event=>{this.getMousePositionInPercents(event)})),defineProperty_defineProperty(this,"mousedown",(()=>{this.moving=!0,this.preventGlobalMouseEvents(),this.addListener()})),defineProperty_defineProperty(this,"mousemove",(event=>{event.preventDefault(),this.getMousePositionInPercents(event)})),defineProperty_defineProperty(this,"getMousePositionInPercents",(event=>{const position=event.clientX-this.containerPosition.min;let percent=100/(this.containerPosition.max-this.containerPosition.min)*position;percent=percent<=0?0:percent>100?100:percent,this.setValue(this.getValueFromPercent(percent))})),defineProperty_defineProperty(this,"preventGlobalMouseEvents",(()=>{this._document.body.style["pointer-events"]="none"})),defineProperty_defineProperty(this,"restoreGlobalMouseEvents",(()=>{this._document.body.style["pointer-events"]="auto"})),this._elementRef=_elementRef,this._renderer=_renderer,this._cdr=_cdr,this._document=_document}mouseup(){this.moving=!1,this.restoreGlobalMouseEvents(),this.removeListener()}onChange(_){}onTouched(){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){}writeValue(value){this.value=value}ngOnInit(){}setValue(value){this.value=value,this.onChange(this.value)}getValueFromPercent(percent){if(0===percent)return this.min;if(100===percent)return this.max;const exactValue=this.min+percent*(this.max-this.min)/100;return!this.step||this.step<=0||isNaN(this.step)?exactValue:Math.round((exactValue-this.min)/this.step)*this.step+this.min}addListener(){this._document.addEventListener("mousemove",this.mousemove)}removeListener(){this._document.removeEventListener("mousemove",this.mousemove)}setPercentFromValue(){return 100/(this.max-this.min)*(this.value-this.min)}}_class123=ProgressBarComponent,defineProperty_defineProperty(ProgressBarComponent,"fac",(function _class123_Factory(t){return new(t||_class123)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.Renderer2),core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](common.DOCUMENT))})),defineProperty_defineProperty(ProgressBarComponent,"cmp",core["defineComponent"]({type:_class123,selectors:[["teta-progress-bar"]],viewQuery:function _class123_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c34,7),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.slider=_t.first)}},hostVars:2,hostBindings:function _class123_HostBindings(rf,ctx){1&rf&&core["listener"]("mouseup",(function _class123_mouseup_HostBindingHandler($event){return ctx.mouseup($event)}),!1,core["resolveDocument"])("click",(function _class123_click_HostBindingHandler($event){return ctx.click($event)})),2&rf&&core["classProp"]("progress",ctx.progressBar)},inputs:{min:"min",max:"max",step:"step"},features:[core["ProvidersFeature"]([SLIDER_CONTROL_VALUE_ACCESSOR])],decls:3,vars:6,consts:[[1,"progress-bar"],[1,"progress-slider",3,"mousedown","click"],["progressSlider",""]],template:function _class123_Template(rf,ctx){1&rf&&(core["element"](0,"div",0),core["elementStart"](1,"div",1,2),core["listener"]("mousedown",(function _class123_Template_div_mousedown_1_listener(){return ctx.mousedown()}))("click",(function _class123_Template_div_click_1_listener($event){return ctx.click($event)})),core["elementEnd"]()),2&rf&&(core["styleProp"]("width",ctx.percent,"%"),core["advance"](1),core["styleProp"]("left",ctx.percent,"%"),core["classProp"]("progress-slider_visible",ctx.moving))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ProgressBarComponent,[{type:core.Component,args:[{selector:"teta-progress-bar",providers:[SLIDER_CONTROL_VALUE_ACCESSOR],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="progress-bar" [style.width.%]="percent"></div>\n<div class="progress-slider"\n     [class.progress-slider_visible]="moving"\n     #progressSlider\n     (mousedown)="mousedown()"\n     (click)="click($event)"\n     [style.left.%]="percent"></div>\n'}]}],(function(){return[{type:core.ElementRef},{type:core.Renderer2},{type:core.ChangeDetectorRef},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]}),{min:[{type:core.Input}],max:[{type:core.Input}],step:[{type:core.Input}],slider:[{type:core.ViewChild,args:["progressSlider",{static:!0}]}],progressBar:[{type:core.HostBinding,args:["class.progress"]}],mouseup:[{type:core.HostListener,args:["document:mouseup",["$event"]]}],click:[{type:core.HostListener,args:["click",["$event"]]}]});class ProgressBarModule{}function boolOrFuncCallback(variable){return args=>"boolean"==typeof variable?variable:!function isFunction(obj){return!!(obj&&obj?.constructor&&obj?.call&&obj?.apply)}(variable)||variable(args)}_class124=ProgressBarModule,defineProperty_defineProperty(ProgressBarModule,"fac",(function _class124_Factory(t){return new(t||_class124)})),defineProperty_defineProperty(ProgressBarModule,"mod",core["defineNgModule"]({type:_class124,declarations:[ProgressBarComponent],imports:[common.CommonModule],exports:[ProgressBarComponent]})),defineProperty_defineProperty(ProgressBarModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ProgressBarModule,[{type:core.NgModule,args:[{declarations:[ProgressBarComponent],exports:[ProgressBarComponent],imports:[common.CommonModule]}]}],null,null);class FormsUtil{static validateAllFormFields(formGroup){formGroup.updateValueAndValidity(),Object.keys(formGroup.controls).forEach((field=>{const control=formGroup.get(field);control instanceof fesm2022_forms.p4?(control.markAsTouched({onlySelf:!0}),control.markAsDirty({onlySelf:!0})):control instanceof fesm2022_forms.nJ&&this.validateAllFormFields(control)}))}static controlIsInvalid(formGroup,controlName){return formGroup.controls[controlName]?.invalid&&formGroup.controls[controlName]?.dirty}static getControlErrors(formGroup,controlName){return FormsUtil.controlIsInvalid(formGroup,controlName)?Object.keys(formGroup.controls[controlName]?.errors):[]}static matchValuesValidator(matchTo){return control=>control.parent&&control.parent.value&&control.value===control.parent.controls[matchTo].value?null:{isMatching:!1}}static requiredIf(value){return control=>control.parent&&control.parent.value&&null!=control.value&&value?null:{isMatching:!1}}static initFormFromColumns(columns,dataItem){const form=new fesm2022_forms.nJ({});return ArrayUtil.flatten(columns,"columns").forEach((column=>{const control=FormsUtil.initControlFromColumn(column,dataItem);form.registerControl(column.name,control)})),form}static initControlFromColumn(column,dataItem){return new fesm2022_forms.p4({value:dataItem?dataItem[column.name]:void 0,disabled:!column.editable},{validators:FormsUtil.getValidators(column),updateOn:column.filterType===FilterType.number||column.filterType===FilterType.string?"blur":"change"})}static getValidators(column){const validators=[];return column.required&&(validators.push(fesm2022_forms.kI.required),validators.push(FormsUtil.validatorNotEmpty)),null!=column.minValue&&validators.push(fesm2022_forms.kI.min(column.minValue)),null!=column.maxValue&&validators.push(fesm2022_forms.kI.max(column.maxValue)),column.validators?.length>0&&validators.push(...column.validators),validators}static validatorNotEmpty(control){return control?.value?.toString()?.trim()?.length<=0?{required:!0}:null}static formFactory(ngForm,ngModelGroup){return ngModelGroup||ngForm||null}}_class125=FormsUtil,defineProperty_defineProperty(FormsUtil,"formProvider",{provide:fesm2022_forms.gN,useFactory:_class125.formFactory,deps:[[new core.Optional,fesm2022_forms.F],[new core.Optional,fesm2022_forms.Mq]]});class PropertyGridItemDescriptionDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),defineProperty_defineProperty(this,"name",void 0),this.template=template}}_class126=PropertyGridItemDescriptionDirective,defineProperty_defineProperty(PropertyGridItemDescriptionDirective,"fac",(function _class126_Factory(t){return new(t||_class126)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(PropertyGridItemDescriptionDirective,"dir",core["defineDirective"]({type:_class126,selectors:[["","tetaPropertyGridItemDescription",""]],inputs:{name:["tetaPropertyGridItemDescription","name"]}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PropertyGridItemDescriptionDirective,[{type:core.Directive,args:[{selector:"[tetaPropertyGridItemDescription]"}]}],(function(){return[{type:core.TemplateRef}]}),{name:[{type:core.Input,args:["tetaPropertyGridItemDescription"]}]});const TOGGLE_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>ToggleComponent)),multi:!0};class ToggleComponent{get paletteClass(){if(this.palette)return`toggle-button-${this.palette}`}get model(){return this.model$}set model(v){v!==this.model$&&(this.model$=v,this.onChange(v))}constructor(cdr){defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"tabindex",0),defineProperty_defineProperty(this,"toggleClass",!0),defineProperty_defineProperty(this,"palette","primary"),defineProperty_defineProperty(this,"noLabel",void 0),defineProperty_defineProperty(this,"disabled",void 0),defineProperty_defineProperty(this,"model$",void 0),this.cdr=cdr}changeValue(){this.disabled||(this.model=!this.model)}writeValue(model){this.model$=model,this.cdr.markForCheck()}ngOnInit(){}onChange(_){}onTouched(){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}setDisabledState(isDisabled){this.disabled=isDisabled,this.cdr.markForCheck()}}_class127=ToggleComponent,defineProperty_defineProperty(ToggleComponent,"fac",(function _class127_Factory(t){return new(t||_class127)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(ToggleComponent,"cmp",core["defineComponent"]({type:_class127,selectors:[["teta-toggle"]],hostVars:5,hostBindings:function _class127_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class127_click_HostBindingHandler(){return ctx.changeValue()})),2&rf&&(core["attribute"]("tabindex",ctx.tabindex),core["classProp"]("toggle",ctx.toggleClass)("toggle_disabled",ctx.disabled))},inputs:{palette:"palette",noLabel:"noLabel",disabled:"disabled"},features:[core["ProvidersFeature"]([TOGGLE_CONTROL_VALUE_ACCESSOR])],ngContentSelectors:_c0,decls:3,vars:4,consts:[["class","font-body-3 row_auto",4,"ngIf"],[1,"toggle-button",3,"ngClass"],[1,"toggle-button-circle"],[1,"font-body-3","row_auto"]],template:function _class127_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["template"](0,_class127_span_0_Template,2,0,"span",0),core["elementStart"](1,"div",1),core["element"](2,"div",2),core["elementEnd"]()),2&rf&&(core["property"]("ngIf",!ctx.noLabel),core["advance"](1),core["classProp"]("toggle-button-on",ctx.model),core["property"]("ngClass",ctx.paletteClass))},dependencies:[common.NgClass,common.NgIf],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ToggleComponent,[{type:core.Component,args:[{selector:"teta-toggle",providers:[TOGGLE_CONTROL_VALUE_ACCESSOR],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<span class="font-body-3 row_auto" *ngIf="!noLabel">\n  <ng-content></ng-content>\n</span>\n<div class="toggle-button" [class.toggle-button-on]="model" [ngClass]="paletteClass">\n  <div class="toggle-button-circle"></div>\n</div>\n'}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{tabindex:[{type:core.HostBinding,args:["attr.tabindex"]}],toggleClass:[{type:core.HostBinding,args:["class.toggle"]}],palette:[{type:core.Input}],noLabel:[{type:core.Input}],disabled:[{type:core.HostBinding,args:["class.toggle_disabled"]},{type:core.Input}],changeValue:[{type:core.HostListener,args:["click"]}]});class PropertyGridItemComponent{get template(){return this.itemTemplates.find((item=>item.name===this.column.name))}get formGroup(){return this._formGroup instanceof fesm2022_forms.cw?this._formGroup:this._formGroup instanceof fesm2022_forms.F?this._formGroup.form:null}get editable(){return boolOrFuncCallback(this.column.editable)({column:this.column,row:this.formGroup?.getRawValue()})}get caption(){return this.column.filterType===FilterType.boolean?"":`${this.column.caption}${this.column.unit?`, ${this.column.unit}`:""}`}constructor(_transloco,_formGroup){defineProperty_defineProperty(this,"_transloco",void 0),defineProperty_defineProperty(this,"_formGroup",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"hideNonEditable",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"decimalPart",void 0),defineProperty_defineProperty(this,"item",void 0),defineProperty_defineProperty(this,"itemTemplates",void 0),defineProperty_defineProperty(this,"horizontal",void 0),defineProperty_defineProperty(this,"controlValueChange",new core.EventEmitter),defineProperty_defineProperty(this,"align",Align),defineProperty_defineProperty(this,"filterTypeEnum",FilterType),defineProperty_defineProperty(this,"_formSub",void 0),defineProperty_defineProperty(this,"_alive",!0),this._transloco=_transloco,this._formGroup=_formGroup}getDict(){const dict=this.dict?this.dict[this.column.name]:[];return this.column.parentName?.length>0?dict?.filter((dictItem=>dictItem.parentId===this.formGroup?.getRawValue()[this.column.parentName])):dict}controlIsInvalid(controlName){return FormsUtil.controlIsInvalid(this.formGroup,controlName)}getError(column){const control=this.formGroup?.get(column.name);return control?.hasError("required")?this._transloco.translate("errors.field_is_required"):control?.hasError("min")?this._transloco.translate("errors.min_value",{value:column.minValue}):control?.hasError("max")?this._transloco.translate("errors.max_value",{value:column.maxValue}):void 0}ngOnDestroy(){this._alive=!1,this._formSub?.unsubscribe()}ngOnChanges(changes){this.column&&this.item&&(this.formGroup.registerControl(this.column.name,FormsUtil.initControlFromColumn(this.column,this.item)),this._formSub?.unsubscribe(),this._formSub=this.formGroup?.controls[this.column.name]?.valueChanges.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((_=>{this.controlValueChange.emit({id:_,name:this.column.name})})))}}_class128=PropertyGridItemComponent,defineProperty_defineProperty(PropertyGridItemComponent,"fac",(function _class128_Factory(t){return new(t||_class128)(core["directiveInject"](ngneat_transloco.Vn),core["directiveInject"](fesm2022_forms.gN,8))})),defineProperty_defineProperty(PropertyGridItemComponent,"cmp",core["defineComponent"]({type:_class128,selectors:[["teta-property-grid-item"]],inputs:{column:"column",hideNonEditable:"hideNonEditable",dict:"dict",decimalPart:"decimalPart",item:"item",itemTemplates:"itemTemplates",horizontal:"horizontal"},outputs:{controlValueChange:"controlValueChange"},features:[core["ProvidersFeature"]([],[FormsUtil.formProvider]),core["NgOnChangesFeature"]],decls:1,vars:1,consts:[[3,"label","hint","formGroup","horizontal","required",4,"ngIf"],[3,"label","hint","formGroup","horizontal","required"],[4,"ngIf","ngIfElse"],["default",""],["ngProjectAs","message","class","color-red-50",5,["message"],4,"ngIf"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],["class","row_auto",3,"searchRef","allowNull","appendToBody","invalid","formControlName","options","valueRef","textRef","multiple",4,"ngSwitchCase"],["class","row_auto",3,"appendToBody","invalid","formControlName",4,"ngSwitchCase"],[3,"formControlName",4,"ngSwitchCase"],["class","row_auto",3,"decimalPart","onlyNumber","placeholder","invalid","formControlName",4,"ngSwitchDefault"],[1,"row_auto",3,"searchRef","allowNull","appendToBody","invalid","formControlName","options","valueRef","textRef","multiple"],[1,"row_auto",3,"appendToBody","invalid","formControlName"],[3,"formControlName"],[1,"row_auto",3,"decimalPart","onlyNumber","placeholder","invalid","formControlName"],["ngProjectAs","message",5,["message"],1,"color-red-50"]],template:function _class128_Template(rf,ctx){1&rf&&core["template"](0,_class128_teta_input_0_Template,5,8,"teta-input",0),2&rf&&core["property"]("ngIf",ctx.editable||!ctx.hideNonEditable)},dependencies:[common.NgIf,common.NgTemplateOutlet,common.NgSwitch,common.NgSwitchCase,common.NgSwitchDefault,fesm2022_forms.JJ,fesm2022_forms.JL,DatePickerComponent,SelectComponent,InputComponent,TextFieldComponent,ToggleComponent,fesm2022_forms.sg,fesm2022_forms.u]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PropertyGridItemComponent,[{type:core.Component,args:[{selector:"teta-property-grid-item",viewProviders:[FormsUtil.formProvider],template:'<teta-input [label]="caption"\n            [hint]="column.hint"\n            [formGroup]="formGroup"\n            [horizontal]="horizontal"\n            [required]="column.required"\n            *ngIf="editable || !hideNonEditable">\n  <ng-container *ngIf="template; else default">\n    <ng-container *ngTemplateOutlet="template.template;context: {$implicit: formGroup?.get(column.name)}"></ng-container>\n  </ng-container>\n  <ng-template #default>\n    <ng-container [ngSwitch]="column.filterType"\n                  *ngIf="formGroup?.get(column.name)">\n      <teta-select class="row_auto"\n                   *ngSwitchCase="filterTypeEnum.list"\n                   [searchRef]="getDict()?.length > 10 ? \'name\' : \'\'"\n                   [allowNull]="!column.required"\n                   [appendToBody]="true"\n                   [invalid]="controlIsInvalid(column.name)"\n                   [formControlName]="column.name"\n                   [options]="getDict()"\n                   [valueRef]="\'id\'"\n                   [textRef]="\'name\'"\n                   [multiple]="false"></teta-select>\n      <teta-date-picker *ngSwitchCase="filterTypeEnum.date"\n                        class="row_auto"\n                        [appendToBody]="true"\n                        [invalid]="controlIsInvalid(column.name)"\n                        [formControlName]="column.name"></teta-date-picker>\n      <teta-toggle *ngSwitchCase="filterTypeEnum.boolean"\n                   [formControlName]="column.name">\n        {{column.caption}}\n      </teta-toggle>\n      <teta-text-field class="row_auto"\n                       *ngSwitchDefault\n                       [decimalPart]="column.filterType === filterTypeEnum.number ? decimalPart : null"\n                       [onlyNumber]="column.filterType === filterTypeEnum.number"\n                       [placeholder]="column.caption"\n                       [invalid]="controlIsInvalid(column.name)"\n                       [formControlName]="column.name"></teta-text-field>\n    </ng-container>\n  </ng-template>\n  <div *ngIf="controlIsInvalid(column.name)"\n       ngProjectAs="message"\n       class="color-red-50">\n    {{getError(column)}}\n  </div>\n</teta-input>\n'}]}],(function(){return[{type:ngneat_transloco.Vn},{type:fesm2022_forms.gN,decorators:[{type:core.Optional}]}]}),{column:[{type:core.Input}],hideNonEditable:[{type:core.Input}],dict:[{type:core.Input}],decimalPart:[{type:core.Input}],item:[{type:core.Input}],itemTemplates:[{type:core.Input}],horizontal:[{type:core.Input}],controlValueChange:[{type:core.Output}]});class PropertyGridGroupComponent{get formGroup(){return this._formGroup instanceof fesm2022_forms.cw?this._formGroup:this._formGroup instanceof fesm2022_forms.F?this._formGroup.form:null}get editable(){return boolOrFuncCallback(this.column.editable)({column:this.column,row:this.formGroup?.getRawValue()})}constructor(_formGroup){defineProperty_defineProperty(this,"_formGroup",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"hideNonEditable",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"item",void 0),defineProperty_defineProperty(this,"horizontal",void 0),defineProperty_defineProperty(this,"controlValueChange",new core.EventEmitter),defineProperty_defineProperty(this,"decimalPart",void 0),defineProperty_defineProperty(this,"itemTemplates",void 0),this._formGroup=_formGroup}trackColumns(index,column){return column.name}}_class129=PropertyGridGroupComponent,defineProperty_defineProperty(PropertyGridGroupComponent,"fac",(function _class129_Factory(t){return new(t||_class129)(core["directiveInject"](fesm2022_forms.gN,8))})),defineProperty_defineProperty(PropertyGridGroupComponent,"cmp",core["defineComponent"]({type:_class129,selectors:[["teta-property-grid-group"]],inputs:{column:"column",hideNonEditable:"hideNonEditable",dict:"dict",item:"item",horizontal:"horizontal",decimalPart:"decimalPart",itemTemplates:"itemTemplates"},outputs:{controlValueChange:"controlValueChange"},features:[core["ProvidersFeature"]([],[FormsUtil.formProvider])],decls:5,vars:3,consts:[["ngProjectAs","head",5,["head"]],[1,"form-container"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[3,"id","dict","column","item","itemTemplates","decimalPart","hideNonEditable","horizontal","controlValueChange",4,"ngIf"],[3,"id","dict","column","item","itemTemplates","decimalPart","hideNonEditable","horizontal","controlValueChange"]],template:function _class129_Template(rf,ctx){1&rf&&(core["elementStart"](0,"teta-expand-item")(1,"span",0),core["text"](2),core["elementEnd"](),core["elementStart"](3,"div",1),core["template"](4,_class129_ng_container_4_Template,3,2,"ng-container",2),core["elementEnd"]()()),2&rf&&(core["advance"](2),core["textInterpolate1"](" ",ctx.column.caption," "),core["advance"](2),core["property"]("ngForOf",ctx.column.columns)("ngForTrackBy",ctx.trackColumns))},dependencies:[common.NgForOf,common.NgIf,ExpandItemComponent,_class129,PropertyGridItemComponent],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PropertyGridGroupComponent,[{type:core.Component,args:[{selector:"teta-property-grid-group",viewProviders:[FormsUtil.formProvider],template:'<teta-expand-item>\n  <span ngProjectAs=\'head\'>\n    {{column.caption}}\n  </span>\n  <div class="form-container">\n    <ng-container *ngFor="let col of column.columns; trackBy: trackColumns">\n      <ng-container *ngIf="col.columns?.length < 1">\n        <teta-property-grid-item *ngIf="column.editable || !hideNonEditable"\n                                 [id]="col.name"\n                                 [dict]="dict"\n                                 [column]="col"\n                                 [item]="item"\n                                 [itemTemplates]="itemTemplates"\n                                 [decimalPart]="decimalPart"\n                                 [hideNonEditable]="hideNonEditable"\n                                 (controlValueChange)="controlValueChange.emit($event)"\n                                 [horizontal]="horizontal"></teta-property-grid-item>\n      </ng-container>\n      <ng-container *ngIf="col.columns?.length > 0">\n        <teta-property-grid-group [id]="col.name"\n                                  [dict]="dict"\n                                  [column]="col"\n                                  [item]="item"\n                                  [itemTemplates]="itemTemplates"\n                                  [decimalPart]="decimalPart"\n                                  [hideNonEditable]="hideNonEditable"\n                                  [horizontal]="horizontal"\n                                  (controlValueChange)="controlValueChange.emit($event)"></teta-property-grid-group>\n      </ng-container>\n    </ng-container>\n  </div>\n</teta-expand-item>\n',styles:[":host{display:flex;flex-direction:column}\n"]}]}],(function(){return[{type:fesm2022_forms.gN,decorators:[{type:core.Optional}]}]}),{column:[{type:core.Input}],hideNonEditable:[{type:core.Input}],dict:[{type:core.Input}],item:[{type:core.Input}],horizontal:[{type:core.Input}],controlValueChange:[{type:core.Output}],decimalPart:[{type:core.Input}],itemTemplates:[{type:core.Input}]});class PropertyGridComponent{set item(item){this._item=item,this.formGroup&&this.formGroup.patchValue(item,{emitEvent:!1})}get item(){return this._item}get formGroup(){return this._formGroup instanceof fesm2022_forms.cw?this._formGroup:this._formGroup instanceof fesm2022_forms.F?this._formGroup.form:null}constructor(_formGroup){defineProperty_defineProperty(this,"_formGroup",void 0),defineProperty_defineProperty(this,"formClass",!0),defineProperty_defineProperty(this,"itemTemplates",void 0),defineProperty_defineProperty(this,"hideNonEditable",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"horizontal",void 0),defineProperty_defineProperty(this,"decimalPart",void 0),defineProperty_defineProperty(this,"controlValueChange",new core.EventEmitter),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_item",void 0),this._formGroup=_formGroup}getEditable(column){return boolOrFuncCallback(column.editable)({column,row:this.formGroup?.getRawValue()})}onControlValueChange(event){const affected=this.columns.filter((_=>_.parentName===event.name));affected?.length&&affected.forEach((item=>{const value=this.formGroup.getRawValue()[item.name];if(value){const dictValue=this.getDictValue(value,item.name);if(dictValue&&dictValue.parentId!==event.id){const newObj={};newObj[item.name]=null,this.formGroup.patchValue(newObj)}}})),this.controlValueChange.emit(event)}ngOnDestroy(){this._alive=!1}trackColumns(index,column){return column.name}getDictValue(value,name){return this.dict[name]?.find((_=>_.id===value))}}_class130=PropertyGridComponent,defineProperty_defineProperty(PropertyGridComponent,"fac",(function _class130_Factory(t){return new(t||_class130)(core["directiveInject"](fesm2022_forms.gN,8))})),defineProperty_defineProperty(PropertyGridComponent,"cmp",core["defineComponent"]({type:_class130,selectors:[["teta-property-grid"]],contentQueries:function _class130_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,PropertyGridItemDescriptionDirective,4),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.itemTemplates=_t)}},hostVars:2,hostBindings:function _class130_HostBindings(rf,ctx){2&rf&&core["classProp"]("form-container",ctx.formClass)},inputs:{hideNonEditable:"hideNonEditable",columns:"columns",dict:"dict",item:"item",horizontal:"horizontal",decimalPart:"decimalPart"},outputs:{controlValueChange:"controlValueChange"},features:[core["ProvidersFeature"]([],[FormsUtil.formProvider])],decls:1,vars:1,consts:[[4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[3,"dict","column","item","id","itemTemplates","decimalPart","formGroup","horizontal","hideNonEditable","controlValueChange",4,"ngIf"],[3,"id","dict","column","item","itemTemplates","decimalPart","formGroup","horizontal","hideNonEditable","controlValueChange",4,"ngIf"],[3,"dict","column","item","id","itemTemplates","decimalPart","formGroup","horizontal","hideNonEditable","controlValueChange"],[3,"id","dict","column","item","itemTemplates","decimalPart","formGroup","horizontal","hideNonEditable","controlValueChange"]],template:function _class130_Template(rf,ctx){1&rf&&core["template"](0,_class130_ng_container_0_Template,2,2,"ng-container",0),2&rf&&core["property"]("ngIf",null==ctx.columns?null:ctx.columns.length)},dependencies:[common.NgForOf,common.NgIf,fesm2022_forms.JL,fesm2022_forms.sg,PropertyGridGroupComponent,PropertyGridItemComponent],styles:["[_nghost-%COMP%]{padding:12px 8px}"]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PropertyGridComponent,[{type:core.Component,args:[{selector:"teta-property-grid",viewProviders:[FormsUtil.formProvider],template:"<ng-container *ngIf='columns?.length'>\n  <ng-container *ngFor='let column of columns; trackBy: trackColumns'>\n    <teta-property-grid-item *ngIf='column.columns?.length < 1 && (getEditable(column) || !hideNonEditable)'\n                             [dict]='dict'\n                             [column]='column'\n                             [item]='item'\n                             [id]='column.name'\n                             [itemTemplates]='itemTemplates'\n                             [decimalPart]='decimalPart'\n                             [formGroup]='formGroup'\n                             [horizontal]='horizontal'\n                             (controlValueChange)='onControlValueChange($event)'\n                             [hideNonEditable]='hideNonEditable'></teta-property-grid-item>\n    <teta-property-grid-group *ngIf='column.columns?.length > 0 && (getEditable(column) || !hideNonEditable)'\n                              [id]='column.name'\n                              [dict]='dict'\n                              [column]='column'\n                              [item]='item'\n                              [itemTemplates]='itemTemplates'\n                              [decimalPart]='decimalPart'\n                              [formGroup]='formGroup'\n                              [horizontal]='horizontal'\n                              (controlValueChange)='onControlValueChange($event)'\n                              [hideNonEditable]='hideNonEditable'></teta-property-grid-group>\n  </ng-container>\n</ng-container>\n",styles:[":host{padding:12px 8px}\n"]}]}],(function(){return[{type:fesm2022_forms.gN,decorators:[{type:core.Optional}]}]}),{formClass:[{type:core.HostBinding,args:["class.form-container"]}],itemTemplates:[{type:core.ContentChildren,args:[PropertyGridItemDescriptionDirective]}],hideNonEditable:[{type:core.Input}],columns:[{type:core.Input}],dict:[{type:core.Input}],item:[{type:core.Input}],horizontal:[{type:core.Input}],decimalPart:[{type:core.Input}],controlValueChange:[{type:core.Output}]});class ToggleModule{}_class131=ToggleModule,defineProperty_defineProperty(ToggleModule,"fac",(function _class131_Factory(t){return new(t||_class131)})),defineProperty_defineProperty(ToggleModule,"mod",core["defineNgModule"]({type:_class131,declarations:[ToggleComponent],imports:[common.CommonModule,IconModule],exports:[ToggleComponent]})),defineProperty_defineProperty(ToggleModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ToggleModule,[{type:core.NgModule,args:[{declarations:[ToggleComponent],exports:[ToggleComponent],imports:[common.CommonModule,IconModule]}]}],null,null);class PropertyGridModule{}var SidebarPosition;_class132=PropertyGridModule,defineProperty_defineProperty(PropertyGridModule,"fac",(function _class132_Factory(t){return new(t||_class132)})),defineProperty_defineProperty(PropertyGridModule,"mod",core["defineNgModule"]({type:_class132,declarations:[PropertyGridComponent,PropertyGridGroupComponent,PropertyGridItemComponent,PropertyGridItemDescriptionDirective],imports:[common.CommonModule,fesm2022_forms.u5,NumberPipeModule,DatePickerModule,SelectModule,OnlyNumberModule,InputModule,ToggleModule,fesm2022_forms.UX,ngneat_transloco.y4,HintModule,ExpandCardModule],exports:[PropertyGridComponent,PropertyGridItemDescriptionDirective]})),defineProperty_defineProperty(PropertyGridModule,"inj",core["defineInjector"]({providers:[{provide:ngneat_transloco.Hn,useValue:{scope:"errors",alias:"errors"},multi:!0}],imports:[common.CommonModule,fesm2022_forms.u5,NumberPipeModule,DatePickerModule,SelectModule,OnlyNumberModule,InputModule,ToggleModule,fesm2022_forms.UX,ngneat_transloco.y4,HintModule,ExpandCardModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](PropertyGridModule,[{type:core.NgModule,args:[{declarations:[PropertyGridComponent,PropertyGridGroupComponent,PropertyGridItemComponent,PropertyGridItemDescriptionDirective],exports:[PropertyGridComponent,PropertyGridItemDescriptionDirective],imports:[common.CommonModule,fesm2022_forms.u5,NumberPipeModule,DatePickerModule,SelectModule,OnlyNumberModule,InputModule,ToggleModule,fesm2022_forms.UX,ngneat_transloco.y4,HintModule,ExpandCardModule],providers:[{provide:ngneat_transloco.Hn,useValue:{scope:"errors",alias:"errors"},multi:!0}]}]}],null,null),function(SidebarPosition){SidebarPosition[SidebarPosition.left=0]="left",SidebarPosition[SidebarPosition.right=1]="right",SidebarPosition[SidebarPosition.bottom=2]="bottom",SidebarPosition[SidebarPosition.top=3]="top"}(SidebarPosition||(SidebarPosition={}));class SidebarComponent{constructor(){defineProperty_defineProperty(this,"position",SidebarPosition.left),defineProperty_defineProperty(this,"backdrop",void 0),defineProperty_defineProperty(this,"open",void 0),defineProperty_defineProperty(this,"openChange",new core.EventEmitter),defineProperty_defineProperty(this,"className",void 0),defineProperty_defineProperty(this,"zIndex",10),defineProperty_defineProperty(this,"sidebarPosition",SidebarPosition)}setOpen(value){this.open=value,this.openChange.emit(this.open)}ngOnInit(){}}_class133=SidebarComponent,defineProperty_defineProperty(SidebarComponent,"fac",(function _class133_Factory(t){return new(t||_class133)})),defineProperty_defineProperty(SidebarComponent,"cmp",core["defineComponent"]({type:_class133,selectors:[["teta-sidebar"]],hostVars:2,hostBindings:function _class133_HostBindings(rf,ctx){2&rf&&core["styleProp"]("z-index",ctx.zIndex)},inputs:{position:"position",backdrop:"backdrop",open:"open",className:"className"},outputs:{openChange:"openChange"},ngContentSelectors:_c0,decls:2,vars:2,consts:[["class","sidebar-backdrop",3,"click",4,"ngIf"],["class","sidebar",3,"ngClass","sidebar-top","sidebar-bottom","sidebar-left","sidebar-right",4,"ngIf"],[1,"sidebar-backdrop",3,"click"],[1,"sidebar",3,"ngClass"]],template:function _class133_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["template"](0,_class133_div_0_Template,1,1,"div",0),core["template"](1,_class133_div_1_Template,2,10,"div",1)),2&rf&&(core["property"]("ngIf",ctx.backdrop&&ctx.open),core["advance"](1),core["property"]("ngIf",ctx.open))},dependencies:[common.NgClass,common.NgIf],data:{animation:[(0,animations.X$)("sidebar",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(300,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(300,(0,animations.oB)({opacity:"0"}))])])]},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SidebarComponent,[{type:core.Component,args:[{selector:"teta-sidebar",changeDetection:core.ChangeDetectionStrategy.OnPush,animations:[(0,animations.X$)("sidebar",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(300,(0,animations.oB)({opacity:"1"}))]),(0,animations.eR)("* => void",[(0,animations.jt)(300,(0,animations.oB)({opacity:"0"}))])])],template:'<div *ngIf="backdrop && open"\n     [@sidebar]\n     (click)="setOpen(false)"\n     class="sidebar-backdrop"></div>\n<div class="sidebar"\n     [@sidebar]\n     [ngClass]="className"\n     [class.sidebar-top]="position === sidebarPosition.top"\n     [class.sidebar-bottom]="position === sidebarPosition.bottom"\n     [class.sidebar-left]="position === sidebarPosition.left"\n     [class.sidebar-right]="position === sidebarPosition.right"\n     *ngIf="open">\n  <ng-content></ng-content>\n</div>\n'}]}],(function(){return[]}),{position:[{type:core.Input}],backdrop:[{type:core.Input}],open:[{type:core.Input}],openChange:[{type:core.Output}],className:[{type:core.Input}],zIndex:[{type:core.HostBinding,args:["style.z-index"]}]});class SidebarModule{}_class134=SidebarModule,defineProperty_defineProperty(SidebarModule,"fac",(function _class134_Factory(t){return new(t||_class134)})),defineProperty_defineProperty(SidebarModule,"mod",core["defineNgModule"]({type:_class134,declarations:[SidebarComponent],imports:[common.CommonModule,ButtonModule,IconModule],exports:[SidebarComponent]})),defineProperty_defineProperty(SidebarModule,"inj",core["defineInjector"]({imports:[common.CommonModule,ButtonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SidebarModule,[{type:core.NgModule,args:[{declarations:[SidebarComponent],exports:[SidebarComponent],imports:[common.CommonModule,ButtonModule,IconModule]}]}],null,null);class SwitchService{constructor(){defineProperty_defineProperty(this,"value",void 0),defineProperty_defineProperty(this,"value$",new ReplaySubject.t(1)),this.value=this.value$.asObservable()}setValue(value){this.value$.next(value)}}_class135=SwitchService,defineProperty_defineProperty(SwitchService,"fac",(function _class135_Factory(t){return new(t||_class135)})),defineProperty_defineProperty(SwitchService,"prov",core["defineInjectable"]({token:_class135,factory:_class135.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SwitchService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);const SWITCH_CONTROL_VALUE_ACCESSOR={provide:fesm2022_forms.JU,useExisting:(0,core.forwardRef)((()=>SwitchComponent)),multi:!0};class SwitchComponent{get class(){return"switch_"+this.viewType}constructor(svc,cdr){defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"viewType","rounded"),defineProperty_defineProperty(this,"switchClass",!0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_value",void 0),this.svc=svc,this.cdr=cdr,this.svc.value.pipe((0,takeWhile.o)((_=>this._alive)),(0,filter.h)((_=>_!==this._value))).subscribe((_=>{this.onChange(_),this._value=_}))}writeValue(model){this._value=model,this.svc.setValue(model),this.cdr.markForCheck()}onChange(_){}onTouched(){}registerOnChange(fn){this.onChange=fn}registerOnTouched(fn){this.onTouched=fn}ngOnInit(){}ngOnDestroy(){this._alive=!1}}_class136=SwitchComponent,defineProperty_defineProperty(SwitchComponent,"fac",(function _class136_Factory(t){return new(t||_class136)(core["directiveInject"](SwitchService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(SwitchComponent,"cmp",core["defineComponent"]({type:_class136,selectors:[["teta-switch"]],hostVars:4,hostBindings:function _class136_HostBindings(rf,ctx){2&rf&&(core["classMap"](ctx.class),core["classProp"]("switch",ctx.switchClass))},inputs:{viewType:"viewType"},features:[core["ProvidersFeature"]([SWITCH_CONTROL_VALUE_ACCESSOR,SwitchService])],ngContentSelectors:_c0,decls:1,vars:0,template:function _class136_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SwitchComponent,[{type:core.Component,args:[{selector:"teta-switch",providers:[SWITCH_CONTROL_VALUE_ACCESSOR,SwitchService],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],(function(){return[{type:SwitchService},{type:core.ChangeDetectorRef}]}),{viewType:[{type:core.Input}],switchClass:[{type:core.HostBinding,args:["class.switch"]}],class:[{type:core.HostBinding,args:["class"]}]});class SwitchButtonComponent{get getClass(){const result=[this.class,"switch-button"];return(this.svcValue===this.value||this.svcValue instanceof Array&&this.svcValue.indexOf(this.value)>=0)&&result.push("switch-button_active"),result.join(" ")}constructor(svc,cdr){defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"value",void 0),defineProperty_defineProperty(this,"class",void 0),defineProperty_defineProperty(this,"svcValue",void 0),defineProperty_defineProperty(this,"_alive",!0),this.svc=svc,this.cdr=cdr,this.svc.value.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.svcValue=_,this.cdr.markForCheck()}))}click(event){this.svc.setValue(this.value)}ngOnInit(){}ngOnDestroy(){this._alive=!1}}_class137=SwitchButtonComponent,defineProperty_defineProperty(SwitchButtonComponent,"fac",(function _class137_Factory(t){return new(t||_class137)(core["directiveInject"](SwitchService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(SwitchButtonComponent,"cmp",core["defineComponent"]({type:_class137,selectors:[["teta-switch-button"]],hostVars:2,hostBindings:function _class137_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class137_click_HostBindingHandler($event){return ctx.click($event)})),2&rf&&core["classMap"](ctx.getClass)},inputs:{value:"value",class:"class"},ngContentSelectors:_c0,decls:1,vars:0,template:function _class137_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0))},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SwitchButtonComponent,[{type:core.Component,args:[{selector:"teta-switch-button",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-content></ng-content>\n"}]}],(function(){return[{type:SwitchService},{type:core.ChangeDetectorRef}]}),{value:[{type:core.Input}],class:[{type:core.Input}],getClass:[{type:core.HostBinding,args:["class"]}],click:[{type:core.HostListener,args:["click",["$event"]]}]});class SwitchModule{}var EditEvent,EditType,SelectType;_class138=SwitchModule,defineProperty_defineProperty(SwitchModule,"fac",(function _class138_Factory(t){return new(t||_class138)})),defineProperty_defineProperty(SwitchModule,"mod",core["defineNgModule"]({type:_class138,declarations:[SwitchComponent,SwitchButtonComponent],imports:[common.CommonModule],exports:[SwitchComponent,SwitchButtonComponent]})),defineProperty_defineProperty(SwitchModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SwitchModule,[{type:core.NgModule,args:[{declarations:[SwitchComponent,SwitchButtonComponent],exports:[SwitchComponent,SwitchButtonComponent],imports:[common.CommonModule]}]}],null,null),function(EditEvent){EditEvent[EditEvent.click=0]="click",EditEvent[EditEvent.focus=1]="focus",EditEvent[EditEvent.doubleClick=2]="doubleClick"}(EditEvent||(EditEvent={})),function(EditType){EditType[EditType.none=0]="none",EditType[EditType.cell=1]="cell",EditType[EditType.row=2]="row"}(EditType||(EditType={})),function(SelectType){SelectType[SelectType.none=0]="none",SelectType[SelectType.checkBox=1]="checkBox",SelectType[SelectType.mouse=2]="mouse"}(SelectType||(SelectType={}));class DateUtil{static subtractDays(date,days=0){if(date&&date instanceof Date){const dt=new Date(date.getTime());return dt.setDate(dt.getDate()-days),dt}return null}static addDays(date,days=0){if(date&&date instanceof Date){const dt=new Date(date.getTime());return dt.setDate(dt.getDate()+days),dt}return null}static parseString(dat){if(!dat||dat.length<1)return null;const parts=dat.split(" "),dtPart=parts[0].split("."),tPart=parts[1]?.split(":")??["0","0","0"],parsedDate=new Date(parseInt(dtPart[2],10),parseInt(dtPart[1],10)-1,parseInt(dtPart[0],10),parseInt(tPart[0],10),parseInt(tPart[1],10),parseInt(tPart[2],10));return isNaN(parsedDate.getTime())?null:parsedDate}static toString(dat){if(!(dat&&dat instanceof Date))return"";const month=dat.getMonth()+1;return`${prependZero(dat.getDate(),2)}.${prependZero(month,2)}.${dat.getFullYear()} ${prependZero(dat.getHours(),2)}:${prependZero(dat.getMinutes(),2)}:${prependZero(dat.getSeconds(),2)}`}static convertUTC2DateLocal(date){if(date&&date instanceof Date){const timezoneOffsetMs=6e4*new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTimezoneOffset();return new Date(date.getTime()-timezoneOffsetMs)}return null}static convertDateLocal2UTC(date){if(date&&date instanceof Date){const timezoneOffsetMs=6e4*new Date(date.getFullYear(),date.getMonth(),date.getDate()).getTimezoneOffset();return null==date?null:new Date(date.getTime()+timezoneOffsetMs)}return null}static convertDateStringsToDates(input){if("string"==typeof input&&/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z)?$/i.test(input))return DateUtil.convertStringToLocalDate(input);if("object"!=typeof input||!input)return input;let res;return res=input instanceof Array?[]:{},DateUtil.fillConvertDateStringsToDates(res,input)}static convertDates(input){if("object"!=typeof input||!input)return input;if(input instanceof Date)return DateUtil.convertUTC2DateLocal(input);let res;return res=input instanceof Array?[]:{},DateUtil.fillConvertDates(res,input)}static getMonthDaysCount(date){return new Date(date.getFullYear(),date.getMonth()+1,0).getDate()}static getRangeOfMonths(start,end){if(start>end||!start||!end)return null;const resDates=[];let i=0,dateTmp=new Date(start.getFullYear(),start.getMonth()+i,1);for(;end>=dateTmp;)resDates.push(dateTmp),i++,dateTmp=new Date(start.getFullYear(),start.getMonth()+i,1);return resDates}static truncateToMonth(date){return new Date(date.getFullYear(),date.getMonth(),1,0,0,0)}static truncateToDay(date){return new Date(date.getFullYear(),date.getMonth(),date.getDate(),0,0,0)}static truncateToHour(date){return new Date(date.getFullYear(),date.getMonth(),date.getDate(),date.getHours(),0,0)}static toISOString(date){return new Date(date-6e4*(new Date).getTimezoneOffset()).toISOString().slice(0,-5)+"Z"}static isValidDate(date){return date instanceof Date&&!isNaN(date.getTime())}static millisecondToHumanFormat(milliSeconds,maxValue=5e3,showDays=!1){const negative=milliSeconds<0;let d;negative&&(milliSeconds=-milliSeconds),showDays&&(d=Math.trunc(milliSeconds/864e5),milliSeconds-=864e5*d);const h=Math.trunc(milliSeconds/36e5);milliSeconds-=36e5*h;const m=Math.trunc(milliSeconds/6e4);milliSeconds-=6e4*m;const s=Math.trunc(milliSeconds/1e3);milliSeconds-=1e3*s;let result=m?m+"  ":"";return maxValue<36e5&&(s&&(result=result+s+"  "),0!==s||m||(result+="0 c")),maxValue<5e3&&(result=milliSeconds?result+milliSeconds+"  ":result),h&&(result=h+"  "+result),d&&(result=d+" "+result),negative&&(result="-"+result),result.trim()}static fillConvertDates(result,input){for(const key in input)if(input.hasOwnProperty&&input.hasOwnProperty(key)&&input.hasOwnProperty(key)){let value=input[key];value instanceof Date?(null!=value&&(value=DateUtil.convertUTC2DateLocal(value)),result[key]=value):result[key]="object"==typeof value?DateUtil.convertDates(value):value}return result}static fillConvertDateStringsToDates(result,input){const regexIso8601=/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(\.\d+)?(([+-]\d\d:\d\d)|Z?)?$/i;for(const key in input){if(!input.hasOwnProperty(key))continue;const value=input[key];"string"==typeof value&&regexIso8601.test(value)?result[key]=DateUtil.convertStringToLocalDate(value):result[key]="object"==typeof value?DateUtil.convertDateStringsToDates(value):value}return result}static convertStringToLocalDate(dateString){const milliseconds=Date.parse(dateString);if(!isNaN(milliseconds)){const dt=new Date(milliseconds);return DateUtil.convertDateLocal2UTC(dt)}return null}}class ColumnReorderEvent{constructor(source,target){defineProperty_defineProperty(this,"source",void 0),defineProperty_defineProperty(this,"target",void 0),this.source=source,this.target=target}}class TableColumn extends FilterItem{constructor(options){super(options),defineProperty_defineProperty(this,"width",80),defineProperty_defineProperty(this,"flex",1),defineProperty_defineProperty(this,"locked",void 0),defineProperty_defineProperty(this,"parentName",void 0),defineProperty_defineProperty(this,"unit",void 0),defineProperty_defineProperty(this,"unitMeasureParameterId",void 0),defineProperty_defineProperty(this,"unitId",void 0),defineProperty_defineProperty(this,"headCellClass",void 0),defineProperty_defineProperty(this,"cellClass",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"editable",void 0),defineProperty_defineProperty(this,"cellComponent",void 0),defineProperty_defineProperty(this,"headCellComponent",void 0),defineProperty_defineProperty(this,"headDropdownConfig",void 0),defineProperty_defineProperty(this,"columns",[]),defineProperty_defineProperty(this,"aggregate",void 0),defineProperty_defineProperty(this,"defaultValue",void 0),defineProperty_defineProperty(this,"maxValue",void 0),defineProperty_defineProperty(this,"minValue",void 0),defineProperty_defineProperty(this,"required",void 0),defineProperty_defineProperty(this,"validators",void 0),this.width=options?.width??80,this.flex=options?.flex??1,this.headCellClass=options?.headCellClass??[],this.cellClass=options?.cellClass??[],this.locked=options?.locked??!1,this.parentName=options?.parentName,this.unit=options?.unit??"",this.unitMeasureParameterId=options?.unitMeasureParameterId,this.unitId=options?.unitId,this.data=options?.data,this.editable=options?.editable??!0,this.headCellComponent=options?.headCellComponent,this.headDropdownConfig=options?.headDropdownConfig,this.cellComponent=options?.cellComponent,this.aggregate=options?.aggregate,this.defaultValue=options?.defaultValue,this.maxValue=options?.maxValue,this.minValue=options?.minValue,this.required=options?.required,this.columns=options?.columns?.map((x=>new TableColumn(x)))??[],this.validators=options?.validators}}class TableColumnStore{constructor(options){defineProperty_defineProperty(this,"width",void 0),defineProperty_defineProperty(this,"flex",void 0),defineProperty_defineProperty(this,"locked",void 0),defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"columns",void 0),options&&(this.width=options?.width,this.flex=options?.flex,this.locked=options?.locked,this.name=options?.name,this.columns=options?.columns?.map((x=>new TableColumnStore(x))))}}class TableRow{constructor(options){defineProperty_defineProperty(this,"valid",void 0),defineProperty_defineProperty(this,"data",void 0),this.valid=options?.valid,this.data=options?.data}}class StateUtil{static hasSortedColumns(state){return state.sortParams&&state.sortParams.length>0}static hasFilteredColumns(state){let hasFilters=!1;return state.stringFilters&&state.stringFilters.some((filter=>filter.value&&filter.value.length))&&(hasFilters=!0),state.listFilters&&state.listFilters.some((filter=>filter.value&&filter.value.length))&&(hasFilters=!0),state.numericFilters&&state.numericFilters.some((filter=>filter&&filter.value&&(null!==filter.value.lessThan&&void 0!==filter.value.lessThan||null!==filter.value.greaterThan&&void 0!==filter.value.greaterThan||null!==filter.value.equalsTo&&void 0!==filter.value.equalsTo)))&&(hasFilters=!0),state.dateFilters&&state.dateFilters.some((filter=>filter&&filter.value&&(null!==filter.value.lessThan&&void 0!==filter.value.lessThan||null!==filter.value.greaterThan&&void 0!==filter.value.greaterThan)))&&(hasFilters=!0),hasFilters}static getSortState(state,column){if(state?.sortParams&&state.sortParams.length){const param=state.sortParams.find((x=>x.field===column.sortField));if(param)return param}return null}static isColumnFiltered(state,column){if(!column.filterable)return;let filtered=!1;switch(column.filterType){case FilterType.string:if(state?.stringFilters){const filter=state.stringFilters.find((x=>x.field===column.filterField));filter&&filter.value&&filter.value.length&&(filtered=!0)}break;case FilterType.list:if(state?.listFilters){const filter=state.listFilters.find((x=>x.field===column.filterField));filter&&filter.value&&filter.value.length&&(filtered=!0)}break;case FilterType.number:if(state?.numericFilters){const filter=state.numericFilters.find((x=>x.field===column.filterField));filter&&filter.value&&(null!==filter.value.lessThan&&void 0!==filter.value.lessThan||null!==filter.value.greaterThan&&void 0!==filter.value.greaterThan||null!==filter.value.equalsTo&&void 0!==filter.value.equalsTo)&&(filtered=!0)}break;case FilterType.date:if(state?.dateFilters){const filter=state.dateFilters.find((x=>x.field===column.filterField));filter&&filter.value&&(null!==filter.value.lessThan&&void 0!==filter.value.lessThan||null!==filter.value.greaterThan&&void 0!==filter.value.greaterThan)&&(filtered=!0)}}return filtered}static sortColumn(sortEvent,state){const column=sortEvent.column,shiftKey=sortEvent.shiftKey,sort=state.sortParams.find((sortParam=>sortParam.field===column.sortField));return null==sort?(shiftKey||(state.sortParams.length=0),state.sortParams.push(new SortParam({field:column.sortField,asc:!0,order:0}))):sort.asc?(sort.asc=!sort.asc,shiftKey||(state.sortParams=[sort])):state.sortParams=StateUtil.clearSortParam(sort,state.sortParams),new FilterState(state)}static sortAsc(sortEvent,state){return StateUtil.sort(sortEvent,state,!0)}static sortDesc(sortEvent,state){return StateUtil.sort(sortEvent,state,!1)}static sort(sortEvent,state,asc){const column=sortEvent.column,shiftKey=sortEvent.shiftKey,sort=state.sortParams.find((sortParam=>sortParam.field===column.sortField));return sort&&(state.sortParams=StateUtil.clearSortParam(sort,state.sortParams)),shiftKey||(state.sortParams.length=0),state.sortParams.push(new SortParam({field:column.sortField,asc,order:0})),new FilterState(state)}static clearSortParam(sort,sortParams){const index=sortParams.indexOf(sort);return sortParams.splice(index,1),sortParams}static clearSort(column,state){return state.sortParams=state.sortParams.filter((_=>_.field!==column.sortField)),new FilterState(state)}static clearAllSort(state){return state.sortParams=[],new FilterState(state)}}class TableService{get dragSource(){return this._dragSource}get currentEditCell(){return this._currentEditCell}constructor(){defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"displayData",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"filterOptions",void 0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"selectType",SelectType.mouse),defineProperty_defineProperty(this,"editRowStart",void 0),defineProperty_defineProperty(this,"editRowStop",void 0),defineProperty_defineProperty(this,"editCellStart",void 0),defineProperty_defineProperty(this,"editCellStop",void 0),defineProperty_defineProperty(this,"valueChanged",void 0),defineProperty_defineProperty(this,"valueSet",void 0),defineProperty_defineProperty(this,"stateChanged",void 0),defineProperty_defineProperty(this,"filterClear",void 0),defineProperty_defineProperty(this,"selectedRows",void 0),defineProperty_defineProperty(this,"activeRow",void 0),defineProperty_defineProperty(this,"hiddenColumns",void 0),defineProperty_defineProperty(this,"scrollIndex",void 0),defineProperty_defineProperty(this,"editType",EditType.cell),defineProperty_defineProperty(this,"editEvent",EditEvent.doubleClick),defineProperty_defineProperty(this,"rowEditable",void 0),defineProperty_defineProperty(this,"trackRow",((index,row)=>{const rowId=row.id;return rowId||index})),defineProperty_defineProperty(this,"initialColumnsHash",""),defineProperty_defineProperty(this,"initialColumns",[]),defineProperty_defineProperty(this,"displayColumns",[]),defineProperty_defineProperty(this,"_columns",new BehaviorSubject.X([])),defineProperty_defineProperty(this,"_hiddenColumns",new BehaviorSubject.X([])),defineProperty_defineProperty(this,"_displayData",new BehaviorSubject.X([])),defineProperty_defineProperty(this,"_dict",new BehaviorSubject.X({})),defineProperty_defineProperty(this,"_filterOptions",new BehaviorSubject.X({})),defineProperty_defineProperty(this,"_state",new BehaviorSubject.X(new FilterState)),defineProperty_defineProperty(this,"_cookieName",void 0),defineProperty_defineProperty(this,"_hiddenCookieName",void 0),defineProperty_defineProperty(this,"_columnsCookieName",void 0),defineProperty_defineProperty(this,"_editRowStart",new Subject.x),defineProperty_defineProperty(this,"_editRowStop",new Subject.x),defineProperty_defineProperty(this,"_editCellStart",new Subject.x),defineProperty_defineProperty(this,"_editCellStop",new Subject.x),defineProperty_defineProperty(this,"_valueChanged",new Subject.x),defineProperty_defineProperty(this,"_valueSet",new Subject.x),defineProperty_defineProperty(this,"_stateChanged",new Subject.x),defineProperty_defineProperty(this,"_filterClear",new Subject.x),defineProperty_defineProperty(this,"_dragSource",void 0),defineProperty_defineProperty(this,"_selectedRows",new BehaviorSubject.X([])),defineProperty_defineProperty(this,"_activeRow",new BehaviorSubject.X(null)),defineProperty_defineProperty(this,"_scrollIndex",new Subject.x),defineProperty_defineProperty(this,"_currentEditCell",void 0),this.columns=this._columns.asObservable(),this.displayData=this._displayData.asObservable(),this.dict=this._dict.asObservable(),this.filterOptions=this._filterOptions.asObservable(),this.state=this._state.asObservable(),this.editRowStart=this._editRowStart.asObservable(),this.editRowStop=this._editRowStop.asObservable(),this.editCellStart=this._editCellStart.asObservable(),this.editCellStop=this._editCellStop.asObservable(),this.valueChanged=this._valueChanged.asObservable(),this.valueSet=this._valueSet.asObservable(),this.stateChanged=this._stateChanged.asObservable(),this.filterClear=this._filterClear.asObservable(),this.selectedRows=this._selectedRows.asObservable(),this.activeRow=this._activeRow.asObservable(),this.hiddenColumns=this._hiddenColumns.asObservable(),this.scrollIndex=this._scrollIndex.asObservable()}setData(data){this._displayData.next(data?.map((item=>new TableRow({data:item})))??[])}setDict(dict){this._dict.next(dict)}setFilterOptions(filterOptions){this._filterOptions.next(filterOptions)}setColumns(columns){this.initialColumns=columns?columns.map((_=>new TableColumn(_))):[];const excludeKeys=["editable","cellComponent","headCellComponent","headDropdownConfig"];this.initialColumnsHash=object_hash_default()(this.initialColumns,{algorithm:"sha1",ignoreUnknown:!0,excludeKeys:key=>excludeKeys.indexOf(key)>=0});const restored=this.restoreColumns();restored?this.setDisplayColumns(restored):this.setDisplayColumns(this.initialColumns)}restoreDefaultColumns(){this.setDisplayColumns(this.initialColumns),this.clearColumnsState()}updateColumns(columns){this.setDisplayColumns(columns),this.saveColumnsState()}saveColumnsState(){this._columnsCookieName&&localStorage.setItem(this._columnsCookieName,JSON.stringify({hash:this.initialColumnsHash,columns:this.displayColumns.map((_=>new TableColumnStore(_)))}))}clearColumnsState(){this._columnsCookieName&&localStorage.removeItem(this._columnsCookieName)}setDisplayColumns(columns){this.displayColumns=columns?columns.map((_=>new TableColumn(_))):[],this._columns.next(this.displayColumns)}restoreColumns(){if(this._columnsCookieName){const savedColumns=JSON.parse(localStorage.getItem(this._columnsCookieName));if(savedColumns&&savedColumns.hash===this.initialColumnsHash)return this.restoreColumnsState(savedColumns.columns)}return null}restoreColumnsState(columns){return columns.map((column=>{const found=ArrayUtil.findRecursive(this.initialColumns,(item=>item.name===column.name),"columns"),resultColumn=new TableColumn(found);return resultColumn.width=column.width,resultColumn.flex=column.flex,resultColumn.locked=column.locked,column.columns?.length>0&&(resultColumn.columns=this.restoreColumnsState(column.columns)),resultColumn}))}setState(state){this._cookieName&&state.save(this._cookieName),this._state.next(state)}setCookieName(name){this._cookieName=name,this._hiddenCookieName=`${this._cookieName}_hidden_columns`,this._columnsCookieName=`${this._cookieName}_columns`}restoreState(){let state;if(this._cookieName&&this._cookieName?.length>0&&FilterState.restore(this._cookieName)){let newState=Object.assign(this._state.value,FilterState.restore(this._cookieName));newState=DateUtil.convertDateStringsToDates(newState),state=new FilterState(newState)}else state=new FilterState;this.setState(state)}saveHiddenColumns(hiddenColumns){this._hiddenCookieName&&localStorage.setItem(this._hiddenCookieName,JSON.stringify(hiddenColumns))}restoreHiddenColumns(){const hiddenColumns=localStorage.getItem(this._hiddenCookieName??"")||"[]";this._hiddenColumns.next(JSON.parse(hiddenColumns))}sortAsc(sortEvent){sortEvent.column.sortable&&this.setState(StateUtil.sortAsc(sortEvent,this._state.value))}sortDesc(sortEvent){sortEvent.column.sortable&&this.setState(StateUtil.sortDesc(sortEvent,this._state.value))}clearSort(column){this.setState(StateUtil.clearSort(column,this._state.value))}clearAllSort(){this.setState(StateUtil.clearAllSort(this._state.value))}clearFilter(column){const state=this._state.value;if(null!=column&&column.filterable){switch(column.filterType){case FilterType.date:state.addDateFilter(new DateFilter({name:column.name,field:column.filterField,value:new DateFilterValue}));break;case FilterType.string:state.addStringFilter(new StringFilter({name:column.name,field:column.filterField,value:""}));break;case FilterType.number:state.addNumericFilter(new NumericFilter({name:column.name,field:column.filterField,value:new NumericFilterValue}));break;case FilterType.list:state.addListFilter(new ListFilter({name:column.name,field:column.filterField,value:[],type:ListFilterType.None}))}this.setState(new FilterState(state))}}clearAllFilters(){const state=this._state.value;state.stringFilters=[],state.listFilters=[],state.numericFilters=[],state.dateFilters=[],this.setState(new FilterState(state))}pinColumn(column){this.displayColumns.forEach((col=>{col.name===column.name&&(col.locked=!col.locked)})),this.updateColumns(this.displayColumns)}dragStart(column){this._dragSource=column}lockPreviousColumns(column,element){const flat=ArrayUtil.flatten(this.displayColumns,"columns",!0).sort(((a,b)=>Number(b.locked)-Number(a.locked))),index=flat.indexOf(column),previous=flat.slice(0,index).filter((_=>_.flex>0));if(previous?.length>0){const tableElement=this.getTableElement(element);previous.forEach((item=>{const itemCol=tableElement?.querySelector(`teta-head-cell[data-column="${item.name}"]`);itemCol&&(item.flex=0,item.width=itemCol.clientWidth)}))}}resizeColumn(event){null!==event.column&&void 0!==event.column&&(event.column.width=event.newWidth<50?50:event.newWidth,event.column.flex=0),this._columns.next(this.displayColumns),this.saveColumnsState()}autosizeColumn(column,target){const tableElement=this.getTableElement(target);this.setColumnAutoWidth(column,tableElement),this._columns.next(this.displayColumns),this.saveColumnsState()}autosizeAllColumns(target){const tableElement=this.getTableElement(target);ArrayUtil.flatten(this.displayColumns,"columns",!0).forEach((col=>this.setColumnAutoWidth(col,tableElement))),this._columns.next(this.displayColumns),this.saveColumnsState()}reorderColumn(column,insertBefore){if(!this._dragSource)return;const event=new ColumnReorderEvent(this._dragSource,column);if(event.source!==event.target){const sourceParent=this.findParent(event.source,this.displayColumns),targetParent=this.findParent(event.target,this.displayColumns);if(sourceParent&&targetParent){const sourceIndex=sourceParent.indexOf(event.source);sourceParent.splice(sourceIndex,1);let targetIndex=targetParent.indexOf(event.target);insertBefore||(targetIndex+=1),targetParent.splice(targetIndex,0,event.source),event.source.locked=event.target.locked,this.updateColumns(this.displayColumns)}}}getColumnParent(column){return this.findParentColumn(column,this.displayColumns)}startEditRow(cellEvent){this._currentEditCell?.row!==cellEvent?.row&&(null!=this._currentEditCell&&this._editRowStop.next(this._currentEditCell),(null===cellEvent||boolOrFuncCallback(!!this.rowEditable)(this.getRowByIndex(cellEvent?.row)?.data))&&(this._editRowStart.next(cellEvent),this._currentEditCell=cellEvent))}startEditCell(cellEvent){if(this._currentEditCell?.column!==cellEvent?.column||this._currentEditCell?.row!==cellEvent?.row){null!=this._currentEditCell&&this._editCellStop.next(this._currentEditCell);const column=this.getColumnByName(cellEvent?.column);if(boolOrFuncCallback(column?.editable)({row:this.getRowByIndex(cellEvent?.row),column})){this._editCellStart.next(cellEvent),this._currentEditCell=cellEvent;const key=cellEvent?.event?.key;key&&(1===key.length||"Delete"===key&&!column.required)&&this.clearValue(cellEvent)}}}setActiveRow(row){this._activeRow.next(row)}selectRows(rows){this._selectedRows.next(rows)}selectOrDeselectRow(row){this._selectedRows.value.indexOf(row)>=0?this._selectedRows.next(this._selectedRows.value.filter((_=>_!==row))):this._selectedRows.next([...this._selectedRows.value,row])}selectRange(row){const index=this._displayData.value.findIndex((_=>_.data===row));let minIndex=this._selectedRows.value.reduce(((prev,curr)=>{const newIndex=this._displayData.value.findIndex((_=>_.data===curr));return newIndex<prev?newIndex:prev}),this._displayData.value.length),maxIndex=this._selectedRows.value.reduce(((prev,curr)=>{const newIndex=this._displayData.value.findIndex((_=>_.data===curr));return newIndex>prev?newIndex:prev}),0);index>maxIndex&&(maxIndex=index),index<minIndex&&(minIndex=index),minIndex<index&&index<maxIndex&&(maxIndex=index),this._selectedRows.next([...this._displayData.value.slice(minIndex,maxIndex+1).map((_=>_.data))])}selectRow(row){this.selectType!==SelectType.none&&this._selectedRows.next([...this._selectedRows.value,row])}deselectRow(row){this.selectType!==SelectType.none&&this._selectedRows.next(this._selectedRows.value.filter((_=>_!==row)))}selectAll(){this._selectedRows.next(this._displayData.value.map((_=>_.data)))}deselectAll(){this._selectedRows.next([])}allRowsSelected(){return!!(this._displayData.value?.length&&this._selectedRows.value?.length&&this._displayData.value.every((_=>this._selectedRows.value.findIndex((selected=>selected===_.data))>=0)))||null!=this._selectedRows.value&&0!==this._selectedRows.value.length&&null}setHiddenColumns(value){this.saveHiddenColumns(value),this._hiddenColumns.next(value)}columnIsHidden(column){return this._hiddenColumns.value.indexOf(column.name)>=0}changeValue(coordinates){this._valueChanged.next(coordinates)}setValue(cellValue){let value;value="object"==typeof cellValue.row&&"object"==typeof cellValue.column?{row:this.getRowIndex(cellValue.row.data),column:cellValue.column.name,value:cellValue.value}:cellValue,this._valueSet.next(value)}getRowByIndex(rowIndex){if(null!=rowIndex)return this._displayData?.value[rowIndex]}getRowIndex(row){return this._displayData.value.findIndex((_=>_.data===row))}getEventCell(event){return event.composedPath().find((target=>"teta-cell"===target.tagName?.toLowerCase()))}getEventRow(event){return event.composedPath().find((target=>target?.getAttribute&&target?.getAttribute("data-row")))}getNextEditableCell(coords){const nextCell=this.getNextCell(coords);if(!nextCell)return null;const column=this.getColumnByName(nextCell?.column);return boolOrFuncCallback(column.editable)({row:this.getRowByIndex(nextCell.row),column})?nextCell:this.getNextEditableCell(nextCell)}getPreviousEditableCell(coords){const prevCell=this.getPreviousCell(coords);if(!prevCell)return null;const column=this.getColumnByName(prevCell?.column);return boolOrFuncCallback(column.editable)({row:this.getRowByIndex(prevCell.row),column})?prevCell:this.getPreviousEditableCell(prevCell)}getNextCell(coords){const columns=this.getFlatColumns();let colIndex=columns.findIndex((col=>col.name===coords?.column)),rowIndex=coords?.row;return colIndex>=0&&rowIndex>=0?(colIndex===columns.length-1?(colIndex=0,rowIndex+=1):colIndex+=1,{column:columns[colIndex]?.name,row:rowIndex}):null}getPreviousCell(coords){const columns=this.getFlatColumns();let colIndex=columns.findIndex((col=>col.name===coords?.column)),rowIndex=coords?.row;return colIndex>=0&&rowIndex>=0?(0===colIndex?(colIndex=columns.length-1,rowIndex-=1):colIndex-=1,{column:columns[colIndex]?.name,row:rowIndex}):null}getNextRowCell(coords){const columns=this.getFlatColumns(),colIndex=columns.findIndex((col=>col.name===coords?.column)),rowIndex=coords?.row;return colIndex>=0&&rowIndex>=0&&rowIndex<this._displayData.value.length-1?{column:columns[colIndex]?.name,row:rowIndex+1}:null}getPreviousRowCell(coords){const columns=this.getFlatColumns(),colIndex=columns.findIndex((col=>col.name===coords?.column)),rowIndex=coords?.row;return colIndex>=0&&rowIndex>1?{column:columns[colIndex]?.name,row:rowIndex-1}:null}getColumnByName(columnName){return ArrayUtil.findRecursive(this.displayColumns,(iterableNode=>columnName===iterableNode.name),"columns")}scrollToIndex(index){this._scrollIndex.next(null),this._scrollIndex.next(index)}getVisibleColumns(){return ArrayUtil.flatten(this._columns.value,"columns",!0).filter((_=>this._hiddenColumns.value.indexOf(_.name)<0)).sort(((a,b)=>Number(b.locked)-Number(a.locked)))}getCellInstance(coords){return coords?{row:this.getRowByIndex(coords.row),column:this.getColumnByName(coords.column)}:null}getFlatColumns(){return ArrayUtil.flatten(this.displayColumns,"columns",!0).sort(((a,b)=>Number(b.locked)-Number(a.locked)))}findParent(column,columns){const found=columns.find((x=>x.name===column.name));if(null!=found)return columns;for(let i=0,l=columns.length;i<l;i++){const col=columns[i];if(col.columns&&col.columns.length){const result=this.findParent(column,col.columns);if(null!=result)return result}}return null}findParentColumn(column,columns){const found=columns.find((x=>x.columns.indexOf(column)>=0));if(null!=found)return found;for(let i=0,l=columns.length;i<l;i++){const col=columns[i];if(col.columns&&col.columns.length){const result=this.findParentColumn(column,col.columns);if(null!=result)return result}}return null}getTableElement(element){return element.closest("teta-table")}setColumnAutoWidth(column,table){const cells=table.querySelectorAll(`teta-cell[data-column="${column.name}"] .cell-text`);let maxWidth=0;cells.forEach((cell=>{cell.scrollWidth>maxWidth&&(maxWidth=cell.scrollWidth)}));const aggCells=table.querySelectorAll(`.aggregate-cell[data-column="${column.name}"] .cell-text`);aggCells?.forEach((cell=>{cell.scrollWidth>maxWidth&&(maxWidth=cell.scrollWidth)})),column.flex=0,column.width=maxWidth+20}clearValue(event){this.setValue({...event,value:null})}}_class143=TableService,defineProperty_defineProperty(TableService,"fac",(function _class143_Factory(t){return new(t||_class143)})),defineProperty_defineProperty(TableService,"prov",core["defineInjectable"]({token:_class143,factory:_class143.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class ClickService{constructor(_document){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"click",void 0),defineProperty_defineProperty(this,"contextMenu",void 0),this._document=_document,this.click=(0,fromEvent.R)(this._document,"click"),this.contextMenu=(0,fromEvent.R)(this._document,"contextmenu")}}_class144=ClickService,defineProperty_defineProperty(ClickService,"fac",(function _class144_Factory(t){return new(t||_class144)(core["inject"](common.DOCUMENT))})),defineProperty_defineProperty(ClickService,"prov",core["defineInjectable"]({token:_class144,factory:_class144.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ClickService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]}),null);class ContextMenuDirective extends DynamicContentBaseDirective{get _dynamicContent(){return this.tetaContextMenu}constructor(_document,_elementRef,_service,_injector,_zone,_cdr,_click){super(_document,_elementRef,_service,_injector,_zone,_cdr),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_service",void 0),defineProperty_defineProperty(this,"_injector",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_click",void 0),defineProperty_defineProperty(this,"tetaContextMenu",void 0),defineProperty_defineProperty(this,"autoCloseIgnore",[]),defineProperty_defineProperty(this,"_eventPoint",void 0),defineProperty_defineProperty(this,"scrollListener",(event=>{this._open&&this._componentRef&&!this._componentRef.location.nativeElement.contains(event.target)&&this._componentRef.location.nativeElement!==event.target&&(this.destroyContentRef(),this.openChange.emit(!1))})),this._document=_document,this._elementRef=_elementRef,this._service=_service,this._injector=_injector,this._zone=_zone,this._cdr=_cdr,this._click=_click,this.addScrollListener()}showContent(event){this.tetaContextMenu&&!event.defaultPrevented&&(event.preventDefault(),setTimeout((()=>{this.createMenu(event)})))}click(event){this._componentRef&&DomUtil.clickedInside(this._componentRef.location.nativeElement,event)&&(event.preventDefault(),event.stopPropagation())}documentClick(event){this._open&&this._componentRef&&(!DomUtil.clickedInside(this._componentRef.location.nativeElement,event)||this.autoCloseIgnore.indexOf("inside")<0)&&(this.destroyContentRef(),this.openChange.emit(!1))}addScrollListener(){window.addEventListener("scroll",this.scrollListener,!0)}removeScrollListener(){window.removeEventListener("scroll",this.scrollListener,!0)}ngOnDestroy(){super.ngOnDestroy(),this.removeScrollListener()}setPosition(){if(this._componentRef&&this._open){const position=PositionUtil.getPosition({top:this._eventPoint.y,bottom:this._eventPoint.y,left:this._eventPoint.x,right:this._eventPoint.x},this._componentRef.location.nativeElement.getBoundingClientRect(),this.align,this.verticalAlign);PositionUtil.setElementPosition(this._componentRef.location.nativeElement,position)}}createMenu(event){null!=this.tetaContextMenu&&(this._eventPoint=event,this._componentRef=this.createContentRef(),this._componentRef.instance.className=[...ArrayUtil.asArray(this.className),"context-menu"],this.openChange.emit(!0))}}_class145=ContextMenuDirective,defineProperty_defineProperty(ContextMenuDirective,"fac",(function _class145_Factory(t){return new(t||_class145)(core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.ElementRef),core["directiveInject"](DynamicComponentService),core["directiveInject"](core.Injector),core["directiveInject"](core.NgZone),core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](ClickService))})),defineProperty_defineProperty(ContextMenuDirective,"dir",core["defineDirective"]({type:_class145,selectors:[["","tetaContextMenu",""]],hostBindings:function _class145_HostBindings(rf,ctx){1&rf&&core["listener"]("contextmenu",(function _class145_contextmenu_HostBindingHandler($event){return ctx.showContent($event)}))("click",(function _class145_click_HostBindingHandler($event){return ctx.click($event)}))("click",(function _class145_click_HostBindingHandler($event){return ctx.documentClick($event)}),!1,core["resolveDocument"])("contextmenu",(function _class145_contextmenu_HostBindingHandler($event){return ctx.documentClick($event)}),!1,core["resolveDocument"])},inputs:{tetaContextMenu:"tetaContextMenu",autoCloseIgnore:"autoCloseIgnore"},features:[core["InheritDefinitionFeature"]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ContextMenuDirective,[{type:core.Directive,args:[{selector:"[tetaContextMenu]"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.ElementRef},{type:DynamicComponentService},{type:core.Injector},{type:core.NgZone},{type:core.ChangeDetectorRef},{type:ClickService}]}),{tetaContextMenu:[{type:core.Input}],autoCloseIgnore:[{type:core.Input}],showContent:[{type:core.HostListener,args:["contextmenu",["$event"]]}],click:[{type:core.HostListener,args:["click",["$event"]]}],documentClick:[{type:core.HostListener,args:["document:click",["$event"]]},{type:core.HostListener,args:["document:contextmenu",["$event"]]}]});class TableUtil{static getColumnLeaves(column){return column?.columns?.length>0?ArrayUtil.flatten(column.columns,"columns",!0):null}static getData(data,state){let result=[...data];return result=TableUtil.filterData(result,state),result=TableUtil.sortData(result,state),result}static sortData(data,state){let result=[...data];const func=sortParam=>{result=TableUtil.sort(result,sortParam)};return state?.sortParams?.length>0&&state.sortParams.forEach(func),result}static filterData(data,state){let result=[...data];if(state?.stringFilters?.length){const stringFilter=filter=>{result=TableUtil.filterString(result,filter)};state.stringFilters.forEach(stringFilter)}if(state?.dateFilters?.length){const dateFilter=filter=>{result=TableUtil.filterDate(result,filter)};state.dateFilters.forEach(dateFilter)}if(state?.numericFilters?.length){const numericFilter=filter=>{result=TableUtil.filterNumber(result,filter)};state.numericFilters.forEach(numericFilter)}if(state?.listFilters?.length){const listFilter=filter=>{result=TableUtil.filterList(result,filter)};state.listFilters.forEach(listFilter)}return result}static filterString(data,filter){if(null===filter.value||void 0===filter.value)return data;return data.filter((row=>{const item=row;return filter.type===StringFilterType.EndsWith?item[filter.field]?.toLowerCase().endsWith(filter.value?.toLowerCase()):filter.type===StringFilterType.Equals?item[filter.field]?.toLowerCase()===filter.value?.toLowerCase():filter.type===StringFilterType.StartsWith?item[filter.field]?.toLowerCase().startsWith(filter.value?.toLowerCase()):item[filter.field]?.toLowerCase().indexOf(filter.value?.toLowerCase())>=0}))}static filterDate(data,filter){return data.filter((row=>{const item=row;return(null===filter.value.lessThan||void 0===filter.value.lessThan||filter.value.lessThan?.getTime()>=item[filter.field]?.getTime())&&(null===filter.value.greaterThan||void 0===filter.value.greaterThan||filter.value.greaterThan?.getTime()<=item[filter.field]?.getTime())}))}static filterNumber(data,filter){return data.filter((row=>{const item=row;return(null===filter.value.lessThan||void 0===filter.value.lessThan||""===filter.value.lessThan?.toString()||filter.value.lessThan>=item[filter.field])&&(null===filter.value.greaterThan||void 0===filter.value.greaterThan||""===filter.value.greaterThan?.toString()||filter.value.greaterThan<=item[filter.field])&&(null===filter.value.equalsTo||void 0===filter.value.equalsTo||""===filter.value.equalsTo?.toString()||filter.value.equalsTo===item[filter.field])}))}static filterList(data,filter){if(null===filter.value||void 0===filter.value||filter.value.length<1)return data;return data.filter((row=>{const item=row;return filter.type===ListFilterType.Excluded?filter.value.indexOf(item[filter.field])<0:filter.value.indexOf(item[filter.field])>=0}))}static sort(data,sortParam){return[...data.sort(sortParam.asc?TableUtil.asc(sortParam.field):TableUtil.desc(sortParam.field))]}static desc(field){return(a,b)=>a[field]>b[field]?-1:1}static asc(field){return(a,b)=>a[field]<b[field]?-1:1}}class ColumnResizeEvent{constructor(column,newWidth){defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"newWidth",void 0),this.column=column,this.newWidth=newWidth}}class ResizeDragDirective{get horizontal(){return"horizontal"===this.tetaResizeDrag}get vertical(){return"vertical"===this.tetaResizeDrag}constructor(_document){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"tetaResizeDrag","vertical"),defineProperty_defineProperty(this,"resizeStart",new core.EventEmitter),defineProperty_defineProperty(this,"resizeProcess",new core.EventEmitter),defineProperty_defineProperty(this,"resizeEnd",new core.EventEmitter),defineProperty_defineProperty(this,"_active",void 0),defineProperty_defineProperty(this,"handleMouseUp",(event=>{this.resizeEnd.emit(event),this.removeListeners()})),defineProperty_defineProperty(this,"handleMouseMove",(event=>{this.resizeProcess.emit(event)})),this._document=_document}mouseDown(event){this.resizeStart.emit(event),this.addListeners()}addListeners(){this._active=!0,this._document.addEventListener("mouseup",this.handleMouseUp),this._document.addEventListener("mousemove",this.handleMouseMove)}removeListeners(){this._active=!1,this._document.removeEventListener("mouseup",this.handleMouseUp),this._document.removeEventListener("mousemove",this.handleMouseMove)}}_class147=ResizeDragDirective,defineProperty_defineProperty(ResizeDragDirective,"fac",(function _class147_Factory(t){return new(t||_class147)(core["directiveInject"](common.DOCUMENT))})),defineProperty_defineProperty(ResizeDragDirective,"dir",core["defineDirective"]({type:_class147,selectors:[["","tetaResizeDrag",""]],hostVars:6,hostBindings:function _class147_HostBindings(rf,ctx){1&rf&&core["listener"]("mousedown",(function _class147_mousedown_HostBindingHandler($event){return ctx.mouseDown($event)})),2&rf&&core["classProp"]("resize-drag_active",ctx._active)("resize-drag_horizontal",ctx.horizontal)("resize-drag_vertical",ctx.vertical)},inputs:{tetaResizeDrag:"tetaResizeDrag"},outputs:{resizeStart:"resizeStart",resizeProcess:"resizeProcess",resizeEnd:"resizeEnd"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ResizeDragDirective,[{type:core.Directive,args:[{selector:"[tetaResizeDrag]"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]}),{tetaResizeDrag:[{type:core.Input}],resizeStart:[{type:core.Output}],resizeProcess:[{type:core.Output}],resizeEnd:[{type:core.Output}],_active:[{type:core.HostBinding,args:["class.resize-drag_active"]}],horizontal:[{type:core.HostBinding,args:["class.resize-drag_horizontal"]}],vertical:[{type:core.HostBinding,args:["class.resize-drag_vertical"]}],mouseDown:[{type:core.HostListener,args:["mousedown",["$event"]]}]});class HeadCellComponentBase{}_class148=HeadCellComponentBase,defineProperty_defineProperty(HeadCellComponentBase,"fac",(function _class148_Factory(t){return new(t||_class148)})),defineProperty_defineProperty(HeadCellComponentBase,"cmp",core["defineComponent"]({type:_class148,selectors:[["ng-component"]],hostVars:2,hostBindings:function _class148_HostBindings(rf,ctx){2&rf&&core["classProp"]("table-head__cell__component",ctx.column)},decls:0,vars:0,template:function _class148_Template(rf,ctx){},encapsulation:2})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HeadCellComponentBase,[{type:core.Component,args:[{template:""}]}],null,{column:[{type:core.HostBinding,args:["class.table-head__cell__component"]}]});class DefaultHeadCellComponent extends HeadCellComponentBase{set column(val){this._column=val,this._cdr.detectChanges()}get column(){return this._column}set columns(val){this._columns=val,this._cdr.detectChanges()}get columns(){return this._columns}set data(data){this._data=data,this._cdr.detectChanges()}get data(){return this._data}constructor(_cdr){super(),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_column",void 0),defineProperty_defineProperty(this,"_columns",void 0),defineProperty_defineProperty(this,"_data",void 0),this._cdr=_cdr}ngOnInit(){}}_class149=DefaultHeadCellComponent,defineProperty_defineProperty(DefaultHeadCellComponent,"fac",(function _class149_Factory(t){return new(t||_class149)(core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DefaultHeadCellComponent,"cmp",core["defineComponent"]({type:_class149,selectors:[["teta-default-head-cell"]],inputs:{column:"column",columns:"columns",data:"data"},features:[core["InheritDefinitionFeature"]],decls:4,vars:3,consts:[[1,"column","column_auto",3,"tetaHint"],[1,"table-head__cell__text"],["class","table-head__cell__text font-caption color-text-70",4,"ngIf"],[1,"table-head__cell__text","font-caption","color-text-70"]],template:function _class149_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0)(1,"div",1),core["text"](2),core["elementEnd"](),core["template"](3,_class149_div_3_Template,2,1,"div",2),core["elementEnd"]()),2&rf&&(core["property"]("tetaHint",ctx.column.hint||ctx.column.caption),core["advance"](2),core["textInterpolate1"](" ",ctx.column.caption," "),core["advance"](1),core["property"]("ngIf",ctx.column.unit))},dependencies:[common.NgIf,HintDirective],styles:["[_nghost-%COMP%]{align-items:center;justify-content:center;display:flex;min-width:0;padding:6px 8px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DefaultHeadCellComponent,[{type:core.Component,args:[{selector:"teta-default-head-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="column column_auto" [tetaHint]="column.hint || column.caption">\n  <div class="table-head__cell__text">\n    {{column.caption}}\n  </div>\n  <div *ngIf="column.unit" class="table-head__cell__text font-caption color-text-70">\n    [{{column.unit}}]\n  </div>\n</div>\n',styles:[":host{align-items:center;justify-content:center;display:flex;min-width:0;padding:6px 8px}\n"]}]}],(function(){return[{type:core.ChangeDetectorRef}]}),{column:[{type:core.Input}],columns:[{type:core.Input}],data:[{type:core.Input}]});class HeadCellHostComponent{set column(column){this._column=column,this.init&&(this.componentRef.instance.column=this._column)}get column(){return this._column}set columns(columns){this._columns=columns,this.init&&(this.componentRef.instance.columns=this._columns)}get columns(){return this._columns}set data(data){this._data=data,this.init&&(this.componentRef.instance.data=this._data)}get data(){return this._data}constructor(viewContainerRef){defineProperty_defineProperty(this,"viewContainerRef",void 0),defineProperty_defineProperty(this,"_column",void 0),defineProperty_defineProperty(this,"_columns",void 0),defineProperty_defineProperty(this,"_data",void 0),defineProperty_defineProperty(this,"componentRef",void 0),defineProperty_defineProperty(this,"init",void 0),this.viewContainerRef=viewContainerRef}ngOnInit(){HeadCellComponentBase.isPrototypeOf(this.column.headCellComponent)||(this.column.headCellComponent=DefaultHeadCellComponent),this.componentRef=this.viewContainerRef.createComponent(this.column.headCellComponent),this.componentRef.instance.column=this.column,this.componentRef.instance.columns=this.columns,this.componentRef.instance.data=this.data,this.init=!0}}_class150=HeadCellHostComponent,defineProperty_defineProperty(HeadCellHostComponent,"fac",(function _class150_Factory(t){return new(t||_class150)(core["directiveInject"](core.ViewContainerRef))})),defineProperty_defineProperty(HeadCellHostComponent,"cmp",core["defineComponent"]({type:_class150,selectors:[["teta-head-cell-host"]],inputs:{column:"column",columns:"columns",data:"data"},decls:0,vars:0,template:function _class150_Template(rf,ctx){},styles:["[_nghost-%COMP%]{display:contents}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HeadCellHostComponent,[{type:core.Component,args:[{selector:"teta-head-cell-host",template:"",changeDetection:core.ChangeDetectionStrategy.OnPush,styles:[":host{display:contents}\n"]}]}],(function(){return[{type:core.ViewContainerRef}]}),{column:[{type:core.Input}],columns:[{type:core.Input}],data:[{type:core.Input}]});class TabContentDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class151=TabContentDirective,defineProperty_defineProperty(TabContentDirective,"fac",(function _class151_Factory(t){return new(t||_class151)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(TabContentDirective,"dir",core["defineDirective"]({type:_class151,selectors:[["","tetaTabContent",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TabContentDirective,[{type:core.Directive,args:[{selector:"[tetaTabContent]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class TabTitleDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),this.template=template}}_class152=TabTitleDirective,defineProperty_defineProperty(TabTitleDirective,"fac",(function _class152_Factory(t){return new(t||_class152)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(TabTitleDirective,"dir",core["defineDirective"]({type:_class152,selectors:[["","tetaTabTitle",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TabTitleDirective,[{type:core.Directive,args:[{selector:"[tetaTabTitle]"}]}],(function(){return[{type:core.TemplateRef}]}),null);let nextId=0;class TabComponent{constructor(){defineProperty_defineProperty(this,"id","teta-tab-"+nextId++),defineProperty_defineProperty(this,"title",void 0),defineProperty_defineProperty(this,"disabled",!1),defineProperty_defineProperty(this,"titleTpl",void 0),defineProperty_defineProperty(this,"contentTpl",void 0)}ngAfterContentChecked(){}}_class153=TabComponent,defineProperty_defineProperty(TabComponent,"fac",(function _class153_Factory(t){return new(t||_class153)})),defineProperty_defineProperty(TabComponent,"cmp",core["defineComponent"]({type:_class153,selectors:[["teta-tab"]],contentQueries:function _class153_ContentQueries(rf,ctx,dirIndex){if(1&rf&&(core["contentQuery"](dirIndex,TabTitleDirective,5),core["contentQuery"](dirIndex,TabContentDirective,5)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.titleTpl=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.contentTpl=_t.first)}},inputs:{id:"id",title:"title",disabled:"disabled"},decls:0,vars:0,template:function _class153_Template(rf,ctx){},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TabComponent,[{type:core.Component,args:[{selector:"teta-tab",template:"",changeDetection:core.ChangeDetectionStrategy.OnPush}]}],null,{id:[{type:core.Input}],title:[{type:core.Input}],disabled:[{type:core.Input}],titleTpl:[{type:core.ContentChild,args:[TabTitleDirective,{static:!1}]}],contentTpl:[{type:core.ContentChild,args:[TabContentDirective,{static:!1}]}]});class TabsComponent{constructor(){defineProperty_defineProperty(this,"classTabs",!0),defineProperty_defineProperty(this,"activeId",void 0),defineProperty_defineProperty(this,"destroyOnHide",!0),defineProperty_defineProperty(this,"tabChange",new core.EventEmitter),defineProperty_defineProperty(this,"tabs",void 0)}select(tabId){const selectedTab=this._getTabById(tabId);if(selectedTab&&!selectedTab.disabled&&this.activeId!==selectedTab.id){let defaultPrevented=!1;this.tabChange.emit({activeId:this.activeId,nextId:selectedTab.id,preventDefault:()=>{defaultPrevented=!0}}),defaultPrevented||(this.activeId=selectedTab.id)}}ngAfterContentChecked(){const activeTab=this._getTabById(this.activeId);this.activeId=activeTab?activeTab.id:this.tabs.length?this.tabs.first.id:null}_getTabById(id){const tabsWithId=this.tabs.filter((tab=>tab.id===id));return tabsWithId.length?tabsWithId[0]:null}}_class154=TabsComponent,defineProperty_defineProperty(TabsComponent,"fac",(function _class154_Factory(t){return new(t||_class154)})),defineProperty_defineProperty(TabsComponent,"cmp",core["defineComponent"]({type:_class154,selectors:[["teta-tabs"]],contentQueries:function _class154_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,TabComponent,4),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.tabs=_t)}},hostVars:2,hostBindings:function _class154_HostBindings(rf,ctx){2&rf&&core["classProp"]("tabs",ctx.classTabs)},inputs:{activeId:"activeId",destroyOnHide:"destroyOnHide"},outputs:{tabChange:"tabChange"},ngContentSelectors:_c0,decls:5,vars:2,consts:[["role","tablist",1,"tabs-head"],["class","tabs-head-item",3,"tabs-head-item_active","tabs-head-item_disabled","click",4,"ngFor","ngForOf"],[1,"tabs-content"],["ngFor","",3,"ngForOf"],[1,"tabs-head-item",3,"click"],["role","tab",1,"tabs-title",3,"id"],[3,"ngTemplateOutlet"],[4,"ngIf"]],template:function _class154_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0),core["template"](1,_class154_div_1_Template,4,11,"div",1),core["projection"](2),core["elementEnd"](),core["elementStart"](3,"div",2),core["template"](4,_class154_ng_template_4_Template,1,1,"ng-template",3),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("ngForOf",ctx.tabs),core["advance"](3),core["property"]("ngForOf",ctx.tabs))},dependencies:[common.NgForOf,common.NgIf,common.NgTemplateOutlet]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TabsComponent,[{type:core.Component,args:[{selector:"teta-tabs",template:'<div class="tabs-head" role="tablist">\n  <div class="tabs-head-item"\n       *ngFor="let tab of tabs"\n       (click)="select(tab.id);"\n       [class.tabs-head-item_active]="tab.id === activeId"\n       [class.tabs-head-item_disabled]="tab.disabled">\n    <span [id]="tab.id" class="tabs-title"\n          role="tab"\n          [attr.tabindex]="(tab.disabled ? \'-1\': undefined)"\n          [attr.aria-controls]="(!destroyOnHide || tab.id === activeId ? tab.id + \'-panel\' : null)"\n          [attr.aria-expanded]="tab.id === activeId"\n          [attr.aria-disabled]="tab.disabled">\n      {{tab.title}}\n      <ng-template [ngTemplateOutlet]="tab.titleTpl?.template"></ng-template>\n    </span>\n  </div>\n  <ng-content></ng-content>\n</div>\n<div class="tabs-content">\n  <ng-template ngFor let-tab [ngForOf]="tabs">\n    <ng-container *ngIf="!destroyOnHide || tab.id === activeId">\n      <ng-template [ngTemplateOutlet]="tab.contentTpl?.template"></ng-template>\n    </ng-container>\n  </ng-template>\n</div>\n'}]}],(function(){return[]}),{classTabs:[{type:core.HostBinding,args:["class.tabs"]}],activeId:[{type:core.Input}],destroyOnHide:[{type:core.Input}],tabChange:[{type:core.Output}],tabs:[{type:core.ContentChildren,args:[TabComponent]}]});class HeadCellDropdownComponent{constructor(_svc,_config,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"tabTemplates",void 0),defineProperty_defineProperty(this,"dropDownOpen",void 0),defineProperty_defineProperty(this,"dropDownOpenChange",new core.EventEmitter),defineProperty_defineProperty(this,"closeDropdown",(()=>{this.dropDownOpen=!1,this.dropDownOpenChange.emit(!1)})),this._svc=_svc,this._config=_config,this._cdr=_cdr}trackIndex(index){return index}}_class155=HeadCellDropdownComponent,defineProperty_defineProperty(HeadCellDropdownComponent,"fac",(function _class155_Factory(t){return new(t||_class155)(core["directiveInject"](TableService),core["directiveInject"](TetaConfigService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(HeadCellDropdownComponent,"cmp",core["defineComponent"]({type:_class155,selectors:[["teta-head-cell-dropdown"]],inputs:{columns:"columns",column:"column",state:"state",data:"data",tabTemplates:"tabTemplates",dropDownOpen:"dropDownOpen"},outputs:{dropDownOpenChange:"dropDownOpenChange"},decls:1,vars:1,consts:[["class","column_auto",4,"ngIf"],[1,"column_auto"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],["tetaTabTitle",""],["tetaTabContent",""],[3,"name","palette"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function _class155_Template(rf,ctx){1&rf&&core["template"](0,_class155_teta_tabs_0_Template,2,2,"teta-tabs",0),2&rf&&core["property"]("ngIf",ctx.dropDownOpen)},dependencies:[common.NgForOf,common.NgIf,common.NgTemplateOutlet,IconComponent,TabContentDirective,TabTitleDirective,TabComponent,TabsComponent],styles:["[_nghost-%COMP%]{display:flex;flex-grow:1;min-height:0;min-width:250px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HeadCellDropdownComponent,[{type:core.Component,args:[{selector:"teta-head-cell-dropdown",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-tabs class="column_auto" *ngIf="dropDownOpen">\n  <ng-container *ngFor="let tab of tabTemplates; trackBy: trackIndex">\n    <teta-tab *ngIf="tab.showTab(column)">\n      <ng-template tetaTabTitle>\n        <ng-container *ngIf="tab.icon">\n          <teta-icon [name]="tab.icon" [palette]="\'text\'"></teta-icon>\n        </ng-container>\n      </ng-template>\n      <ng-template tetaTabContent>\n        <ng-container\n          *ngTemplateOutlet="tab.template; context: {\n            column: column,\n            columns: columns,\n            data: data,\n            state: state,\n            close: closeDropdown\n          }"></ng-container>\n      </ng-template>\n    </teta-tab>\n  </ng-container>\n</teta-tabs>\n',styles:[":host{display:flex;flex-grow:1;min-height:0;min-width:250px}\n"]}]}],(function(){return[{type:TableService},{type:TetaConfigService},{type:core.ChangeDetectorRef}]}),{columns:[{type:core.Input}],column:[{type:core.Input}],state:[{type:core.Input}],data:[{type:core.Input}],tabTemplates:[{type:core.Input}],dropDownOpen:[{type:core.Input}],dropDownOpenChange:[{type:core.Output}]});class SortEvent{constructor(column,shiftKey){defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"shiftKey",void 0),this.column=column,this.shiftKey=shiftKey}}class MainDropdownTabComponent{constructor(_svc,_config,_elementRef,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"close",void 0),defineProperty_defineProperty(this,"headCellElementRef",void 0),defineProperty_defineProperty(this,"locale",void 0),this._svc=_svc,this._config=_config,this._elementRef=_elementRef,this._cdr=_cdr,this.locale=this._config.locale}get sortParam(){return StateUtil.getSortState(this.state,this.column)}get filtered(){return StateUtil.isColumnFiltered(this.state,this.column)}get parent(){return this._svc.getColumnParent(this.column)}pinColumn(){this._svc.pinColumn(this.column)}sortAsc(event){this._svc.sortAsc(new SortEvent(this.column,event.shiftKey))}sortDesc(event){this._svc.sortDesc(new SortEvent(this.column,event.shiftKey))}clearSort(){this._svc.clearSort(this.column)}clearAllSort(){this._svc.clearAllSort()}hasFilteredColumns(){return StateUtil.hasFilteredColumns(this.state)}hasSortedColumns(){return StateUtil.hasSortedColumns(this.state)}restoreDefaultColumns(){this._svc.restoreDefaultColumns()}clearFilter(){this._svc.clearFilter(this.column),this.close(),this._cdr.markForCheck()}clearAllFilters(){this._svc.clearAllFilters(),this.close(),this._cdr.markForCheck()}autosizeColumn(){this._svc.autosizeColumn(this.column,this.headCellElementRef.nativeElement)}autosizeAllColumns(){this._svc.autosizeAllColumns(this.headCellElementRef.nativeElement)}ngOnInit(){}}_class157=MainDropdownTabComponent,defineProperty_defineProperty(MainDropdownTabComponent,"fac",(function _class157_Factory(t){return new(t||_class157)(core["directiveInject"](TableService),core["directiveInject"](TetaConfigService),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(MainDropdownTabComponent,"cmp",core["defineComponent"]({type:_class157,selectors:[["teta-main-dropdown-tab"]],inputs:{columns:"columns",column:"column",state:"state",data:"data",close:"close",headCellElementRef:"headCellElementRef"},decls:2,vars:3,consts:[["class","list column_auto",4,"ngIf"],[1,"list","column_auto"],[4,"ngIf"],[1,"list-item","list-item_interactive",3,"click"],[1,"list-divider"],["class","list-item list-item_interactive",3,"click",4,"ngIf"]],template:function _class157_Template(rf,ctx){1&rf&&(core["template"](0,_class157_div_0_Template,11,6,"div",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,common.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](MainDropdownTabComponent,[{type:core.Component,args:[{selector:"teta-main-dropdown-tab",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="list column_auto" *ngIf="locale | async as loc">\n  <ng-container *ngIf="!parent">\n    <div class="list-item list-item_interactive"\n         (click)="pinColumn()">\n      {{column.locked ? loc.unpin : loc.pin}}\n    </div>\n    <div class="list-divider"></div>\n  </ng-container>\n  <ng-container *ngIf="column.sortable">\n    <div class="list-item list-item_interactive"\n         (click)="sortAsc($event)">\n      {{loc.sortAsc}}\n    </div>\n    <div class="list-item list-item_interactive"\n         (click)="sortDesc($event)">\n      {{loc.sortDesc}}\n    </div>\n    <ng-container *ngIf="hasSortedColumns()">\n      <div class="list-item list-item_interactive"\n           *ngIf="sortParam"\n           (click)="clearSort()">\n        {{loc.clearSort}}\n      </div>\n      <div class="list-item list-item_interactive"\n           (click)="clearAllSort()">\n        {{loc.clearAllSort}}\n      </div>\n      <div class="list-divider"></div>\n    </ng-container>\n  </ng-container>\n  <ng-container *ngIf="hasFilteredColumns()">\n    <div class="list-item list-item_interactive"\n         *ngIf="filtered"\n         (click)="clearFilter()">\n      {{loc.clearFilter}}\n    </div>\n    <div class="list-item list-item_interactive"\n         (click)="clearAllFilters()">\n      {{loc.clearAllFilters}}\n    </div>\n    <div class="list-divider"></div>\n  </ng-container>\n  <div class="list-item list-item_interactive" (click)="autosizeColumn()">\n    {{loc.autosizeColumn}}\n  </div>\n  <div class="list-item list-item_interactive" (click)="autosizeAllColumns()">\n    {{loc.autosizeAll}}\n  </div>\n  <div class="list-divider"></div>\n  <div class="list-item list-item_interactive" (click)="restoreDefaultColumns()">\n    {{loc.resetColumnsSize}}\n  </div>\n</div>\n',styles:[":host{display:flex;flex-direction:column}\n"]}]}],(function(){return[{type:TableService},{type:TetaConfigService},{type:core.ElementRef},{type:core.ChangeDetectorRef}]}),{columns:[{type:core.Input}],column:[{type:core.Input}],state:[{type:core.Input}],data:[{type:core.Input}],close:[{type:core.Input}],headCellElementRef:[{type:core.Input}]});class FilterDropdownTabComponent{enter(){this.applyFilter()}constructor(_svc,_config,_elementRef,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"close",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"filterOptions",void 0),this._svc=_svc,this._config=_config,this._elementRef=_elementRef,this._cdr=_cdr,this.locale=this._config.locale,this.filterOptions=this._svc.filterOptions}clearFilter(){this._svc.clearFilter(this.column),this.close(),this._cdr.markForCheck()}applyFilter(){this._svc.setState(new FilterState(this.state)),this.close(),this._cdr.markForCheck()}ngOnInit(){}}_class158=FilterDropdownTabComponent,defineProperty_defineProperty(FilterDropdownTabComponent,"fac",(function _class158_Factory(t){return new(t||_class158)(core["directiveInject"](TableService),core["directiveInject"](TetaConfigService),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(FilterDropdownTabComponent,"cmp",core["defineComponent"]({type:_class158,selectors:[["teta-filter-dropdown-tab"]],hostBindings:function _class158_HostBindings(rf,ctx){1&rf&&core["listener"]("keydown.enter",(function _class158_keydown_enter_HostBindingHandler(){return ctx.enter()}))},inputs:{columns:"columns",column:"column",state:"state",data:"data",close:"close"},decls:2,vars:3,consts:[[4,"ngIf"],[3,"column","data","state","filterOptions",4,"ngIf"],[1,"justify-content-between"],["type","button","teta-button","",3,"palette","view","click"],["type","button","teta-button","",3,"palette","click"],[3,"name","palette"],[3,"column","data","state","filterOptions"]],template:function _class158_Template(rf,ctx){1&rf&&(core["template"](0,_class158_ng_container_0_Template,9,10,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,FilterHostComponent,IconComponent,ButtonComponent,ToolbarComponent,common.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;min-height:0;min-width:0}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](FilterDropdownTabComponent,[{type:core.Component,args:[{selector:"teta-filter-dropdown-tab",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="locale | async as loc">\n  <teta-filter-host [column]="column"\n                    [data]="data"\n                    [state]="state"\n                    *ngIf="filterOptions | async as options"\n                    [filterOptions]="options[column.name]"></teta-filter-host>\n  <teta-toolbar class="justify-content-between">\n    <button type="button" teta-button [palette]="\'text\'" [view]="\'ghost\'" (click)="clearFilter()">\n      {{loc.clear}}\n    </button>\n    <button type="button" teta-button [palette]="\'primary\'" (click)="applyFilter()">\n      <teta-icon [name]="\'tick\'" [palette]="\'white\'"></teta-icon>\n      {{loc.apply}}\n    </button>\n  </teta-toolbar>\n</ng-container>\n',styles:[":host{display:flex;flex-direction:column;min-height:0;min-width:0}\n"]}]}],(function(){return[{type:TableService},{type:TetaConfigService},{type:core.ElementRef},{type:core.ChangeDetectorRef}]}),{columns:[{type:core.Input}],column:[{type:core.Input}],state:[{type:core.Input}],data:[{type:core.Input}],close:[{type:core.Input}],enter:[{type:core.HostListener,args:["keydown.enter"]}]});class TreeService{constructor(){defineProperty_defineProperty(this,"openItems",void 0),defineProperty_defineProperty(this,"scrollToIndex",void 0),defineProperty_defineProperty(this,"_openItems",new BehaviorSubject.X([])),defineProperty_defineProperty(this,"_scrollToIndex",new BehaviorSubject.X(0)),defineProperty_defineProperty(this,"compareItems",(item=>item)),this.openItems=this._openItems.asObservable(),this.scrollToIndex=this._scrollToIndex.asObservable()}openItem(item){const newValue=this.addOrRemove(item,this._openItems.value);this.setOpenItems(newValue)}setOpenItems(items){this._openItems.next(items)}scrollTo(index){this._scrollToIndex.next(index)}addOrRemove(needle,list){const found=list?.find((x=>this.compareItems(x)===this.compareItems(needle)));return found?list.filter((x=>this.compareItems(x)!==this.compareItems(needle))):[...list,needle]}}_class159=TreeService,defineProperty_defineProperty(TreeService,"fac",(function _class159_Factory(t){return new(t||_class159)})),defineProperty_defineProperty(TreeService,"prov",core["defineInjectable"]({token:_class159,factory:_class159.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TreeService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class TetaTemplateDirective{constructor(template){defineProperty_defineProperty(this,"template",void 0),defineProperty_defineProperty(this,"id",void 0),this.template=template}getId(){return this.id}}_class160=TetaTemplateDirective,defineProperty_defineProperty(TetaTemplateDirective,"fac",(function _class160_Factory(t){return new(t||_class160)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(TetaTemplateDirective,"dir",core["defineDirective"]({type:_class160,selectors:[["","tetaTemplate",""]],inputs:{id:["tetaTemplate","id"]}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TetaTemplateDirective,[{type:core.Directive,args:[{selector:"[tetaTemplate]"}]}],(function(){return[{type:core.TemplateRef}]}),{id:[{type:core.Input,args:["tetaTemplate"]}]});class TreeItemComponent{get computedDepth(){return this.depth+(this.item[this.childNodeName]?.length>0?0:this.childPadding?2:1)}constructor(service,_cdr){defineProperty_defineProperty(this,"service",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"item",void 0),defineProperty_defineProperty(this,"depth",0),defineProperty_defineProperty(this,"padding",16),defineProperty_defineProperty(this,"childNodeName","children"),defineProperty_defineProperty(this,"template",void 0),defineProperty_defineProperty(this,"childPadding",void 0),defineProperty_defineProperty(this,"treeItemClass",!0),defineProperty_defineProperty(this,"itemIsOpen",!1),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"treeItemInstance",!0),this.service=service,this._cdr=_cdr}openItem(){this.service.openItem(this.item)}ngOnInit(){this.service.openItems.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{const found=_?.find((x=>this.service.compareItems(x)===this.service.compareItems(this.item)));this.itemIsOpen=null!=found,this._cdr.markForCheck()}))}ngOnChanges(changes){}ngOnDestroy(){this._alive=!1}}_class161=TreeItemComponent,defineProperty_defineProperty(TreeItemComponent,"fac",(function _class161_Factory(t){return new(t||_class161)(core["directiveInject"](TreeService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TreeItemComponent,"cmp",core["defineComponent"]({type:_class161,selectors:[["teta-tree-item"]],hostVars:3,hostBindings:function _class161_HostBindings(rf,ctx){2&rf&&(core["syntheticHostProperty"]("@treeItemInstance",ctx.treeItemInstance),core["classProp"]("tree__item-container",ctx.treeItemClass))},inputs:{item:"item",depth:"depth",padding:"padding",childNodeName:"childNodeName",template:"template",childPadding:"childPadding"},features:[core["NgOnChangesFeature"]],decls:2,vars:9,consts:[[1,"tree__item_content",3,"ngClass","click"],[4,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function _class161_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0),core["listener"]("click",(function _class161_Template_div_click_0_listener(){return ctx.openItem()})),core["template"](1,_class161_ng_container_1_Template,1,0,"ng-container",1),core["elementEnd"]()),2&rf&&(core["property"]("ngClass","tree__item_content-"+ctx.computedDepth),core["advance"](1),core["property"]("ngTemplateOutlet",ctx.template)("ngTemplateOutletContext",core["pureFunction5"](3,_c37,ctx.item,ctx.item,ctx.itemIsOpen,ctx.service,ctx.depth)))},dependencies:[common.NgClass,common.NgTemplateOutlet],data:{animation:[(0,animations.X$)("treeItemInstance",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(200,(0,animations.oB)({opacity:"1"}))])])]},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TreeItemComponent,[{type:core.Component,args:[{selector:"teta-tree-item",changeDetection:core.ChangeDetectionStrategy.OnPush,animations:[(0,animations.X$)("treeItemInstance",[(0,animations.eR)("void => *",[(0,animations.oB)({opacity:"0"}),(0,animations.jt)(200,(0,animations.oB)({opacity:"1"}))])])],template:'<div class="tree__item_content" [ngClass]="\'tree__item_content-\' + computedDepth" (click)="openItem()">\n  <ng-container\n    *ngTemplateOutlet="template; context: {$implicit: item, item: item, open: itemIsOpen, service: service, depth: depth}"></ng-container>\n</div>\n'}]}],(function(){return[{type:TreeService},{type:core.ChangeDetectorRef}]}),{item:[{type:core.Input}],depth:[{type:core.Input}],padding:[{type:core.Input}],childNodeName:[{type:core.Input}],template:[{type:core.Input}],childPadding:[{type:core.Input}],treeItemClass:[{type:core.HostBinding,args:["class.tree__item-container"]}],treeItemInstance:[{type:core.HostBinding,args:["@treeItemInstance"]}]});class TreeComponent{set data(data){this._data=data}get data(){return this._data}set openItems(items){this._openItems=items,this._service.setOpenItems(items)}constructor(_service,_elementRef,_cdr,_zone){defineProperty_defineProperty(this,"_service",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"padding",8),defineProperty_defineProperty(this,"childNodeName","children"),defineProperty_defineProperty(this,"virtual",void 0),defineProperty_defineProperty(this,"height",28),defineProperty_defineProperty(this,"service",new core.EventEmitter),defineProperty_defineProperty(this,"openItemsChange",new core.EventEmitter),defineProperty_defineProperty(this,"viewport",void 0),defineProperty_defineProperty(this,"template",void 0),defineProperty_defineProperty(this,"childPadding",void 0),defineProperty_defineProperty(this,"displayData",void 0),defineProperty_defineProperty(this,"_data",void 0),defineProperty_defineProperty(this,"_openItems",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_obs",void 0),defineProperty_defineProperty(this,"treeClass",!0),defineProperty_defineProperty(this,"trackRow",((index,item)=>this.compareItems?this.compareItems(item):index)),this._service=_service,this._elementRef=_elementRef,this._cdr=_cdr,this._zone=_zone,this._service.openItems.pipe((0,takeWhile.o)((_=>this._alive)),(0,filter.h)((_=>this._openItems!==_))).subscribe((_=>{this._openItems=_,this.displayData=this.getDisplayData(this._data,0),this.openItemsChange.emit(_),this.viewport?.checkViewportSize()}))}set compareItems(func){this._service.compareItems=func}get compareItems(){return this._service.compareItems}ngOnInit(){this.service.emit(this._service),this.addResizeObserver()}ngOnChanges(changes){this.displayData=this.getDisplayData(this._data,0),this.childPadding=this.hasChildren(this._data),this.viewport?.checkViewportSize()}ngOnDestroy(){this._alive=!1,this.removeResizeObserver()}ngAfterViewInit(){this._service.scrollToIndex.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((index=>{this._zone.runOutsideAngular((()=>{setTimeout((()=>{this.viewport?.scrollToIndex(index,"smooth")}))}))}))}hasChildren(data){return data?.some((_=>_[this.childNodeName]?.length>0))}getDisplayData(data,level){const result=[];return data?.forEach((item=>{item.level=level,result.push(item),item[this.childNodeName]?.length>0&&this._openItems?.find((openItem=>this.compareItems(openItem)===this.compareItems(item)))&&result.push(...this.getDisplayData(item[this.childNodeName],level+1))})),result}addResizeObserver(){this._obs=new ResizeObserver((_=>{this.viewport?.checkViewportSize()})),this._obs.observe(this._elementRef.nativeElement)}removeResizeObserver(){this._obs.unobserve(this._elementRef.nativeElement),this._obs.disconnect()}}_class162=TreeComponent,defineProperty_defineProperty(TreeComponent,"fac",(function _class162_Factory(t){return new(t||_class162)(core["directiveInject"](TreeService),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](core.NgZone))})),defineProperty_defineProperty(TreeComponent,"cmp",core["defineComponent"]({type:_class162,selectors:[["teta-tree"]],contentQueries:function _class162_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,TetaTemplateDirective,7),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.template=_t.first)}},viewQuery:function _class162_Query(rf,ctx){if(1&rf&&core["viewQuery"](scrolling.N7,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.viewport=_t.first)}},hostVars:2,hostBindings:function _class162_HostBindings(rf,ctx){2&rf&&core["classProp"]("tree",ctx.treeClass)},inputs:{data:"data",padding:"padding",childNodeName:"childNodeName",virtual:"virtual",height:"height",openItems:"openItems",compareItems:"compareItems"},outputs:{service:"service",openItemsChange:"openItemsChange"},features:[core["ProvidersFeature"]([TreeService]),core["NgOnChangesFeature"]],decls:3,vars:2,consts:[["class","column column_auto",4,"ngIf","ngIfElse"],["default",""],[1,"column","column_auto"],["tetaScrollable","",1,"table-body-container",3,"itemSize"],[3,"item","height","depth","padding","childNodeName","childPadding","template",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize","cdkVirtualForTrackBy"],[3,"item","depth","padding","childNodeName","childPadding","template"],["direction","column",1,"column","column_auto"],[3,"item","height","depth","padding","childNodeName","childPadding","template",4,"ngFor","ngForOf","ngForTrackBy"]],template:function _class162_Template(rf,ctx){if(1&rf&&(core["template"](0,_class162_teta_scrollable_0_Template,3,4,"teta-scrollable",0),core["template"](1,_class162_ng_template_1_Template,2,2,"ng-template",null,1,core["templateRefExtractor"])),2&rf){const _r1=core["reference"](2);core["property"]("ngIf",ctx.virtual)("ngIfElse",_r1)}},dependencies:[common.NgForOf,common.NgIf,scrolling.xd,scrolling.x0,scrolling.N7,ScrollableDirective,ScrollableComponent,TreeItemComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TreeComponent,[{type:core.Component,args:[{selector:"teta-tree",providers:[TreeService],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-scrollable *ngIf="virtual; else default" class="column column_auto">\n  <cdk-virtual-scroll-viewport tetaScrollable\n                               class="table-body-container"\n                               [itemSize]="height">\n    <teta-tree-item *cdkVirtualFor="let item of displayData;templateCacheSize: 0; trackBy: trackRow;"\n                    [item]="item"\n                    [style.height.px]="height"\n                    [depth]="item[\'level\']"\n                    [padding]="padding"\n                    [childNodeName]="childNodeName"\n                    [childPadding]="childPadding"\n                    [template]="template?.template"></teta-tree-item>\n  </cdk-virtual-scroll-viewport>\n</teta-scrollable>\n<ng-template #default>\n  <teta-scrollable class="column column_auto" direction="column">\n    <teta-tree-item *ngFor="let item of displayData; trackBy: trackRow"\n                    [item]="item"\n                    [style.height.px]="height"\n                    [depth]="item[\'level\']"\n                    [padding]="padding"\n                    [childNodeName]="childNodeName"\n                    [childPadding]="childPadding"\n                    [template]="template?.template"></teta-tree-item>\n  </teta-scrollable>\n</ng-template>\n'}]}],(function(){return[{type:TreeService},{type:core.ElementRef},{type:core.ChangeDetectorRef},{type:core.NgZone}]}),{data:[{type:core.Input}],padding:[{type:core.Input}],childNodeName:[{type:core.Input}],virtual:[{type:core.Input}],height:[{type:core.Input}],openItems:[{type:core.Input}],service:[{type:core.Output}],openItemsChange:[{type:core.Output}],viewport:[{type:core.ViewChild,args:[scrolling.N7,{static:!1}]}],template:[{type:core.ContentChild,args:[TetaTemplateDirective,{static:!0}]}],compareItems:[{type:core.Input}],treeClass:[{type:core.HostBinding,args:["class.tree"]}]});class TreeItemToggleComponent{constructor(service,_cdr){defineProperty_defineProperty(this,"service",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"item",void 0),defineProperty_defineProperty(this,"open",void 0),this.service=service,this._cdr=_cdr}ngOnInit(){this.open=this.service.openItems.pipe((0,map.U)((_=>{const found=_?.find((x=>this.service.compareItems(x)===this.service.compareItems(this.item)));return null!=found})))}}_class163=TreeItemToggleComponent,defineProperty_defineProperty(TreeItemToggleComponent,"fac",(function _class163_Factory(t){return new(t||_class163)(core["directiveInject"](TreeService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TreeItemToggleComponent,"cmp",core["defineComponent"]({type:_class163,selectors:[["teta-tree-item-toggle"]],inputs:{item:"item"},decls:2,vars:3,consts:[[1,"tree__icon",3,"name"]],template:function _class163_Template(rf,ctx){1&rf&&(core["element"](0,"teta-icon",0),core["pipe"](1,"async")),2&rf&&core["property"]("name",core["pipeBind1"](1,1,ctx.open)?"arrowDownKey":"arrowRightKey")},dependencies:[IconComponent,common.AsyncPipe],styles:["[_nghost-%COMP%]{display:inline-flex;align-items:center}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TreeItemToggleComponent,[{type:core.Component,args:[{selector:"teta-tree-item-toggle",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<teta-icon [name]=\"(open | async) ? 'arrowDownKey' : 'arrowRightKey'\"\n           class=\"tree__icon\"></teta-icon>\n",styles:[":host{display:inline-flex;align-items:center}\n"]}]}],(function(){return[{type:TreeService},{type:core.ChangeDetectorRef}]}),{item:[{type:core.Input}]});class VisibilityDropdownTabComponent{get openItems(){return null==this._openItems&&(this._openItems=this.columns.map((_=>_))),this._openItems}set openItems(openItems){this._openItems=openItems}get childMode(){return this.columns.find((_=>_.columns?.length>0))}constructor(_svc,_config,_elementRef,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"close",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"hiddenColumns",void 0),defineProperty_defineProperty(this,"_openItems",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"compareItems",(item=>item.name)),defineProperty_defineProperty(this,"setChildrenVisibility",((column,visible,hiddenColumns)=>{visible?this.showColumn(column,hiddenColumns):this.hideColumn(column,hiddenColumns),column.columns&&column.columns.forEach((x=>{this.setChildrenVisibility(x,visible,hiddenColumns)}))})),defineProperty_defineProperty(this,"setParentsVisibility",((column,visible,hiddenColumns)=>{visible?this.showParents(column,hiddenColumns):this.hideParents(column,hiddenColumns)})),this._svc=_svc,this._config=_config,this._elementRef=_elementRef,this._cdr=_cdr,this.locale=this._config.locale,this._svc.hiddenColumns.pipe((0,takeWhile.o)((_=>this._alive)),(0,map.U)((_=>[..._]))).subscribe((_=>{this.hiddenColumns=_}))}columnIsHidden(column){return this.hiddenColumns.indexOf(column.name)>=0}allColumnsVisible(){if(this.hiddenColumns?.length<=0)return!0;return!!ArrayUtil.flatten(this.columns,"columns").find((_=>this.hiddenColumns.indexOf(_.name)<0))&&null}setAllColumns(value){this.hiddenColumns=value?[]:ArrayUtil.flatten(this.columns,"columns").map((_=>_.name))}setColumnsVisibility(){this._svc.setHiddenColumns(this.hiddenColumns)}setColumnVisibility(item,visible){this.setChildrenVisibility(item,visible,this.hiddenColumns),this.setParentsVisibility(item,visible,this.hiddenColumns)}showParents(column,hiddenColumns){const parent=this.findParentColumn(column,this.columns);parent&&this.columnIsHidden(parent)&&(this.showColumn(parent,hiddenColumns),this.showParents(parent,hiddenColumns))}hideParents(column,hiddenColumns){const parent=this.findParentColumn(column,this.columns);parent&&!this.columnIsHidden(parent)&&parent.columns&&parent.columns.every((_=>this.columnIsHidden(_)))&&(this.hideColumn(parent,hiddenColumns),this.hideParents(parent,hiddenColumns))}hideColumn(column,hiddenColumns){hiddenColumns.push(column.name)}showColumn(column,hiddenColumns){hiddenColumns.splice(hiddenColumns.indexOf(column.name),1)}findParentColumn(column,columns){return ArrayUtil.findRecursive(columns,(iterableNode=>iterableNode.columns?.indexOf(column)>=0),"columns")}ngOnDestroy(){this._alive=!1}}_class164=VisibilityDropdownTabComponent,defineProperty_defineProperty(VisibilityDropdownTabComponent,"fac",(function _class164_Factory(t){return new(t||_class164)(core["directiveInject"](TableService),core["directiveInject"](TetaConfigService),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(VisibilityDropdownTabComponent,"cmp",core["defineComponent"]({type:_class164,selectors:[["teta-visibility-dropdown-tab"]],inputs:{columns:"columns",column:"column",state:"state",data:"data",close:"close"},decls:2,vars:3,consts:[[4,"ngIf"],[1,"list-item","padding-left-6","padding-top-2"],[3,"binary","allowNull","ngModel","ngModelChange"],[1,"list-divider"],[1,"padding-v-2","column","column_auto"],[3,"data","openItems","childNodeName","compareItems","openItemsChange"],["tetaTemplate",""],[1,"justify-content-end"],["type","button","teta-button","",3,"disabled","palette","click"],[1,"tree__item",2,"align-items","unset"],[3,"item",4,"ngIf"],[2,"flex-grow","1",3,"ngModel","binary","ngModelChange","click"],[3,"item"]],template:function _class164_Template(rf,ctx){1&rf&&(core["template"](0,_class164_ng_container_0_Template,11,13,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pipeBind1"](1,1,ctx.locale))},dependencies:[common.NgIf,fesm2022_forms.JJ,fesm2022_forms.On,CheckboxComponent,ButtonComponent,TreeComponent,TetaTemplateDirective,TreeItemToggleComponent,ToolbarComponent,ScrollableComponent,common.AsyncPipe],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;min-height:0}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](VisibilityDropdownTabComponent,[{type:core.Component,args:[{selector:"teta-visibility-dropdown-tab",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="locale | async as loc">\n  <div class="list-item padding-left-6 padding-top-2" [class.padding-left-9]="childMode">\n    <teta-checkbox [binary]="true"\n                   [allowNull]="true"\n                   [ngModel]="allColumnsVisible()"\n                   (ngModelChange)="setAllColumns($event)">\n      {{loc.all}}\n    </teta-checkbox>\n  </div>\n  <div class="list-divider"></div>\n  <teta-scrollable class="padding-v-2 column column_auto">\n    <teta-tree [data]="columns"\n               [openItems]="openItems"\n               (openItemsChange)="openItems = $event"\n               [childNodeName]="\'columns\'"\n               [compareItems]="compareItems">\n      <ng-template tetaTemplate let-item>\n        <div class="tree__item" style="align-items: unset">\n          <teta-tree-item-toggle [item]="item" *ngIf="item.columns?.length > 0"></teta-tree-item-toggle>\n          <teta-checkbox\n            style="flex-grow: 1;"\n            [ngModel]="!columnIsHidden(item)"\n            (ngModelChange)="setColumnVisibility(item, $event)"\n            (click)="$event.stopPropagation()"\n            [binary]="true"\n          >\n            {{item.caption}}\n          </teta-checkbox>\n        </div>\n      </ng-template>\n    </teta-tree>\n  </teta-scrollable>\n  <teta-toolbar class="justify-content-end">\n    <button type="button"\n            teta-button\n            [disabled]="allColumnsVisible() === false"\n            [palette]="\'primary\'"\n            (click)="setColumnsVisibility()">\n      {{loc.apply}}\n    </button>\n  </teta-toolbar>\n</ng-container>\n',styles:[":host{display:flex;flex-direction:column;flex-grow:1;min-height:0}\n"]}]}],(function(){return[{type:TableService},{type:TetaConfigService},{type:core.ElementRef},{type:core.ChangeDetectorRef}]}),{columns:[{type:core.Input}],column:[{type:core.Input}],state:[{type:core.Input}],data:[{type:core.Input}],close:[{type:core.Input}]});class HeadCellComponent{get defaultTemplates(){return[{icon:"menu",template:this.mainTemplate,order:10,showTab:()=>!0},{icon:"filter",template:this.filterTemplate,order:20,showTab:column=>column.filterable},{icon:"eye",template:this.columnsTemplate,order:30,showTab:()=>!0}]}get elementRef(){return this._elementRef}get tabTemplates(){return this.column?.headDropdownConfig&&this.column.headDropdownConfig.tabs?.length>0?"replace"===this.column.headDropdownConfig.strategy?this.column.headDropdownConfig.tabs:[...this.defaultTemplates,...this.column.headDropdownConfig.tabs].sort(((a,b)=>a.order-b.order)):this.defaultTemplates}constructor(_svc,_app,_elementRef,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_app",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"showHeadCellMenu",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign),defineProperty_defineProperty(this,"align",Align),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"columns",void 0),defineProperty_defineProperty(this,"filtered",void 0),defineProperty_defineProperty(this,"sortParam",void 0),defineProperty_defineProperty(this,"iconName",void 0),defineProperty_defineProperty(this,"dropDownOpen",!1),defineProperty_defineProperty(this,"showDrag",null),defineProperty_defineProperty(this,"rect",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_startPosition",void 0),defineProperty_defineProperty(this,"mainTemplate",void 0),defineProperty_defineProperty(this,"filterTemplate",void 0),defineProperty_defineProperty(this,"columnsTemplate",void 0),defineProperty_defineProperty(this,"observer",void 0),this._svc=_svc,this._app=_app,this._elementRef=_elementRef,this._cdr=_cdr}dragstart(event){event&&event.dataTransfer&&event.dataTransfer.setData("text","move"),this._svc.dragStart(this.column)}dragenter(event){this.rect=this._elementRef.nativeElement.getBoundingClientRect()}allowDrop(event){event.preventDefault(),this.rect&&this._svc.dragSource&&(this.showDrag=event.clientX>=this.rect.x+this.rect.width/2?"right":"left")}dragleave(event){event.preventDefault(),this.showDrag=null}dragend(event){this.showDrag=null}drop(event){"move"===(event.dataTransfer&&event.dataTransfer.getData("text"))&&this._svc.reorderColumn(this.column,"left"===this.showDrag),this.showDrag=null}ngOnInit(){this.columns=this._svc.columns,this.state=this._svc.state,this.sortParam=this.state.pipe((0,map.U)((_=>StateUtil.getSortState(_,this.column)))),this.filtered=this.state.pipe((0,map.U)((_=>StateUtil.isColumnFiltered(_,this.column)))),this.iconName=(0,combineLatest.a)([this.sortParam,this.filtered]).pipe((0,map.U)((data=>{const[sortParam,filtered]=data;return sortParam&&filtered?sortParam.asc?"filterSortUpColor":"filterSortDownColor":sortParam?sortParam.asc?"sortUpColor":"sortDownColor":filtered?"filterColor":""}))),this.observer=new IntersectionObserver((entries=>{entries.forEach((entry=>{!entry.isIntersecting&&this.dropDownOpen&&(this.dropDownOpen=!1,this._cdr.detectChanges())}))}),{root:this._svc.getTableElement(this._elementRef.nativeElement),threshold:[1]}),this.observer.observe(this._elementRef.nativeElement)}ngOnDestroy(){this._alive=!1,this.observer.unobserve(this._elementRef.nativeElement),this.observer.disconnect()}resizeStart(event){const rect=this._elementRef.nativeElement.getBoundingClientRect();this._startPosition=rect.x,this._svc.lockPreviousColumns(this.column,this._elementRef.nativeElement)}resizeProcess(event){if(this._startPosition&&event.pageX>0){const position=this._startPosition;requestAnimationFrame((()=>{this._svc.resizeColumn(new ColumnResizeEvent(this.column,event.pageX-position)),this._app.tick()}))}}resizeEnd(){this._startPosition=null}}_class165=HeadCellComponent,defineProperty_defineProperty(HeadCellComponent,"fac",(function _class165_Factory(t){return new(t||_class165)(core["directiveInject"](TableService),core["directiveInject"](core.ApplicationRef),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(HeadCellComponent,"cmp",core["defineComponent"]({type:_class165,selectors:[["teta-head-cell"]],viewQuery:function _class165_Query(rf,ctx){if(1&rf&&(core["viewQuery"](_c38,7),core["viewQuery"](_c39,7),core["viewQuery"](_c40,7)),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.mainTemplate=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.filterTemplate=_t.first),core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.columnsTemplate=_t.first)}},hostVars:2,hostBindings:function _class165_HostBindings(rf,ctx){1&rf&&core["listener"]("dragenter",(function _class165_dragenter_HostBindingHandler($event){return ctx.dragenter($event)}))("dragover",(function _class165_dragover_HostBindingHandler($event){return ctx.allowDrop($event)}))("dragleave",(function _class165_dragleave_HostBindingHandler($event){return ctx.dragleave($event)}))("dragend",(function _class165_dragend_HostBindingHandler($event){return ctx.dragend($event)}))("drop",(function _class165_drop_HostBindingHandler($event){return ctx.drop($event)})),2&rf&&core["classProp"]("table-head__cell_active",ctx.dropDownOpen)},inputs:{column:"column",showHeadCellMenu:"showHeadCellMenu",data:"data"},decls:17,vars:20,consts:[[1,"row","row_auto"],[1,"column","column_auto","justify-content-center",3,"autoCloseIgnore","verticalAlign","appendToBody","open","align","openChange","click"],["tetaDropdownHead","","draggable","true",1,"table-head__cell__wrapper",3,"ngClass","dragstart"],[3,"column","columns","data"],[3,"palette","name",4,"ngIf"],["tetaDropdownContent","",3,"tabTemplates","data","column","columns","state","dropDownOpen","dropDownOpenChange",4,"ngIf"],["class","drop-area","draggable","false",3,"drop-area_left","drop-area_right",4,"ngIf"],["draggable","false",1,"table-head__cell__resize",3,"tetaResizeDrag","dragstart","drag","resizeStart","resizeProcess","resizeEnd"],[1,"table-head__cell__resize_drag"],["mainTemplate",""],["filterTemplate",""],["columnsTemplate",""],[3,"palette","name"],["tetaDropdownContent","",3,"tabTemplates","data","column","columns","state","dropDownOpen","dropDownOpenChange"],["draggable","false",1,"drop-area"],[3,"column","state","close","headCellElementRef"],[3,"column","state","close","data"],[3,"column","columns","state","close","data"]],template:function _class165_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0)(1,"teta-dropdown",1),core["listener"]("openChange",(function _class165_Template_teta_dropdown_openChange_1_listener($event){return ctx.dropDownOpen=$event}))("click",(function _class165_Template_teta_dropdown_click_1_listener($event){return $event.preventDefault()})),core["elementStart"](2,"div",2),core["listener"]("dragstart",(function _class165_Template_div_dragstart_2_listener($event){return ctx.dragstart($event)})),core["element"](3,"teta-head-cell-host",3),core["pipe"](4,"async"),core["template"](5,_class165_teta_icon_5_Template,1,2,"teta-icon",4),core["pipe"](6,"async"),core["elementEnd"](),core["template"](7,_class165_teta_head_cell_dropdown_7_Template,3,10,"teta-head-cell-dropdown",5),core["elementEnd"](),core["template"](8,_class165_div_8_Template,1,4,"div",6),core["elementEnd"](),core["elementStart"](9,"div",7),core["listener"]("dragstart",(function _class165_Template_div_dragstart_9_listener($event){return $event.preventDefault(),$event.stopPropagation()}))("drag",(function _class165_Template_div_drag_9_listener($event){return $event.preventDefault(),$event.stopPropagation()}))("resizeStart",(function _class165_Template_div_resizeStart_9_listener($event){return ctx.resizeStart($event)}))("resizeProcess",(function _class165_Template_div_resizeProcess_9_listener($event){return ctx.resizeProcess($event)}))("resizeEnd",(function _class165_Template_div_resizeEnd_9_listener(){return ctx.resizeEnd()})),core["element"](10,"div",8),core["elementEnd"](),core["template"](11,_class165_ng_template_11_Template,1,4,"ng-template",null,9,core["templateRefExtractor"]),core["template"](13,_class165_ng_template_13_Template,1,4,"ng-template",null,10,core["templateRefExtractor"]),core["template"](15,_class165_ng_template_15_Template,1,5,"ng-template",null,11,core["templateRefExtractor"])),2&rf&&(core["advance"](1),core["classProp"]("table-head__cell__menu_open",ctx.dropDownOpen),core["property"]("autoCloseIgnore",core["pureFunction0"](19,_c41))("verticalAlign",ctx.verticalAlign.auto)("appendToBody",!0)("open",ctx.dropDownOpen)("align",ctx.align.auto),core["advance"](1),core["property"]("ngClass",ctx.column.headCellClass),core["advance"](1),core["property"]("column",ctx.column)("columns",core["pipeBind1"](4,15,ctx.columns))("data",ctx.data),core["advance"](2),core["property"]("ngIf",core["pipeBind1"](6,17,ctx.iconName)),core["advance"](2),core["property"]("ngIf",ctx.showHeadCellMenu),core["advance"](1),core["property"]("ngIf",ctx.showDrag),core["advance"](1),core["property"]("tetaResizeDrag","vertical"))},dependencies:[common.NgClass,common.NgIf,IconComponent,DropdownComponent,DropdownHeadDirective,DropdownContentDirective,ResizeDragDirective,HeadCellHostComponent,HeadCellDropdownComponent,MainDropdownTabComponent,FilterDropdownTabComponent,VisibilityDropdownTabComponent,common.AsyncPipe],styles:[".drop-area[_ngcontent-%COMP%]{position:absolute;width:1px;background:var(--color-text-50);top:0;bottom:0;z-index:10}.drop-area_left[_ngcontent-%COMP%]{left:-1px}.drop-area_right[_ngcontent-%COMP%]{right:-1px}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](HeadCellComponent,[{type:core.Component,args:[{selector:"teta-head-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="row row_auto">\n  <teta-dropdown [autoCloseIgnore]="[\'enter\', \'inside\']"\n                 [verticalAlign]="verticalAlign.auto"\n                 [appendToBody]="true"\n                 [(open)]="dropDownOpen"\n                 [align]="align.auto"\n                 (click)="$event.preventDefault()"\n                 [class.table-head__cell__menu_open]="dropDownOpen"\n                 class="column column_auto justify-content-center">\n    <div tetaDropdownHead\n         draggable="true"\n         class="table-head__cell__wrapper"\n         (dragstart)="dragstart($event)"\n         [ngClass]="column.headCellClass">\n      <teta-head-cell-host [column]="column" [columns]="columns | async" [data]="data"></teta-head-cell-host>\n      <teta-icon *ngIf="iconName | async as icon"\n                 [palette]="\'text\'"\n                 [name]="icon"></teta-icon>\n    </div>\n    <teta-head-cell-dropdown tetaDropdownContent\n                             *ngIf="showHeadCellMenu"\n                             [tabTemplates]="tabTemplates"\n                             [data]="data"\n                             [column]="column"\n                             [columns]="columns | async"\n                             [state]="state | async"\n                             [(dropDownOpen)]="dropDownOpen"></teta-head-cell-dropdown>\n  </teta-dropdown>\n  <div class="drop-area"\n       draggable="false"\n       [class.drop-area_left]="showDrag === \'left\'"\n       [class.drop-area_right]="showDrag === \'right\'"\n       *ngIf="showDrag"></div>\n</div>\n<div class="table-head__cell__resize"\n     draggable="false"\n     (dragstart)="$event.preventDefault();$event.stopPropagation()"\n     (drag)="$event.preventDefault();$event.stopPropagation()"\n     [tetaResizeDrag]="\'vertical\'"\n     (resizeStart)="resizeStart($event)"\n     (resizeProcess)="resizeProcess($event)"\n     (resizeEnd)="resizeEnd()">\n  <div class="table-head__cell__resize_drag"></div>\n</div>\n<ng-template #mainTemplate let-column="column" let-columns="columns" let-data="data" let-state="state"\n             let-close="close">\n  <teta-main-dropdown-tab [column]="column"\n                          [state]="state"\n                          [close]="close"\n                          [headCellElementRef]="elementRef"></teta-main-dropdown-tab>\n</ng-template>\n<ng-template #filterTemplate let-column="column" let-columns="columns" let-data="data" let-state="state"\n             let-close="close">\n  <teta-filter-dropdown-tab [column]="column"\n                            [state]="state"\n                            [close]="close"\n                            [data]="data"></teta-filter-dropdown-tab>\n</ng-template>\n<ng-template #columnsTemplate let-column="column" let-columns="columns" let-data="data" let-state="state"\n             let-close="close">\n  <teta-visibility-dropdown-tab [column]="column"\n                                [columns]="columns"\n                                [state]="state"\n                                [close]="close"\n                                [data]="data"></teta-visibility-dropdown-tab>\n</ng-template>\n',styles:[".drop-area{position:absolute;width:1px;background:var(--color-text-50);top:0;bottom:0;z-index:10}.drop-area_left{left:-1px}.drop-area_right{right:-1px}\n"]}]}],(function(){return[{type:TableService},{type:core.ApplicationRef},{type:core.ElementRef},{type:core.ChangeDetectorRef}]}),{column:[{type:core.Input}],showHeadCellMenu:[{type:core.Input}],data:[{type:core.Input}],dropDownOpen:[{type:core.HostBinding,args:["class.table-head__cell_active"]}],mainTemplate:[{type:core.ViewChild,args:["mainTemplate",{static:!0}]}],filterTemplate:[{type:core.ViewChild,args:["filterTemplate",{static:!0}]}],columnsTemplate:[{type:core.ViewChild,args:["columnsTemplate",{static:!0}]}],dragenter:[{type:core.HostListener,args:["dragenter",["$event"]]}],allowDrop:[{type:core.HostListener,args:["dragover",["$event"]]}],dragleave:[{type:core.HostListener,args:["dragleave",["$event"]]}],dragend:[{type:core.HostListener,args:["dragend",["$event"]]}],drop:[{type:core.HostListener,args:["drop",["$event"]]}]});class TableHeadGroupComponent{set column(column){this._column=column}get column(){return this._column}get flexGrow(){if(this.column?.columns?.length>0){const flat=ArrayUtil.flatten(this.column?.columns,"columns",!0).filter((_=>this._hiddenColumns.indexOf(_.name)<0));return flat?.reduce(((prev,curr)=>prev+curr.flex),0)}return this.column.flex}get flexBasis(){if(this.column?.columns?.length>0){const flat=ArrayUtil.flatten(this.column?.columns,"columns",!0).filter((_=>this._hiddenColumns.indexOf(_.name)<0));return flat?.reduce(((prev,curr)=>prev+curr.width),0)}return this.column.width}get _leaves(){return TableUtil.getColumnLeaves(this._column)?.filter((_=>this._hiddenColumns.indexOf(_.name)<0))}constructor(_svc,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"showHeadCellMenu",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_column",void 0),defineProperty_defineProperty(this,"_hiddenColumns",void 0),this._svc=_svc,this._cdr=_cdr,this._svc.hiddenColumns.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this._hiddenColumns=_,this._cdr.markForCheck()}))}columnIsHidden(column){return this._svc.columnIsHidden(column)}ngOnInit(){}ngOnDestroy(){this._alive=!1}}_class166=TableHeadGroupComponent,defineProperty_defineProperty(TableHeadGroupComponent,"fac",(function _class166_Factory(t){return new(t||_class166)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TableHeadGroupComponent,"cmp",core["defineComponent"]({type:_class166,selectors:[["teta-table-head-group"]],hostVars:6,hostBindings:function _class166_HostBindings(rf,ctx){2&rf&&core["styleProp"]("flex-grow",ctx.flexGrow)("min-width",ctx.flexBasis,"px")("flex-basis",ctx.flexBasis,"px")},inputs:{showHeadCellMenu:"showHeadCellMenu",data:"data",column:"column"},decls:2,vars:2,consts:[[4,"ngIf"],[1,"table-head__group__container"],[1,"table-head__group__caption"],[1,"table-head__group__children"],[4,"ngFor","ngForOf"],["class","table-head__group",3,"data","showHeadCellMenu","column",4,"ngIf"],[1,"table-head__group",3,"data","showHeadCellMenu","column"],["class","table-head__cell",3,"data","showHeadCellMenu","column",4,"ngIf"],[1,"table-head__cell",3,"data","showHeadCellMenu","column"]],template:function _class166_Template(rf,ctx){1&rf&&(core["template"](0,_class166_ng_container_0_Template,6,2,"ng-container",0),core["template"](1,_class166_ng_container_1_Template,2,1,"ng-container",0)),2&rf&&(core["property"]("ngIf",ctx.column.columns&&ctx.column.columns.length>0),core["advance"](1),core["property"]("ngIf",!ctx.column.columns||0===ctx.column.columns.length))},dependencies:[common.NgForOf,common.NgIf,_class166,HeadCellComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableHeadGroupComponent,[{type:core.Component,args:[{selector:"teta-table-head-group",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf="column.columns && column.columns.length > 0">\n  <div class="table-head__group__container">\n    <div class="table-head__group__caption">\n      {{column.caption}}\n    </div>\n    <div class="table-head__group__children">\n      <ng-container *ngFor="let col of column.columns">\n        <teta-table-head-group\n          class="table-head__group"\n          *ngIf="!columnIsHidden(col)"\n          [data]="data"\n          [showHeadCellMenu]="showHeadCellMenu"\n          [column]="col"></teta-table-head-group>\n      </ng-container>\n    </div>\n  </div>\n</ng-container>\n<ng-container *ngIf="!column.columns || column.columns.length === 0">\n  <teta-head-cell\n    *ngIf="!columnIsHidden(column)"\n    class="table-head__cell"\n    [data]="data"\n    [showHeadCellMenu]="showHeadCellMenu"\n    [attr.data-column]="column.name"\n    [column]="column"></teta-head-cell>\n</ng-container>\n'}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{showHeadCellMenu:[{type:core.Input}],data:[{type:core.Input}],column:[{type:core.Input}],flexGrow:[{type:core.HostBinding,args:["style.flex-grow"]}],flexBasis:[{type:core.HostBinding,args:["style.min-width.px"]},{type:core.HostBinding,args:["style.flex-basis.px"]}]});class SelectionHeadCellComponent{constructor(_svc,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"tableCellClass",!0),defineProperty_defineProperty(this,"_alive",!0),this._svc=_svc,this._cdr=_cdr}selectAll(value){value?this._svc.selectAll():this._svc.deselectAll()}allSelected(){return this._svc.allRowsSelected()}ngOnInit(){this._svc.selectedRows.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this._cdr.markForCheck()}))}ngOnDestroy(){this._alive=!1}}_class167=SelectionHeadCellComponent,defineProperty_defineProperty(SelectionHeadCellComponent,"fac",(function _class167_Factory(t){return new(t||_class167)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(SelectionHeadCellComponent,"cmp",core["defineComponent"]({type:_class167,selectors:[["teta-selection-head-cell"]],hostVars:2,hostBindings:function _class167_HostBindings(rf,ctx){2&rf&&core["classProp"]("table-head__group",ctx.tableCellClass)},decls:1,vars:4,consts:[[3,"binary","allowNull","noLabel","ngModel","ngModelChange"]],template:function _class167_Template(rf,ctx){1&rf&&(core["elementStart"](0,"teta-checkbox",0),core["listener"]("ngModelChange",(function _class167_Template_teta_checkbox_ngModelChange_0_listener($event){return ctx.selectAll($event)})),core["elementEnd"]()),2&rf&&core["property"]("binary",!0)("allowNull",!0)("noLabel",!0)("ngModel",ctx.allSelected())},dependencies:[fesm2022_forms.JJ,fesm2022_forms.On,CheckboxComponent],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectionHeadCellComponent,[{type:core.Component,args:[{selector:"teta-selection-head-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-checkbox [binary]="true"\n               [allowNull]="true"\n               [noLabel]="true"\n               [ngModel]="allSelected()"\n               (ngModelChange)="selectAll($event)"></teta-checkbox>\n',styles:[":host{display:flex;align-items:center;justify-content:center}\n"]}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{tableCellClass:[{type:core.HostBinding,args:["class.table-head__group"]}]});class TableHeadComponent{set columns(columns){this._columns=columns,this._cdr.markForCheck()}get columns(){return this._columns}get locked(){return this._columns.filter((_=>!0===_.locked&&this._hiddenColumns.indexOf(_.name)<0))}get unlocked(){return this._columns.filter((_=>!1===_.locked&&this._hiddenColumns.indexOf(_.name)<0))}constructor(_svc,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"selectType",void 0),defineProperty_defineProperty(this,"showHeadCellMenu",void 0),defineProperty_defineProperty(this,"tableHeadClass",!0),defineProperty_defineProperty(this,"state",void 0),defineProperty_defineProperty(this,"selectTypeEnum",SelectType),defineProperty_defineProperty(this,"lockedFlex",void 0),defineProperty_defineProperty(this,"lockedWidth",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_columns",[]),defineProperty_defineProperty(this,"_hiddenColumns",[]),defineProperty_defineProperty(this,"data",void 0),this._svc=_svc,this._cdr=_cdr}track(index,item){return item.name}ngOnInit(){(0,combineLatest.a)([this._svc.columns,this._svc.hiddenColumns]).pipe((0,takeWhile.o)((_=>this._alive))).subscribe((values=>{const[columns,hiddenColumns]=values;this._hiddenColumns=hiddenColumns,this.columns=columns;const locked=ArrayUtil.flatten(columns,"columns",!0).filter((_=>this._hiddenColumns.indexOf(_.name)<0&&_.locked)),startWidth=this.selectType===SelectType.checkBox?28:0;this.lockedFlex=locked.reduce(((prev,curr)=>prev+curr.flex),0),this.lockedWidth=locked.reduce(((prev,curr)=>prev+curr.width),startWidth),this._cdr.markForCheck()})),this._svc.state.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.state=_,this._cdr.markForCheck()})),this._svc.displayData.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.data=_.map((_=>_.data)),this._cdr.markForCheck()}))}ngOnDestroy(){this._alive=!1}}var AggregationType;_class168=TableHeadComponent,defineProperty_defineProperty(TableHeadComponent,"fac",(function _class168_Factory(t){return new(t||_class168)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TableHeadComponent,"cmp",core["defineComponent"]({type:_class168,selectors:[["teta-table-head"]],hostVars:2,hostBindings:function _class168_HostBindings(rf,ctx){2&rf&&core["classProp"]("table-head",ctx.tableHeadClass)},inputs:{selectType:"selectType",showHeadCellMenu:"showHeadCellMenu"},decls:2,vars:2,consts:[["class","table-head_locked",3,"flex-grow","flex-basis","min-width",4,"ngIf"],[4,"ngIf"],[1,"table-head_locked"],["style","width: 28px;",4,"ngIf"],["class","table-head__group",3,"data","showHeadCellMenu","column",4,"ngFor","ngForOf","ngForTrackBy"],[2,"width","28px"],[1,"table-head__group",3,"data","showHeadCellMenu","column"]],template:function _class168_Template(rf,ctx){1&rf&&(core["template"](0,_class168_div_0_Template,3,9,"div",0),core["template"](1,_class168_ng_container_1_Template,3,3,"ng-container",1)),2&rf&&(core["property"]("ngIf",null==ctx.locked?null:ctx.locked.length),core["advance"](1),core["property"]("ngIf",null==ctx.unlocked?null:ctx.unlocked.length))},dependencies:[common.NgForOf,common.NgIf,TableHeadGroupComponent,SelectionHeadCellComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableHeadComponent,[{type:core.Component,args:[{selector:"teta-table-head",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="table-head_locked"\n     *ngIf="locked?.length"\n     [style.flex-grow]="lockedFlex"\n     [style.flex-basis.px]="lockedWidth"\n     [style.min-width.px]="lockedWidth">\n  <teta-selection-head-cell\n    *ngIf="selectType === selectTypeEnum.checkBox"\n    style="width: 28px;"></teta-selection-head-cell>\n  <teta-table-head-group\n    *ngFor="let column of locked; trackBy: track"\n    class="table-head__group"\n    [data]="data"\n    [showHeadCellMenu]="showHeadCellMenu"\n    [column]="column"></teta-table-head-group>\n</div>\n<ng-container *ngIf="unlocked?.length">\n  <teta-selection-head-cell\n    *ngIf="selectType === selectTypeEnum.checkBox && locked?.length < 1"\n    style="width: 28px;"></teta-selection-head-cell>\n  <teta-table-head-group\n    *ngFor="let column of unlocked; trackBy: track"\n    class="table-head__group"\n    [data]="data"\n    [showHeadCellMenu]="showHeadCellMenu"\n    [column]="column"></teta-table-head-group>\n</ng-container>\n'}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{selectType:[{type:core.Input}],showHeadCellMenu:[{type:core.Input}],tableHeadClass:[{type:core.HostBinding,args:["class.table-head"]}]}),function(AggregationType){AggregationType[AggregationType.none=0]="none",AggregationType[AggregationType.sum=1]="sum",AggregationType[AggregationType.avg=2]="avg",AggregationType[AggregationType.min=3]="min",AggregationType[AggregationType.max=4]="max"}(AggregationType||(AggregationType={}));class CellComponentBase{get cellInvalid(){const control=this.formGroup?.get(this.column?.name);return!!control&&control.invalid}get control(){return this.formGroup?.get(this.column?.name)}set column(column){this._column=column,this.setupControl()}get column(){return this._column}set row(row){this._row=row,this.setupControl()}get row(){return this._row}get formGroup(){return this._formGroup instanceof fesm2022_forms.cw?this._formGroup:this._formGroup instanceof fesm2022_forms.F?this._formGroup.form:null}get edit(){return this._edit&&this.editable}get editable(){return boolOrFuncCallback(this.column.editable)({column:this.column,row:this.row.data})}get index(){return this.svc.getRowIndex(this.row.data)}constructor(svc,cdr){defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"cellClass",!0),defineProperty_defineProperty(this,"_formGroup",(0,core.inject)(fesm2022_forms.gN,{optional:!0})),defineProperty_defineProperty(this,"_column",void 0),defineProperty_defineProperty(this,"_row",void 0),defineProperty_defineProperty(this,"filterOptions",[]),defineProperty_defineProperty(this,"dict",{}),defineProperty_defineProperty(this,"_edit",void 0),defineProperty_defineProperty(this,"_alive",!0),this.svc=svc,this.cdr=cdr}ngOnDestroy(){this._alive=!1}ngOnInit(){this.init(),this.formGroup?.controls[this.column.name]?.valueChanges.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((value=>{this.formGroup.updateValueAndValidity(),this.row.valid=this.formGroup?.valid,this.row.data[this.column.name]=this.control.value,this.svc.changeValue({column:this.column.name,row:this.index})}))}init(){this.svc.editRowStart.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((cell=>{this.index!==cell?.row||this._edit||this.start(cell,"row"),this.index!==cell?.row&&this._edit&&this.stop()})),this.svc.editCellStart.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((cell=>{this.index!==cell?.row||this.column.name!==cell?.column||this._edit||this.start(cell,"cell"),this.index===cell?.row&&this.column.name===cell?.column||!this._edit||this.stop()})),this.svc.valueSet.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((cellValue=>{this.index===cellValue.row&&this.column.name===cellValue.column&&(this.row.data[this.column.name]=cellValue.value,this.setupControl(),this.formGroup.updateValueAndValidity(),this.row.valid=this.formGroup.valid,this.cdr.detectChanges(),this.cdr.markForCheck())}))}setupControl(){this.column&&(this.control?this.control.patchValue(this.row?.data[this.column.name],{emitEvent:!1}):this.formGroup.registerControl(this.column.name,FormsUtil.initControlFromColumn(this.column,this.row?.data)))}start(initiator,type){this._edit=!0,this.cdr.detectChanges(),this.startEdit(initiator,type)}stop(){this._edit=!1,this.formGroup.updateValueAndValidity(),this.row.valid=this.formGroup?.valid,this.stopEdit(),this.cdr.markForCheck()}}_class169=CellComponentBase,defineProperty_defineProperty(CellComponentBase,"fac",(function _class169_Factory(t){return new(t||_class169)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(CellComponentBase,"cmp",core["defineComponent"]({type:_class169,selectors:[["ng-component"]],hostVars:4,hostBindings:function _class169_HostBindings(rf,ctx){2&rf&&core["classProp"]("cell-component",ctx.cellClass)("cell-invalid",ctx.cellInvalid)},decls:0,vars:0,template:function _class169_Template(rf,ctx){},encapsulation:2})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CellComponentBase,[{type:core.Component,args:[{template:""}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{cellClass:[{type:core.HostBinding,args:["class.cell-component"]}],cellInvalid:[{type:core.HostBinding,args:["class.cell-invalid"]}]});class NumericCellComponent extends CellComponentBase{constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"input",void 0),this.svc=svc,this.cdr=cdr}ngOnInit(){super.ngOnInit()}startEdit(initiator,type){initiator?.column===this.column.name&&(this.cdr.detectChanges(),this.input.nativeElement?.focus())}stopEdit(){this.cdr.markForCheck()}}_class170=NumericCellComponent,defineProperty_defineProperty(NumericCellComponent,"fac",(function _class170_Factory(t){return new(t||_class170)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(NumericCellComponent,"cmp",core["defineComponent"]({type:_class170,selectors:[["teta-numeric-cell"]],viewQuery:function _class170_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["ProvidersFeature"]([],[FormsUtil.formProvider]),core["InheritDefinitionFeature"]],decls:4,vars:9,consts:[[1,"cell-text"],["type","text","class","input row_auto border-radius-0",3,"tetaOnlyNumber","formControl",4,"ngIf"],["type","text",1,"input","row_auto","border-radius-0",3,"tetaOnlyNumber","formControl"],["input",""]],template:function _class170_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["pipe"](2,"tetaNumber"),core["elementEnd"](),core["template"](3,_class170_input_3_Template,2,2,"input",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["advance"](1),core["textInterpolate1"](" ",core["pipeBind2"](2,6,null==ctx.control?null:ctx.control.value,2),"\n"),core["advance"](2),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.Fj,fesm2022_forms.JJ,OnlyNumberDirective,fesm2022_forms.oH,NumberPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NumericCellComponent,[{type:core.Component,args:[{selector:"teta-numeric-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,viewProviders:[FormsUtil.formProvider],template:'<span [style.display]="edit ? \'none\' : \'block\'"\n      class="cell-text"\n      [class.cell-text_disabled]="!editable">\n  {{control?.value | tetaNumber : 2}}\n</span>\n<input #input\n       *ngIf="edit"\n       [tetaOnlyNumber]="true"\n       type="text"\n       class="input row_auto border-radius-0"\n       [formControl]="control"/>\n'}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});class DateCellComponent extends CellComponentBase{constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"input",void 0),this.svc=svc,this.cdr=cdr}ngOnInit(){super.ngOnInit()}startEdit(initiator,type){initiator?.column===this.column.name&&setTimeout((()=>{this.input?.focus(),this.cdr.markForCheck()}),0)}stopEdit(){this.cdr.markForCheck()}}_class171=DateCellComponent,defineProperty_defineProperty(DateCellComponent,"fac",(function _class171_Factory(t){return new(t||_class171)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DateCellComponent,"cmp",core["defineComponent"]({type:_class171,selectors:[["teta-date-cell"]],viewQuery:function _class171_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["InheritDefinitionFeature"]],decls:4,vars:9,consts:[[1,"cell-text"],["class","datepicker-table",3,"allowNull","appendToBody","showTime","formControl",4,"ngIf"],[1,"datepicker-table",3,"allowNull","appendToBody","showTime","formControl"],["input",""]],template:function _class171_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["pipe"](2,"date"),core["elementEnd"](),core["template"](3,_class171_teta_date_picker_3_Template,2,4,"teta-date-picker",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["advance"](1),core["textInterpolate1"](" ",core["pipeBind2"](2,6,null==ctx.control?null:ctx.control.value,"dd.MM.yyyy"),"\n"),core["advance"](2),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.JJ,DatePickerComponent,fesm2022_forms.oH,common.DatePipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DateCellComponent,[{type:core.Component,args:[{selector:"teta-date-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<span [style.display]=\"edit ? 'none' : 'block'\"\n      class='cell-text'\n      [class.cell-text_disabled]='!editable'>\n  {{control?.value | date : 'dd.MM.yyyy'}}\n</span>\n<teta-date-picker class='datepicker-table'\n                  #input\n                  *ngIf='edit'\n                  [allowNull]='!column.required'\n                  [appendToBody]='true'\n                  [showTime]='false'\n                  [formControl]='control'></teta-date-picker>\n"}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});class ListCellComponent extends CellComponentBase{get displayFilterOptions(){if(this.column?.parentName?.length>0){const parentValue=this.row.data[this.column.parentName];if(parentValue)return this.filterOptions.filter((_=>_.parentId===parentValue))}return this.filterOptions}constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"input",void 0),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign),this.svc=svc,this.cdr=cdr}startEdit(initiator,type){initiator?.column===this.column.name&&setTimeout((()=>{this.input?.focus(),this.cdr.markForCheck()}),0)}stopEdit(){this.cdr.markForCheck()}ngOnInit(){super.ngOnInit()}getValue(value){if(null===this.filterOptions||void 0===this.filterOptions||!(this.filterOptions instanceof Array))return"";const item=this.filterOptions.find((option=>option.id===value));return null==item?"":item.name}}_class172=ListCellComponent,defineProperty_defineProperty(ListCellComponent,"fac",(function _class172_Factory(t){return new(t||_class172)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(ListCellComponent,"cmp",core["defineComponent"]({type:_class172,selectors:[["teta-list-cell"]],viewQuery:function _class172_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["InheritDefinitionFeature"]],decls:3,vars:6,consts:[[1,"cell-text"],["class","row_auto select-table",3,"allowNull","verticalAlign","appendToBody","options","valueRef","textRef","searchRef","formControl",4,"ngIf"],[1,"row_auto","select-table",3,"allowNull","verticalAlign","appendToBody","options","valueRef","textRef","searchRef","formControl"],["input",""]],template:function _class172_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["elementEnd"](),core["template"](2,_class172_teta_select_2_Template,2,8,"teta-select",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["advance"](1),core["textInterpolate1"](" ",ctx.getValue(ctx.control.value),"\n"),core["advance"](1),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.JJ,SelectComponent,fesm2022_forms.oH],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ListCellComponent,[{type:core.Component,args:[{selector:"teta-list-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<span [style.display]=\"edit ? 'none' : 'block'\"\n      class='cell-text'\n      [class.cell-text_disabled]='!editable'>\n  {{getValue(control.value)}}\n</span>\n<teta-select #input\n             class='row_auto select-table'\n             *ngIf='edit'\n             [allowNull]='!column.required'\n             [verticalAlign]='verticalAlign.auto'\n             [appendToBody]='true'\n             [options]='displayFilterOptions'\n             [valueRef]=\"'id'\"\n             [textRef]=\"'name'\"\n             [searchRef]=\"displayFilterOptions?.length > 20 ? 'name' : ''\"\n             [formControl]='control'>\n</teta-select>\n"}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});class StringCellComponent extends CellComponentBase{constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"align",Align),defineProperty_defineProperty(this,"input",void 0),this.svc=svc,this.cdr=cdr}ngOnInit(){super.ngOnInit()}startEdit(initiator,type){initiator?.column===this.column.name&&(this.cdr.detectChanges(),this.input.nativeElement?.focus(),this.input.nativeElement?.select())}stopEdit(){this.cdr.detectChanges()}}_class173=StringCellComponent,defineProperty_defineProperty(StringCellComponent,"fac",(function _class173_Factory(t){return new(t||_class173)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(StringCellComponent,"cmp",core["defineComponent"]({type:_class173,selectors:[["teta-string-cell"]],viewQuery:function _class173_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["InheritDefinitionFeature"]],decls:3,vars:10,consts:[[1,"cell-text",3,"tetaHint","align","appendToBody","overflownOnly"],["type","text","class","input row_auto border-radius-0",3,"formControl",4,"ngIf"],["type","text",1,"input","row_auto","border-radius-0",3,"formControl"],["input",""]],template:function _class173_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["elementEnd"](),core["template"](2,_class173_input_2_Template,2,1,"input",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["property"]("tetaHint",ctx.row[ctx.column.name])("align",ctx.align.auto)("appendToBody",!0)("overflownOnly",!0),core["advance"](1),core["textInterpolate1"](" ",ctx.control.value,"\n"),core["advance"](1),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.Fj,fesm2022_forms.JJ,HintDirective,fesm2022_forms.oH],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](StringCellComponent,[{type:core.Component,args:[{selector:"teta-string-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<span [style.display]="edit ? \'none\' : \'block\'"\n      class="cell-text"\n      [tetaHint]="row[column.name]"\n      [align]="align.auto"\n      [appendToBody]="true"\n      [overflownOnly]="true"\n      [class.cell-text_disabled]="!editable">\n  {{control.value}}\n</span>\n<input #input\n       *ngIf="edit"\n       type="text"\n       class="input row_auto border-radius-0"\n       [formControl]=\'control\'/>\n\n'}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});class BooleanCellComponent extends CellComponentBase{constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"input",void 0),this.svc=svc,this.cdr=cdr}ngOnInit(){super.ngOnInit()}startEdit(initiator,type){initiator?.column===this.column.name&&(this.cdr.markForCheck(),setTimeout((()=>{this.input?.nativeElement.focus()}),0))}stopEdit(){this.cdr.markForCheck()}}_class174=BooleanCellComponent,defineProperty_defineProperty(BooleanCellComponent,"fac",(function _class174_Factory(t){return new(t||_class174)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(BooleanCellComponent,"cmp",core["defineComponent"]({type:_class174,selectors:[["teta-boolean-cell"]],viewQuery:function _class174_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["InheritDefinitionFeature"]],decls:3,vars:6,consts:[[1,"cell-text"],[3,"binary","formControl","blur",4,"ngIf"],[3,"binary","formControl","blur"],["input",""]],template:function _class174_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["elementEnd"](),core["template"](2,_class174_teta_checkbox_2_Template,2,2,"teta-checkbox",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["advance"](1),core["textInterpolate1"](" ",null==ctx.control?null:ctx.control.value,"\n"),core["advance"](1),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.JJ,CheckboxComponent,fesm2022_forms.oH],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](BooleanCellComponent,[{type:core.Component,args:[{selector:"teta-boolean-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<span [style.display]="edit ? \'none\' : \'block\'"\n      class="cell-text"\n      [class.cell-text_disabled]="!editable">\n  {{ control?.value }}\n</span>\n<teta-checkbox\n  #input\n  *ngIf="edit"\n  [binary]="true"\n  [formControl]=\'control\'\n  (blur)="setValue()"\n></teta-checkbox>\n'}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});const cellComponentsMap=(new Map).set(FilterType.number,NumericCellComponent).set(FilterType.date,DateCellComponent).set(FilterType.list,ListCellComponent).set(FilterType.string,StringCellComponent).set(FilterType.boolean,BooleanCellComponent).set(FilterType.custom,StringCellComponent);class CellHostComponent{constructor(viewContainerRef){defineProperty_defineProperty(this,"viewContainerRef",void 0),defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"row",void 0),defineProperty_defineProperty(this,"filterOptions",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"_init",!1),defineProperty_defineProperty(this,"_componentRef",void 0),this.viewContainerRef=viewContainerRef}ngOnInit(){var column;Object.prototype.isPrototypeOf.call(CellComponentBase,this.column.cellComponent)||(this.column.cellComponent=(column=this.column,cellComponentsMap.has(column.filterType)?cellComponentsMap.get(column.filterType):StringCellComponent)),this._componentRef=this.viewContainerRef.createComponent(this.column.cellComponent),this._componentRef.instance.column=this.column,this._componentRef.instance.row=this.row,this._componentRef.instance.filterOptions=this.filterOptions,this._componentRef.instance.dict=this.dict,this._init=!0}ngOnChanges(changes){this._init&&(Object.prototype.hasOwnProperty.call(changes,"row")||Object.prototype.hasOwnProperty.call(changes,"column")||Object.prototype.hasOwnProperty.call(changes,"filterOptions")||Object.prototype.hasOwnProperty.call(changes,"dict"))&&(this._componentRef.instance.row=this.row,this._componentRef.instance.column=this.column,this._componentRef.instance.filterOptions=this.filterOptions,this._componentRef.instance.dict=this.dict,this._componentRef.injector.get(core.ChangeDetectorRef).markForCheck())}}_class175=CellHostComponent,defineProperty_defineProperty(CellHostComponent,"fac",(function _class175_Factory(t){return new(t||_class175)(core["directiveInject"](core.ViewContainerRef))})),defineProperty_defineProperty(CellHostComponent,"cmp",core["defineComponent"]({type:_class175,selectors:[["teta-cell-host"]],inputs:{column:"column",row:"row",filterOptions:"filterOptions",dict:"dict"},features:[core["ProvidersFeature"]([],[FormsUtil.formProvider]),core["NgOnChangesFeature"]],decls:0,vars:0,template:function _class175_Template(rf,ctx){},changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CellHostComponent,[{type:core.Component,args:[{selector:"teta-cell-host",template:"",changeDetection:core.ChangeDetectionStrategy.OnPush,viewProviders:[FormsUtil.formProvider]}]}],(function(){return[{type:core.ViewContainerRef}]}),{column:[{type:core.Input}],row:[{type:core.Input}],filterOptions:[{type:core.Input}],dict:[{type:core.Input}]});class CellComponent{constructor(){defineProperty_defineProperty(this,"column",void 0),defineProperty_defineProperty(this,"filterOptions",void 0),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"row",void 0),defineProperty_defineProperty(this,"tableCellClass",!0)}}_class176=CellComponent,defineProperty_defineProperty(CellComponent,"fac",(function _class176_Factory(t){return new(t||_class176)})),defineProperty_defineProperty(CellComponent,"cmp",core["defineComponent"]({type:_class176,selectors:[["teta-cell"]],hostVars:2,hostBindings:function _class176_HostBindings(rf,ctx){2&rf&&core["classProp"]("cell",ctx.tableCellClass)},inputs:{column:"column",filterOptions:"filterOptions",dict:"dict",row:"row"},decls:1,vars:4,consts:[[3,"row","column","filterOptions","dict"]],template:function _class176_Template(rf,ctx){1&rf&&core["element"](0,"teta-cell-host",0),2&rf&&core["property"]("row",ctx.row)("column",ctx.column)("filterOptions",ctx.filterOptions)("dict",ctx.dict)},dependencies:[CellHostComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CellComponent,[{type:core.Component,args:[{selector:"teta-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-cell-host [row]="row"\n                [column]="column"\n                [filterOptions]="filterOptions"\n                [dict]="dict"></teta-cell-host>\n'}]}],null,{column:[{type:core.Input}],filterOptions:[{type:core.Input}],dict:[{type:core.Input}],row:[{type:core.Input}],tableCellClass:[{type:core.HostBinding,args:["class.cell"]}]});class SelectionCellComponent{constructor(_svc,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"row",void 0),defineProperty_defineProperty(this,"tableCellClass",!0),defineProperty_defineProperty(this,"selectedRows",[]),defineProperty_defineProperty(this,"_alive",!0),this._svc=_svc,this._cdr=_cdr}selectRow(value){value?this._svc.selectRow(this.row):this._svc.deselectRow(this.row)}ngOnInit(){this._svc.selectedRows.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.selectedRows=_,this._cdr.markForCheck()}))}ngOnDestroy(){this._alive=!1}}_class177=SelectionCellComponent,defineProperty_defineProperty(SelectionCellComponent,"fac",(function _class177_Factory(t){return new(t||_class177)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(SelectionCellComponent,"cmp",core["defineComponent"]({type:_class177,selectors:[["teta-selection-cell"]],hostVars:2,hostBindings:function _class177_HostBindings(rf,ctx){2&rf&&core["classProp"]("cell",ctx.tableCellClass)},inputs:{row:"row"},decls:1,vars:3,consts:[[3,"binary","noLabel","ngModel","ngModelChange","click"]],template:function _class177_Template(rf,ctx){1&rf&&(core["elementStart"](0,"teta-checkbox",0),core["listener"]("ngModelChange",(function _class177_Template_teta_checkbox_ngModelChange_0_listener($event){return ctx.selectRow($event)}))("click",(function _class177_Template_teta_checkbox_click_0_listener($event){return $event.stopPropagation()})),core["elementEnd"]()),2&rf&&core["property"]("binary",!0)("noLabel",!0)("ngModel",(null==ctx.selectedRows?null:ctx.selectedRows.indexOf(ctx.row))>=0)},dependencies:[fesm2022_forms.JJ,fesm2022_forms.On,CheckboxComponent],styles:["[_nghost-%COMP%]{display:flex;align-items:center;justify-content:center}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SelectionCellComponent,[{type:core.Component,args:[{selector:"teta-selection-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-checkbox [binary]="true"\n               [noLabel]="true"\n               [ngModel]="selectedRows?.indexOf(row) >= 0"\n               (ngModelChange)="selectRow($event)"\n               (click)="$event.stopPropagation()"></teta-checkbox>\n',styles:[":host{display:flex;align-items:center;justify-content:center}\n"]}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{row:[{type:core.Input}],tableCellClass:[{type:core.HostBinding,args:["class.cell"]}]});class TableBodyComponent{set data(data){this._data=data}get data(){return this._data}set columns(columns){this._columns=columns,this.locked=this._columns?.filter((_=>!0===_.locked)),this.unlocked=this._columns?.filter((_=>!1===_.locked));const startWidth=this.selectType===SelectType.checkBox?28:0;this.lockedFlex=this.locked.reduce(((prev,curr)=>prev+curr.flex),0),this.lockedWidth=this.locked.reduce(((prev,curr)=>prev+curr.width),startWidth),this.totalFlex=this._columns.reduce(((prev,curr)=>prev+curr.flex),0),this.totalWidth=this._columns.reduce(((prev,curr)=>prev+curr.width),startWidth)}get columns(){return this._columns}constructor(_svc,_elementRef,_config,_cdr){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"virtual",void 0),defineProperty_defineProperty(this,"activeRow",void 0),defineProperty_defineProperty(this,"selectedRows",[]),defineProperty_defineProperty(this,"additionalComponent",void 0),defineProperty_defineProperty(this,"aggregate",void 0),defineProperty_defineProperty(this,"selectType",void 0),defineProperty_defineProperty(this,"rowClass",void 0),defineProperty_defineProperty(this,"trackRow",void 0),defineProperty_defineProperty(this,"trackColumns",void 0),defineProperty_defineProperty(this,"viewport",void 0),defineProperty_defineProperty(this,"tableBodyClass",!0),defineProperty_defineProperty(this,"scrollChange",new core.EventEmitter),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"locked",[]),defineProperty_defineProperty(this,"unlocked",[]),defineProperty_defineProperty(this,"selectTypeEnum",SelectType),defineProperty_defineProperty(this,"aggregationType",AggregationType),defineProperty_defineProperty(this,"lockedFlex",void 0),defineProperty_defineProperty(this,"lockedWidth",void 0),defineProperty_defineProperty(this,"totalFlex",void 0),defineProperty_defineProperty(this,"totalWidth",void 0),defineProperty_defineProperty(this,"_columns",[]),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_data",void 0),defineProperty_defineProperty(this,"_hiddenColumns",[]),defineProperty_defineProperty(this,"_obs",void 0),defineProperty_defineProperty(this,"locale",void 0),defineProperty_defineProperty(this,"trackTableRow",((index,row)=>this.trackRow?this.trackRow(index,row.data):row.data.id)),this._svc=_svc,this._elementRef=_elementRef,this._config=_config,this._cdr=_cdr}setActiveRow(row,event){event.shiftKey||event.ctrlKey||this._svc.setActiveRow(row)}ngOnInit(){var _this3=this;this.locale=this._config.locale,(0,combineLatest.a)([this._svc.columns,this._svc.hiddenColumns]).pipe((0,takeWhile.o)((_=>this._alive))).subscribe((values=>{const[columns,hiddenColumns]=values;this._hiddenColumns=hiddenColumns,this.columns=ArrayUtil.flatten(columns,"columns",!0).filter((_=>this._hiddenColumns.indexOf(_.name)<0)),this._cdr.markForCheck()})),this._svc.displayData.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.data=_,this._cdr.markForCheck(),this.viewport?.checkViewportSize()})),this._svc.dict.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this.dict=_,this._cdr.markForCheck()})),this._svc.scrollIndex.pipe((0,takeWhile.o)((()=>this._alive))).subscribe(function(){var _ref=(0,asyncToGenerator.Z)((function*(index){if(_this3.viewport)_this3.viewport.scrollToIndex(index,"auto");else{const row=_this3._elementRef.nativeElement.querySelector(`.table-row[data-row="${index}"]`);row?.scrollIntoView()}_this3._cdr.markForCheck()}));return function(_x){return _ref.apply(this,arguments)}}()),this._svc.activeRow.pipe((0,takeWhile.o)((_=>this._alive))).subscribe(function(){var _ref2=(0,asyncToGenerator.Z)((function*(_){_this3.activeRow=_,_this3._cdr.markForCheck()}));return function(_x2){return _ref2.apply(this,arguments)}}()),this.addResizeObserver()}ngOnDestroy(){this._alive=!1,this.removeResizeObserver()}getAggregateValue(column){return column.aggregate===AggregationType.sum?this.getSum(column.name):column.aggregate===AggregationType.avg?this.getSum(column.name)/this.data.length:column.aggregate===AggregationType.min?this.getMin(column.name):column.aggregate===AggregationType.max?this.getMax(column.name):void 0}getAggregateText(column){return column.aggregate===AggregationType.sum?"sum":column.aggregate===AggregationType.avg?"avg":column.aggregate===AggregationType.min?"min":column.aggregate===AggregationType.max?"max":""}emitScroll(event){this.scrollChange.emit(event)}addResizeObserver(){this._obs=new ResizeObserver((_=>{this.viewport?.checkViewportSize()})),this._obs.observe(this._elementRef.nativeElement)}removeResizeObserver(){this._obs.unobserve(this._elementRef.nativeElement),this._obs.disconnect()}getSum(columnName){return this.data?.reduce(((accum,current)=>{const val=parseFloat(current.data[columnName]);return accum+(isNaN(val)?0:val)}),0)}getMin(columnName){return this.data?.reduce(((accum,current)=>null!=accum&&accum<=current.data[columnName]?accum:current.data[columnName]),null)}getMax(columnName){return this.data?.reduce(((accum,current)=>null!=accum&&accum>=current.data[columnName]?accum:current.data[columnName]),null)}}_class178=TableBodyComponent,defineProperty_defineProperty(TableBodyComponent,"fac",(function _class178_Factory(t){return new(t||_class178)(core["directiveInject"](TableService),core["directiveInject"](core.ElementRef),core["directiveInject"](TetaConfigService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(TableBodyComponent,"cmp",core["defineComponent"]({type:_class178,selectors:[["teta-table-body"]],viewQuery:function _class178_Query(rf,ctx){if(1&rf&&core["viewQuery"](scrolling.N7,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.viewport=_t.first)}},hostVars:2,hostBindings:function _class178_HostBindings(rf,ctx){2&rf&&core["classProp"]("table-body",ctx.tableBodyClass)},inputs:{virtual:"virtual",activeRow:"activeRow",selectedRows:"selectedRows",additionalComponent:"additionalComponent",aggregate:"aggregate",selectType:"selectType",rowClass:"rowClass",trackRow:"trackRow",trackColumns:"trackColumns"},outputs:{scrollChange:"scrollChange"},ngContentSelectors:_c0,decls:9,vars:2,consts:[["class","table-body-container","style","padding-bottom: 12px","showScrollbars","true",4,"ngIf","ngIfElse"],["nonVirtual",""],["bodyTemplate",""],["aggTemplate",""],["emptyRow",""],["showScrollbars","true",1,"table-body-container",2,"padding-bottom","12px"],["tetaScrollable","",1,"table-body-container",3,"itemSize","scroll"],[4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTemplateCacheSize","cdkVirtualForTrackBy"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["direction","column","showScrollbars","true",1,"table-body-container",2,"padding-bottom","12px",3,"scroll"],[1,"table-body-container"],["class","column column_auto","style","position: absolute; top:0; bottom:16px;left:0;right:0;",4,"ngIf"],[4,"ngFor","ngForOf","ngForTrackBy"],[4,"ngIf"],[4,"ngTemplateOutlet"],[1,"column","column_auto",2,"position","absolute","top","0","bottom","16px","left","0","right","0"],["ngForm","",1,"table-row",3,"ngClass","click"],["class","table-row_locked",3,"flex-grow","flex-basis","min-width","zIndex",4,"ngIf"],["style","width: 28px;",3,"row",4,"ngIf"],[3,"column","filterOptions","dict","row","ngClass","flex-grow","flex-basis",4,"ngFor","ngForOf","ngForTrackBy"],[1,"table-row_locked"],[2,"width","28px",3,"row"],[3,"column","filterOptions","dict","row","ngClass"],["class","table-row",3,"table-row_virtual","flex-grow","flex-basis","min-width",4,"ngIf"],[1,"table-row"],["class","table-row_locked",3,"flex-grow","flex-basis","min-width",4,"ngIf"],["class","cell align-center justify-content-center","style","width: 28px;",4,"ngIf"],["class","cell cell-component aggregate-cell",3,"ngClass","flex-grow","flex-basis",4,"ngFor","ngForOf","ngForTrackBy"],[1,"cell","align-center","justify-content-center",2,"width","28px"],[3,"name"],[1,"cell","cell-component","aggregate-cell",3,"ngClass"],["class","cell-text cell-text_numeric font-title-3",4,"ngIf"],[1,"cell-text","cell-text_numeric","font-title-3"],[1,"empty-table-row",2,"height","0.1px"]],template:function _class178_Template(rf,ctx){if(1&rf&&(core["projectionDef"](),core["template"](0,_class178_teta_scrollable_0_Template,3,4,"teta-scrollable",0),core["template"](1,_class178_ng_template_1_Template,6,5,"ng-template",null,1,core["templateRefExtractor"]),core["template"](3,_class178_ng_template_3_Template,4,16,"ng-template",null,2,core["templateRefExtractor"]),core["template"](5,_class178_ng_template_5_Template,2,3,"ng-template",null,3,core["templateRefExtractor"]),core["template"](7,_class178_ng_template_7_Template,1,6,"ng-template",null,4,core["templateRefExtractor"])),2&rf){const _r1=core["reference"](2);core["property"]("ngIf",ctx.virtual&&ctx.data.length>0)("ngIfElse",_r1)}},dependencies:[common.NgClass,common.NgForOf,common.NgIf,common.NgTemplateOutlet,fesm2022_forms.JL,fesm2022_forms.F,IconComponent,scrolling.xd,scrolling.x0,scrolling.N7,ScrollableDirective,ScrollableComponent,CellComponent,SelectionCellComponent,common.AsyncPipe,NumberPipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableBodyComponent,[{type:core.Component,args:[{selector:"teta-table-body",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<teta-scrollable class="table-body-container"\n                 style="padding-bottom: 12px"\n                 showScrollbars="true"\n                 *ngIf="virtual && data.length > 0; else nonVirtual">\n  <cdk-virtual-scroll-viewport tetaScrollable\n                               class="table-body-container"\n                               (scroll)="emitScroll($event)"\n                               [itemSize]="28">\n    <ng-container *cdkVirtualFor="let row of data;templateCacheSize: 0; let rowIndex = index; trackBy: trackTableRow;">\n      <ng-container *ngTemplateOutlet="bodyTemplate; context: {row: row, rowIndex: rowIndex}"></ng-container>\n    </ng-container>\n  </cdk-virtual-scroll-viewport>\n</teta-scrollable>\n<ng-template #nonVirtual>\n  <teta-scrollable class="table-body-container"\n                   style="padding-bottom: 12px"\n                   direction="column"\n                   showScrollbars="true"\n                   (scroll)="emitScroll($event)">\n    <div class="table-body-container">\n      <div class="column column_auto"\n           style="position: absolute; top:0; bottom:16px;left:0;right:0;"\n           *ngIf="!data?.length">\n        <ng-content></ng-content>\n      </div>\n      <ng-container *ngFor="let row of data; let rowIndex = index; trackBy: trackTableRow;">\n        <ng-container *ngTemplateOutlet="bodyTemplate; context: {row: row, rowIndex: rowIndex}"></ng-container>\n      </ng-container>\n      <ng-container *ngIf="aggregate">\n        <ng-container *ngTemplateOutlet="aggTemplate;"></ng-container>\n      </ng-container>\n      <ng-container *ngTemplateOutlet="emptyRow;"></ng-container>\n    </div>\n  </teta-scrollable>\n</ng-template>\n\n<ng-template #bodyTemplate let-row="row" let-rowIndex="rowIndex">\n  <div class="table-row"\n       ngForm\n       (click)="setActiveRow(row.data, $event)"\n       [attr.data-row]="rowIndex"\n       [class.table-row_odd]="rowIndex % 2 === 1"\n       [ngClass]="rowClass ? rowClass(row.data, rowIndex) : \'\'"\n       [class.table-row_selected]="selectedRows && selectedRows.indexOf(row.data) >= 0"\n       [style.flex-grow]="totalFlex"\n       [style.flex-basis.px]="totalWidth"\n       [style.min-width.px]="totalWidth">\n    <div class="table-row_locked"\n         *ngIf="locked.length > 0"\n         [style.flex-grow]="lockedFlex"\n         [style.flex-basis.px]="lockedWidth"\n         [style.min-width.px]="lockedWidth"\n         [style.zIndex]="row.data === activeRow ? 2 : 1">\n      <teta-selection-cell *ngIf="selectType === selectTypeEnum.checkBox && locked.length"\n                           [row]="row.data"\n                           style="width: 28px;"></teta-selection-cell>\n      <teta-cell\n        *ngFor="let column of locked; let colIndex = index; trackBy: trackColumns;"\n        [attr.data-row]="rowIndex"\n        [attr.data-column]="column.name"\n        [column]="column"\n        [filterOptions]="dict?dict[column.name]:[]"\n        [dict]="dict"\n        [row]="row"\n        [ngClass]="column.cellClass"\n        [attr.tabindex]="0"\n        [style.flex-grow]="column.flex"\n        [style.flex-basis.px]="column.width"\n      ></teta-cell>\n    </div>\n    <teta-selection-cell *ngIf="selectType === selectTypeEnum.checkBox && locked.length < 1"\n                         [row]="row.data"\n                         style="width: 28px;"></teta-selection-cell>\n    <teta-cell\n      *ngFor="let column of unlocked; let colIndex = index; trackBy: trackColumns;"\n      [attr.data-row]="rowIndex"\n      [attr.data-column]="column.name"\n      [column]="column"\n      [filterOptions]="dict?dict[column.name]:[]"\n      [dict]="dict"\n      [row]="row"\n      [ngClass]="column.cellClass"\n      [attr.tabindex]="0"\n      [style.flex-grow]="column.flex"\n      [style.flex-basis.px]="column.width"\n    ></teta-cell>\n  </div>\n</ng-template>\n\n<ng-template #aggTemplate>\n  <ng-container *ngIf="locale | async as loc">\n    <div class="table-row"\n         *ngIf="aggregate"\n         [class.table-row_virtual]="virtual"\n         [style.flex-grow]="totalFlex"\n         [style.flex-basis.px]="totalWidth"\n         [style.min-width.px]="totalWidth">\n      <div class="table-row_locked"\n           *ngIf="locked.length > 0"\n           [style.flex-grow]="lockedFlex"\n           [style.flex-basis.px]="lockedWidth"\n           [style.min-width.px]="lockedWidth">\n        <div class="cell align-center justify-content-center"\n             style="width: 28px;"\n             *ngIf="selectType === selectTypeEnum.checkBox && locked.length < 1">\n          <teta-icon [name]="\'sumColor\'"></teta-icon>\n        </div>\n        <div class="cell cell-component aggregate-cell"\n             *ngFor="let column of locked; let colIndex = index; trackBy: trackColumns;"\n             [attr.data-column]="column.name"\n             [ngClass]="column.cellClass"\n             [attr.tabindex]="0"\n             [style.flex-grow]="column.flex"\n             [style.flex-basis.px]="column.width">\n        <span class="cell-text cell-text_numeric font-title-3"\n              *ngIf="column.aggregate !== aggregationType.none">\n          {{loc[getAggregateText(column)]}}:\n          {{getAggregateValue(column) | tetaNumber : 2}}\n        </span>\n        </div>\n      </div>\n      <div class="cell align-center justify-content-center"\n           style="width: 28px;"\n           *ngIf="selectType === selectTypeEnum.checkBox && locked.length < 1">\n        <teta-icon [name]="\'sumColor\'"></teta-icon>\n      </div>\n      <div class="cell cell-component aggregate-cell"\n           *ngFor="let column of unlocked; let colIndex = index; trackBy: trackColumns;"\n           [attr.data-column]="column.name"\n           [ngClass]="column.cellClass"\n           [attr.tabindex]="0"\n           [style.flex-grow]="column.flex"\n           [style.flex-basis.px]="column.width">\n      <span class="cell-text cell-text_numeric font-title-3"\n            *ngIf="column.aggregate !== aggregationType.none">\n        {{loc[getAggregateText(column)]}}:\n        {{getAggregateValue(column) | tetaNumber : 2}}\n      </span>\n      </div>\n    </div>\n  </ng-container>\n</ng-template>\n<ng-template #emptyRow>\n  <div class="empty-table-row"\n       style="height: 0.1px"\n       [style.flex-grow]="totalFlex"\n       [style.flex-basis.px]="totalWidth"\n       [style.min-width.px]="totalWidth">\n  </div>\n</ng-template>\n'}]}],(function(){return[{type:TableService},{type:core.ElementRef},{type:TetaConfigService},{type:core.ChangeDetectorRef}]}),{virtual:[{type:core.Input}],activeRow:[{type:core.Input}],selectedRows:[{type:core.Input}],additionalComponent:[{type:core.Input}],aggregate:[{type:core.Input}],selectType:[{type:core.Input}],rowClass:[{type:core.Input}],trackRow:[{type:core.Input}],trackColumns:[{type:core.Input}],viewport:[{type:core.ViewChild,args:[scrolling.N7,{static:!1}]}],tableBodyClass:[{type:core.HostBinding,args:["class.table-body"]}],scrollChange:[{type:core.Output}]});class TableComponent{set state(state){this._state=state}set scrollToIndex(index){this._svc.scrollToIndex(index)}constructor(_svc,_elementRef){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"data",[]),defineProperty_defineProperty(this,"columns",[]),defineProperty_defineProperty(this,"dict",void 0),defineProperty_defineProperty(this,"filterOptions",void 0),defineProperty_defineProperty(this,"cookieName",void 0),defineProperty_defineProperty(this,"virtual",void 0),defineProperty_defineProperty(this,"detailComponent",void 0),defineProperty_defineProperty(this,"activeRow",void 0),defineProperty_defineProperty(this,"selectedRows",void 0),defineProperty_defineProperty(this,"selectType",SelectType.mouse),defineProperty_defineProperty(this,"aggregate",void 0),defineProperty_defineProperty(this,"trackRow",((index,row)=>row.id?row.id:index)),defineProperty_defineProperty(this,"trackColumns",((index,column)=>column.name)),defineProperty_defineProperty(this,"editType",EditType.cell),defineProperty_defineProperty(this,"editEvent",EditEvent.doubleClick),defineProperty_defineProperty(this,"rowEditable",void 0),defineProperty_defineProperty(this,"rowClass",void 0),defineProperty_defineProperty(this,"showHeadCellMenu",!0),defineProperty_defineProperty(this,"contextMenu",void 0),defineProperty_defineProperty(this,"contextMenuOpen",void 0),defineProperty_defineProperty(this,"contextMenuOpenChange",new core.EventEmitter),defineProperty_defineProperty(this,"stateChange",new core.EventEmitter),defineProperty_defineProperty(this,"bodyLeft",new core.EventEmitter),defineProperty_defineProperty(this,"activeRowChange",new core.EventEmitter),defineProperty_defineProperty(this,"selectedRowsChange",new core.EventEmitter),defineProperty_defineProperty(this,"cellClick",new core.EventEmitter),defineProperty_defineProperty(this,"cellDoubleClick",new core.EventEmitter),defineProperty_defineProperty(this,"cellFocus",new core.EventEmitter),defineProperty_defineProperty(this,"cellKeyDown",new core.EventEmitter),defineProperty_defineProperty(this,"rowLeft",new core.EventEmitter),defineProperty_defineProperty(this,"rowEditStart",new core.EventEmitter),defineProperty_defineProperty(this,"rowEditEnd",new core.EventEmitter),defineProperty_defineProperty(this,"cellEditStart",new core.EventEmitter),defineProperty_defineProperty(this,"cellEditEnd",new core.EventEmitter),defineProperty_defineProperty(this,"valueChange",new core.EventEmitter),defineProperty_defineProperty(this,"tableService",new core.EventEmitter),defineProperty_defineProperty(this,"menu",void 0),defineProperty_defineProperty(this,"tableClass",!0),defineProperty_defineProperty(this,"selectedRowsList",void 0),defineProperty_defineProperty(this,"contextMenuRow",void 0),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign),defineProperty_defineProperty(this,"align",Align),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_headElement",void 0),defineProperty_defineProperty(this,"_state",void 0),defineProperty_defineProperty(this,"onScroll",(event=>{this._headElement.scrollLeft=event.target.scrollLeft})),this._svc=_svc,this._elementRef=_elementRef,this._svc.state.pipe((0,takeWhile.o)((()=>this._alive)),(0,filter.h)((state=>state!==this._state))).subscribe((state=>this.stateChange.next(state))),this._svc.editCellStart.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((item=>this.cellEditStart.emit(this._svc.getCellInstance(item)))),this._svc.editCellStop.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((item=>this.cellEditEnd.emit(this._svc.getCellInstance(item)))),this._svc.editRowStart.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((item=>this.rowEditStart.emit(this._svc.getCellInstance(item)))),this._svc.editRowStop.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((item=>this.rowEditEnd.emit(this._svc.getRowByIndex(item?.row)))),this._svc.selectedRows.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((items=>{this.selectedRowsList=items,this.selectedRowsChange.emit(items)})),this._svc.activeRow.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((item=>{this.activeRow=item,this.activeRowChange.emit(item)})),this._svc.valueChanged.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((coordinates=>{this.valueChange.emit(this._svc.getCellInstance(coordinates))}))}handleClickOutsideAnyRow(event){const coordinates=this.getCoordinates(event),row=this.getRow(event),eventIsOnRow=this.eventIsOnRow(event);setTimeout((()=>{coordinates&&(this.cellClick.emit({...this._svc.getCellInstance(coordinates),event}),this.editEvent===EditEvent.click?this.startEditRowOrCell(coordinates):!this._svc.currentEditCell||coordinates.row===this._svc.currentEditCell.row&&coordinates.column===this._svc.currentEditCell.column||this.startEditRowOrCell(null)),row&&(event.ctrlKey?this._svc.selectOrDeselectRow(row.data):event.shiftKey?this._svc.selectRange(row.data):this._svc.selectRows([row.data])),eventIsOnRow||event.defaultPrevented||(this.editType===EditType.row?this._svc.startEditRow(null):this._svc.startEditCell(null))}))}focusIn(event){const coordinates=this.getCoordinates(event);coordinates&&(this.cellFocus.emit({...this._svc.getCellInstance(coordinates),event}),this.editEvent===EditEvent.focus&&this.startEditRowOrCell(coordinates))}dblclick(event){const coordinates=this.getCoordinates(event);coordinates&&setTimeout((()=>{this.cellDoubleClick.emit({...this._svc.getCellInstance(coordinates),event}),this.editEvent===EditEvent.doubleClick&&this.startEditRowOrCell(coordinates)}))}keydown(event){if(event.ctrlKey)return void("KeyA"===event.code&&(event.preventDefault(),this._svc.selectAll()));"Escape"===event.key&&(this._svc.deselectAll(),this.editType===EditType.row?this._svc.startEditRow(null):this._svc.startEditCell(null));const coordinates=this.getCoordinates(event);if("Enter"===event.key)if(this.editType===EditType.row)this._svc.startEditRow(null);else if(this._svc.currentEditCell){const target=this._svc.getNextRowCell(coordinates);target?this.startEditRowOrCell({row:target.row,column:target.column,event:void 0}):this._svc.startEditCell(null)}if(coordinates){if(this.cellKeyDown.emit({...this._svc.getCellInstance(coordinates),event}),event.key&&(1===event.key.length||"Delete"===event.key)){(this._svc.getColumnByName(coordinates.column).filterType!==FilterType.number||isFinite(event.key))&&this.startEditRowOrCell({row:coordinates.row,column:coordinates.column,event})}if("Tab"===event.key&&this._svc.currentEditCell){event.preventDefault();let target=this._svc.getNextEditableCell(coordinates);event.shiftKey&&(target=this._svc.getPreviousEditableCell(coordinates)),target&&this.startEditRowOrCell({row:target.row,column:target.column,event:void 0})}if(!this._svc.currentEditCell){let target;if("ArrowRight"===event.key&&(target=this._svc.getNextCell(coordinates)),"ArrowLeft"===event.key&&(target=this._svc.getPreviousCell(coordinates)),"ArrowUp"===event.key&&(target=this._svc.getPreviousRowCell(coordinates)),"ArrowDown"===event.key&&(target=this._svc.getNextRowCell(coordinates)),target){event.preventDefault();const element=this.getCellElement(target);element?.focus()}}}}mousedown(event){2===event.button&&event.preventDefault()}ngOnInit(){this._svc.restoreState(),this._svc.restoreHiddenColumns(),this.tableService.emit(this._svc)}ngAfterViewInit(){this._headElement=this._elementRef.nativeElement.querySelector(".table-head")}ngOnDestroy(){this._alive=!1}ngOnChanges(changes){Object.prototype.hasOwnProperty.call(changes,"editType")&&(this._svc.editType=this.editType),Object.prototype.hasOwnProperty.call(changes,"selectType")&&(this._svc.selectType=this.selectType),Object.prototype.hasOwnProperty.call(changes,"selectedRows")&&this._svc.selectRows(this.selectedRows),Object.prototype.hasOwnProperty.call(changes,"rowEditable")&&(this._svc.rowEditable=this.rowEditable),Object.prototype.hasOwnProperty.call(changes,"cookieName")&&this._svc.setCookieName(this.cookieName),Object.prototype.hasOwnProperty.call(changes,"columns")&&null!==this.columns&&void 0!==this.columns&&this._svc.setColumns(this.columns),Object.prototype.hasOwnProperty.call(changes,"data")&&(this._svc.setData(this.data),this._svc.selectRows(this.data?.filter((row=>this.selectedRows?.some((selectedRow=>this.trackRow(this._svc.getRowIndex(selectedRow),selectedRow)===this.trackRow(this._svc.getRowIndex(row),row))))))),Object.prototype.hasOwnProperty.call(changes,"dict")&&(this._svc.setDict(this.dict),this._svc.setFilterOptions(this.dict)),Object.prototype.hasOwnProperty.call(changes,"filterOptions")&&this._svc.setFilterOptions(this.filterOptions),Object.prototype.hasOwnProperty.call(changes,"trackRow")&&(this._svc.trackRow=this.trackRow)}setContextMenuOpen(value){this.contextMenuOpen=value,this.contextMenuOpenChange.emit(this.contextMenuOpen)}setContextMenuRow(event){this.contextMenuRow=null;const rowElement=this._svc.getEventRow(event);if(rowElement){const rowIndex=parseInt(rowElement.getAttribute("data-row"),10);rowIndex>=0&&(this.contextMenuRow=this._svc.getRowByIndex(rowIndex).data)}}startEditRowOrCell(coordinates){this.editType===EditType.row&&this._svc.startEditRow(coordinates),this.editType===EditType.cell&&this._svc.startEditCell(coordinates)}getCellElement(coordinates){return this._elementRef.nativeElement.querySelector(`teta-cell[data-row="${coordinates.row}"][data-column="${coordinates.column}"]`)}eventIsOnRow(event){const row=event.composedPath().find((target=>target?.getAttribute&&target?.getAttribute("data-row")));return row&&this._elementRef.nativeElement.contains(row)}getCoordinates(event){if(event.composedPath().indexOf(this._elementRef.nativeElement)<0)return null;const cell=this._svc.getEventCell(event);if(cell){const rowIndex=parseInt(cell.getAttribute("data-row"),10),columnName=cell.getAttribute("data-column");if(rowIndex>=0&&columnName)return{row:rowIndex,column:columnName,event}}return null}getRow(event){if(event.composedPath().indexOf(this._elementRef.nativeElement)<0)return null;const rowElement=this._svc.getEventRow(event);if(rowElement){const rowIndex=parseInt(rowElement.getAttribute("data-row"),10);if(rowIndex>=0)return this._svc.getRowByIndex(rowIndex)}return null}}_class179=TableComponent,defineProperty_defineProperty(TableComponent,"fac",(function _class179_Factory(t){return new(t||_class179)(core["directiveInject"](TableService),core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(TableComponent,"cmp",core["defineComponent"]({type:_class179,selectors:[["teta-table"]],viewQuery:function _class179_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c45,7),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.menu=_t.first)}},hostVars:2,hostBindings:function _class179_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class179_click_HostBindingHandler($event){return ctx.handleClickOutsideAnyRow($event)}),!1,core["resolveDocument"])("focusin",(function _class179_focusin_HostBindingHandler($event){return ctx.focusIn($event)}))("dblclick",(function _class179_dblclick_HostBindingHandler($event){return ctx.dblclick($event)}))("keydown",(function _class179_keydown_HostBindingHandler($event){return ctx.keydown($event)}))("mousedown",(function _class179_mousedown_HostBindingHandler($event){return ctx.mousedown($event)})),2&rf&&core["classProp"]("table",ctx.tableClass)},inputs:{data:"data",columns:"columns",dict:"dict",filterOptions:"filterOptions",state:"state",cookieName:"cookieName",virtual:"virtual",detailComponent:"detailComponent",activeRow:"activeRow",selectedRows:"selectedRows",selectType:"selectType",aggregate:"aggregate",trackRow:"trackRow",trackColumns:"trackColumns",editType:"editType",editEvent:"editEvent",rowEditable:"rowEditable",rowClass:"rowClass",scrollToIndex:"scrollToIndex",showHeadCellMenu:"showHeadCellMenu",contextMenu:"contextMenu",contextMenuOpen:"contextMenuOpen"},outputs:{contextMenuOpenChange:"contextMenuOpenChange",stateChange:"stateChange",bodyLeft:"bodyLeft",activeRowChange:"activeRowChange",selectedRowsChange:"selectedRowsChange",cellClick:"cellClick",cellDoubleClick:"cellDoubleClick",cellFocus:"cellFocus",cellKeyDown:"cellKeyDown",rowLeft:"rowLeft",rowEditStart:"rowEditStart",rowEditEnd:"rowEditEnd",cellEditStart:"cellEditStart",cellEditEnd:"cellEditEnd",valueChange:"valueChange",tableService:"tableService"},features:[core["ProvidersFeature"]([TableService]),core["NgOnChangesFeature"]],ngContentSelectors:_c0,decls:5,vars:17,consts:[[1,"column","column_auto"],[2,"z-index","1",3,"selectType","showHeadCellMenu"],[1,"column","column_auto","position-relative",2,"z-index","0",3,"tetaContextMenu","verticalAlign","align","appendToBody","data","open","openChange"],[3,"aggregate","virtual","activeRow","trackRow","trackColumns","selectedRows","additionalComponent","selectType","rowClass","contextmenu","scrollChange"]],template:function _class179_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["elementStart"](0,"div",0),core["element"](1,"teta-table-head",1),core["elementStart"](2,"div",2),core["listener"]("openChange",(function _class179_Template_div_openChange_2_listener($event){return ctx.setContextMenuOpen($event)})),core["elementStart"](3,"teta-table-body",3),core["listener"]("contextmenu",(function _class179_Template_teta_table_body_contextmenu_3_listener($event){return ctx.setContextMenuRow($event)}))("scrollChange",(function _class179_Template_teta_table_body_scrollChange_3_listener($event){return ctx.onScroll($event)})),core["projection"](4),core["elementEnd"]()()()),2&rf&&(core["advance"](1),core["property"]("selectType",ctx.selectType)("showHeadCellMenu",ctx.showHeadCellMenu),core["advance"](1),core["property"]("tetaContextMenu",ctx.contextMenu)("verticalAlign",ctx.verticalAlign.auto)("align",ctx.align.auto)("appendToBody",!0)("data",ctx.contextMenuRow)("open",ctx.contextMenuOpen),core["advance"](1),core["property"]("aggregate",ctx.aggregate)("virtual",ctx.virtual)("activeRow",ctx.activeRow)("trackRow",ctx.trackRow)("trackColumns",ctx.trackColumns)("selectedRows",ctx.selectedRowsList)("additionalComponent",ctx.detailComponent)("selectType",ctx.selectType)("rowClass",ctx.rowClass))},dependencies:[ContextMenuDirective,TableHeadComponent,TableBodyComponent],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableComponent,[{type:core.Component,args:[{selector:"teta-table",changeDetection:core.ChangeDetectionStrategy.OnPush,providers:[TableService],template:"<div class='column column_auto'>\n  <teta-table-head\n    style='z-index: 1'\n    [selectType]='selectType'\n    [showHeadCellMenu]='showHeadCellMenu'></teta-table-head>\n  <div class='column column_auto position-relative'\n       style='z-index: 0'\n       [tetaContextMenu]='contextMenu'\n       [verticalAlign]='verticalAlign.auto'\n       [align]='align.auto'\n       [appendToBody]='true'\n       [data]='contextMenuRow'\n       [open]='contextMenuOpen'\n       (openChange)='setContextMenuOpen($event)'>\n    <teta-table-body\n      (contextmenu)='setContextMenuRow($event)'\n      (scrollChange)='onScroll($event)'\n      [aggregate]='aggregate'\n      [virtual]='virtual'\n      [activeRow]='activeRow'\n      [trackRow]='trackRow'\n      [trackColumns]='trackColumns'\n      [selectedRows]='selectedRowsList'\n      [additionalComponent]='detailComponent'\n      [selectType]='selectType'\n      [rowClass]='rowClass'>\n      <ng-content></ng-content>\n    </teta-table-body>\n  </div>\n</div>\n"}]}],(function(){return[{type:TableService},{type:core.ElementRef}]}),{data:[{type:core.Input}],columns:[{type:core.Input}],dict:[{type:core.Input}],filterOptions:[{type:core.Input}],state:[{type:core.Input}],cookieName:[{type:core.Input}],virtual:[{type:core.Input}],detailComponent:[{type:core.Input}],activeRow:[{type:core.Input}],selectedRows:[{type:core.Input}],selectType:[{type:core.Input}],aggregate:[{type:core.Input}],trackRow:[{type:core.Input}],trackColumns:[{type:core.Input}],editType:[{type:core.Input}],editEvent:[{type:core.Input}],rowEditable:[{type:core.Input}],rowClass:[{type:core.Input}],scrollToIndex:[{type:core.Input}],showHeadCellMenu:[{type:core.Input}],contextMenu:[{type:core.Input}],contextMenuOpen:[{type:core.Input}],contextMenuOpenChange:[{type:core.Output}],stateChange:[{type:core.Output}],bodyLeft:[{type:core.Output}],activeRowChange:[{type:core.Output}],selectedRowsChange:[{type:core.Output}],cellClick:[{type:core.Output}],cellDoubleClick:[{type:core.Output}],cellFocus:[{type:core.Output}],cellKeyDown:[{type:core.Output}],rowLeft:[{type:core.Output}],rowEditStart:[{type:core.Output}],rowEditEnd:[{type:core.Output}],cellEditStart:[{type:core.Output}],cellEditEnd:[{type:core.Output}],valueChange:[{type:core.Output}],tableService:[{type:core.Output}],menu:[{type:core.ViewChild,args:["contextMenu",{static:!0}]}],tableClass:[{type:core.HostBinding,args:["class.table"]}],handleClickOutsideAnyRow:[{type:core.HostListener,args:["document:click",["$event"]]}],focusIn:[{type:core.HostListener,args:["focusin",["$event"]]}],dblclick:[{type:core.HostListener,args:["dblclick",["$event"]]}],keydown:[{type:core.HostListener,args:["keydown",["$event"]]}],mousedown:[{type:core.HostListener,args:["mousedown",["$event"]]}]});class TabsModule{}_class180=TabsModule,defineProperty_defineProperty(TabsModule,"fac",(function _class180_Factory(t){return new(t||_class180)})),defineProperty_defineProperty(TabsModule,"mod",core["defineNgModule"]({type:_class180,declarations:[TabContentDirective,TabTitleDirective,TabComponent,TabsComponent],imports:[common.CommonModule],exports:[TabContentDirective,TabTitleDirective,TabComponent,TabsComponent]})),defineProperty_defineProperty(TabsModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TabsModule,[{type:core.NgModule,args:[{declarations:[TabContentDirective,TabTitleDirective,TabComponent,TabsComponent],exports:[TabContentDirective,TabTitleDirective,TabComponent,TabsComponent],imports:[common.CommonModule]}]}],null,null);class TetaTemplateModule{}_class181=TetaTemplateModule,defineProperty_defineProperty(TetaTemplateModule,"fac",(function _class181_Factory(t){return new(t||_class181)})),defineProperty_defineProperty(TetaTemplateModule,"mod",core["defineNgModule"]({type:_class181,declarations:[TetaTemplateDirective],imports:[common.CommonModule],exports:[TetaTemplateDirective]})),defineProperty_defineProperty(TetaTemplateModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TetaTemplateModule,[{type:core.NgModule,args:[{declarations:[TetaTemplateDirective],exports:[TetaTemplateDirective],imports:[common.CommonModule]}]}],null,null);class TreeModule{}_class182=TreeModule,defineProperty_defineProperty(TreeModule,"fac",(function _class182_Factory(t){return new(t||_class182)})),defineProperty_defineProperty(TreeModule,"mod",core["defineNgModule"]({type:_class182,declarations:[TreeComponent,TreeItemComponent,TreeItemToggleComponent],imports:[common.CommonModule,IconModule,TetaTemplateModule,scrolling.Cl,ScrollableModule],exports:[TreeComponent,TetaTemplateModule,TreeItemToggleComponent]})),defineProperty_defineProperty(TreeModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule,TetaTemplateModule,scrolling.Cl,ScrollableModule,TetaTemplateModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TreeModule,[{type:core.NgModule,args:[{declarations:[TreeComponent,TreeItemComponent,TreeItemToggleComponent],exports:[TreeComponent,TetaTemplateModule,TreeItemToggleComponent],imports:[common.CommonModule,IconModule,TetaTemplateModule,scrolling.Cl,ScrollableModule]}]}],null,null);class DateTimeCellComponent extends CellComponentBase{constructor(svc,cdr){super(svc,cdr),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"cdr",void 0),defineProperty_defineProperty(this,"input",void 0),this.svc=svc,this.cdr=cdr}ngOnInit(){super.ngOnInit()}startEdit(initiator,type){initiator?.column===this.column.name&&setTimeout((()=>{this.input?.openPicker(!0),this.cdr.markForCheck()}),0)}stopEdit(){this.cdr.markForCheck()}}_class183=DateTimeCellComponent,defineProperty_defineProperty(DateTimeCellComponent,"fac",(function _class183_Factory(t){return new(t||_class183)(core["directiveInject"](TableService),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DateTimeCellComponent,"cmp",core["defineComponent"]({type:_class183,selectors:[["teta-date-time-cell"]],viewQuery:function _class183_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c8,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.input=_t.first)}},features:[core["InheritDefinitionFeature"]],decls:4,vars:9,consts:[[1,"cell-text"],["class","datepicker-table",3,"appendToBody","showTime","formControl",4,"ngIf"],[1,"datepicker-table",3,"appendToBody","showTime","formControl"],["input",""]],template:function _class183_Template(rf,ctx){1&rf&&(core["elementStart"](0,"span",0),core["text"](1),core["pipe"](2,"date"),core["elementEnd"](),core["template"](3,_class183_teta_date_picker_3_Template,2,3,"teta-date-picker",1)),2&rf&&(core["styleProp"]("display",ctx.edit?"none":"block"),core["classProp"]("cell-text_disabled",!ctx.editable),core["advance"](1),core["textInterpolate1"](" ",core["pipeBind2"](2,6,null==ctx.control?null:ctx.control.value,"dd.MM.yyyy HH:mm:ss"),"\n"),core["advance"](2),core["property"]("ngIf",ctx.edit))},dependencies:[common.NgIf,fesm2022_forms.JJ,DatePickerComponent,fesm2022_forms.oH,common.DatePipe],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DateTimeCellComponent,[{type:core.Component,args:[{selector:"teta-date-time-cell",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<span [style.display]=\"edit ? 'none' : 'block'\"\n      class='cell-text'\n      [class.cell-text_disabled]='!editable'>\n  {{control?.value | date : 'dd.MM.yyyy HH:mm:ss'}}\n</span>\n<teta-date-picker class='datepicker-table'\n                  #input\n                  *ngIf='edit'\n                  [appendToBody]='true'\n                  [showTime]='true'\n                  [formControl]='control'\n></teta-date-picker>\n"}]}],(function(){return[{type:TableService},{type:core.ChangeDetectorRef}]}),{input:[{type:core.ViewChild,args:["input",{static:!1}]}]});class ResizeDragModule{}_class184=ResizeDragModule,defineProperty_defineProperty(ResizeDragModule,"fac",(function _class184_Factory(t){return new(t||_class184)})),defineProperty_defineProperty(ResizeDragModule,"mod",core["defineNgModule"]({type:_class184,declarations:[ResizeDragDirective],imports:[common.CommonModule],exports:[ResizeDragDirective]})),defineProperty_defineProperty(ResizeDragModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ResizeDragModule,[{type:core.NgModule,args:[{declarations:[ResizeDragDirective],exports:[ResizeDragDirective],imports:[common.CommonModule]}]}],null,null);class ContextMenuModule{}_class185=ContextMenuModule,defineProperty_defineProperty(ContextMenuModule,"fac",(function _class185_Factory(t){return new(t||_class185)})),defineProperty_defineProperty(ContextMenuModule,"mod",core["defineNgModule"]({type:_class185,declarations:[ContextMenuDirective],imports:[common.CommonModule,DynamicComponentModule],exports:[ContextMenuDirective]})),defineProperty_defineProperty(ContextMenuModule,"inj",core["defineInjector"]({imports:[common.CommonModule,DynamicComponentModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ContextMenuModule,[{type:core.NgModule,args:[{declarations:[ContextMenuDirective],exports:[ContextMenuDirective],imports:[common.CommonModule,DynamicComponentModule]}]}],null,null);class TableModule{}_class186=TableModule,defineProperty_defineProperty(TableModule,"fac",(function _class186_Factory(t){return new(t||_class186)})),defineProperty_defineProperty(TableModule,"mod",core["defineNgModule"]({type:_class186,declarations:[TableComponent,NumericCellComponent,ListCellComponent,DateCellComponent,StringCellComponent,HeadCellHostComponent,TableHeadComponent,TableBodyComponent,CellComponent,CellHostComponent,TableHeadGroupComponent,HeadCellComponent,DefaultHeadCellComponent,SelectionCellComponent,SelectionHeadCellComponent,HeadCellDropdownComponent,DateTimeCellComponent,BooleanCellComponent,MainDropdownTabComponent,FilterDropdownTabComponent,VisibilityDropdownTabComponent],imports:[common.CommonModule,FilterModule,fesm2022_forms.u5,CheckboxModule,IconModule,DropdownModule,TabsModule,SelectModule,NumberPipeModule,DatePickerModule,ButtonModule,HintModule,TreeModule,OnlyNumberModule,ToolbarModule,ClickOutsideModule,ResizeDragModule,scrolling.Cl,ContextMenuModule,ScrollableModule,fesm2022_forms.UX],exports:[TableComponent,NumericCellComponent,ListCellComponent,DateCellComponent,StringCellComponent,HeadCellHostComponent,TableHeadComponent,TableBodyComponent,CellComponent,CellHostComponent,DateTimeCellComponent,BooleanCellComponent]})),defineProperty_defineProperty(TableModule,"inj",core["defineInjector"]({imports:[common.CommonModule,FilterModule,fesm2022_forms.u5,CheckboxModule,IconModule,DropdownModule,TabsModule,SelectModule,NumberPipeModule,DatePickerModule,ButtonModule,HintModule,TreeModule,OnlyNumberModule,ToolbarModule,ClickOutsideModule,ResizeDragModule,scrolling.Cl,ContextMenuModule,ScrollableModule,fesm2022_forms.UX]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TableModule,[{type:core.NgModule,args:[{declarations:[TableComponent,NumericCellComponent,ListCellComponent,DateCellComponent,StringCellComponent,HeadCellHostComponent,TableHeadComponent,TableBodyComponent,CellComponent,CellHostComponent,TableHeadGroupComponent,HeadCellComponent,DefaultHeadCellComponent,SelectionCellComponent,SelectionHeadCellComponent,HeadCellDropdownComponent,DateTimeCellComponent,BooleanCellComponent,MainDropdownTabComponent,FilterDropdownTabComponent,VisibilityDropdownTabComponent],exports:[TableComponent,NumericCellComponent,ListCellComponent,DateCellComponent,StringCellComponent,HeadCellHostComponent,TableHeadComponent,TableBodyComponent,CellComponent,CellHostComponent,DateTimeCellComponent,BooleanCellComponent],imports:[common.CommonModule,FilterModule,fesm2022_forms.u5,CheckboxModule,IconModule,DropdownModule,TabsModule,SelectModule,NumberPipeModule,DatePickerModule,ButtonModule,HintModule,TreeModule,OnlyNumberModule,ToolbarModule,ClickOutsideModule,ResizeDragModule,scrolling.Cl,ContextMenuModule,ScrollableModule,fesm2022_forms.UX]}]}],null,null);class ThemeSwitchService{constructor(){defineProperty_defineProperty(this,"theme",void 0),defineProperty_defineProperty(this,"theme$",void 0);const value=this.restoreTheme();this.theme$=new BehaviorSubject.X(value),this.theme=this.theme$.asObservable()}switchTheme(){const value=!this.theme$.value;this.saveTheme(value),this.theme$.next(value)}saveTheme(value){localStorage.setItem("theme",value.toString())}restoreTheme(){const theme=localStorage.getItem("theme");return!theme||JSON.parse(theme)}}_class187=ThemeSwitchService,defineProperty_defineProperty(ThemeSwitchService,"fac",(function _class187_Factory(t){return new(t||_class187)})),defineProperty_defineProperty(ThemeSwitchService,"prov",core["defineInjectable"]({token:_class187,factory:_class187.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ThemeSwitchService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class ThemeSwitchComponent{constructor(_svc){defineProperty_defineProperty(this,"_svc",void 0),defineProperty_defineProperty(this,"palette","text"),defineProperty_defineProperty(this,"view","ghost"),defineProperty_defineProperty(this,"theme",void 0),this._svc=_svc,this.theme=this._svc.theme}ngOnInit(){}switchTheme(){this._svc.switchTheme()}}_class188=ThemeSwitchComponent,defineProperty_defineProperty(ThemeSwitchComponent,"fac",(function _class188_Factory(t){return new(t||_class188)(core["directiveInject"](ThemeSwitchService))})),defineProperty_defineProperty(ThemeSwitchComponent,"cmp",core["defineComponent"]({type:_class188,selectors:[["teta-theme-switch"]],inputs:{palette:"palette",view:"view"},decls:2,vars:5,consts:[["type","button","teta-button","",3,"palette","view","square","click"],[3,"name","palette"]],template:function _class188_Template(rf,ctx){1&rf&&(core["elementStart"](0,"button",0),core["listener"]("click",(function _class188_Template_button_click_0_listener(){return ctx.switchTheme()})),core["element"](1,"teta-icon",1),core["elementEnd"]()),2&rf&&(core["property"]("palette",ctx.palette)("view",ctx.view)("square",!0),core["advance"](1),core["property"]("name","lamp")("palette","text"))},dependencies:[ButtonComponent,IconComponent],styles:["[_nghost-%COMP%]{display:flex;align-items:center}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ThemeSwitchComponent,[{type:core.Component,args:[{selector:"teta-theme-switch",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<button type="button" teta-button [palette]="palette" [view]="view" [square]="true" (click)="switchTheme()">\n  <teta-icon [name]="\'lamp\'" [palette]="\'text\'"></teta-icon>\n</button>\n',styles:[":host{display:flex;align-items:center}\n"]}]}],(function(){return[{type:ThemeSwitchService}]}),{palette:[{type:core.Input}],view:[{type:core.Input}]});class ThemeSwitchModule{}_class189=ThemeSwitchModule,defineProperty_defineProperty(ThemeSwitchModule,"fac",(function _class189_Factory(t){return new(t||_class189)})),defineProperty_defineProperty(ThemeSwitchModule,"mod",core["defineNgModule"]({type:_class189,declarations:[ThemeSwitchComponent],imports:[common.CommonModule,ButtonModule,IconModule],exports:[ThemeSwitchComponent]})),defineProperty_defineProperty(ThemeSwitchModule,"inj",core["defineInjector"]({imports:[common.CommonModule,ButtonModule,IconModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ThemeSwitchModule,[{type:core.NgModule,args:[{declarations:[ThemeSwitchComponent],exports:[ThemeSwitchComponent],imports:[common.CommonModule,ButtonModule,IconModule]}]}],null,null);class Chart3dService{constructor(){defineProperty_defineProperty(this,"minMax",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"scales",void 0),defineProperty_defineProperty(this,"data$",new ReplaySubject.t(1)),this.data=this.data$.asObservable(),this.minMax=this.data.pipe((0,map.U)((_=>this.getAxesMinMax(_)))),this.scales=this.minMax.pipe((0,map.U)((minMax=>this.getScales(minMax))),(0,shareReplay.d)(1))}setData(data){this.data$.next(data)}getAxesMinMax(data){const zArr=data.series.map((_=>_?.data?.map((d=>d?.z)))).flat().filter((_=>null!=_)),xArr=data.series.map((_=>_?.data?.map((d=>d?.x)))).flat().filter((_=>null!=_)),yArr=data.series.map((_=>_?.data?.map((d=>d?.y)))).flat().filter((_=>null!=_)),ZMinMaxVal=[Math.min(...zArr),Math.max(...zArr)],XMinMaxVal=[Math.min(...xArr),Math.max(...xArr)],YMinMaxVal=[Math.min(...yArr),Math.max(...yArr)];return{z:this.getMinMaxRange(ZMinMaxVal,data.zAxis?.min,data.zAxis?.max),x:this.getMinMaxRange(XMinMaxVal,data.xAxis?.min,data.xAxis?.max),y:this.getMinMaxRange(YMinMaxVal,data.yAxis?.min,data.yAxis?.max)}}getMinMaxRange(minMax,axisMin,axisMax){return[axisMin||(Math.abs(minMax[0]-minMax[1])<1e-7?minMax[0]-.1*Math.abs(minMax[0]-1):minMax[0]),axisMax||(Math.abs(minMax[0]-minMax[1])<1e-7?minMax[1]+.1*Math.abs(minMax[1]+1):minMax[1])]}getScales(axesMinMax){const z=src.BYU().domain(axesMinMax.z).range([50,-50]);return{x:src.BYU().domain(axesMinMax.x).range([25,0]),y:src.BYU().domain(axesMinMax.y).range([50,-50]),z}}}_class190=Chart3dService,defineProperty_defineProperty(Chart3dService,"fac",(function _class190_Factory(t){return new(t||_class190)})),defineProperty_defineProperty(Chart3dService,"prov",core["defineInjectable"]({token:_class190,factory:_class190.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Chart3dService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[]}),null);class Base3dSeriesComponent{set series(series){this._series=series}get series(){return this._series}constructor(svc,ngtStore){defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"ngtStore",void 0),defineProperty_defineProperty(this,"_series",void 0),this.svc=svc,this.ngtStore=ngtStore}}_class191=Base3dSeriesComponent,defineProperty_defineProperty(Base3dSeriesComponent,"fac",(function _class191_Factory(t){return new(t||_class191)(core["directiveInject"](Chart3dService),core["directiveInject"](angular_three.W7))})),defineProperty_defineProperty(Base3dSeriesComponent,"cmp",core["defineComponent"]({type:_class191,selectors:[["teta-base3d-series"]],inputs:{series:"series"},standalone:!0,features:[core["StandaloneFeature"]],decls:2,vars:0,template:function _class191_Template(rf,ctx){1&rf&&(core["elementStart"](0,"p"),core["text"](1,"base3d-series works!"),core["elementEnd"]())},dependencies:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Base3dSeriesComponent,[{type:core.Component,args:[{selector:"teta-base3d-series",standalone:!0,imports:[common.CommonModule],template:"<p>base3d-series works!</p>\n"}]}],(function(){return[{type:Chart3dService},{type:angular_three.W7}]}),{series:[{type:core.Input}]}),(0,angular_three.l7)(three_module);class CustomSeriesComponent extends Base3dSeriesComponent{constructor(svc,ngtStore){super(svc,ngtStore),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"ngtStore",void 0),defineProperty_defineProperty(this,"scales",void 0),this.svc=svc,this.ngtStore=ngtStore,this.scales=this.svc.scales}ngOnInit(){setTimeout((()=>{this.ngtStore.get("camera").zoom=2,this.ngtStore.get("camera").updateProjectionMatrix()}),1e3)}}_class192=CustomSeriesComponent,defineProperty_defineProperty(CustomSeriesComponent,"fac",(function _class192_Factory(t){return new(t||_class192)(core["directiveInject"](Chart3dService),core["directiveInject"](angular_three.W7))})),defineProperty_defineProperty(CustomSeriesComponent,"cmp",core["defineComponent"]({type:_class192,selectors:[["teta-custom-series"]],standalone:!0,features:[core["InheritDefinitionFeature"],core["StandaloneFeature"]],decls:2,vars:5,consts:[[4,"ngIf"],[3,"position"],[4,"args"]],template:function _class192_Template(rf,ctx){1&rf&&(core["template"](0,_class192_ng_container_0_Template,4,7,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c48,core["pipeBind1"](1,1,ctx.scales)))},dependencies:[common.CommonModule,common.NgIf,common.AsyncPipe,angular_three.Bj],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CustomSeriesComponent,[{type:core.Component,args:[{selector:"teta-custom-series",standalone:!0,imports:[common.CommonModule,angular_three.Bj],schemas:[core.CUSTOM_ELEMENTS_SCHEMA],changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-container *ngIf=" {scales:scales|async} as scales">\n    <ngt-mesh [position]="[scales.scales.x(this.series.data[0].x),scales.scales.y(this.series.data[0].y),scales.scales.z(this.series.data[0].z) ]">\n      <ngt-box-geometry   *args="[5,5,5]"></ngt-box-geometry>\n      <ngt-mesh-basic-material></ngt-mesh-basic-material>\n    </ngt-mesh>\n</ng-container>\n'}]}],(function(){return[{type:Chart3dService},{type:angular_three.W7}]}),null),(0,angular_three.l7)(three_module);class Area3dComponent{constructor(){defineProperty_defineProperty(this,"area",void 0),defineProperty_defineProperty(this,"THREE",three_module)}createArea(){const grids=[];return grids.push(this.getMainGrid()),grids.push(...this.createGrid(4,25,3,"vertical")),grids.push(...this.createGrid(4,25,3,"horizontal")),grids}getMainGrid(){const mainGrid=new three_module.GridHelper(100,12);return mainGrid.position.set(0,0,0),mainGrid.rotateZ(Math.PI/2),mainGrid}createGrid(gridsCount,gridSize,rectsInGrid,direction){const plane=[];for(let p=0;p<=gridsCount-1;p++)switch(plane[p]=new three_module.GridHelper(gridSize,rectsInGrid,"#666","#666"),plane[p].renderOrder=-1,direction){case"horizontal":plane[p].position.set(gridSize/2,-50,gridSize*p+gridSize/2-50);break;case"vertical":plane[p].position.set(gridSize/2,gridSize*p+gridSize/2-50,-50),plane[p].rotateZ(Math.PI/2),plane[p].rotateX(Math.PI/2)}return plane}ngOnInit(){this.area=this.createArea()}}_class193=Area3dComponent,defineProperty_defineProperty(Area3dComponent,"fac",(function _class193_Factory(t){return new(t||_class193)})),defineProperty_defineProperty(Area3dComponent,"cmp",core["defineComponent"]({type:_class193,selectors:[["teta-area-3d"]],standalone:!0,features:[core["StandaloneFeature"]],decls:3,vars:2,consts:[[3,"side"],[4,"ngFor","ngForOf"],[4,"args"]],template:function _class193_Template(rf,ctx){1&rf&&(core["elementStart"](0,"ngt-mesh"),core["element"](1,"ngt-mesh-basic-material",0),core["template"](2,_class193_ng_container_2_Template,2,3,"ng-container",1),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("side",ctx.THREE.DoubleSide),core["advance"](1),core["property"]("ngForOf",ctx.area))},dependencies:[common.CommonModule,common.NgForOf,angular_three.Bj],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Area3dComponent,[{type:core.Component,args:[{selector:"teta-area-3d",standalone:!0,imports:[common.CommonModule,angular_three.Bj],changeDetection:core.ChangeDetectionStrategy.OnPush,schemas:[core.CUSTOM_ELEMENTS_SCHEMA],template:'<ngt-mesh>\n  <ngt-mesh-basic-material [side]="THREE.DoubleSide"></ngt-mesh-basic-material>\n  <ng-container *ngFor="let rect of area">\n    <ngt-primitive *args="[rect]"></ngt-primitive>\n  </ng-container>\n</ngt-mesh>\n'}]}],null,null),(0,angular_three.l7)(three_module);class Axes3dComponent{constructor(){defineProperty_defineProperty(this,"rotation",void 0),defineProperty_defineProperty(this,"axes",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"chartService",(0,core.inject)(Chart3dService)),this.axes=(0,combineLatest.a)([this.chartService.scales,this.chartService.minMax]).pipe((0,takeWhile.o)((()=>this._alive)),(0,map.U)((([scales,minMax])=>this.createAxes(scales,minMax))))}createAxes(scales,minMax){return{z:this.generateTicks(minMax.z,12).map((_=>({value:_.toFixed(1),position:scales.z(_)}))),y:this.generateTicks(minMax.y,12).map((_=>({value:_.toFixed(1),position:scales.y(_)}))),x:this.generateTicks(minMax.x,4).map((_=>({value:_.toFixed(1),position:scales.x(_)})))}}generateTicks(extremes,count=10){const[min,max]=extremes,tickStep=(max-min)/count;return src.w6H(min,max+tickStep,tickStep).filter((step=>step<=max))}trackBy(i){return i}ngOnDestroy(){this._alive=!1}}_class194=Axes3dComponent,defineProperty_defineProperty(Axes3dComponent,"fac",(function _class194_Factory(t){return new(t||_class194)})),defineProperty_defineProperty(Axes3dComponent,"cmp",core["defineComponent"]({type:_class194,selectors:[["teta-axes-3d"]],inputs:{rotation:"rotation"},standalone:!0,features:[core["StandaloneFeature"]],decls:2,vars:5,consts:[[4,"ngIf"],[3,"text","color","rotation","fontSize","position","anchorX","anchorY","textAlign",4,"ngFor","ngForOf","ngForTrackBy"],[3,"text","color","rotation","fontSize","position",4,"ngFor","ngForOf","ngForTrackBy"],[3,"text","color","rotation","fontSize","position","anchorX","anchorY","textAlign"],[3,"text","color","rotation","fontSize","position"]],template:function _class194_Template(rf,ctx){1&rf&&(core["template"](0,_class194_ng_container_0_Template,4,6,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c53,core["pipeBind1"](1,1,ctx.axes)))},dependencies:[common.CommonModule,common.NgForOf,common.NgIf,common.AsyncPipe,angular_three_soba_abstractions.ne],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Axes3dComponent,[{type:core.Component,args:[{selector:"teta-axes-3d",standalone:!0,imports:[common.CommonModule,angular_three_soba_abstractions.ne],schemas:[core.CUSTOM_ELEMENTS_SCHEMA],changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<ng-container *ngIf='{axes:axes|async}as data'>\n  <ngts-text *ngFor='let tick of data.axes?.x;let i=index; trackBy: trackBy' [text]=\"tick.value+'-'\"\n             [color]=\"'var(--color-text-90)'\"\n             [rotation]='rotation'\n             [fontSize]='2.5'\n             [position]='[tick.position, -50, 50]'\n             [anchorX]=\"'right'\"\n             [anchorY]=\"'middle'\"\n             [textAlign]=\"'right'\"\n  ></ngts-text>\n  <ngts-text *ngFor='let tick of data.axes?.y;let i=index; trackBy: trackBy' [text]=\"tick.value+'-'\"\n             [color]=\"'var(--color-text-90)'\"\n             [rotation]='rotation'\n             [fontSize]='2.5'\n             [position]='[0,tick.position,50]'\n             [anchorX]=\"'right'\"\n             [anchorY]=\"'middle'\"\n             [textAlign]=\"'right'\"\n  ></ngts-text>\n  <ngts-text *ngFor='let tick of data.axes?.z;let i=index; trackBy: trackBy' [text]='tick.value'\n             [color]=\"'var(--color-text-90)'\"\n             [rotation]='rotation'\n             [fontSize]='2.5'\n             [position]='[25,-50,tick.position]'\n  ></ngts-text>\n</ng-container>\n"}]}],(function(){return[]}),{rotation:[{type:core.Input}]}),(0,angular_three.l7)(three_module);class Block3dComponent extends Base3dSeriesComponent{constructor(svc,ngtStore){super(svc,ngtStore),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"ngtStore",void 0),defineProperty_defineProperty(this,"blocks",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"Math",Math),this.svc=svc,this.ngtStore=ngtStore,this.blocks=this.svc.scales.pipe((0,takeWhile.o)((()=>this._alive)),(0,map.U)((scales=>this.series?.data?.map((_=>this.createSVGTexture(scales.y(_?.y),scales.y(_?.y1),_?.iconId))))))}createSVGTexture(y,y1,iconId){const max=Math.max(y,y1),min=Math.min(y,y1),height=Math.abs(max-min),icon=iconId?document.querySelector(`#${iconId}`):null,svgString=icon?`<svg width='100' height='100' viewBox='0 0 16 16' fill='none'  xmlns='http://www.w3.org/2000/svg'>${icon?.innerHTML}</svg>`:null,texture=(new three_module.TextureLoader).load(`data:image/svg+xml;charset=utf-8,${encodeURIComponent(svgString)}`),plane=this.createTexturedPlane(texture,100,height,!!icon),plane1=this.createTexturedPlane(texture,25,height,!!icon);return plane.rotation.set(0,Math.PI/2,0),plane.position.set(.17,min+height/2,0),plane1.position.set(12.5,min+height/2,-49.83),[{component:plane,position:min+height/2},{component:plane1,position:min+height/2}]}createTexturedPlane(texture,width,height,visible){texture.wrapS=three_module.RepeatWrapping,texture.wrapT=three_module.RepeatWrapping,texture.repeat.set(10,height/9);const material=new three_module.MeshBasicMaterial({map:texture,visible}),geometry=new three_module.PlaneGeometry(width,height,1,1),uvs=geometry.attributes.uv.array,newUvs=new Float32Array(uvs);return newUvs[0]=0,newUvs[1]=1,newUvs[2]=width/100,newUvs[3]=1,newUvs[4]=0,newUvs[5]=0,newUvs[6]=width/100,newUvs[7]=0,geometry.attributes.uv.needsUpdate=!0,geometry.setAttribute("uv",new three_module.BufferAttribute(newUvs,2)),new three_module.Mesh(geometry,material)}ngOnDestroy(){this._alive=!1}}_class195=Block3dComponent,defineProperty_defineProperty(Block3dComponent,"fac",(function _class195_Factory(t){return new(t||_class195)(core["directiveInject"](Chart3dService),core["directiveInject"](angular_three.W7))})),defineProperty_defineProperty(Block3dComponent,"cmp",core["defineComponent"]({type:_class195,selectors:[["teta-block-3d"]],standalone:!0,features:[core["InheritDefinitionFeature"],core["StandaloneFeature"]],decls:3,vars:8,consts:[[4,"ngIf"],[4,"ngFor","ngForOf"],[4,"args"],["color","black",3,"text","fontSize","rotation","position","textAlign","anchorX","anchorY"]],template:function _class195_Template(rf,ctx){1&rf&&(core["template"](0,_class195_ng_container_0_Template,2,1,"ng-container",0),core["pipe"](1,"async"),core["pipe"](2,"async")),2&rf&&core["property"]("ngIf",core["pureFunction2"](5,_c56,core["pipeBind1"](1,1,ctx.blocks),core["pipeBind1"](2,3,ctx.svc.scales)))},dependencies:[common.CommonModule,common.NgForOf,common.NgIf,common.AsyncPipe,angular_three.Bj,angular_three_soba_abstractions.ne],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Block3dComponent,[{type:core.Component,args:[{selector:"teta-block-3d",standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common.CommonModule,angular_three.Bj,angular_three_soba_abstractions.ne],schemas:[core.CUSTOM_ELEMENTS_SCHEMA],template:"<ng-container *ngIf='{\n    blocks: blocks | async,\n    scales: svc.scales | async\n  } as data'>\n  <ng-container *ngFor='let mesh of data.blocks; let i=index'>\n    <ngt-primitive *args='[mesh[0].component]'></ngt-primitive>\n    <ngts-text [text]='series.data[i].name'\n               color='black'\n               [fontSize]='2.5'\n               [rotation]='[0,Math.PI/2,0]'\n               [position]='[1,mesh[0].position,5]'\n               [textAlign]=\"'left'\"\n               [anchorX]=\"'center'\"\n               [anchorY]=\"'middle'\"></ngts-text>\n    <ngt-primitive *args='[mesh[1].component]'></ngt-primitive>\n  </ng-container>\n</ng-container>\n\n"}]}],(function(){return[{type:Chart3dService},{type:angular_three.W7}]}),null),(0,angular_three.l7)(three_module);class Line3dComponent extends Base3dSeriesComponent{constructor(svc,ngtStore){super(svc,ngtStore),defineProperty_defineProperty(this,"svc",void 0),defineProperty_defineProperty(this,"ngtStore",void 0),defineProperty_defineProperty(this,"points",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"Math",Math),this.svc=svc,this.ngtStore=ngtStore,this.points=this.svc.scales.pipe((0,takeWhile.o)((()=>this._alive)),(0,map.U)((scales=>this.getPoints(scales))))}getPoints(scales){return this.series?.data?.map((_=>[scales.x(_?.x),scales.y(_?.y),scales.z(_?.z)]))}ngOnDestroy(){this._alive=!1}}var Series3dType,ExportType;_class196=Line3dComponent,defineProperty_defineProperty(Line3dComponent,"fac",(function _class196_Factory(t){return new(t||_class196)(core["directiveInject"](Chart3dService),core["directiveInject"](angular_three.W7))})),defineProperty_defineProperty(Line3dComponent,"cmp",core["defineComponent"]({type:_class196,selectors:[["teta-line-3d"]],standalone:!0,features:[core["InheritDefinitionFeature"],core["StandaloneFeature"]],decls:2,vars:5,consts:[[4,"ngIf"],[3,"color","lineWidth","points"]],template:function _class196_Template(rf,ctx){1&rf&&(core["template"](0,_class196_ng_container_0_Template,2,1,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c57,core["pipeBind1"](1,1,ctx.points)))},dependencies:[common.CommonModule,common.NgIf,common.AsyncPipe,angular_three_soba_abstractions.ER],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Line3dComponent,[{type:core.Component,args:[{selector:"teta-line-3d",standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[common.CommonModule,angular_three_soba_abstractions.ER,angular_three.Bj],schemas:[core.CUSTOM_ELEMENTS_SCHEMA],template:'<ng-container *ngIf="{points:points|async}as data">\n  <ngt-mesh *ngIf="data?.points?.length">\n    <ngts-line [color]="series.color" [lineWidth]="2" [points]="data.points"></ngts-line>\n    <ngt-line-basic-material></ngt-line-basic-material>\n  </ngt-mesh>\n</ng-container>\n'}]}],(function(){return[{type:Chart3dService},{type:angular_three.W7}]}),null),function(Series3dType){Series3dType[Series3dType.line=0]="line",Series3dType[Series3dType.block=1]="block"}(Series3dType||(Series3dType={}));class Series3dHost{constructor(viewContainerRef){defineProperty_defineProperty(this,"viewContainerRef",void 0),defineProperty_defineProperty(this,"series",void 0),defineProperty_defineProperty(this,"seriesMap",(new Map).set(Series3dType.line,Line3dComponent).set(Series3dType.block,Block3dComponent)),defineProperty_defineProperty(this,"_init",!1),defineProperty_defineProperty(this,"_componentRef",void 0),this.viewContainerRef=viewContainerRef}ngOnInit(){Object.prototype.isPrototypeOf.call(Base3dSeriesComponent,this.series.component)||(this.series.component=this.seriesMap.get(this.series.type)),this._componentRef=this.viewContainerRef.createComponent(this.series.component),this._componentRef.instance.series=this.series,this._init=!0}ngOnChanges(changes){this._init&&(Object.prototype.hasOwnProperty.call(changes,"series")||changes.hasOwnProperty("config"))&&(this._componentRef.instance.series=this.series,this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}}_class197=Series3dHost,defineProperty_defineProperty(Series3dHost,"fac",(function _class197_Factory(t){return new(t||_class197)(core["directiveInject"](core.ViewContainerRef))})),defineProperty_defineProperty(Series3dHost,"cmp",core["defineComponent"]({type:_class197,selectors:[["","teta-series-3d-host",""]],inputs:{series:"series"},standalone:!0,features:[core["NgOnChangesFeature"],core["StandaloneFeature"]],attrs:["teta-series-3d-host",""],decls:0,vars:0,template:function _class197_Template(rf,ctx){},encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Series3dHost,[{type:core.Component,args:[{selector:"[teta-series-3d-host]",template:"",standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:core.ViewContainerRef}]}),{series:[{type:core.Input}]});class SceneComponent{constructor(){defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"rotation",void 0),defineProperty_defineProperty(this,"store",(0,core.inject)(angular_three.W7)),defineProperty_defineProperty(this,"Math",Math),defineProperty_defineProperty(this,"chartService",(0,core.inject)(Chart3dService)),defineProperty_defineProperty(this,"_cdr",(0,core.inject)(core.ChangeDetectorRef)),this.data=this.chartService.data}setRotation(){this.rotation=null,this._cdr.detectChanges(),this.rotation=this.store.get("camera").rotation,this._cdr.detectChanges()}ngOnInit(){this.rotation=this.store.get("camera").rotation}}_class198=SceneComponent,defineProperty_defineProperty(SceneComponent,"fac",(function _class198_Factory(t){return new(t||_class198)})),defineProperty_defineProperty(SceneComponent,"cmp",core["defineComponent"]({type:_class198,selectors:[["teta-scene"]],standalone:!0,features:[core["StandaloneFeature"]],decls:2,vars:5,consts:[[4,"ngIf"],[3,"minAzimuthAngle","maxAzimuthAngle","maxZoom","minZoom","change"],[4,"ngFor","ngForOf"],[3,"rotation"],["teta-series-3d-host","",3,"series"]],template:function _class198_Template(rf,ctx){1&rf&&(core["template"](0,_class198_ng_container_0_Template,6,6,"ng-container",0),core["pipe"](1,"async")),2&rf&&core["property"]("ngIf",core["pureFunction1"](3,_c59,core["pipeBind1"](1,1,ctx.data)))},dependencies:[angular_three_soba_controls.g,common.CommonModule,common.NgForOf,common.NgIf,common.AsyncPipe,Area3dComponent,Axes3dComponent,Series3dHost],encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](SceneComponent,[{type:core.Component,args:[{standalone:!0,selector:"teta-scene",changeDetection:core.ChangeDetectionStrategy.OnPush,imports:[angular_three_soba_controls.g,common.CommonModule,Area3dComponent,Line3dComponent,Axes3dComponent,Block3dComponent,Series3dHost],schemas:[core.CUSTOM_ELEMENTS_SCHEMA],template:"<ng-container *ngIf='{data:data|async} as config'>\n  <ngt-scene>\n    <ngts-orbit-controls [minAzimuthAngle]='0'\n                         [maxAzimuthAngle]='Math.PI/2'\n                         [maxZoom]='30'\n                         [minZoom]='2'\n                         (change)='setRotation()'></ngts-orbit-controls>\n  </ngt-scene>\n  <teta-area-3d></teta-area-3d>\n  <ng-container *ngFor='let s of config.data?.series;'>\n    <div teta-series-3d-host [series]='s'></div>\n  </ng-container>\n  <teta-axes-3d [rotation]='rotation'></teta-axes-3d>\n</ng-container>\n\n\n"}]}],(function(){return[]}),null);class CanvasComponent{constructor(){defineProperty_defineProperty(this,"scene",void 0),defineProperty_defineProperty(this,"camera",void 0),defineProperty_defineProperty(this,"data",void 0)}}_class199=CanvasComponent,defineProperty_defineProperty(CanvasComponent,"fac",(function _class199_Factory(t){return new(t||_class199)})),defineProperty_defineProperty(CanvasComponent,"cmp",core["defineComponent"]({type:_class199,selectors:[["teta-canvas"]],inputs:{scene:"scene",camera:"camera",data:"data"},standalone:!0,features:[core["ProvidersFeature"]([angular_three.W7]),core["StandaloneFeature"]],decls:3,vars:2,consts:[[3,"sceneGraph","camera",4,"ngIf","ngIfElse"],["noData",""],[3,"sceneGraph","camera"]],template:function _class199_Template(rf,ctx){if(1&rf&&(core["template"](0,_class199_ngt_canvas_0_Template,1,2,"ngt-canvas",0),core["template"](1,_class199_ng_template_1_Template,2,1,"ng-template",null,1,core["templateRefExtractor"])),2&rf){const _r1=core["reference"](2);core["property"]("ngIf",null==ctx.data||null==ctx.data.series?null:ctx.data.series.length)("ngIfElse",_r1)}},dependencies:[angular_three.B3,common.CommonModule,common.NgIf],styles:["[_nghost-%COMP%]{width:100%;height:100%}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](CanvasComponent,[{type:core.Component,args:[{selector:"teta-canvas",standalone:!0,schemas:[core.CUSTOM_ELEMENTS_SCHEMA],changeDetection:core.ChangeDetectionStrategy.OnPush,providers:[angular_three.W7],imports:[angular_three.B3,SceneComponent,common.CommonModule],template:'<ngt-canvas *ngIf="data?.series?.length;else noData" [sceneGraph]="scene"\n            [camera]="camera">\n</ngt-canvas>\n<ng-template #noData>\n  <p>{{data?.noDataText || \'no data\'}}</p>\n</ng-template>\n',styles:[":host{width:100%;height:100%}\n"]}]}],null,{scene:[{type:core.Input}],camera:[{type:core.Input}],data:[{type:core.Input}]});class Canvas3dHost{constructor(viewContainerRef){defineProperty_defineProperty(this,"viewContainerRef",void 0),defineProperty_defineProperty(this,"scene",void 0),defineProperty_defineProperty(this,"camera",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"_init",!1),defineProperty_defineProperty(this,"_componentRef",void 0),this.viewContainerRef=viewContainerRef}ngOnInit(){this.createCanvas(),this._init=!0}ngOnChanges(){this._init&&(this.createCanvas(),this._componentRef.injector.get(core.ChangeDetectorRef).detectChanges())}createCanvas(){this.viewContainerRef.clear(),this._componentRef=this.viewContainerRef.createComponent(CanvasComponent),this._componentRef.instance.scene=this.scene,this._componentRef.instance.camera=this.camera,this._componentRef.instance.data=this.data}}_class200=Canvas3dHost,defineProperty_defineProperty(Canvas3dHost,"fac",(function _class200_Factory(t){return new(t||_class200)(core["directiveInject"](core.ViewContainerRef))})),defineProperty_defineProperty(Canvas3dHost,"cmp",core["defineComponent"]({type:_class200,selectors:[["","teta-canvas-3d-host",""]],inputs:{scene:"scene",camera:"camera",data:"data"},standalone:!0,features:[core["NgOnChangesFeature"],core["StandaloneFeature"]],attrs:["teta-canvas-3d-host",""],decls:0,vars:0,template:function _class200_Template(rf,ctx){},encapsulation:2,changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Canvas3dHost,[{type:core.Component,args:[{selector:"[teta-canvas-3d-host]",template:"",standalone:!0,changeDetection:core.ChangeDetectionStrategy.OnPush}]}],(function(){return[{type:core.ViewContainerRef}]}),{scene:[{type:core.Input}],camera:[{type:core.Input}],data:[{type:core.Input}]}),(0,angular_three.l7)(three_module);class ThreeChartComponent{constructor(){defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"scene",void 0),defineProperty_defineProperty(this,"camera",void 0),defineProperty_defineProperty(this,"chartService",(0,core.inject)(Chart3dService)),defineProperty_defineProperty(this,"store",(0,core.inject)(angular_three.W7)),defineProperty_defineProperty(this,"cdr",(0,core.inject)(core.ChangeDetectorRef))}ngOnInit(){this.scene=SceneComponent,this.camera=new three_module.OrthographicCamera(20,20,20,20,.1,1e3),this.camera.position.set(100,20,70),this.camera.zoom=4.5,this.camera.updateProjectionMatrix()}ngOnChanges(changes){this.data?.series?.length&&this.chartService.setData(this.data)}}_class201=ThreeChartComponent,defineProperty_defineProperty(ThreeChartComponent,"fac",(function _class201_Factory(t){return new(t||_class201)})),defineProperty_defineProperty(ThreeChartComponent,"cmp",core["defineComponent"]({type:_class201,selectors:[["teta-three-chart"]],inputs:{data:"data"},standalone:!0,features:[core["ProvidersFeature"]([angular_three.W7]),core["NgOnChangesFeature"],core["StandaloneFeature"]],decls:2,vars:3,consts:[[1,"column_auto","column","justify-content-center","align-center",2,"height","100%","width","100%"],["teta-canvas-3d-host","",3,"camera","data","scene"]],template:function _class201_Template(rf,ctx){1&rf&&(core["elementStart"](0,"div",0),core["element"](1,"div",1),core["elementEnd"]()),2&rf&&(core["advance"](1),core["property"]("camera",ctx.camera)("data",ctx.data)("scene",ctx.scene))},dependencies:[common.CommonModule,Canvas3dHost],styles:["[_nghost-%COMP%]{width:100%;height:100%}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ThreeChartComponent,[{type:core.Component,args:[{selector:"teta-three-chart",standalone:!0,schemas:[core.CUSTOM_ELEMENTS_SCHEMA],changeDetection:core.ChangeDetectionStrategy.OnPush,providers:[angular_three.W7],imports:[angular_three.B3,SceneComponent,common.CommonModule,CanvasComponent,Canvas3dHost],template:'<div  class="column_auto column justify-content-center align-center" style="height: 100%;width: 100%;">\n  <div teta-canvas-3d-host [camera]="camera" [data]="data" [scene]="scene"></div>\n</div>\n',styles:[":host{width:100%;height:100%}\n"]}]}],null,{data:[{type:core.Input}]});class Chart3dComponent{constructor(_elementRef,_themeService){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_themeService",void 0),defineProperty_defineProperty(this,"canvasRef",void 0),defineProperty_defineProperty(this,"_scene",void 0),defineProperty_defineProperty(this,"_camera",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_controls",void 0),defineProperty_defineProperty(this,"_obs",void 0),defineProperty_defineProperty(this,"_config",void 0),defineProperty_defineProperty(this,"SIDE_SIZE",100),defineProperty_defineProperty(this,"gridColor",void 0),defineProperty_defineProperty(this,"axesColor",void 0),defineProperty_defineProperty(this,"_alive",!0),this._elementRef=_elementRef,this._themeService=_themeService}set config(config){config&&(this._config=config,this.init())}get config(){return this._config}get canvas(){return this.canvasRef.nativeElement}ngOnInit(){this._themeService.theme.pipe((0,takeWhile.o)((_=>this._alive)),(0,tap.b)((_=>{this.gridColor=_?"#5d6a73":"#bdbdc6",this.axesColor=_?"#8e8f9d":"#7d8f9a",this.init()}))).subscribe()}ngAfterViewInit(){this.addResizeObserver(),this.createScene(),this.startRenderingLoop(),this.init()}ngOnDestroy(){this._alive=!1,this.removeResizeObserver()}init(){if(!this._scene)return;for(;this._scene.children.length>0;)this._scene.remove(this._scene.children[0]);const{x,y,z}=this.getScales(this._config.series);this.config.series.forEach(((data,idx)=>{if(!data.points?.length)return;const points=data.points.map((_=>new three_module.Vector3(x(_.x),y(_.y),z(_.z)))),color=src.PKp(src.K2I),material=new three_module.LineBasicMaterial({color:data?.color??color(idx.toString())}),tubeGeometry=new three_module.TubeGeometry(new three_module.CatmullRomCurve3(points),1024,.5,20,!1);let tube=new three_module.Line(tubeGeometry,material);this._scene.add(tube)}));const circles=x.ticks(this.SIDE_SIZE/10),material=new three_module.LineBasicMaterial({color:this.axesColor}),pointsLines=[];pointsLines.push(new three_module.Vector3(0,0,0)),pointsLines.push(new three_module.Vector3(0,0,z(-z.domain()[1]))),pointsLines.push(new three_module.Vector3(0,0,0)),pointsLines.push(new three_module.Vector3(x(-x.domain()[1]),0,0));const geometryLines=(new three_module.BufferGeometry).setFromPoints(pointsLines),line=new three_module.Line(geometryLines,material);this._scene.add(line),circles.forEach((r=>{const material=new three_module.LineDashedMaterial({color:this.gridColor,dashSize:1,gapSize:3}),circleGeometry=(new three_module.BufferGeometry).setFromPoints((new three_module.Path).absarc(0,0,x(r),0,2*Math.PI,!1).getSpacedPoints(100)),circle=new three_module.LineSegments(circleGeometry,material);circle.geometry.rotateX(-Math.PI/2),this._scene.add(circle)})),this.drawTicks(x,y,z),this._controls||(this._controls=new OrbitControls(this._camera,this._renderer.domElement),this._controls.enableDamping=!0,this._controls.enablePan=!0,this._controls.dampingFactor=.25,this._controls.screenSpacePanning=!0,this._controls.minDistance=0,this._controls.maxDistance=1e4,this._controls.maxPolarAngle=Math.PI/2,this._controls.enableZoom=!0)}createScene(){this._scene=new three_module.Scene;const aspectRatio=this._elementRef.nativeElement.clientWidth/this._elementRef.nativeElement.clientHeight;this._camera=new three_module.PerspectiveCamera(10,aspectRatio,1,1e4),this._camera.position.set(1300,1300,1300).setLength(1300),this._scene.add(this._camera)}setSize(width,height){this._camera.aspect=width/height,this._renderer.setSize(width,height),this._camera.updateProjectionMatrix()}render(){this._renderer.render(this._scene,this._camera)}startRenderingLoop(){this._renderer=new three_module.WebGLRenderer({antialias:!0,canvas:this.canvas,alpha:!0,preserveDrawingBuffer:!0});const animate=()=>{requestAnimationFrame(animate),this._controls?.update(),this.render()};animate()}addResizeObserver(){this._obs=new ResizeObserver((_=>{this.setSize(_[0]?.contentRect.width,_[0]?.contentRect.height)})),this._obs.observe(this._elementRef.nativeElement)}removeResizeObserver(){this._obs.unobserve(this._elementRef.nativeElement),this._obs.disconnect()}makeSprite(text,opts){const canvas=document.createElement("canvas"),ctx=canvas.getContext("2d");text.length;canvas.height=50,canvas.width=50,ctx&&(ctx.font="20px Arial",ctx.textAlign="center",ctx.textBaseline="middle",ctx.fillStyle="#A0A0A0",ctx.fillText(text,25,25));const texture=new three_module.Texture(canvas);texture.minFilter=three_module.LinearFilter,texture.needsUpdate=!0;const spriteMaterial=new three_module.SpriteMaterial({map:texture}),sprite=new three_module.Sprite(spriteMaterial);return sprite.scale.set(8,8,8),sprite}drawTicks(x,y,z){const ticks=new three_module.Object3D,scalesExtrems=[];[x,y,z].forEach(((scale,idx)=>{const generatedTicks=scale.ticks(this.SIDE_SIZE/10);scalesExtrems.push(src.Fp7(generatedTicks)),generatedTicks.forEach((_=>{const sprite=this.makeSprite(_);0===idx&&sprite.position.set(x(_),y(y.domain()[1]),0),1===idx&&sprite.position.set(-10,y(_),0),2===idx&&sprite.position.set(0,y(y.domain()[1]),z(_)),ticks.add(sprite)}))}));const northLabel=this.makeSprite("X",{fontSize:28}),westLabel=this.makeSprite("Y",{fontSize:28}),tvdLabel=this.makeSprite("TVD",{fontSize:28});northLabel.position.set(x(x.domain()[1])+5,0,0),westLabel.position.set(0,0,y(y.domain()[0])+5),tvdLabel.position.set(0,z(z.domain()[1])+5,0),ticks.add(northLabel,westLabel,tvdLabel);const axesHelper=new three_module.AxesHelper(this.SIDE_SIZE);axesHelper.setColors(this.axesColor,this.axesColor,this.axesColor),this._scene.add(axesHelper),this._scene.add(ticks)}getScales(series){const flattenExtrems=series.map((_=>({x:src.Wem(_.points,(p=>p.x)),y:src.Wem(_.points,(p=>p.y)),z:src.Wem(_.points,(p=>p.z))}))).reduce(((acc,_)=>(acc.x=acc.x.concat(_.x),acc.y=acc.y.concat(_.y),acc.z=acc.z.concat(_.z),acc)),{x:[],y:[],z:[]});return{x:src.BYU().domain([0,null==this._config?.axes?.max?parseInt(src.Fp7(flattenExtrems.x)):this._config.axes.max]).range([0,this.SIDE_SIZE]).nice(),y:src.BYU().domain([0,parseInt(src.Fp7(flattenExtrems.y),10)]).range([this.SIDE_SIZE,0]),z:src.BYU().domain([0,null==this._config?.axes?.max?parseInt(src.Fp7(flattenExtrems.z)):this._config.axes.max]).range([0,this.SIDE_SIZE]).nice()}}}_class202=Chart3dComponent,defineProperty_defineProperty(Chart3dComponent,"fac",(function _class202_Factory(t){return new(t||_class202)(core["directiveInject"](core.ElementRef),core["directiveInject"](ThemeSwitchService))})),defineProperty_defineProperty(Chart3dComponent,"cmp",core["defineComponent"]({type:_class202,selectors:[["teta-chart3d"]],viewQuery:function _class202_Query(rf,ctx){if(1&rf&&core["viewQuery"](_c61,5),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx.canvasRef=_t.first)}},inputs:{config:"config"},decls:2,vars:0,consts:[["canvas",""]],template:function _class202_Template(rf,ctx){1&rf&&core["element"](0,"canvas",null,0)},styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Chart3dComponent,[{type:core.Component,args:[{selector:"teta-chart3d",changeDetection:core.ChangeDetectionStrategy.OnPush,template:"<canvas #canvas></canvas>\n",styles:[":host{display:flex;width:100%;height:100%}\n"]}]}],(function(){return[{type:core.ElementRef},{type:ThemeSwitchService}]}),{canvasRef:[{type:core.ViewChild,args:["canvas"]}],config:[{type:core.Input}]});class Chart3dModule{}_class203=Chart3dModule,defineProperty_defineProperty(Chart3dModule,"fac",(function _class203_Factory(t){return new(t||_class203)})),defineProperty_defineProperty(Chart3dModule,"mod",core["defineNgModule"]({type:_class203,declarations:[Chart3dComponent],imports:[common.CommonModule],exports:[Chart3dComponent]})),defineProperty_defineProperty(Chart3dModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](Chart3dModule,[{type:core.NgModule,args:[{declarations:[Chart3dComponent],exports:[Chart3dComponent],imports:[common.CommonModule]}]}],null,null);class DividerComponent{constructor(){defineProperty_defineProperty(this,"label",void 0),defineProperty_defineProperty(this,"template",void 0)}ngOnInit(){}}_class205=DividerComponent,defineProperty_defineProperty(DividerComponent,"fac",(function _class205_Factory(t){return new(t||_class205)})),defineProperty_defineProperty(DividerComponent,"cmp",core["defineComponent"]({type:_class205,selectors:[["teta-divider"]],inputs:{label:"label",template:"template"},decls:6,vars:2,consts:[[1,"divider",2,"width","100%"],[1,"bg-text-20",2,"height","1px"],["class","divider-content padding-h-2",4,"ngIf","ngIfElse"],["templateOutlet",""],[1,"divider-content","padding-h-2"],[4,"ngTemplateOutlet"]],template:function _class205_Template(rf,ctx){if(1&rf&&(core["elementStart"](0,"div",0),core["element"](1,"div",1),core["template"](2,_class205_div_2_Template,2,1,"div",2),core["element"](3,"div",1),core["elementEnd"](),core["template"](4,_class205_ng_template_4_Template,1,1,"ng-template",null,3,core["templateRefExtractor"])),2&rf){const _r1=core["reference"](5);core["advance"](2),core["property"]("ngIf",!ctx.template)("ngIfElse",_r1)}},dependencies:[common.NgIf,common.NgTemplateOutlet],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DividerComponent,[{type:core.Component,args:[{selector:"teta-divider",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<div class="divider" style="width: 100%">\n  <div class="bg-text-20" style="height: 1px"></div>\n  <div class="divider-content padding-h-2" *ngIf="!template; else templateOutlet">{{ label }}</div>\n  <div class="bg-text-20" style="height: 1px"></div>\n</div>\n\n<ng-template #templateOutlet>\n  <ng-container *ngTemplateOutlet="template"></ng-container>\n</ng-template>\n'}]}],(function(){return[]}),{label:[{type:core.Input}],template:[{type:core.Input}]});class DividerModule{}_class206=DividerModule,defineProperty_defineProperty(DividerModule,"fac",(function _class206_Factory(t){return new(t||_class206)})),defineProperty_defineProperty(DividerModule,"mod",core["defineNgModule"]({type:_class206,declarations:[DividerComponent],imports:[common.CommonModule],exports:[DividerComponent]})),defineProperty_defineProperty(DividerModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DividerModule,[{type:core.NgModule,args:[{declarations:[DividerComponent],exports:[DividerComponent],imports:[common.CommonModule]}]}],null,null);class ResizePanelComponent{set direction(val){this._direction=val}get direction(){return this._direction}get icon(){return"horizontal"===this.direction?"moreHorizontal":"moreVertical"}set grabPosition(val){this._grabPosition=val}get grabPosition(){return"vertical"===this.direction?["left","right"].includes(this._grabPosition)?this._grabPosition:"left":["top","bottom"].includes(this._grabPosition)?this._grabPosition:"bottom"}constructor(_elementRef,_renderer,_document){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"size",8),defineProperty_defineProperty(this,"name",void 0),defineProperty_defineProperty(this,"minSize",void 0),defineProperty_defineProperty(this,"maxSize",void 0),defineProperty_defineProperty(this,"resizePanelClass",!0),defineProperty_defineProperty(this,"_direction","horizontal"),defineProperty_defineProperty(this,"_grabPosition","left"),defineProperty_defineProperty(this,"_startSize",void 0),defineProperty_defineProperty(this,"_startPosition",void 0),defineProperty_defineProperty(this,"_positionMap",(new Map).set("left","resize-grab_left").set("right","resize-grab_right").set("top","resize-grab_top").set("bottom","resize-grab_bottom")),this._elementRef=_elementRef,this._renderer=_renderer,this._document=_document}resizeStart(event){this.setStartPosition(),"vertical"===this.direction?(this._startSize=this._elementRef.nativeElement.clientWidth,this._startPosition=event.clientX):(this._startSize=this._elementRef.nativeElement.clientHeight,this._startPosition=event.clientY)}resizeProcess(event){event.preventDefault(),"vertical"===this.direction?this.manageVertical(event):this.manageHorizontal(event)}resizeEnd(event){window.dispatchEvent(new Event("resize"))}ngOnInit(){this.restorePosition()}ngOnDestroy(){}getClassName(){return this._positionMap.get(this.grabPosition)||""}setStartPosition(){"vertical"===this.direction?this._renderer.setStyle(this._elementRef.nativeElement,"width",`${this._elementRef.nativeElement.offsetWidth}px`):this._renderer.setStyle(this._elementRef.nativeElement,"height",`${this._elementRef.nativeElement.offsetHeight}px`),this._renderer.setStyle(this._elementRef.nativeElement,"flex-grow","0"),this._renderer.setStyle(this._elementRef.nativeElement,"flex-shrink","0"),this._renderer.setStyle(this._elementRef.nativeElement,"flex","none")}manageHorizontal(event){let newSize="bottom"===this.grabPosition?this._startSize+(event.clientY-this._startPosition):this._startSize-(event.clientY-this._startPosition);this.maxSize&&newSize>this.maxSize&&(newSize=this.maxSize),this.minSize&&newSize<this.minSize&&(newSize=this.minSize),this._renderer.setStyle(this._elementRef.nativeElement,"height",`${newSize}px`),this.save()}manageVertical(event){let newSize="right"===this.grabPosition?this._startSize+(event.clientX-this._startPosition):this._startSize-(event.clientX-this._startPosition);this.maxSize&&newSize>this.maxSize&&(newSize=this.maxSize),this.minSize&&newSize<this.minSize&&(newSize=this.minSize),this._renderer.setStyle(this._elementRef.nativeElement,"width",`${newSize}px`),this.save()}restore(){if(this.name?.length>0)return JSON.parse(localStorage.getItem(`resize-panel${this.name}`))}restorePosition(){const savedSize=this.restore();savedSize&&("vertical"===this.direction?this._renderer.setStyle(this._elementRef.nativeElement,"width",`${savedSize}px`):this._renderer.setStyle(this._elementRef.nativeElement,"height",`${savedSize}px`),this._renderer.setStyle(this._elementRef.nativeElement,"flex-grow","0"),this._renderer.setStyle(this._elementRef.nativeElement,"flex-shrink","0"),this._renderer.setStyle(this._elementRef.nativeElement,"flex","none"))}save(){this.name?.length>0&&("vertical"===this.direction?localStorage.setItem(`resize-panel${this.name}`,this._elementRef.nativeElement.clientWidth):localStorage.setItem(`resize-panel${this.name}`,this._elementRef.nativeElement.clientHeight))}}_class207=ResizePanelComponent,defineProperty_defineProperty(ResizePanelComponent,"fac",(function _class207_Factory(t){return new(t||_class207)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.Renderer2),core["directiveInject"](common.DOCUMENT))})),defineProperty_defineProperty(ResizePanelComponent,"cmp",core["defineComponent"]({type:_class207,selectors:[["teta-resize-panel"]],hostVars:2,hostBindings:function _class207_HostBindings(rf,ctx){2&rf&&core["classProp"]("resize-panel",ctx.resizePanelClass)},inputs:{size:"size",direction:"direction",grabPosition:"grabPosition",name:"name",minSize:"minSize",maxSize:"maxSize"},ngContentSelectors:_c0,decls:4,vars:8,consts:[[1,"resize-grab",3,"tetaResizeDrag","ngClass","resizeStart","resizeProcess","resizeEnd"],["grab",""],[3,"name","palette"]],template:function _class207_Template(rf,ctx){1&rf&&(core["projectionDef"](),core["projection"](0),core["elementStart"](1,"div",0,1),core["listener"]("resizeStart",(function _class207_Template_div_resizeStart_1_listener($event){return ctx.resizeStart($event)}))("resizeProcess",(function _class207_Template_div_resizeProcess_1_listener($event){return ctx.resizeProcess($event)}))("resizeEnd",(function _class207_Template_div_resizeEnd_1_listener($event){return ctx.resizeEnd($event)})),core["element"](3,"teta-icon",2),core["elementEnd"]()),2&rf&&(core["advance"](1),core["styleProp"]("width","vertical"===ctx.direction?ctx.size:"","px")("height","horizontal"===ctx.direction?ctx.size:"","px"),core["property"]("tetaResizeDrag",ctx.direction)("ngClass",ctx.getClassName()),core["advance"](2),core["property"]("name",ctx.icon)("palette","text"))},dependencies:[common.NgClass,IconComponent,ResizeDragDirective],changeDetection:0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ResizePanelComponent,[{type:core.Component,args:[{selector:"teta-resize-panel",changeDetection:core.ChangeDetectionStrategy.OnPush,template:'<ng-content></ng-content>\n<div #grab class="resize-grab"\n     [style.width.px]="direction === \'vertical\' ? size : \'\'"\n     [style.height.px]="direction === \'horizontal\' ? size : \'\'"\n     (resizeStart)="resizeStart($event)"\n     (resizeProcess)="resizeProcess($event)"\n     (resizeEnd)="resizeEnd($event)"\n     [tetaResizeDrag]="direction"\n     [ngClass]="getClassName()">\n  <teta-icon [name]="icon" [palette]="\'text\'"></teta-icon>\n</div>\n'}]}],(function(){return[{type:core.ElementRef},{type:core.Renderer2},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]}),{size:[{type:core.Input}],direction:[{type:core.Input}],grabPosition:[{type:core.Input}],name:[{type:core.Input}],minSize:[{type:core.Input}],maxSize:[{type:core.Input}],resizePanelClass:[{type:core.HostBinding,args:["class.resize-panel"]}]});class ResizePanelModule{}_class208=ResizePanelModule,defineProperty_defineProperty(ResizePanelModule,"fac",(function _class208_Factory(t){return new(t||_class208)})),defineProperty_defineProperty(ResizePanelModule,"mod",core["defineNgModule"]({type:_class208,declarations:[ResizePanelComponent],imports:[common.CommonModule,IconModule,ResizeDragModule],exports:[ResizePanelComponent]})),defineProperty_defineProperty(ResizePanelModule,"inj",core["defineInjector"]({imports:[common.CommonModule,IconModule,ResizeDragModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](ResizePanelModule,[{type:core.NgModule,args:[{declarations:[ResizePanelComponent],exports:[ResizePanelComponent],imports:[common.CommonModule,IconModule,ResizeDragModule]}]}],null,null);class AutoPositionDirective{constructor(_elementRef,_zone){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"align",void 0),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.auto),defineProperty_defineProperty(this,"fixed","fixed"),defineProperty_defineProperty(this,"_alive",!0),this._elementRef=_elementRef,this._zone=_zone}ngAfterViewInit(){this.setPosition(),this._zone.onStable.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((()=>{this.setPosition()}))}ngOnDestroy(){this._alive=!1}setPosition(){const target=this._elementRef.nativeElement,containerPosition=this._elementRef.nativeElement.parentElement.getBoundingClientRect(),targetPosition=target.getBoundingClientRect(),rect={bottom:containerPosition.bottom,top:containerPosition.top,left:containerPosition.left,right:containerPosition.right},targetRect={bottom:targetPosition.bottom,top:targetPosition.top,left:targetPosition.left,right:targetPosition.right},targetTransformedParent=DomUtil.findTransformedParent(target);let parentPosition={left:0,right:0,top:0,bottom:0};targetTransformedParent&&(parentPosition=targetTransformedParent.getBoundingClientRect());const position=PositionUtil.getPosition(rect,targetRect,this.align,this.verticalAlign,0,0,parentPosition);PositionUtil.setElementPosition(target,position)}}_class209=AutoPositionDirective,defineProperty_defineProperty(AutoPositionDirective,"fac",(function _class209_Factory(t){return new(t||_class209)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.NgZone))})),defineProperty_defineProperty(AutoPositionDirective,"dir",core["defineDirective"]({type:_class209,selectors:[["","tetaAutoPosition",""]],hostVars:2,hostBindings:function _class209_HostBindings(rf,ctx){2&rf&&core["styleProp"]("position",ctx.fixed)},inputs:{align:"align",verticalAlign:"verticalAlign"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AutoPositionDirective,[{type:core.Directive,args:[{selector:"[tetaAutoPosition]"}]}],(function(){return[{type:core.ElementRef},{type:core.NgZone}]}),{align:[{type:core.Input}],verticalAlign:[{type:core.Input}],fixed:[{type:core.HostBinding,args:["style.position"]}]});class AutoPositionModule{}_class210=AutoPositionModule,defineProperty_defineProperty(AutoPositionModule,"fac",(function _class210_Factory(t){return new(t||_class210)})),defineProperty_defineProperty(AutoPositionModule,"mod",core["defineNgModule"]({type:_class210,declarations:[AutoPositionDirective],imports:[common.CommonModule],exports:[AutoPositionDirective]})),defineProperty_defineProperty(AutoPositionModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](AutoPositionModule,[{type:core.NgModule,args:[{declarations:[AutoPositionDirective],exports:[AutoPositionDirective],imports:[common.CommonModule]}]}],null,null);class DisableControlDirective{set tetaDisableControl(val){this.ngControl.control&&(val?this.ngControl.control.disable():this.ngControl.control.enable())}constructor(ngControl){defineProperty_defineProperty(this,"ngControl",void 0),this.ngControl=ngControl}}_class211=DisableControlDirective,defineProperty_defineProperty(DisableControlDirective,"fac",(function _class211_Factory(t){return new(t||_class211)(core["directiveInject"](fesm2022_forms.a5))})),defineProperty_defineProperty(DisableControlDirective,"dir",core["defineDirective"]({type:_class211,selectors:[["","tetaDisableControl",""]],inputs:{tetaDisableControl:"tetaDisableControl"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DisableControlDirective,[{type:core.Directive,args:[{selector:"[tetaDisableControl]"}]}],(function(){return[{type:fesm2022_forms.a5}]}),{tetaDisableControl:[{type:core.Input}]});class DisableControlModule{}_class212=DisableControlModule,defineProperty_defineProperty(DisableControlModule,"fac",(function _class212_Factory(t){return new(t||_class212)})),defineProperty_defineProperty(DisableControlModule,"mod",core["defineNgModule"]({type:_class212,declarations:[DisableControlDirective],imports:[common.CommonModule],exports:[DisableControlDirective]})),defineProperty_defineProperty(DisableControlModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DisableControlModule,[{type:core.NgModule,args:[{declarations:[DisableControlDirective],imports:[common.CommonModule],exports:[DisableControlDirective]}]}],null,null);class DragPreviewDirective{constructor(templateRef){defineProperty_defineProperty(this,"templateRef",void 0),this.templateRef=templateRef}}_class213=DragPreviewDirective,defineProperty_defineProperty(DragPreviewDirective,"fac",(function _class213_Factory(t){return new(t||_class213)(core["directiveInject"](core.TemplateRef))})),defineProperty_defineProperty(DragPreviewDirective,"dir",core["defineDirective"]({type:_class213,selectors:[["","tetaDragPreview",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragPreviewDirective,[{type:core.Directive,args:[{selector:"[tetaDragPreview]"}]}],(function(){return[{type:core.TemplateRef}]}),null);class DragContainerInstance{constructor(options){defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"previewTemplate",void 0),defineProperty_defineProperty(this,"viewContainer",void 0),this.data=options.data,this.previewTemplate=options.previewTemplate,this.viewContainer=options.viewContainer}}class DragDropService{constructor(_document,_rendererFactory){defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_rendererFactory",void 0),defineProperty_defineProperty(this,"selection",void 0),defineProperty_defineProperty(this,"startPosition",void 0),defineProperty_defineProperty(this,"dragProcess",void 0),defineProperty_defineProperty(this,"dropTarget",void 0),defineProperty_defineProperty(this,"dropped",void 0),defineProperty_defineProperty(this,"dropTarget$",new BehaviorSubject.X(null)),defineProperty_defineProperty(this,"_delta",10),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_preview",void 0),defineProperty_defineProperty(this,"_previewRef",void 0),defineProperty_defineProperty(this,"dropped$",new Subject.x),this._document=_document,this._rendererFactory=_rendererFactory,this._renderer=this._rendererFactory.createRenderer(null,null),this.dropTarget=this.dropTarget$.asObservable(),this.dropped=this.dropped$.asObservable(),(0,merge.T)((0,fromEvent.R)(this._document,"mousemove"),(0,fromEvent.R)(this._document,"touchmove")).pipe((0,filter.h)((()=>null!=this.startPosition))).subscribe((event=>{!this.dragProcess&&this.getDelta(event)>this._delta&&this.startProcess(),this.dragProcess&&this._preview&&this.movePreview(event)})),(0,merge.T)((0,fromEvent.R)(this._document,"mouseup"),(0,fromEvent.R)(this._document,"touchend")).pipe((0,withLatestFrom.M)(this.dropTarget)).subscribe((data=>{const[event,target]=data;target&&(this.dropped$.next({target,container:this.dragProcess.selection.container,data:[...this.dragProcess.selection.items]}),this.cancelDrag()),this.stopProcess()})),(0,merge.T)((0,fromEvent.R)(this._document,"visibilitychange"),(0,fromEvent.R)(window,"blur")).subscribe((()=>{this.cancelDrag()}))}setDropTarget(target){this.dragProcess&&this.dropTarget$.next(target)}setStartPosition(point){this.startPosition=point}setSelection(instance,container){this.selection?.container===container&&this.selection?.items?.indexOf(instance)>=0||(this.selection={container,items:[instance]})}addSelection(instance,container){if(!this.selection)return void this.setSelection(instance,container);if(this.selection&&this.selection.container!==container)return;const index=this.selection.items.indexOf(instance);index<0?this.selection.items.push(instance):this.selection.items.splice(index,1)}clearSelection(){this.selection=null}cancelDrag(){this.setDropTarget(null),this.clearSelection(),this.stopProcess()}startProcess(){this.dragProcess={selection:this.selection},this._document.body.style.cursor="copy",this._preview=this.createPreview()}stopProcess(){this.destroyPreview(),this._document.body.style.cursor="default",this.dragProcess=null,this.startPosition=null}getDelta(event){return Math.max(Math.abs(this.startPosition.x-event.x),Math.abs(this.startPosition.y-event.y))}createPreview(){if(this.dragProcess.selection.container.previewTemplate){this._previewRef=this.dragProcess.selection.container.viewContainer.createEmbeddedView(this.dragProcess.selection.container.previewTemplate,{$implicit:this.dragProcess.selection.items,data:this.dragProcess.selection.items});const preview=this._renderer.createElement("div");return this._renderer.setStyle(preview,"position","fixed"),this._renderer.setStyle(preview,"pointer-events","none"),this._renderer.setStyle(preview,"top","0"),this._renderer.setStyle(preview,"left","0"),this._renderer.appendChild(preview,this._previewRef.rootNodes[0]),this._renderer.appendChild(document.body,preview),preview}return null}movePreview(event){this._preview&&this._renderer.setStyle(this._preview,"transform",`translate(${event.x}px, ${event.y}px)`)}destroyPreview(){this._preview&&(this.dragProcess?.selection?.container?.viewContainer?.clear(),this._preview?.remove(),this._previewRef?.destroy(),this._preview=this._previewRef=null)}}_class215=DragDropService,defineProperty_defineProperty(DragDropService,"fac",(function _class215_Factory(t){return new(t||_class215)(core["inject"](common.DOCUMENT),core["inject"](core.RendererFactory2))})),defineProperty_defineProperty(DragDropService,"prov",core["defineInjectable"]({token:_class215,factory:_class215.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragDropService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:Document,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.RendererFactory2}]}),null);class DragContainerDirective{get isDropTarget(){return this.dropTarget===this.instance}mouseleave(event){this._dragService.setDropTarget(null)}mouseover(event){this.allowDrop&&this._dragService.setDropTarget(this.instance)}escape(event){this._dragService.cancelDrag()}constructor(_dragService,_elementRef,_viewContainerRef,_zone,_cdr){defineProperty_defineProperty(this,"_dragService",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_viewContainerRef",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"multiple",!1),defineProperty_defineProperty(this,"allowDrop",!0),defineProperty_defineProperty(this,"tetaDrop",new core.EventEmitter),defineProperty_defineProperty(this,"tetaDragEnter",new core.EventEmitter),defineProperty_defineProperty(this,"_previewTemplate",void 0),defineProperty_defineProperty(this,"instance",void 0),defineProperty_defineProperty(this,"dropTarget",void 0),defineProperty_defineProperty(this,"_alive",!0),this._dragService=_dragService,this._elementRef=_elementRef,this._viewContainerRef=_viewContainerRef,this._zone=_zone,this._cdr=_cdr}ngOnInit(){this.instance=new DragContainerInstance({data:this.data,previewTemplate:this._previewTemplate?.templateRef,viewContainer:this._viewContainerRef}),this._dragService.dropTarget.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((target=>{this.dropTarget=target,this._cdr.detectChanges()})),this._dragService.dropped.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((event=>{this.tetaDrop.emit(event)}))}ngOnDestroy(){this._alive=!1}}_class216=DragContainerDirective,defineProperty_defineProperty(DragContainerDirective,"fac",(function _class216_Factory(t){return new(t||_class216)(core["directiveInject"](DragDropService),core["directiveInject"](core.ElementRef),core["directiveInject"](core.ViewContainerRef),core["directiveInject"](core.NgZone),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DragContainerDirective,"dir",core["defineDirective"]({type:_class216,selectors:[["","tetaDragContainer",""]],contentQueries:function _class216_ContentQueries(rf,ctx,dirIndex){if(1&rf&&core["contentQuery"](dirIndex,DragPreviewDirective,7),2&rf){let _t;core["queryRefresh"](_t=core["loadQuery"]())&&(ctx._previewTemplate=_t.first)}},hostVars:4,hostBindings:function _class216_HostBindings(rf,ctx){1&rf&&core["listener"]("mouseleave",(function _class216_mouseleave_HostBindingHandler($event){return ctx.mouseleave($event)}))("mouseover",(function _class216_mouseover_HostBindingHandler($event){return ctx.mouseover($event)}))("keydown.escape",(function _class216_keydown_escape_HostBindingHandler($event){return ctx.escape($event)}),!1,core["resolveWindow"]),2&rf&&core["classProp"]("teta-drag-container","true")("teta-drop-target",ctx.isDropTarget)},inputs:{data:["tetaDragContainer","data"],multiple:"multiple",allowDrop:"allowDrop"},outputs:{tetaDrop:"tetaDrop",tetaDragEnter:"tetaDragEnter"},exportAs:["dragContainer"]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragContainerDirective,[{type:core.Directive,args:[{selector:"[tetaDragContainer]",exportAs:"dragContainer",host:{"[class.teta-drag-container]":'"true"',"[class.teta-drop-target]":"isDropTarget"}}]}],(function(){return[{type:DragDropService},{type:core.ElementRef},{type:core.ViewContainerRef},{type:core.NgZone},{type:core.ChangeDetectorRef}]}),{data:[{type:core.Input,args:["tetaDragContainer"]}],multiple:[{type:core.Input}],allowDrop:[{type:core.Input}],tetaDrop:[{type:core.Output}],tetaDragEnter:[{type:core.Output}],_previewTemplate:[{type:core.ContentChild,args:[DragPreviewDirective,{static:!0}]}],mouseleave:[{type:core.HostListener,args:["mouseleave",["$event"]]}],mouseover:[{type:core.HostListener,args:["mouseover",["$event"]]}],escape:[{type:core.HostListener,args:["window:keydown.escape",["$event"]]}]});class DragInstance{constructor(options){defineProperty_defineProperty(this,"container",void 0),defineProperty_defineProperty(this,"data",void 0),this.container=options.container,this.data=options.data}}class DragDirective{get selection(){return this._dragService?.selection?.items?.indexOf(this.instance)>=0}get isDropTarget(){return this.dropTarget===this.instance&&this.allowDrop}mousedown(event){this.allowDrag&&(event.ctrlKey&&this._container?.multiple?this._dragService.addSelection(this.instance,this._container?.instance):this._dragService.setSelection(this.instance,this._container?.instance),this._dragService.setStartPosition({x:event.x,y:event.y}))}mouseenter(event){this.allowDrop&&(event.stopPropagation(),(void 0===this.allowDropPredicate||this.allowDropPredicate(this._dragService.selection,this.data))&&this._dragService.setDropTarget(this.instance))}mouseleave(event){this._dragService.setDropTarget(null)}constructor(_container,_dragService,_zone,_cdr){defineProperty_defineProperty(this,"_container",void 0),defineProperty_defineProperty(this,"_dragService",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"data",void 0),defineProperty_defineProperty(this,"allowDrag",!0),defineProperty_defineProperty(this,"allowDrop",!0),defineProperty_defineProperty(this,"allowDropPredicate",void 0),defineProperty_defineProperty(this,"tetaDragEnter",new core.EventEmitter),defineProperty_defineProperty(this,"tetaDrop",new core.EventEmitter),defineProperty_defineProperty(this,"dropTarget",void 0),defineProperty_defineProperty(this,"instance",void 0),defineProperty_defineProperty(this,"_alive",!0),this._container=_container,this._dragService=_dragService,this._zone=_zone,this._cdr=_cdr}ngOnInit(){this.instance=new DragInstance({container:this._container?.instance,data:this.data}),this._dragService.dropTarget.pipe((0,takeWhile.o)((()=>this._alive))).subscribe((target=>{this.dropTarget=target,target===this.instance&&this.tetaDragEnter.emit(this.instance),this._cdr.detectChanges(),this._cdr.markForCheck()})),this._dragService.dropped.pipe((0,takeWhile.o)((()=>this._alive))).pipe((0,filter.h)((event=>event.target===this.instance))).subscribe((event=>{this.tetaDrop.emit(event)}))}ngOnDestroy(){this._alive=!1}}_class218=DragDirective,defineProperty_defineProperty(DragDirective,"fac",(function _class218_Factory(t){return new(t||_class218)(core["directiveInject"](DragContainerDirective,12),core["directiveInject"](DragDropService),core["directiveInject"](core.NgZone),core["directiveInject"](core.ChangeDetectorRef))})),defineProperty_defineProperty(DragDirective,"dir",core["defineDirective"]({type:_class218,selectors:[["","tetaDrag",""]],hostVars:12,hostBindings:function _class218_HostBindings(rf,ctx){1&rf&&core["listener"]("mousedown",(function _class218_mousedown_HostBindingHandler($event){return ctx.mousedown($event)}))("touchstart",(function _class218_touchstart_HostBindingHandler($event){return ctx.mousedown($event)}))("mouseenter",(function _class218_mouseenter_HostBindingHandler($event){return ctx.mouseenter($event)}))("mouseleave",(function _class218_mouseleave_HostBindingHandler($event){return ctx.mouseleave($event)})),2&rf&&(core["styleProp"]("user-select","none"),core["classProp"]("teta-drag-item","true")("teta_draggable_item",ctx.allowDrag)("teta_droppable_item",ctx.allowDrop)("teta-drag-selection",ctx.selection)("teta-drop-target",ctx.isDropTarget))},inputs:{data:["tetaDrag","data"],allowDrag:"allowDrag",allowDrop:"allowDrop",allowDropPredicate:"allowDropPredicate"},outputs:{tetaDragEnter:"tetaDragEnter",tetaDrop:"tetaDrop"},exportAs:["drag"]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragDirective,[{type:core.Directive,args:[{selector:"[tetaDrag]",exportAs:"drag",host:{"[style.userSelect]":'"none"',"[class.teta-drag-item]":'"true"'}}]}],(function(){return[{type:DragContainerDirective,decorators:[{type:core.Inject,args:[DragContainerDirective]},{type:core.Optional},{type:core.SkipSelf}]},{type:DragDropService},{type:core.NgZone},{type:core.ChangeDetectorRef}]}),{data:[{type:core.Input,args:["tetaDrag"]}],allowDrag:[{type:core.HostBinding,args:["class.teta_draggable_item"]},{type:core.Input}],allowDrop:[{type:core.HostBinding,args:["class.teta_droppable_item"]},{type:core.Input}],allowDropPredicate:[{type:core.Input}],tetaDragEnter:[{type:core.Output}],tetaDrop:[{type:core.Output}],selection:[{type:core.HostBinding,args:["class.teta-drag-selection"]}],isDropTarget:[{type:core.HostBinding,args:["class.teta-drop-target"]}],mousedown:[{type:core.HostListener,args:["mousedown",["$event"]]},{type:core.HostListener,args:["touchstart",["$event"]]}],mouseenter:[{type:core.HostListener,args:["mouseenter",["$event"]]}],mouseleave:[{type:core.HostListener,args:["mouseleave",["$event"]]}]});class DragPlaceholderDirective{constructor(){}}_class219=DragPlaceholderDirective,defineProperty_defineProperty(DragPlaceholderDirective,"fac",(function _class219_Factory(t){return new(t||_class219)})),defineProperty_defineProperty(DragPlaceholderDirective,"dir",core["defineDirective"]({type:_class219,selectors:[["","tetaDragPlaceholder",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragPlaceholderDirective,[{type:core.Directive,args:[{selector:"[tetaDragPlaceholder]"}]}],(function(){return[]}),null);class DragDropModule{}_class220=DragDropModule,defineProperty_defineProperty(DragDropModule,"fac",(function _class220_Factory(t){return new(t||_class220)})),defineProperty_defineProperty(DragDropModule,"mod",core["defineNgModule"]({type:_class220,declarations:[DragContainerDirective,DragDirective,DragPreviewDirective,DragPlaceholderDirective],imports:[common.CommonModule],exports:[DragContainerDirective,DragDirective,DragPreviewDirective,DragPlaceholderDirective]})),defineProperty_defineProperty(DragDropModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragDropModule,[{type:core.NgModule,args:[{declarations:[DragContainerDirective,DragDirective,DragPreviewDirective,DragPlaceholderDirective],exports:[DragContainerDirective,DragDirective,DragPreviewDirective,DragPlaceholderDirective],imports:[common.CommonModule]}]}],null,null);class DragSortContainerDirective{constructor(){defineProperty_defineProperty(this,"dragSortList",[]),defineProperty_defineProperty(this,"dragSorted",new core.EventEmitter),defineProperty_defineProperty(this,"_dragItem",void 0)}drop(event){event.stopPropagation(),event.preventDefault()}setDragItem(item){this._dragItem=item}getDragItem(){return this._dragItem}getList(){return this.dragSortList}setList(list){this.dragSortList=list}updateSortOrder(source,target,insertBefore){if(source===target)return;const list=this.getList(),sourceIndex=list.indexOf(source),targetIndex=list.indexOf(target);if(insertBefore&&sourceIndex+1===targetIndex||!insertBefore&&sourceIndex===targetIndex+1)return;const newIndex=list.indexOf(target)+(insertBefore?0:1);this.dragSorted.emit({list,source,target,newIndex,previousIndex:sourceIndex})}}_class221=DragSortContainerDirective,defineProperty_defineProperty(DragSortContainerDirective,"fac",(function _class221_Factory(t){return new(t||_class221)})),defineProperty_defineProperty(DragSortContainerDirective,"dir",core["defineDirective"]({type:_class221,selectors:[["","tetaDragSortContainer",""]],hostBindings:function _class221_HostBindings(rf,ctx){1&rf&&core["listener"]("drop",(function _class221_drop_HostBindingHandler($event){return ctx.drop($event)}))},inputs:{dragSortList:"dragSortList"},outputs:{dragSorted:"dragSorted"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragSortContainerDirective,[{type:core.Directive,args:[{selector:"[tetaDragSortContainer]"}]}],null,{dragSortList:[{type:core.Input}],dragSorted:[{type:core.Output}],drop:[{type:core.HostListener,args:["drop",["$event"]]}]});class DragSortItemDirective{constructor(_container,_elementRef,_renderer){defineProperty_defineProperty(this,"_container",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"tetaDragSortItem",void 0),defineProperty_defineProperty(this,"dragSortDirection","horizontal"),defineProperty_defineProperty(this,"draggable",!0),defineProperty_defineProperty(this,"relative",!0),defineProperty_defineProperty(this,"_dragElement",void 0),defineProperty_defineProperty(this,"rect",void 0),this._container=_container,this._elementRef=_elementRef,this._renderer=_renderer}dragstart(event){this._container.setDragItem(this.tetaDragSortItem)}dragenter(event){this.rect=this._elementRef.nativeElement.getBoundingClientRect()}dragover(event){event.preventDefault(),event.stopPropagation(),this.rect&&this._container.getDragItem()&&this.showDrag(this.getDropPosition(event))}dragleave(event){event.preventDefault(),this.hideDrag()}dragend(event){this._container.setDragItem(null),this.hideDrag()}drop(event){event.stopPropagation(),this._container.updateSortOrder(this._container.getDragItem(),this.tetaDragSortItem,"start"===this.getDropPosition(event)),this.hideDrag()}ngOnInit(){this.createDrag()}ngOnDestroy(){this.destroyDrag()}showDrag(position){this.hideDrag(),this._renderer.addClass(this._dragElement,`drop-direction-${position}`)}hideDrag(){this._renderer.removeClass(this._dragElement,"drop-direction-start"),this._renderer.removeClass(this._dragElement,"drop-direction-end")}createDrag(){this._dragElement=this._renderer.createElement("div"),this._renderer.appendChild(this._elementRef.nativeElement,this._dragElement),this._renderer.addClass(this._dragElement,"drop-direction"),this._renderer.addClass(this._dragElement,"horizontal"===this.dragSortDirection?"drop-direction-horizontal":"drop-direction-vertical")}destroyDrag(){this._renderer.removeChild(this._renderer,this._dragElement)}getDropPosition(event){return"horizontal"===this.dragSortDirection?event.clientX>=this.rect.x+this.rect.width/2?"end":"start":event.clientY>=this.rect.y+this.rect.height/2?"end":"start"}}_class222=DragSortItemDirective,defineProperty_defineProperty(DragSortItemDirective,"fac",(function _class222_Factory(t){return new(t||_class222)(core["directiveInject"](DragSortContainerDirective,1),core["directiveInject"](core.ElementRef),core["directiveInject"](core.Renderer2))})),defineProperty_defineProperty(DragSortItemDirective,"dir",core["defineDirective"]({type:_class222,selectors:[["","tetaDragSortItem",""]],hostVars:3,hostBindings:function _class222_HostBindings(rf,ctx){1&rf&&core["listener"]("dragstart",(function _class222_dragstart_HostBindingHandler($event){return ctx.dragstart($event)}))("dragenter",(function _class222_dragenter_HostBindingHandler($event){return ctx.dragenter($event)}))("dragover",(function _class222_dragover_HostBindingHandler($event){return ctx.dragover($event)}))("dragleave",(function _class222_dragleave_HostBindingHandler($event){return ctx.dragleave($event)}))("dragend",(function _class222_dragend_HostBindingHandler($event){return ctx.dragend($event)}))("drop",(function _class222_drop_HostBindingHandler($event){return ctx.drop($event)})),2&rf&&(core["attribute"]("draggable",ctx.draggable),core["classProp"]("position-relative",ctx.relative))},inputs:{tetaDragSortItem:"tetaDragSortItem",dragSortDirection:"dragSortDirection"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragSortItemDirective,[{type:core.Directive,args:[{selector:"[tetaDragSortItem]"}]}],(function(){return[{type:DragSortContainerDirective,decorators:[{type:core.Host}]},{type:core.ElementRef},{type:core.Renderer2}]}),{tetaDragSortItem:[{type:core.Input}],dragSortDirection:[{type:core.Input}],draggable:[{type:core.HostBinding,args:["attr.draggable"]}],relative:[{type:core.HostBinding,args:["class.position-relative"]}],dragstart:[{type:core.HostListener,args:["dragstart",["$event"]]}],dragenter:[{type:core.HostListener,args:["dragenter",["$event"]]}],dragover:[{type:core.HostListener,args:["dragover",["$event"]]}],dragleave:[{type:core.HostListener,args:["dragleave",["$event"]]}],dragend:[{type:core.HostListener,args:["dragend",["$event"]]}],drop:[{type:core.HostListener,args:["drop",["$event"]]}]});class DragSortModule{}_class223=DragSortModule,defineProperty_defineProperty(DragSortModule,"fac",(function _class223_Factory(t){return new(t||_class223)})),defineProperty_defineProperty(DragSortModule,"mod",core["defineNgModule"]({type:_class223,declarations:[DragSortContainerDirective,DragSortItemDirective],imports:[common.CommonModule],exports:[DragSortContainerDirective,DragSortItemDirective]})),defineProperty_defineProperty(DragSortModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](DragSortModule,[{type:core.NgModule,args:[{declarations:[DragSortContainerDirective,DragSortItemDirective],exports:[DragSortContainerDirective,DragSortItemDirective],imports:[common.CommonModule]}]}],null,null);class LoaderDirective{set tetaLoader(value){this._loading=value,this._loading?this.show():this.hide()}get tetaLoader(){return this._loading}constructor(_elementRef,_renderer,_document,_zone){defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"appendToBody",!1),defineProperty_defineProperty(this,"mask",!1),defineProperty_defineProperty(this,"_element",void 0),defineProperty_defineProperty(this,"_loader",void 0),defineProperty_defineProperty(this,"_mask",void 0),defineProperty_defineProperty(this,"_alive",!0),defineProperty_defineProperty(this,"_loading",!1),this._elementRef=_elementRef,this._renderer=_renderer,this._document=_document,this._zone=_zone,this._element=this._elementRef.nativeElement,this._zone.onStable.pipe((0,takeWhile.o)((_=>this._alive))).subscribe((_=>{this._loading&&this._loader&&this.setPosition()}))}ngOnDestroy(){this._alive=!1,this.hide()}show(){null!==this._loader&&void 0!==this._loader||(this._loader=this._renderer.createElement("div"),this._loader.setAttribute("class","loader")),null!==this._mask&&void 0!==this._mask||!this.mask||(this._mask=this._renderer.createElement("div"),this._mask.setAttribute("class","loader-mask")),this.mask&&this._renderer.appendChild(this.appendToBody?this._document.body:this._element,this._mask),this._renderer.appendChild(this.appendToBody?this._document.body:this._element,this._loader),this.setPosition()}hide(){this._loader&&this._loader.parentElement&&this._renderer.removeChild(this._loader.parentElement,this._loader),this._mask&&this._mask.parentElement&&this._renderer.removeChild(this._loader.parentElement,this._mask)}setPosition(){const position=this._element.getBoundingClientRect();this._renderer.setStyle(this._loader,"top",`${position.y+position.height/2}px`),this._renderer.setStyle(this._loader,"left",`${position.x+ +position.width/2}px`)}}_class224=LoaderDirective,defineProperty_defineProperty(LoaderDirective,"fac",(function _class224_Factory(t){return new(t||_class224)(core["directiveInject"](core.ElementRef),core["directiveInject"](core.Renderer2),core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.NgZone))})),defineProperty_defineProperty(LoaderDirective,"dir",core["defineDirective"]({type:_class224,selectors:[["","tetaLoader",""]],inputs:{appendToBody:"appendToBody",mask:"mask",tetaLoader:"tetaLoader"}})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](LoaderDirective,[{type:core.Directive,args:[{selector:"[tetaLoader]"}]}],(function(){return[{type:core.ElementRef},{type:core.Renderer2},{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.NgZone}]}),{appendToBody:[{type:core.Input}],mask:[{type:core.Input}],tetaLoader:[{type:core.Input}]});class LoaderModule{}_class225=LoaderModule,defineProperty_defineProperty(LoaderModule,"fac",(function _class225_Factory(t){return new(t||_class225)})),defineProperty_defineProperty(LoaderModule,"mod",core["defineNgModule"]({type:_class225,declarations:[LoaderDirective],imports:[common.CommonModule],exports:[LoaderDirective]})),defineProperty_defineProperty(LoaderModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](LoaderModule,[{type:core.NgModule,args:[{declarations:[LoaderDirective],exports:[LoaderDirective],imports:[common.CommonModule]}]}],null,null);class TooltipDirective extends DynamicContentBaseDirective{get _dynamicContent(){return this.tetaTooltip}constructor(_document,_elementRef,_service,_injector,_zone,_cdr,_click){super(_document,_elementRef,_service,_injector,_zone,_cdr),defineProperty_defineProperty(this,"_document",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),defineProperty_defineProperty(this,"_service",void 0),defineProperty_defineProperty(this,"_injector",void 0),defineProperty_defineProperty(this,"_zone",void 0),defineProperty_defineProperty(this,"_cdr",void 0),defineProperty_defineProperty(this,"_click",void 0),defineProperty_defineProperty(this,"tetaTooltip",null),defineProperty_defineProperty(this,"align",Align.center),defineProperty_defineProperty(this,"verticalAlign",VerticalAlign.top),defineProperty_defineProperty(this,"_componentRect",void 0),this._document=_document,this._elementRef=_elementRef,this._service=_service,this._injector=_injector,this._zone=_zone,this._cdr=_cdr,this._click=_click}showContent(event){event.preventDefault(),this.createTooltip()}ngOnInit(){(0,merge.T)(this._click.click,this._click.contextMenu).pipe((0,takeWhile.o)((()=>this._alive)),(0,filter.h)((()=>this._open)),(0,filter.h)((()=>null!=this._componentRef)),(0,filter.h)((event=>!DomUtil.clickedInside(this._elementRef.nativeElement,event))),(0,filter.h)((event=>!DomUtil.clickedInside(this._componentRef?.location.nativeElement,event))),(0,tap.b)((_=>this.destroyContentRef()))).subscribe()}setPosition(){if(this._componentRef&&this._open){this._componentRect||(this._componentRect=this._componentRef.location.nativeElement.getBoundingClientRect());const containerPosition=this._elementRef.nativeElement.getBoundingClientRect(),position=PositionUtil.getPosition(containerPosition,this._componentRect,this.align,this.verticalAlign,0,12);PositionUtil.setElementPosition(this._componentRef.location.nativeElement,position);const verticalClass=containerPosition.top<position.top?"tooltip_bottom":"tooltip_top";this._componentRef.instance.addClass(verticalClass)}}createTooltip(){this._componentRef=this.createContentRef("tooltip")}}_class226=TooltipDirective,defineProperty_defineProperty(TooltipDirective,"fac",(function _class226_Factory(t){return new(t||_class226)(core["directiveInject"](common.DOCUMENT),core["directiveInject"](core.ElementRef),core["directiveInject"](DynamicComponentService),core["directiveInject"](core.Injector),core["directiveInject"](core.NgZone),core["directiveInject"](core.ChangeDetectorRef),core["directiveInject"](ClickService))})),defineProperty_defineProperty(TooltipDirective,"dir",core["defineDirective"]({type:_class226,selectors:[["","tetaTooltip",""]],hostBindings:function _class226_HostBindings(rf,ctx){1&rf&&core["listener"]("click",(function _class226_click_HostBindingHandler($event){return ctx.showContent($event)}))},inputs:{tetaTooltip:"tetaTooltip",align:"align",verticalAlign:"verticalAlign"},features:[core["InheritDefinitionFeature"]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TooltipDirective,[{type:core.Directive,args:[{selector:"[tetaTooltip]"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]},{type:core.ElementRef},{type:DynamicComponentService},{type:core.Injector},{type:core.NgZone},{type:core.ChangeDetectorRef},{type:ClickService}]}),{tetaTooltip:[{type:core.Input}],align:[{type:core.Input}],verticalAlign:[{type:core.Input}],showContent:[{type:core.HostListener,args:["click",["$event"]]}]});class TooltipModule{}_class227=TooltipModule,defineProperty_defineProperty(TooltipModule,"fac",(function _class227_Factory(t){return new(t||_class227)})),defineProperty_defineProperty(TooltipModule,"mod",core["defineNgModule"]({type:_class227,declarations:[TooltipDirective],imports:[common.CommonModule,DynamicComponentModule,fesm2022_animations.BrowserAnimationsModule],exports:[TooltipDirective]})),defineProperty_defineProperty(TooltipModule,"inj",core["defineInjector"]({imports:[common.CommonModule,DynamicComponentModule,fesm2022_animations.BrowserAnimationsModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TooltipModule,[{type:core.NgModule,args:[{declarations:[TooltipDirective],exports:[TooltipDirective],imports:[common.CommonModule,DynamicComponentModule,fesm2022_animations.BrowserAnimationsModule]}]}],null,null);class NoAutofillDirective{constructor(_renderer,_elementRef){defineProperty_defineProperty(this,"_renderer",void 0),defineProperty_defineProperty(this,"_elementRef",void 0),this._renderer=_renderer,this._elementRef=_elementRef}ngOnInit(){["text","password"].forEach((_=>{const inputElement=this._renderer.createElement("input");this._renderer.setAttribute(inputElement,"type",_),this._renderer.setAttribute(inputElement,"class","position-absolute"),this._renderer.setStyle(inputElement,"left","-9999px"),this._renderer.insertBefore(this._elementRef.nativeElement,inputElement,this._elementRef.nativeElement.firstChild)}))}}_class228=NoAutofillDirective,defineProperty_defineProperty(NoAutofillDirective,"fac",(function _class228_Factory(t){return new(t||_class228)(core["directiveInject"](core.Renderer2),core["directiveInject"](core.ElementRef))})),defineProperty_defineProperty(NoAutofillDirective,"dir",core["defineDirective"]({type:_class228,selectors:[["","tetaNoAutofill",""]]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NoAutofillDirective,[{type:core.Directive,args:[{selector:"[tetaNoAutofill]"}]}],(function(){return[{type:core.Renderer2},{type:core.ElementRef}]}),null);class NoAutofillModule{}_class229=NoAutofillModule,defineProperty_defineProperty(NoAutofillModule,"fac",(function _class229_Factory(t){return new(t||_class229)})),defineProperty_defineProperty(NoAutofillModule,"mod",core["defineNgModule"]({type:_class229,declarations:[NoAutofillDirective],imports:[common.CommonModule],exports:[NoAutofillDirective]})),defineProperty_defineProperty(NoAutofillModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](NoAutofillModule,[{type:core.NgModule,args:[{exports:[NoAutofillDirective],declarations:[NoAutofillDirective],imports:[common.CommonModule]}]}],null,null);class TetaDatePipe{constructor(_transloco){defineProperty_defineProperty(this,"_transloco",void 0),this._transloco=_transloco}transform(value,format,timezone,locale){if(null==value)return"";const activeLang=this._transloco.getActiveLang();let luxonDate=DateTime.fromJSDate(value);timezone&&(luxonDate=luxonDate.setZone(timezone));const params={locale:locale||activeLang};return"string"==typeof format?luxonDate.toFormat(format,params):luxonDate.toLocaleString(format||DateTime.DATETIME_MED_WITH_SECONDS,params)}}_class230=TetaDatePipe,defineProperty_defineProperty(TetaDatePipe,"fac",(function _class230_Factory(t){return new(t||_class230)(core["directiveInject"](ngneat_transloco.Vn,16))})),defineProperty_defineProperty(TetaDatePipe,"pipe",core["definePipe"]({name:"tetaDate",type:_class230,pure:!0})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TetaDatePipe,[{type:core.Pipe,args:[{name:"tetaDate"}]}],(function(){return[{type:ngneat_transloco.Vn}]}),null);class TetaDatePipeModule{}_class231=TetaDatePipeModule,defineProperty_defineProperty(TetaDatePipeModule,"fac",(function _class231_Factory(t){return new(t||_class231)})),defineProperty_defineProperty(TetaDatePipeModule,"mod",core["defineNgModule"]({type:_class231,declarations:[TetaDatePipe],imports:[common.CommonModule],exports:[TetaDatePipe]})),defineProperty_defineProperty(TetaDatePipeModule,"inj",core["defineInjector"]({imports:[common.CommonModule]})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](TetaDatePipeModule,[{type:core.NgModule,args:[{declarations:[TetaDatePipe],exports:[TetaDatePipe],imports:[common.CommonModule]}]}],null,null);class OverlayContainerService{constructor(document$){defineProperty_defineProperty(this,"document$",void 0),defineProperty_defineProperty(this,"_containerClass","overlay-container"),defineProperty_defineProperty(this,"_container",void 0),this.document$=document$}getContainer(){return this._container||this.createContainer(),this._container}createContainer(){const container=this.document$.createElement("div");container.classList.add(this._containerClass),this.document$.body.appendChild(container),this._container=container}removeContainer(){this._container&&this._container.parentNode&&this._container.parentNode.removeChild(this._container)}ngOnDestroy(){this.removeContainer()}}_class232=OverlayContainerService,defineProperty_defineProperty(OverlayContainerService,"fac",(function _class232_Factory(t){return new(t||_class232)(core["inject"](common.DOCUMENT))})),defineProperty_defineProperty(OverlayContainerService,"prov",core["defineInjectable"]({token:_class232,factory:_class232.fac,providedIn:"root"})),("undefined"==typeof ngDevMode||ngDevMode)&&core["setClassMetadata"](OverlayContainerService,[{type:core.Injectable,args:[{providedIn:"root"}]}],(function(){return[{type:void 0,decorators:[{type:core.Inject,args:[common.DOCUMENT]}]}]}),null),function(ExportType){ExportType[ExportType.png=0]="png",ExportType[ExportType.svg=1]="svg",ExportType[ExportType.jpeg=2]="jpeg",ExportType[ExportType.blob=3]="blob",ExportType[ExportType.canvas=4]="canvas",ExportType[ExportType.pixelData=5]="pixelData"}(ExportType||(ExportType={}));(new Map).set(ExportType.blob,(function toBlob(_x6){return _toBlob.apply(this,arguments)})).set(ExportType.png,(function es_toPng(_x4){return _toPng.apply(this,arguments)})).set(ExportType.canvas,toCanvas).set(ExportType.jpeg,(function toJpeg(_x5){return _toJpeg.apply(this,arguments)})).set(ExportType.svg,toSvg).set(ExportType.pixelData,(function toPixelData(_x3){return _toPixelData.apply(this,arguments)}));function tetaZoneFull(ngZone){return source=>new internal_Observable.y((subscriber=>source.subscribe({next:value=>ngZone.run((()=>subscriber.next(value))),error:error=>ngZone.run((()=>subscriber.error(error))),complete:()=>ngZone.run((()=>subscriber.complete()))})))}new core.InjectionToken("Shared Observable based on `window.requestAnimationFrame`",{factory:()=>{const{requestAnimationFrame,cancelAnimationFrame}=(0,core.inject)(WINDOW);return new internal_Observable.y((subscriber=>{let id=NaN;const callback=timestamp=>{subscriber.next(timestamp),id=requestAnimationFrame(callback)};return id=requestAnimationFrame(callback),()=>{cancelAnimationFrame(id)}})).pipe((0,share.B)())}});const WINDOW=new core.InjectionToken("An abstraction over global window object",{factory:()=>{const{defaultView}=(0,core.inject)(common.DOCUMENT);if(!defaultView)throw new Error("Window is not available");return defaultView}})}}]);